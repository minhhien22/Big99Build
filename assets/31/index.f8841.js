window.__require=function e(t,r,i){function s(h,o){if(!r[h]){if(!t[h]){var a=h.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!o&&u)return u(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+h+"'")}h=a}var p=r[h]={exports:{}};t[h][0].call(p.exports,function(e){return s(t[h][1][e]||e)},p,p.exports,e,t,r,i)}return r[h].exports}for(var n="function"==typeof __require&&__require,h=0;h<i.length;h++)s(i[h]);return s}({"mesh-texture-flag":[function(e,t){"use strict";function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}cc._RF.push(t,"d7955isD2pAy5KxbPkIzekN","mesh-texture-flag");var n=cc.gfx;cc.Class({extends:cc.Component,properties:{_offset:cc.v2(0,0),offset:{get:function(){return this._offset},set:function(e){this._offset=e,this._applyVertexes()},type:cc.Vec2},_spriteFrame:{default:null,type:cc.SpriteFrame},spriteFrame:{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this._applySpriteFrame()},type:cc.SpriteFrame},_row:10,row:{tooltip:"\u7f51\u683c\u884c\u6570",get:function(){return this._row},set:function(e){e<=0&&(e=1),this._row!==e&&(this._row=e,this._updateMesh(),this._applyVertexes())},min:1,step:1},_col:20,col:{tooltip:"\u7f51\u683c\u5217\u6570",get:function(){return this._col},set:function(e){e<=0&&(e=1),this._col!==e&&(this._col=e,this._updateMesh(),this._applyVertexes())},min:1,step:1},_speed:10,speed:{tooltip:"\u901f\u5ea6",get:function(){return this._speed},set:function(e){e<=0&&(e=.1),this._speed!==e&&(this._speed=e,this._updateMaterial())},min:.1,step:.1},_amplitude:5,amplitude:{tooltip:"\u5e45\u5ea6",get:function(){return this._amplitude},set:function(e){e<=0&&(e=.1),this._amplitude!==e&&(this._amplitude=e,this._updateMaterial())},min:.1,step:1},_wave:5,wave:{tooltip:"\u6ce2\u6d6a",get:function(){return this._wave},set:function(e){e<=0&&(e=0),this._wave!==e&&(this._wave=e,this._updateMaterial())},min:0,step:1},mat:cc.Material},onLoad:function(){var e=this;this._meshCache={},this._vertexes=[];var t=this.node.getComponent(cc.MeshRenderer);t||(t=this.node.addComponent(cc.MeshRenderer)),t.mesh=null,this.renderer=t,cc.Material.create(this.mat.effectAsset,this.mat.techniqueIndex),this.renderer.setMaterial(0,this.mat),this._updateMaterial(),this._updateMesh(),this._applySpriteFrame(),this._applyVertexes(),this.node.on("size-changed",function(){e._updateMesh(),e._applyVertexes()},this),this.node.on("anchor-changed",function(){e._updateMesh(),e._applyVertexes()},this)},_updateMesh:function(){this._vertexes=[];for(var e=this.node.width,t=this.node.height,r=0;r<this._row+1;r++)for(var i=0;i<this._col+1;i++){var s=(i-this._col*this.node.anchorX)*e/this._col,h=(r-this._row*this.node.anchorY)*t/this._row;this._vertexes.push(cc.v2(s,h))}var o=this._meshCache[this._vertexes.length];o||((o=new cc.Mesh).init(new n.VertexFormat([{name:n.ATTR_POSITION,type:n.ATTR_TYPE_FLOAT32,num:2},{name:n.ATTR_UV0,type:n.ATTR_TYPE_FLOAT32,num:2}]),this._vertexes.length,!0),this._meshCache[this._vertexes.length]=o),this.mesh=o,this._updateMaterial()},_applyVertexes:function(){var e=this,t=this.mesh;if(t.setVertices(n.ATTR_POSITION,this._vertexes),this.texture){for(var i,s=[],h=r(this._vertexes);!(i=h()).done;){var o=i.value,a=(o.x+this.texture.width*this.node.anchorX+this.offset.x)/this.texture.width,u=1-(o.y+this.texture.height*this.node.anchorY+this.offset.y)/this.texture.height;s.push(cc.v2(a,u))}t.setVertices(n.ATTR_UV0,s)}if(this._vertexes.length>=3){for(var p=[],c=function(t,r){return t*(e._col+1)+r},_=0;_<this._row;_++)for(var l=0;l<this._col;l++)p.push(c(_,l),c(_,l+1),c(_+1,l)),p.push(c(_+1,l),c(_+1,l+1),c(_,l+1));t.setIndices(p),this.renderer.mesh!=t&&(this.renderer.mesh=t)}},_applySpriteFrame:function(){if(this.spriteFrame){var e=this.spriteFrame.getTexture();this.texture=e,this._updateMaterial()}},_updateMaterial:function(){var e=this.renderer._materials[0];e&&(this.texture&&(e.define("USE_TEXTURE",!0),e.setProperty("texture",this.texture)),e.setProperty("textureWidth",this.node.width),e.setProperty("speed",this.speed),e.setProperty("amplitude",this.amplitude),e.setProperty("wave",this.wave),this._vertexes.length>0&&e.setProperty("startPos",this._vertexes[0]))}}),cc._RF.pop()},{}]},{},["mesh-texture-flag"]);