window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({HelpMiniPoker:[function(e,t,n){"use strict";cc._RF.push(t,"b500fmUPq1OwpLhtuuFSOae","HelpMiniPoker");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,p=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Windown.HuongDanChoiMiniPoker=this},t.prototype.start=function(){},t.prototype.show=function(){a.Windown.UIManager.hideLoading(),a.Windown.actionEffectOpen(this.node)},t.prototype.close=function(){var e=this;a.Windown.actionEffectClose(this.node,function(){e.node.active=!1})},t.prototype.onDestroy=function(){a.Windown.HuongDanChoiMiniPoker=null},r([c],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],HistoryMiniPoker:[function(e,t,n){"use strict";cc._RF.push(t,"a1feb2ReYFCuLJcu64wiyeh","HistoryMiniPoker");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Popup/PageData/PageData"),s=e("../../../Scritps/Windown"),c=e("./MiniPokerHistoryItem"),p=cc._decorator,u=p.ccclass,l=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.pageDate=null,t.listData=null,t.maxRow=6,t}return i(t,e),t.prototype.onLoad=function(){s.Windown.HistoryMiniPoker=this},t.prototype.start=function(){s.Windown.UIManager.showLoading(),s.Windown.MiniPoker.getLichSu()},t.prototype.responseServer=function(e){cc.log("HISTORYMINIPOKER="+s.Windown.SFSObjToJson(e)),this.initWithListData(e.getSFSArray("history")),s.Windown.UIManager.hideLoading()},t.prototype.show=function(){s.Windown.UIManager.hideLoading(),s.Windown.actionEffectOpen(this.node)},t.prototype.close=function(){var e=this;s.Windown.actionEffectClose(this.node,function(){e.node.active=!1})},t.prototype.onDestroy=function(){s.Windown.HistoryMiniPoker=null},t.prototype.initWithListData=function(e){var t=e.size(),n=parseInt(t/this.maxRow);t%this.maxRow>0&&n++,0==n&&(n=1),this.pageDate.setTotalPage(n),this.listData=e,this.onChangePage(1)},t.prototype.onChangePage=function(e){for(var t=this.pageDate.content,n=t.children,o=n[0],i=(e-1)*this.maxRow,r=0,a=this.maxRow;r<a;r++){var s=n[r];if(i<this.listData.size()){null==s&&(s=cc.instantiate(o),t.addChild(s),s.y=-(r+1)*s.height+s.height/2);var p=this.listData.getSFSObject(i);s.getComponent(c.default).initItem(p),s.active=!0,i++}else{if(!s)break;s.active=!1}}},r([l(cc.Label)],t.prototype,"label",void 0),r([l(a.default)],t.prototype,"pageDate",void 0),r([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./MiniPokerHistoryItem":"MiniPokerHistoryItem"}],ItemMiniPoker:[function(e,t,n){"use strict";cc._RF.push(t,"56252TDcY5HiZU2cm/CgDOl","ItemMiniPoker");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Game/CardResultType"),s=e("../../../Scritps/Windown"),c=e("./SpinCardRunning"),p=cc._decorator,u=p.ccclass,l=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textBalance=null,t.listCard=[],t.animation=null,t.imgTextBalance=null,t.spriteResult=null,t.isSieuToc=!1,t}return i(t,e),t.prototype.start=function(){},t.prototype.setCard=function(e,t){if(this.isRunning){for(var n=0;n<e.length;n++)this.listCard[n].SetImage(e[n].I);this.stopAnimation(),this.scheduleOnce(function(){t()},.3)}else t()},t.prototype.stopAnimation=function(){this.animation.getAnimationState("StopCard").speed=this.isSieuToc?2:1,this.animation.play("StopCard")},t.prototype.handleShowResult=function(e,t){var n=this;if(this.isRunning){var o=e.PrizeValue;this.cardType=e.CardTypeID,this.textBalance.string=s.Windown.formatNumber(o);var i=1.5;o>0&&this.cardType!=a.default.DOI_BE&&this.cardType!=a.default.BAI_CAO&&this.cardType!=a.default.THUNG_PHA_SANH_DAI?(this.imgTextBalance.parent.active=!0,this.spriteResult.node.scale=0,this.imgTextBalance.scale=0,this.textBalance.node.scale=0,this.spriteResult.node.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut())),this.imgTextBalance.runAction(cc.sequence(cc.delayTime(.1),cc.scaleTo(.3,1).easing(cc.easeBackOut()))),this.textBalance.node.runAction(cc.sequence(cc.delayTime(.2),cc.scaleTo(.3,1).easing(cc.easeBackOut())))):i=0,this.setSpriteCardResult(this.cardType),this.unschedule(this.funDelay),this.scheduleOnce(this.funDelay=function(){n.imgTextBalance.parent.active=!1,n.isRunning=!1,t()},i)}else t()},t.prototype.spinItem=function(e){this.isSieuToc=e,this.listCard.forEach(function(t){var n=t.imgSpin.getComponent(cc.Animation);n.getAnimationState("SpinRun").speed=e?5:.5,n.node.y=454.209,t.imgSpin.getComponent(cc.Sprite).spriteFrame=t.imgSpin.getComponent(cc.Sprite).spriteFrame,n.play("SpinRun")}),this.isRunning=!0,this.animation.play("SpinCard")},t.prototype.stopByNotMoney=function(){this.stopAnimation(),this.isRunning=!1,this.Force()},t.prototype.Force=function(){this.imgTextBalance.parent.active=!1;for(var e=0,t=this.listCard.length;e<t;e++)this.listCard[e].Force()},t.prototype.setSpriteCardResult=function(e){switch(e){case a.default.THUNG_PHA_SANH_DAI:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[8];break;case a.default.THUNG_PHA_SANH:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[7];break;case a.default.TU_QUY:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[6];break;case a.default.CU_LU:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[5];break;case a.default.THUNG:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[4];break;case a.default.SANH:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[3];break;case a.default.SAM_CO:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[2];break;case a.default.HAI_DOI:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[1];break;case a.default.DOI:this.spriteResult.spriteFrame=s.Windown.MiniPoker.listSpriteResult[0];break;case a.default.BAI_CAO:case a.default.DOI_BE:}},r([l(cc.Label)],t.prototype,"textBalance",void 0),r([l(c.default)],t.prototype,"listCard",void 0),r([l(cc.Animation)],t.prototype,"animation",void 0),r([l(cc.Node)],t.prototype,"imgTextBalance",void 0),r([l(cc.Sprite)],t.prototype,"spriteResult",void 0),r([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scritps/Game/CardResultType":void 0,"../../../Scritps/Windown":void 0,"./SpinCardRunning":"SpinCardRunning"}],ListennerEventSpin:[function(e,t,n){"use strict";cc._RF.push(t,"9a7a3AHMB5ICpX59OGn7ud5","ListennerEventSpin");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,p=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.SpinSuccess=function(){},t.prototype.ShowTextSuccess=function(){a.Windown.MiniPoker.ShowTextSuccess()},r([c],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],MiniPokerHistoryItem:[function(e,t,n){"use strict";cc._RF.push(t,"31887ORf+dDv6/2cEtJEVU9","MiniPokerHistoryItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbBalance=null,t.lbTime=null,t.lbBetValue=null,t.lbReceiveValue=null,t.sprCards=[],t.cardAtlas=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.initItem=function(e){e.getLong("date"),this.lbTime.string=a.Windown.formatDate(new Date(e.getLong("date")),"yyyy/MM/dd HH:mm:ss").replace(" ","\n"),this.lbBetValue.string=a.Windown.formatNumber(e.getInt("agBet")),this.lbReceiveValue.string=a.Windown.formatNumber(e.getInt("agWin")),this.lbReceiveValue.node.color=e.getInt("agWin")>0?cc.Color.YELLOW:cc.Color.RED,this.lbBalance.string=a.Windown.formatNumber(e.getInt("agUser"));for(var t=JSON.parse(e.getUtfString("views")),n=0;n<t.length;n++){cc.log("view==",t[n]);var o=this.convertCard(t[n].I);this.sprCards[n].spriteFrame=o<10?a.Windown.MiniPoker.getSpriteCard("0"+o.toString()):a.Windown.MiniPoker.getSpriteCard(o.toString())}},t.prototype.convertCard=function(e){var t=0;switch(e){case 1:t=40;break;case 2:t=41;break;case 3:t=42;break;case 4:t=43;break;case 5:t=44;break;case 6:t=45;break;case 7:t=46;break;case 8:t=47;break;case 9:t=48;break;case 10:t=49;break;case 11:t=50;break;case 12:t=51;break;case 13:t=52;break;case 14:t=27;break;case 15:t=28;break;case 16:t=29;break;case 17:t=30;break;case 18:t=31;break;case 19:t=32;break;case 20:t=33;break;case 21:t=34;break;case 22:t=35;break;case 23:t=36;break;case 24:t=37;break;case 25:t=38;break;case 26:t=39;break;case 27:t=1;break;case 28:t=2;break;case 29:t=3;break;case 30:t=4;break;case 31:t=5;break;case 32:t=6;break;case 33:t=7;break;case 34:t=8;break;case 35:t=9;break;case 36:t=10;break;case 37:t=11;break;case 38:t=12;break;case 39:t=13;break;case 40:t=14;break;case 41:t=15;break;case 42:t=16;break;case 43:t=17;break;case 44:t=18;break;case 45:t=19;break;case 46:t=20;break;case 47:t=21;break;case 48:t=22;break;case 49:t=23;break;case 50:t=24;break;case 51:t=25;break;case 52:t=26}return t},r([p(cc.Label)],t.prototype,"lbBalance",void 0),r([p(cc.Label)],t.prototype,"lbTime",void 0),r([p(cc.Label)],t.prototype,"lbBetValue",void 0),r([p(cc.Label)],t.prototype,"lbReceiveValue",void 0),r([p([cc.Sprite])],t.prototype,"sprCards",void 0),r([p(cc.SpriteAtlas)],t.prototype,"cardAtlas",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],MiniPokerView:[function(e,t,n){"use strict";cc._RF.push(t,"8f59eZ5kgdHH6zhC5wIECip","MiniPokerView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{c(o.next(e))}catch(t){r(t)}}function s(e){try{c(o.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../Scritps/DefineTs/EVENT_MANAGER"),p=e("../../../Scritps/DefineTs/PlayerPP"),u=e("../../../Scritps/DefineTs/TextDefine"),l=e("../../../Scritps/Game/GAME_TYPE"),d=e("../../../Scritps/Network/ConectManager"),h=e("../../../Scritps/Obs/JackpotItem"),f=e("../../../Scritps/Other/DragMiniGame"),y=e("../../../Scritps/Other/OffMiniGame"),b=e("../../../Scritps/Windown"),g=e("./ItemMiniPoker"),S=cc._decorator,k=S.ccclass,v=S.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sfs=null,t.roomSFS=null,t.listConfigBet=[],t.curRoomBet=0,t.listCardSpin=null,t.cardAtlas=null,t.listSpriteResult=[],t.nodeEffectJP=null,t.skeCanGat=null,t.isEndTurn=!0,t.btnSpin=null,t.btnSieuToc=null,t.groupToggle=[],t.animMessage=null,t.btnAuto=null,t.helpView=null,t.lbJp=null,t.lbJackpotWin=null,t}return i(t,e),t.prototype.onLoad=function(){this.idGame=l.default.MiniPoker,b.Windown.MiniPoker=this,this.sfs=d.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),cc.systemEvent.on(c.EVENT_MANAGER.CHANG_ROTATION,this.onChangRotate,this),cc.systemEvent.on(c.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.onChangRotate(b.Windown.UIManager.isVertical),this.sendJoinRoom()},t.prototype.onChangRotate=function(e){e?(this.node.rotation=-90,this.node.scale=.9):(this.node.rotation=0,this.node.scale=1)},t.prototype.onCreateError=function(){b.Windown.UIManager.hideLoading(),b.Windown.Dialog.showLog(u.TextDefine.ERR_JOIN_ROOM),this.onDisconnect()},t.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),b.Windown.UIManager.hideLoading(),b.Windown.UIManager.hideLoadingData(),b.Windown.Dialog.showLog(u.TextDefine.ERR_JOIN_ROOM),this.onDisconnect()},t.prototype.extResponse=function(e){var t=e.cmd,n=e.params;switch(t){case"spinPoker":cc.log("check data spin : ",b.Windown.SFSObjToJson(n)),this.handleFinish(n);break;case"historyPoker":b.Windown.HistoryMiniPoker.responseServer(n)}},t.prototype.handleFinish=function(e){if(e.containsKey(p.PlayerPP.ERR_MESSAGE))return this.forceStopSpinByNotMoney(),void b.Windown.Dialog.checkAndShowLog(e);var t=this.convertResult(e).dataViews,n=this.convertResult(e).typeCard,o=this.convertResult(e).accountBalance,i=this.convertResult(e).prizeValue,r=this.convertResult(e).isJackpot;this.OnGetResult(n,t,r,i,o)},t.prototype.convertResult=function(e){return{dataViews:JSON.parse(e.get("views")),typeCard:e.get("typeCards"),accountBalance:e.get("agUser"),prizeValue:e.get("agWin"),isJackpot:e.get("isTakeJP")}},t.prototype.ClickSpin=function(){this.skeCanGat.timeScale=1,this.skeCanGat.setAnimation(0,"animation",!1),this.ActiveButton(!1),this.isSpinSuccess=!1,this.isGetResult=!1,this.isEndTurn=!1,this.countTime=0,this.listCardSpin.spinItem(this.isSieuToc),this.sendClickSpin()},t.prototype.getLichSu=function(){var e=d.ConectManager.getIns().getSFSObj();d.ConectManager.getIns().sendRequest("historyPoker",e,this.roomSFS)},t.prototype.ActiveButton=function(e){this.btnSpin.interactable=e,this.btnSieuToc.interactable=e,this.isBigwin=!1;for(var t=0;t<this.groupToggle.length;t++)this.groupToggle[t].interactable=e},t.prototype.OnGetResult=function(e,t,n,o,i){this.cachePrize=o;var r=null;(r=t).PrizeValue=o,r.CardTypeID=e,b.Windown.MoneyUser.pushDelayMoney(this.idGame,i,o),b.Windown.MoneyUser.subMoney(this.curRoomBet,i),o>.1*this.curRoomBet&&(this.isBigwin=!0),this.isGetResult=!0,this.stopSpinAndSetCard(r,o,n)},t.prototype.stopSpinAndSetCard=function(e,t,n){var o=this,i=[];this.scheduleOnce(function(){i.push(new Promise(function(t){o.listCardSpin.setCard(e,t)})),Promise.all(i).then(function(){o.checkShowJackpotAndBigwin(n,t,function(){o.stopSpinAndShowResult(e)})})},.5)},t.prototype.stopSpinAndShowResult=function(e){var t=this,n=[];this.scheduleOnce(function(){n.push(new Promise(function(n){t.listCardSpin.handleShowResult(e,n)})),Promise.all(n).then(function(){t.ShowTextSuccess()})},.7)},t.prototype.ShowTextSuccess=function(){b.Windown.MoneyUser.removeDelay(this.idGame),this.ActiveButton(!0),this.isEndTurn=!0,this.isAuto&&this.AutoSpin()},t.prototype.checkShowJackpotAndBigwin=function(e,t,n){var o=this;e?(this.nodeEffectJP.active=!0,this.lbJackpotWin.string=b.Windown.formatNumber(t),cc.tween(this.nodeEffectJP).set({scale:0}).to(.3,{scale:1.3},{easing:cc.easing.backOut}).delay(3).call(function(){o.nodeEffectJP.active=!1,n()}).start()):n()},t.prototype.sendJoinRoom=function(){cc.log("send creat room");try{var e=d.ConectManager.getIns().getValibleRoomName(),t=new SFS2X.RoomSettings(e),n=new SFS2X.RoomExtension("MiniPokerExtension","ext.Room.MiniPoker.SlotGameView");t.extension=n,t.isGame=!0,t.maxUsers=1,t.groupId="MiniPoker",this.sfs.send(new SFS2X.CreateRoomRequest(t,!0))}catch(o){cc.error(o),this.onDisconnect()}},t.prototype.onJoinRoom=function(e){return a(this,void 0,void 0,function(){var t,n,o,i,r,a,c;return s(this,function(){t=e.room,cc.log("onJoinRoom : ",e.room),b.Windown.UIManager.hideLoading();try{if("MiniPoker"==t.groupId){for(a in this.roomSFS=t,n=t.getVariable("cf"),o=n.value,i=[],r=JSON.parse(o))(c=Object.create({})).bet=parseInt(a),c.perJp=r[a].percentPot/100,i.push(c);i.sort(function(e,t){return e.bet-t.bet}),this.listConfigBet=i,console.log("check list config bet : ",this.listConfigBet),this.curRoomBet=this.listConfigBet[0].bet,this.lbJp.changeIndex(this.curRoomBet)}}catch(s){cc.log(s)}return[2]})})},t.prototype.start=function(){this.getComponent(f.default).nomalSize(),this.lbJp.lbMoney.time=.5},t.prototype.sendClickSpin=function(){var e=d.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),d.ConectManager.getIns().sendRequest("spinPoker",e,this.roomSFS)},t.prototype.onClickChangBet=function(e,t){var n=parseInt(t);this.curRoomBet=this.listConfigBet[n].bet,this.lbJp.changeIndex(this.curRoomBet)},t.prototype.OnClickAuto=function(){this.ClickAuto(this.btnAuto.isChecked)},t.prototype.ClickAuto=function(e){this.isAuto=e,this.isAuto&&this.isEndTurn&&this.AutoSpin()},t.prototype.AutoSpin=function(){this.ClickSpin()},t.prototype.onToggleSieuToc=function(e){this.isSieuToc=e.isChecked},t.prototype.ForceStop=function(){var e=this;b.Windown.actionEffectClose(this.node,function(){e.isSpinSuccess=!1,e.isGetResult=!1,e.isAuto=!1,e.isEndTurn=!0,e.animMessage.node.active=!1,e.ActiveButton(!0),e.btnAuto.isChecked=!1,e.Close()})},t.prototype.Close=function(){b.Windown.MoneyUser.endGameMOney(this.idGame),this.isMinimizeGame=!1,this.node.removeFromParent(!1)},t.prototype.forceStopSpinByNotMoney=function(){this.ActiveButton(!0),this.isSpinSuccess=!1,this.isGetResult=!1,this.isAuto=!1,this.isEndTurn=!0,this.listCardSpin.stopByNotMoney()},t.prototype.onClickClose=function(){this.node.active=!1,b.Windown.UIManager.parentMiniGame.getComponentInChildren(y.default)._touchStart(null),this.roomSFS?d.ConectManager.getIns().sendLeaveRoom(this.roomSFS):this.node.destroy()},t.prototype.getSpriteCard=function(e){return this.cardAtlas.getSpriteFrame(e)},t.prototype.userExitRoom=function(e){"MiniPoker"==e.room.groupId&&e.user.isItMe&&this.node.destroy()},t.prototype.clear=function(){cc.systemEvent.targetOff(this),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse)},t.prototype.showJackpotMini=function(){},t.prototype.hideJackPotMini=function(){},t.prototype.ClickButtonHistory=function(){b.Windown.UIManager.showLoading(),b.Windown.HistoryMiniPoker?b.Windown.HistoryMiniPoker.show():cc.assetManager.loadBundle(l.default.MiniPoker.toString(),function(e,t){e||t.load("Prefabs/HistoryMiniPoker",cc.Prefab,function(e,t){if(!e){var n=cc.instantiate(t);b.Windown.UIManager.parentPopup.addChild(n),b.Windown.HistoryMiniPoker.show()}})})},t.prototype.ClickButtonHelp=function(){b.Windown.UIManager.showLoading(),b.Windown.HuongDanChoiMiniPoker?b.Windown.HuongDanChoiMiniPoker.show():cc.assetManager.loadBundle(l.default.MiniPoker.toString(),function(e,t){e||t.load("Prefabs/minipokerHelpView",cc.Prefab,function(e,t){if(!e){var n=cc.instantiate(t);b.Windown.UIManager.parentPopup.addChild(n),b.Windown.HuongDanChoiMiniPoker.show()}})})},t.prototype.onDisconnect=function(){cc.log("disconnect"),b.Windown.UIManager.hideLoading(),b.Windown.UIManager.hideLoadingData(),this.node.destroy()},t.prototype.onDestroy=function(){this.clear(),b.Windown.MiniPoker=null},r([v(g.default)],t.prototype,"listCardSpin",void 0),r([v(cc.SpriteAtlas)],t.prototype,"cardAtlas",void 0),r([v(cc.SpriteFrame)],t.prototype,"listSpriteResult",void 0),r([v(cc.Node)],t.prototype,"nodeEffectJP",void 0),r([v(sp.Skeleton)],t.prototype,"skeCanGat",void 0),r([v(cc.Button)],t.prototype,"btnSpin",void 0),r([v(cc.Toggle)],t.prototype,"btnSieuToc",void 0),r([v(cc.Toggle)],t.prototype,"groupToggle",void 0),r([v(cc.Animation)],t.prototype,"animMessage",void 0),r([v(cc.Toggle)],t.prototype,"btnAuto",void 0),r([v(cc.Prefab)],t.prototype,"helpView",void 0),r([v(h.default)],t.prototype,"lbJp",void 0),r([v(cc.Label)],t.prototype,"lbJackpotWin",void 0),r([k],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/JackpotItem":void 0,"../../../Scritps/Other/DragMiniGame":void 0,"../../../Scritps/Other/OffMiniGame":void 0,"../../../Scritps/Windown":void 0,"./ItemMiniPoker":"ItemMiniPoker"}],SpinCardRunning:[function(e,t,n){"use strict";cc._RF.push(t,"76f98/pdhtBoIYTvZ647UC2","SpinCardRunning");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imgSpin=null,t.imgCard=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.Force=function(){this.imgSpin.active=!1},t.prototype.SetImage=function(e){if(a.Windown.MiniPoker){var t=this.convertCard(e);this.imgCard.spriteFrame=t<10?a.Windown.MiniPoker.getSpriteCard("0"+t.toString()):a.Windown.MiniPoker.getSpriteCard(this.convertCard(e).toString())}},t.prototype.convertCard=function(e){var t=0;switch(e){case 1:t=40;break;case 2:t=41;break;case 3:t=42;break;case 4:t=43;break;case 5:t=44;break;case 6:t=45;break;case 7:t=46;break;case 8:t=47;break;case 9:t=48;break;case 10:t=49;break;case 11:t=50;break;case 12:t=51;break;case 13:t=52;break;case 14:t=27;break;case 15:t=28;break;case 16:t=29;break;case 17:t=30;break;case 18:t=31;break;case 19:t=32;break;case 20:t=33;break;case 21:t=34;break;case 22:t=35;break;case 23:t=36;break;case 24:t=37;break;case 25:t=38;break;case 26:t=39;break;case 27:t=1;break;case 28:t=2;break;case 29:t=3;break;case 30:t=4;break;case 31:t=5;break;case 32:t=6;break;case 33:t=7;break;case 34:t=8;break;case 35:t=9;break;case 36:t=10;break;case 37:t=11;break;case 38:t=12;break;case 39:t=13;break;case 40:t=14;break;case 41:t=15;break;case 42:t=16;break;case 43:t=17;break;case 44:t=18;break;case 45:t=19;break;case 46:t=20;break;case 47:t=21;break;case 48:t=22;break;case 49:t=23;break;case 50:t=24;break;case 51:t=25;break;case 52:t=26}return t},r([p(cc.Node)],t.prototype,"imgSpin",void 0),r([p(cc.Sprite)],t.prototype,"imgCard",void 0),r([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}]},{},["HelpMiniPoker","HistoryMiniPoker","ItemMiniPoker","ListennerEventSpin","MiniPokerHistoryItem","MiniPokerView","SpinCardRunning"]);