window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AssetCandy:[function(t,e,o){"use strict";cc._RF.push(e,"c76dawj5EdFV7fwsPlFQwWH","AssetCandy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listSpItem=[],e.listSpItemBlur=[],e.listSkeData=[],e}return i(e,t),e.prototype.start=function(){},r([a([cc.SpriteFrame])],e.prototype,"listSpItem",void 0),r([a([cc.SpriteFrame])],e.prototype,"listSpItemBlur",void 0),r([a([sp.SkeletonData])],e.prototype,"listSkeData",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],EffectCandy:[function(t,e,o){"use strict";cc._RF.push(e,"a65a3Abl1VD0p7qzWctxwuF","EffectCandy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ske=null,e}return i(e,t),e.prototype.onLoad=function(){this.funNext=null},e.prototype.onEnable=function(){var t=this;this.scheduleOnce(this.funDelayOff=function(){t.node.on(cc.Node.EventType.TOUCH_END,t.onClose,t)},.7)},e.prototype.onDisable=function(){this.unschedule(this.funDelayOff),this.node.off(cc.Node.EventType.TOUCH_END,this.onClose,this)},e.prototype.showJackpot=function(t){this.node.active=!0,c.Windown.MiniSlot.dataFinish.payLinePrizeValue;var e=cc.find("Jackpot",this.node);e.active=!0,e.getComponentInChildren(cc.ParticleSystem).resetSystem(),this.ske.node.active=!0,this.ske.setAnimation(0,"NoHu-112",!1),this.ske.addAnimation(0,"NoHu-Idel",!0),this.isShowJP=!0,this.funNext=t},e.prototype.showBigWin=function(t){this.node.active=!0;var e=c.Windown.MiniSlot.dataFinish.payLinePrizeValue;this.ske.node.active=!0,e>=50*c.Windown.MiniSlot.curRoomBet?this.ske.setAnimation(0,"ThangSieuLown-112",!1):this.ske.setAnimation(0,"Thang-Lown-112",!1);var o=cc.find("BigWin",this.node);o.active=!0,o.getComponentInChildren(cc.ParticleSystem).resetSystem(),this.funNext=t,this.scheduleOnce(this.onClose,1.5)},e.prototype.resetView=function(){this.ske.node.active=!1,cc.find("BigWin",this.node).active=!1,cc.find("Jackpot",this.node).active=!1},e.prototype.onClose=function(t){t&&t.stopPropagation&&t.stopPropagation(),this.unschedule(this.funDelayOff),this.unschedule(this.onClose),this.resetView(),this.funNext&&this.funNext(),this.funNext=null,this.node.active=!1},r([l(sp.Skeleton)],e.prototype,"ske",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemSlotCandy:[function(t,e,o){"use strict";cc._RF.push(e,"3e725GINOVLoJFrDEdj+HTg","ItemSlotCandy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/StateReelSlot"),s=t("../../../Scritps/Windown"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.listSpItem=null,e.parentBlur=null,e.anim=null,e.aniBlur=null,e.stateWhel=0,e}return i(e,t),e.prototype.start=function(){},e.prototype.randomFirtGame=function(){for(var t=this.getListItemSp(),e=0,o=t.length;e<o;e++){var n=t[e].getComponentInChildren(cc.Sprite),i=t[e].getComponentInChildren(sp.Skeleton),r=s.Windown.RandomNumber(0,6);2==r||3==r?(n.spriteFrame=s.Windown.MiniSlot.asset.listSpItem[r],n.node.active=!0,i.node.active=!1):(i.skeletonData=s.Windown.MiniSlot.asset.listSkeData[r],i.node.active=!0,n.node.active=!1,i.setAnimation(0,"animation",!0))}},e.prototype.getListItemSp=function(){if(null!=this.listSpItem)return this.listSpItem;this.listSpItem=[];for(var t=this.parentItem.children,e=0;e<3;e++)this.listSpItem.push(t[e]);return this.listSpItem},e.prototype.runSpin=function(){var t=this;this.randomBlur();var e=s.Windown.MiniSlot.isMaxSpeed?2:1,o=cc.moveBy(.12/e,0,40).easing(cc.easeSineOut()),n=cc.moveBy(.2/e,0,-160).easing(cc.easeSineIn()),i=cc.callFunc(function(){t.aniBlur.node.active=!0,t.aniBlur.play("ItemBlur"),t.node.y=0,t.parentItem.active=!1});this.node.stopAllActions(),this.node.runAction(cc.sequence(o,n,i)),this.stateWhel=c.default.RUN},e.prototype.randomBlur=function(){var t=this.parentItem.children,e=t[3],o=t[4];e.getComponentInChildren(cc.Sprite).spriteFrame=s.Windown.MiniSlot.asset.listSpItem[s.Windown.RandomNumber(0,6)],o.getComponentInChildren(cc.Sprite).spriteFrame=s.Windown.MiniSlot.asset.listSpItem[s.Windown.RandomNumber(0,6)],this.parentBlur.children.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=s.Windown.MiniSlot.asset.listSpItemBlur[s.Windown.RandomNumber(0,6)]})},e.prototype.stopSpin=function(t,e,o){var n=this;if(void 0===t&&(t=0),this.stateWhel==c.default.STOP)return this.funReject(),void e();var i=cc.callFunc(function(){n.stateWhel=c.default.STOP,n.node.y=0,n.parentItem.active=!0,n.aniBlur.node.active=!1,s.Windown.MiniSlot.sound.playStopReel()}),r=s.Windown.MiniSlot.isMaxSpeed?2:1;this.funReject=o;var a=cc.moveBy(.12/r,0,-40).easing(cc.easeSineOut()),l=cc.moveBy(.12/r,0,40).easing(cc.easeSineIn()),p=cc.delayTime(t),u=cc.callFunc(e);this.node.stopAllActions(),this.node.runAction(cc.sequence(p,i,a,l,u))},r([p(cc.Node)],e.prototype,"parentItem",void 0),r([p(cc.Node)],e.prototype,"parentBlur",void 0),r([p(sp.Skeleton)],e.prototype,"anim",void 0),r([p(cc.Animation)],e.prototype,"aniBlur",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Windown":void 0}],MiniSlotView:[function(t,e,o){"use strict";cc._RF.push(e,"311f0Daq8VCjoHjOSTeBj4Y","MiniSlotView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/DefineTs/EVENT_MANAGER"),l=t("../../../Scritps/DefineTs/PlayerPP"),p=t("../../../Scritps/DefineTs/StateReelSlot"),u=t("../../../Scritps/DefineTs/TextDefine"),d=t("../../../Scritps/Game/GAME_TYPE"),h=t("../../../Scritps/Network/ConectManager"),f=t("../../../Scritps/Obs/JackpotItem"),y=t("../../../Scritps/Obs/LbMoneyChange"),S=t("../../../Scritps/Other/DragMiniGame"),v=t("../../../Scritps/Other/OffMiniGame"),g=t("../../../Scritps/Windown"),m=t("./AssetCandy"),_=t("./EffectCandy"),w=t("./SoundMiniSlot"),M=cc._decorator,O=M.ccclass,b=M.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfs=null,e.curRoomBet=0,e.totalLineBet=20,e.stateGame=0,e.roomSFS=null,e.dataFinish=null,e.listConfigBet=[],e.listNodeItem=[],e.parentItem=null,e.parentLine=null,e.itemChooseBet=null,e.toggleAutoSpin=null,e.parentBtnLevelBet=null,e.listColum=[],e.effect=null,e.asset=null,e.listFunShowOceLine=[],e.lbMoneyLostBet=null,e.labelChipRevice=null,e.gameType=0,e.btnSpin=null,e.sound=null,e.lbJp=null,e}return i(e,t),e.prototype.onLoad=function(){cc.log("chay vao on load mini slot !!!!"),g.Windown.MiniSlot=this,this.sfs=h.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(a.EVENT_MANAGER.CHANG_ROTATION,this.onChangRotate,this),this.onChangRotate(g.Windown.UIManager.isVertical),this.sendJoinRoom(),this.initItem(),this.gameType=d.default.MiniSlot},e.prototype.onChangRotate=function(t){cc.log("onChangRotate"),t?(this.node.rotation=-90,this.node.scale=.9):(this.node.rotation=0,this.node.scale=1)},e.prototype.start=function(){this.lbJp.lbMoney.time=.5,this.getComponent(S.default).nomalSize()},e.prototype.genButtonBetByConfig=function(){for(var t=this.itemChooseBet.node,e=this.parentBtnLevelBet.children,o=0;o<this.listConfigBet.length;o++){var n=this.listConfigBet[o],i=e[o];null==i&&(i=cc.instantiate(t),this.parentBtnLevelBet.addChild(i)),i.active=!0,i.getChildByName("Background").getComponentInChildren(cc.Label).string=g.Windown.formatMoney((20*n.bet).toString(),1,1e3),i.getChildByName("checkmark").getComponentInChildren(cc.Label).string=g.Windown.formatMoney((20*n.bet).toString(),1,1e3),i.getComponent(cc.Toggle).checkEvents[0].customEventData=n.bet.toString(),0===o?(i.getComponent(cc.Toggle).isChecked=!0,cc.log("check")):i.getComponent(cc.Toggle).isChecked=!1}},e.prototype.onClickSelectBet=function(t,e){var o=parseInt(e);this.curRoomBet=o,cc.log("chayv ao day"),this.lbJp.changeIndex(20*this.curRoomBet)},e.prototype.initItem=function(){for(var t=this.parentItem.children[0],e=0;e<3;e++){var o=this.parentItem.children[e];null==o&&(o=cc.instantiate(t),this.parentItem.addChild(o));var n=o.getComponent("ItemSlotCandy");this.listColum.push(n),n.randomFirtGame(),n.node.active=!0,n.node.x=n.node.width*e+n.node.width/2*.7,n.node.y=0;for(var i=n.getListItemSp(),r=0;r<i.length;r++){var c=i[r];this.listNodeItem.push(c)}}},e.prototype.sendJoinRoom=function(){g.Windown.UIManager.showLoading(),cc.log("send creat room");try{var t=h.ConectManager.getIns().getValibleRoomName(),e=new SFS2X.RoomSettings(t),o=new SFS2X.RoomExtension("SlotMiniExtension","ext.Room.SlotMini.SlotGameView");e.extension=o,e.isGame=!0,e.maxUsers=1,e.groupId="SlotMini",this.sfs.send(new SFS2X.CreateRoomRequest(e,!0)),cc.log("send creat room : ",JSON.stringify(e))}catch(n){cc.error(n),this.onDisconnect()}},e.prototype.onDestroy=function(){this.clear(),g.Windown.MiniSlot=null},e.prototype.onJoinRoom=function(t){return c(this,void 0,void 0,function(){var e,o,n,i,r,c,a;return s(this,function(){if(e=t.room,cc.log("onJoinRoom : ",t.room),g.Windown.UIManager.hideLoading(),"SlotMini"==e.groupId){for(c in this.roomSFS=e,o=e.getVariable("cf"),n=o.value,cc.log(n),i=[],r=JSON.parse(n))(a=Object.create(null)).bet=parseInt(c),a.perJp=r[c].percentPot/100,i.push(a);i.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=i,this.curRoomBet=this.listConfigBet[0].bet,this.lbJp.changeIndex(20*this.curRoomBet),this.genButtonBetByConfig()}return[2]})})},e.prototype.onDisconnect=function(){cc.log("disconnect"),g.Windown.UIManager.hideLoading(),g.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.onClickSpin=function(){this.stateGame==p.default.WAITING?(cc.log("=>  StateReelSlot.WAITING"),this.runSpin()):this.stateGame==p.default.CAN_STOP?cc.log("=> StateReelSlot.CAN_STOP"):this.stateGame==p.default.STOP?cc.log("===> StateReelSlot.STOP"):this.stateGame==p.default.SHOW_EFFECT&&(cc.log("=>  StateReelSlot.SHOW_EFFECT"),this.resetForNewGame())},e.prototype.sendClickSpin=function(){this.btnSpin.interactable=!1;var t=h.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),cc.log("onClickSendSpin Mini : ",this.curRoomBet),h.ConectManager.getIns().sendRequest("spinMini",t,this.roomSFS)},e.prototype.forceStopSpin=function(){cc.log("force StopSpin"),this.unschedule(this.stopSpin),this.stopColum(!0)},e.prototype.runSpin=function(){this.sound.playStartSpin(),this.sound.playLoopSpin(),this.offAllLineWin();for(var t=0;t<this.listColum.length;t++)this.listColum[t].runSpin();this.sendClickSpin(),this.stateGame=p.default.RUN},e.prototype.onCreateError=function(){cc.log("creat errr"),g.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),g.Windown.Dialog.showLog(u.TextDefine.ERR_JOIN_ROOM)},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),g.Windown.UIManager.hideLoading(),g.Windown.UIManager.hideLoadingData(),g.Windown.Dialog.showLog(u.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.userExitRoom=function(t){"SlotMini"==t.room.groupId&&(cc.log("user exit room minislot"),t.user.isItMe)&&this.node.destroy()},e.prototype.clear=function(){cc.systemEvent.targetOff(this),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),this.dataFinish&&(this.dataFinish.payLinePrizeValue,g.Windown.MoneyUser.removeDelay(this.gameType)),g.Windown.MoneyUser.endGameMOney(this.gameType)},e.prototype.extResponse=function(t){var e=t.cmd,o=t.params;switch(e){case"spinMini":cc.log("check data spin : ",g.Windown.SFSObjToJson(o)),this.handleFinish(o);break;case"historyMini":g.Windown.HistoryMiniSlot.responseServer(o)}},e.prototype.handleFinish=function(t){var e=this;if(t.containsKey(l.PlayerPP.ERR_MESSAGE))cc.log("quay loi");else{var o=this.convertResult(t);cc.log("check line win : ",o.lineWin),this.dataFinish={spinId:11111,slotData:o.views,prizeData:o.lineWin,totalBetValue:o.totalBetValue,payLinePrizeValue:o.payLinePrizeValue,accountBalance:o.accountBalance,isTakeJackpot:o.isTakeJackpot},g.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.accountBalance,this.dataFinish.payLinePrizeValue),this.truTienBet(20*this.dataFinish.totalBetValue,this.dataFinish.accountBalance);var n=this.isMaxSpeed?.2:.5;this.stateGame=p.default.CAN_STOP,this.scheduleOnce(function(){e.setResult(e.dataFinish.slotData),e.setUpShowOceLineWin();var t=e.isMaxSpeed?.1:.5;e.scheduleOnce(e.stopSpin,t)},n)}},e.prototype.convertResult=function(t){for(var e={views:null,lineWin:null,totalBetValue:0,payLinePrizeValue:0,accountBalance:0,isTakeJackpot:!1},o=JSON.parse(t.get("views")),n=[],i=0;i<o.length;i++)for(var r=o[i],c=0;c<r.length;c++){var s=r[c];n.push(s)}var a=JSON.parse(g.Windown.SFSArrToJson(t.get("listLineWin"))),l=[];for(i=0;i<a.length;i++)r=a[i],l.push(r.id);return e.totalBetValue=t.get("agBet"),cc.log("check total bet : ",t.get("agBet")),e.payLinePrizeValue=t.get("agWin"),cc.log("check receiver bet : ",t.get("agWin")),e.accountBalance=t.get("agUser"),cc.log("check money user : ",t.get("agUser")),e.isTakeJackpot=t.get("isTakeJP"),cc.log("check jackpot : ",t.get("isTakeJP")),e.views=n,e.lineWin=l,e},e.prototype.stopSpin=function(){this.stopColum(!1)},e.prototype.stopColum=function(t){var e=this;void 0===t&&(t=!1),this.sound.stopLoopSpin(),this.listPromises=[];for(var o=this.isMaxSpeed?.15:.3,n=t?0:o,i=function(t){return new Promise(function(o,i){e.listColum[t].stopSpin(n*t,o,i)})},r=0,c=this.listColum.length;r<c;r++)this.listPromises.push(i(r));Promise.all(this.listPromises).then(function(){e.handleStopAllColum()}).catch(function(){})},e.prototype.handleStopAllColum=function(){cc.log("Stop all collum"),this.checkAndShowEffect(),this.setStateToggleRoom(),this.btnSpin.interactable=!0},e.prototype.setResult=function(t){cc.log("check slot data : ",t);for(var e=0;e<9;e++){var o=t[e],n=this.listNodeItem[e].getComponentInChildren(cc.Sprite),i=this.listNodeItem[e].getComponentInChildren(sp.Skeleton);2==o||3==o?(n.spriteFrame=this.asset.listSpItem[o],n.sizeMode=cc.Sprite.SizeMode.TRIMMED,n.node.active=!0,i.node.active=!1):(n.node.active=!1,i.node.active=!0,i.skeletonData=this.asset.listSkeData[o],i.setAnimation(0,"animation",!0))}},e.prototype.truTienBet=function(t,e){0!=t&&(this.lbMoneyLostBet.string="-"+g.Windown.formatNumber(t),this.lbMoneyLostBet.node.opacity=255,this.lbMoneyLostBet.node.position=cc.v3(141,177,10),this.lbMoneyLostBet.node.runAction(cc.spawn(cc.moveBy(1,0,50),cc.fadeOut(1))),g.Windown.MoneyUser.subMoney(t,e))},e.prototype.setUpShowOceLineWin=function(){var t=this;if(this.listFunShowOceLine=[],""!=this.dataFinish.prizeData)for(var e=this.parentLine.children,o=function(o){var i=n.dataFinish.prizeData[o];if(i>20)return"continue";n.listFunShowOceLine.push(function(){t.offMoneyReviceSpin(!0),t.offAllLineWin(),e[i].active=!0})},n=this,i=0,r=this.dataFinish.prizeData.length;i<r;i++)o(i)},e.prototype.showOnceLine=function(){var t=this;cc.log("chay vao show once line");var e=0,o=this.dataFinish.payLinePrizeValue;this.showMoneyReviceSpin(o),this.addMoneyUser(o),this.stateGame=p.default.SHOW_EFFECT,this.isAutoSpin?this.scheduleOnce(this.resetForNewGame,1.5):(this.schedule(this.funShowOnceLine=function(){t.listFunShowOceLine[e%t.listFunShowOceLine.length](),e++},1.5),this.setStateToggleRoom())},e.prototype.showMoneyReviceSpin=function(t){0!=t&&(g.Windown.MiniSlot.sound.playTakeMoney(),this.labelChipRevice.node.parent.active=!0),this.isMaxSpeed?this.labelChipRevice.time=.25:this.labelChipRevice.time=.5;var e=this.labelChipRevice.node.parent;e.stopAllActions(),e.opacity=0,e.y=90,e.runAction(cc.sequence(cc.spawn(cc.moveTo(1,e.x,126),cc.fadeIn(.1)),cc.fadeOut(.3))),this.labelChipRevice.setMoneyNoTime(t)},e.prototype.addMoneyUser=function(t){cc.log("+ tien user la : ",t),g.Windown.MoneyUser.removeDelay(this.gameType)},e.prototype.checkAndShowEffect=function(){var t=this,e=this.dataFinish.isTakeJackpot,o=this.dataFinish.payLinePrizeValue>=200*this.curRoomBet,n=function(o){e?t.effect.showJackpot(o):o()};this.showAllLineWin(function(){n(function(){var n;n=function(){t.showOnceLine()},o&&!e?t.effect.showBigWin(n):n()})})},e.prototype.showAllLineWin=function(t){if(this.offAllLineWin(),this.dataFinish.prizeData.length<1)this.resetForNewGame();else if(this.funNextAllWin=t,t(),cc.log("check prize data : ",this.dataFinish.prizeData),""!=this.dataFinish.prizeData)for(var e=this.dataFinish.prizeData,o=this.parentLine.children,n=0,i=e.length;n<i;n++){var r=e[n];if(r<25){var c=o[r];c.active=!0,c.opacity=0,cc.Tween.stopAllByTarget(c),cc.tween(c).delay(.04*n).to(.1,{opacity:255}).start()}}},e.prototype.showBonusGame=function(t){t()},e.prototype.resetForNewGame=function(){var t=this;cc.log("chay vao reset new game "),this.dataFinish=null,this.stateGame=p.default.WAITING,cc.log("check state : ",this.stateGame),this.unschedule(this.funNextAllWin),this.unschedule(this.funShowOnceLine),this.unschedule(this.resetForNewGame),this.offAllLineWin(),this.setStateToggleRoom(),this.isAutoSpin?(this.scheduleOnce(function(){t.offMoneyReviceSpin(!0)},.5),this.onClickSpin()):this.offMoneyReviceSpin()},e.prototype.setStateToggleRoom=function(){},e.prototype.offAllLineWin=function(){for(var t=this.parentLine.children,e=0,o=t.length;e<o;e++)t[e].active=!1},e.prototype.offMoneyReviceSpin=function(t){var e=this;void 0===t&&(t=!1),t?(this.labelChipRevice.node.parent.stopAllActions(),this.labelChipRevice.node.parent.runAction(cc.sequence(cc.fadeOut(.4),cc.callFunc(function(){e.labelChipRevice.resetLb(),e.labelChipRevice.node.parent.active=!1})))):(this.labelChipRevice.resetLb(),this.labelChipRevice.node.parent.active=!1)},e.prototype.onClickHelp=function(){g.Windown.UIManager.showLoading(),g.Windown.GuideMiniSlot?g.Windown.GuideMiniSlot.show():cc.assetManager.getBundle(this.gameType.toString()).load("Prefabs/MS_PopupGuide",cc.Prefab,function(t,e){if(!t){var o=cc.instantiate(e);g.Windown.UIManager.hideLoading(),g.Windown.UIManager.parentPopup.addChild(o),g.Windown.GuideMiniSlot.show()}})},e.prototype.onClickTop=function(){},e.prototype.onClickLichSu=function(){g.Windown.UIManager.showLoading(),g.Windown.HistoryMiniSlot?g.Windown.HistoryMiniSlot.show():cc.assetManager.getBundle(this.gameType.toString()).load("Prefabs/MS_PopupHistory",cc.Prefab,function(t,e){t||(g.Windown.UIManager.hideLoading(),g.Windown.UIManager.parentPopup.addChild(cc.instantiate(e)),g.Windown.HistoryMiniSlot.show())})},e.prototype.onClickAutoSpin=function(t){this.isAutoSpin=t.isChecked,this.isAutoSpin&&(this.stateGame!=p.default.WAITING&&this.stateGame!=p.default.SHOW_EFFECT||this.onClickSpin())},e.prototype.onClickMaxSpeed=function(t){this.isMaxSpeed=t.isChecked,this.isMaxSpeed&&(this.stateGame!=p.default.WAITING&&this.stateGame!=p.default.SHOW_EFFECT||this.toggleAutoSpin.check())},e.prototype.onClickClose=function(){g.Windown.UIManager.parentMiniGame.getComponentInChildren(v.default)._touchStart(null),this.node.active=!1,this.roomSFS?h.ConectManager.getIns().sendLeaveRoom(this.roomSFS):this.node.destroy()},r([b(cc.Node)],e.prototype,"parentItem",void 0),r([b(cc.Node)],e.prototype,"parentLine",void 0),r([b(cc.Toggle)],e.prototype,"itemChooseBet",void 0),r([b(cc.Toggle)],e.prototype,"toggleAutoSpin",void 0),r([b(cc.Node)],e.prototype,"parentBtnLevelBet",void 0),r([b(_.default)],e.prototype,"effect",void 0),r([b(m.default)],e.prototype,"asset",void 0),r([b(cc.Label)],e.prototype,"lbMoneyLostBet",void 0),r([b(y.default)],e.prototype,"labelChipRevice",void 0),r([b(cc.Button)],e.prototype,"btnSpin",void 0),r([b(w.default)],e.prototype,"sound",void 0),r([b(f.default)],e.prototype,"lbJp",void 0),r([O],e)}(cc.Component);o.default=R,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/JackpotItem":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/DragMiniGame":void 0,"../../../Scritps/Other/OffMiniGame":void 0,"../../../Scritps/Windown":void 0,"./AssetCandy":"AssetCandy","./EffectCandy":"EffectCandy","./SoundMiniSlot":"SoundMiniSlot"}],MiniSlot_Guide:[function(t,e,o){"use strict";cc._RF.push(e,"8aaafr5kJdBGbso3VBHPWCk","MiniSlot_Guide");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.onLoad=function(){c.Windown.GuideMiniSlot=this},e.prototype.start=function(){},e.prototype.onClickClose=function(){var t=this;c.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.show=function(){c.Windown.UIManager.hideLoading(),this.node.active=!0,c.Windown.actionEffectOpen(this.node)},e.prototype.onDestroy=function(){c.Windown.GuideMiniSlot=null},r([l(cc.Label)],e.prototype,"label",void 0),r([l],e.prototype,"text",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],MiniSlot_History:[function(t,e,o){"use strict";cc._RF.push(e,"71a46Ao4cFM7YSRcfsRP+p+","MiniSlot_History");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Network/ConectManager"),s=t("../../../Scritps/Parent/BaseScrollView"),a=t("../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.srcListView=null,e}return i(e,t),e.prototype.onLoad=function(){a.Windown.HistoryMiniSlot=this},e.prototype.responseServer=function(t){a.Windown.UIManager.hideLoading();var e=JSON.parse(a.Windown.SFSArrToJson(t.get("history")));cc.log("chay vao day check data  :",JSON.parse(a.Windown.SFSArrToJson(t.get("history"))));var o=e.length;this.srcListView.init(e,50*o,50),a.Windown.UIManager.hideLoading()},e.prototype.onClickClose=function(){var t=this;a.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.show=function(){this.srcListView.resetScr(),a.Windown.UIManager.showLoading();var t=c.ConectManager.getIns().getSFSObj();c.ConectManager.getIns().sendRequest("historyMini",t,a.Windown.MiniSlot.roomSFS),cc.log("chay vao send get history "),a.Windown.actionEffectOpen(this.node)},e.prototype.onDestroy=function(){a.Windown.HistoryMiniSlot=null},r([u(s.default)],e.prototype,"srcListView",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Parent/BaseScrollView":void 0,"../../../Scritps/Windown":void 0}],MiniSlot_ItemHistory:[function(t,e,o){"use strict";cc._RF.push(e,"e89a1b2CTFLXocCj3FrqAfr","MiniSlot_ItemHistory");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTime=null,e.labelSub=null,e.labelAdd=null,e.labelGold=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.initItem=function(t){cc.log("chec oite akd : ",t);var e=new Date(t.date),o=e.getDate(),n=e.getMonth()+1,i=e.getHours(),r=e.getMinutes(),s=e.getSeconds();o<10&&(o=+o),n<10&&(n=n),i<10&&(i=i),r<10&&(r=r),s<10&&(s=s),this.labelTime.string=c.Windown.formatDate(e,"dd/MM HH:mm:ss").replace(" ","\n"),this.labelSub.string=this.formatGold(20*t.agBet),this.labelAdd.string=this.formatGold(t.agWin),this.labelGold.string=this.formatGold(t.agUser)},e.prototype.formatGold=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},r([l(cc.Label)],e.prototype,"labelTime",void 0),r([l(cc.Label)],e.prototype,"labelSub",void 0),r([l(cc.Label)],e.prototype,"labelAdd",void 0),r([l(cc.Label)],e.prototype,"labelGold",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],MiniSlot_ItemRank:[function(t,e,o){"use strict";cc._RF.push(e,"0f10407frNAhreiCaJIpbBc","MiniSlot_ItemRank");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"text",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MiniSlot_Rank:[function(t,e,o){"use strict";cc._RF.push(e,"76857P0UAZGtqiRimbQ0ja/","MiniSlot_Rank");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.onLoad=function(){c.Windown.RankMiniSlot=this},e.prototype.responseServer=function(t){var e=t[1];cc.log(e),e.length},e.prototype.onClickClose=function(){var t=this;c.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.onDestroy=function(){c.Windown.RankMiniSlot=null},e.prototype.show=function(){c.Windown.actionEffectOpen(this.node)},r([l(cc.Label)],e.prototype,"label",void 0),r([l],e.prototype,"text",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],SoundMiniSlot:[function(t,e,o){"use strict";cc._RF.push(e,"a8bdf97PbdLLqUQVCrBogbQ","SoundMiniSlot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Other/DragMiniGame"),s=t("../../../Scritps/Windown"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startSpin=null,e.loopSpin=null,e.stopReel=null,e.takeMoney=null,e}return i(e,t),e.prototype.playStartSpin=function(){s.Windown.AudioManager&&s.Windown.AudioManager.isActiveSound&&!s.Windown.MiniSlot.getComponent(c.default)._isMiniSize&&this.startSpin.play()},e.prototype.playLoopSpin=function(){s.Windown.AudioManager&&s.Windown.AudioManager.isActiveSound&&!s.Windown.MiniSlot.getComponent(c.default)._isMiniSize&&(this.loopSpin.loop=!0,this.loopSpin.play())},e.prototype.stopLoopSpin=function(){this.loopSpin.stop()},e.prototype.playStopReel=function(){s.Windown.AudioManager&&s.Windown.AudioManager.isActiveSound&&!s.Windown.MiniSlot.getComponent(c.default)._isMiniSize&&this.stopReel.play()},e.prototype.playTakeMoney=function(){s.Windown.AudioManager&&s.Windown.AudioManager.isActiveSound&&!s.Windown.MiniSlot.getComponent(c.default)._isMiniSize&&this.takeMoney.play()},r([p(cc.AudioSource)],e.prototype,"startSpin",void 0),r([p(cc.AudioSource)],e.prototype,"loopSpin",void 0),r([p(cc.AudioSource)],e.prototype,"stopReel",void 0),r([p(cc.AudioSource)],e.prototype,"takeMoney",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Scritps/Other/DragMiniGame":void 0,"../../../Scritps/Windown":void 0}]},{},["AssetCandy","EffectCandy","ItemSlotCandy","MiniSlotView","MiniSlot_Guide","MiniSlot_History","MiniSlot_ItemHistory","MiniSlot_ItemRank","MiniSlot_Rank","SoundMiniSlot"]);