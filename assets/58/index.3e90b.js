window.__require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AssetQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"f4ca4sC02hCqpIa6XpeLC+a","AssetQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetQuyBa=void 0;var a=t("../../../Scritps/DefineTs/BUNDLE"),s=t("../../../Scritps/Game/GAME_TYPE"),c=t("../../../Scritps/Windown"),l=t("./SymbolQuyBa"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeAddScater=null,e.itemSymbolQuyBa=null,e.itemMultiBottle=null,e.atlasSymbol=null,e.atlasSymbolJQKA=null,e.atlasSymbolJQKABlur=null,e.atlasSpecial=null,e.atlasSymbolBlur=null,e.atlasSpecialBlur=null,e.atlasMultiCtr=null,e.nearFS=null,e.nodeTakeWild=null,e.effRemoveItem=null,e.poolSymbol=new cc.NodePool,e.poolBottle=new cc.NodePool,e}return i(e,t),e.prototype.getSfItemSymbol=function(t,e,n){return n?(this.getAtlasBlur(t).getSpriteFrame(this.getNameSymbolWithId(t)+this.getNameSizeItem(e,t)+"_blur"),this.getAtlasBlur(t).getSpriteFrame(this.getNameSymbolWithId(t)+this.getNameSizeItem(e,t)+"_blur")):this.getAtlas(t).getSpriteFrame(this.getNameSymbolWithId(t)+this.getNameSizeItem(e,t))},e.prototype.getAtlasBlur=function(t){return t<5?this.atlasSymbolJQKABlur:t<11?this.atlasSymbolBlur:this.atlasSpecial},e.prototype.getAtlas=function(t){return t<5?this.atlasSymbolJQKA:t<11?this.atlasSymbol:this.atlasSpecial},e.prototype.getSpine=function(t,e){return c.Windown.loadRes(a.BUNDLE.QuyBa,"Spine/"+this.getNameSpineWithID(t,e),sp.SkeletonData)},e.prototype.getNameSpineWithID=function(t,e){var n="";switch(t){case 0:n="l_10_atlas_symbols";break;case 1:n="l_j_atlas_symbols";break;case 2:n="l_q_atlas_symbols";break;case 3:n="l_k_atlas_symbols";break;case 4:n="l_a_atlas_symbols";break;case 5:n=cc.js.formatStr("h_shot%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 6:n=cc.js.formatStr("h_peachcocktail%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 7:n=cc.js.formatStr("h_greencocktail%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 8:n=cc.js.formatStr("h_bluecocktail%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 9:n=cc.js.formatStr("h_xoglass%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 10:n=cc.js.formatStr("h_xobottle%s_atlas_symbols",this.getNameSizeItem(e,t));break;case 11:n=cc.js.formatStr("s_wild%s_atlas_specials",this.getNameSizeItem(e,t));break;case 12:n=cc.js.formatStr("s_scatter%s_atlas_specials",this.getNameSizeItem(e,t))}return n},e.prototype.getSfBkg=function(t,e,n,o){return o?this.getAtlasBlur(t).getSpriteFrame(n==l.TYPE_ITEM.NONE?cc.js.formatStr(this.getNameBkgItem(t),this.getNameSizeItem(e,t,!0))+"_blur":cc.js.formatStr("s_block_gold%s_blur",this.getNameSizeItem(e,t,!0))):n==l.TYPE_ITEM.NONE?this.getAtlas(t).getSpriteFrame(cc.js.formatStr(this.getNameBkgItem(t),this.getNameSizeItem(e,t,!0))):this.atlasSymbolJQKA.getSpriteFrame("s_block_gold"+this.getNameSizeItem(e,t,!0))},e.prototype.getEffectTakeSymbol=function(t){return c.Windown.loadRes(s.default.QuyBa+"","Prefabs/TakeSymbol"+t,cc.Prefab)},e.prototype.getEffRemoveItem=function(t){return c.Windown.loadRes(s.default.QuyBa+"","Prefabs/EffectRemoveItem"+t,cc.Prefab)},e.prototype.getEffNearFS=function(){return c.Windown.loadRes(s.default.QuyBa+"","Prefabs/NearFS",cc.Prefab)},e.prototype.getSymbol=function(){var t=null;return(t=this.poolSymbol.size()>0?this.poolSymbol.get():cc.instantiate(this.itemSymbolQuyBa)).active=!0,t.getComponent(l.SymbolQuyBa).skeletonItem.node.setScale(cc.v2(1,1)),t.getComponent(l.SymbolQuyBa).spriteItem.node.setScale(cc.v2(1,1)),t.getComponent(l.SymbolQuyBa).bgWild.active=!1,t.getComponent(l.SymbolQuyBa).bgScatter.active=!1,t},e.prototype.getNameSymbolWithId=function(t){var e="";switch(t){case 0:e="l_10";break;case 1:e="l_j";break;case 2:e="l_q";break;case 3:e="l_k";break;case 4:e="l_a";break;case 5:e="h_shot";break;case 6:e="h_peachcocktail";break;case 7:e="h_greencocktail";break;case 8:e="h_bluecocktail";break;case 9:e="h_xoglass";break;case 10:e="h_xobottle";break;case 11:e="s_wild";break;case 12:e="s_scatter"}return e},e.prototype.getNameSizeItem=function(t,e,n){void 0===n&&(n=!1);var o="";if(e<5&&!n)return o;switch(t){case 1:o="_a";break;case 2:o="_b";break;case 3:o="_c";break;case 4:o="_d"}return o},e.prototype.getNameBkgItem=function(t){var e="";switch(t){case 0:case 1:case 2:case 3:case 4:e="l_block%s";break;case 5:e="h_block%s_shot";break;case 6:e="h_block%s_peachcocktail";break;case 7:e="h_block%s_greencocktail";break;case 8:e="h_block%s_bluecocktail";break;case 9:e="h_block%s_xoglass";break;case 10:e="h_block%s_xobottle";break;case 11:case 12:e=""}return e},e.prototype.getMultiBottle=function(){return cc.instantiate(this.itemMultiBottle)},e.prototype.putSymbol=function(t){this.poolSymbol.put(t)},e.prototype.getNodeTakeWild=function(){return cc.instantiate(this.nodeTakeWild)},e.prototype.preloadTakeSymbol=function(){for(var t=cc.assetManager.getBundle(s.default.QuyBa+""),e=1;e<5;e++)t.preload("Prefabs/TakeSymbol"+e,function(t){t&&cc.log("Err preload:"+t)}),t.preload("Prefabs/EffectRemoveItem"+e,function(t){t&&cc.log("Err preload:"+t)})},r([h(cc.Prefab)],e.prototype,"nodeAddScater",void 0),r([h(cc.Prefab)],e.prototype,"itemSymbolQuyBa",void 0),r([h(cc.Prefab)],e.prototype,"itemMultiBottle",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSymbol",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSymbolJQKA",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSymbolJQKABlur",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSpecial",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSymbolBlur",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasSpecialBlur",void 0),r([h(cc.SpriteAtlas)],e.prototype,"atlasMultiCtr",void 0),r([h(cc.Prefab)],e.prototype,"nearFS",void 0),r([h(cc.Prefab)],e.prototype,"nodeTakeWild",void 0),r([h(cc.Prefab)],e.prototype,"effRemoveItem",void 0),r([p],e)}(cc.Component);n.AssetQuyBa=d,cc._RF.pop()},{"../../../Scritps/DefineTs/BUNDLE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Windown":void 0,"./SymbolQuyBa":"SymbolQuyBa"}],AudioQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"b55a0glFMRFJKwQ72sqBuiU","AudioQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Scritps/Parent/AudioManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.voxRandom=[],e.voxMulti=[],e.voxMultiFS=[],e.voxSymbol=[],e.voxInfoBoard=[],e.voxIsScatter=null,e.multiUpupup=null,e.reelQuickStop=null,e.reelStopSingle=null,e.fsMultiplyRefresh=null,e.click=null,e.bgm_fs=null,e.bgmBigwinEnd=null,e.bgmBigwinEndCoins=null,e.bgmBigwinMain=null,e.bgmTotalwinEnd=null,e.bgmTotalwinMain=null,e.fastspinEnd=null,e.fastspinStart=null,e.fsIntro=null,e.fsSpin=null,e.fsTrans=null,e.fsWonRemainingIncrease=null,e.fsWonTitle=null,e.heartbeat=null,e.heartbeatNoise=null,e.heartbeatSlowdrop=null,e.list_item_click=null,e.menu_icon_press=null,e.multiCombine=null,e.multiActivate=null,e.prizeInfobarTotalwin=null,e.prizeInfobarTotalwinMedEnd=null,e.prizeInfobarTotalwinMedMain=null,e.prizeSmallwin=null,e.prizeSmallwinMultiplied=null,e.rouletteLoop=null,e.symWildActivate=null,e.symWildSpawn=null,e.scatterWinHighligh=null,e.slider_effect=null,e.spinActiveLoop=null,e.spinBtn=null,e.spinStop=null,e.spinStopQuick=null,e.symCollapse=null,e.symScatter=null,e.symShrink=null,e.symWild=null,e.uiCollect=null,e.uiInfo=null,e.uiStart=null,e.shakerMove=null,e.shakerStop=null,e.objKey={},e}return i(e,t),e.prototype.onChangeMusic=function(e){t.prototype.onChangeMusic.call(this,e),this.isActiveSound=e},e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.5))},e.prototype.playIndexTakeLine=function(){},e.prototype.playSmalWin=function(){},e.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.bgm_fs,.6,!0)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},e.prototype.playSymCollapse=function(){this.playEffect(this.symCollapse)},e.prototype.playStopAudio=function(){var t=this.spinStop;this.playEffect(t)},r([l([cc.AudioClip])],e.prototype,"voxRandom",void 0),r([l([cc.AudioClip])],e.prototype,"voxMulti",void 0),r([l([cc.AudioClip])],e.prototype,"voxMultiFS",void 0),r([l([cc.AudioClip])],e.prototype,"voxSymbol",void 0),r([l([cc.AudioClip])],e.prototype,"voxInfoBoard",void 0),r([l(cc.AudioClip)],e.prototype,"voxIsScatter",void 0),r([l(cc.AudioClip)],e.prototype,"multiUpupup",void 0),r([l(cc.AudioClip)],e.prototype,"reelQuickStop",void 0),r([l(cc.AudioClip)],e.prototype,"reelStopSingle",void 0),r([l(cc.AudioClip)],e.prototype,"fsMultiplyRefresh",void 0),r([l(cc.AudioClip)],e.prototype,"click",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_fs",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinEndCoins",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinMain",void 0),r([l(cc.AudioClip)],e.prototype,"bgmTotalwinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"bgmTotalwinMain",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinStart",void 0),r([l(cc.AudioClip)],e.prototype,"fsIntro",void 0),r([l(cc.AudioClip)],e.prototype,"fsSpin",void 0),r([l(cc.AudioClip)],e.prototype,"fsTrans",void 0),r([l(cc.AudioClip)],e.prototype,"fsWonRemainingIncrease",void 0),r([l(cc.AudioClip)],e.prototype,"fsWonTitle",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeat",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatNoise",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatSlowdrop",void 0),r([l(cc.AudioClip)],e.prototype,"list_item_click",void 0),r([l(cc.AudioClip)],e.prototype,"menu_icon_press",void 0),r([l(cc.AudioClip)],e.prototype,"multiCombine",void 0),r([l(cc.AudioClip)],e.prototype,"multiActivate",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedEnd",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedMain",void 0),r([l(cc.AudioClip)],e.prototype,"prizeSmallwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeSmallwinMultiplied",void 0),r([l(cc.AudioClip)],e.prototype,"rouletteLoop",void 0),r([l(cc.AudioClip)],e.prototype,"symWildActivate",void 0),r([l(cc.AudioClip)],e.prototype,"symWildSpawn",void 0),r([l(cc.AudioClip)],e.prototype,"scatterWinHighligh",void 0),r([l(cc.AudioClip)],e.prototype,"slider_effect",void 0),r([l(cc.AudioClip)],e.prototype,"spinActiveLoop",void 0),r([l(cc.AudioClip)],e.prototype,"spinBtn",void 0),r([l(cc.AudioClip)],e.prototype,"spinStop",void 0),r([l(cc.AudioClip)],e.prototype,"spinStopQuick",void 0),r([l(cc.AudioClip)],e.prototype,"symCollapse",void 0),r([l(cc.AudioClip)],e.prototype,"symScatter",void 0),r([l(cc.AudioClip)],e.prototype,"symShrink",void 0),r([l(cc.AudioClip)],e.prototype,"symWild",void 0),r([l(cc.AudioClip)],e.prototype,"uiCollect",void 0),r([l(cc.AudioClip)],e.prototype,"uiInfo",void 0),r([l(cc.AudioClip)],e.prototype,"uiStart",void 0),r([l(cc.AudioClip)],e.prototype,"shakerMove",void 0),r([l(cc.AudioClip)],e.prototype,"shakerStop",void 0),r([c],e)}(a.default);n.default=u,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],BigWinQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"fe00alNp31OW7C2eqJjhlDZ","BigWinQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BigWinQuyBa=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("../../../Scritps/DefineTs/REQUEST_CODE"),p=t("../../../Scritps/Windown"),h=t("../../../Scritps/Util"),d=t("../../../Scritps/Network/ConectManager"),f=cc._decorator,y=f.ccclass,m=f.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigWin=null,e.megaWin=null,e.superWin=null,e.coinTemp=null,e.coinParent=null,e.lb_Money=null,e.btnFast=null,e.chipPool=null,e.listPromiseIgro=[],e.isClickBtnFast=!1,e}return i(e,t),e.prototype.init=function(t,e){var n=this;return this.chipPool=new cc.NodePool("chipPool"),this.bigWin.node.active=!1,this.megaWin.node.active=!1,this.superWin.node.active=!1,new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a,c,f,y=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,7,,8]),this.node.opacity=0,this.node.runAction(cc.fadeIn(.2)),this.btnFast.interactable=!1,this.scheduleOnce(function(){y.btnFast.interactable=!0},1),this.startChipFalling(),this.lb_Money.node.active=!0,this.lb_Money.node.active=!0,this.lb_Money.resetLb(),4,n=e<15?4:e<30?8:12,this.lb_Money.time=n,this.lb_Money.setMoney(t),this.bigWin.node.active=!0,this.bigWin.play("Bigwin_Show"),this.bigWin.once(cc.Animation.EventType.FINISHED,function(){y.bigWin.play("Bigwin_Loop")}),p.Windown.QuyBa.audio.playEffect(p.Windown.QuyBa.audio.bgmBigwinMain),i=p.Windown.QuyBa.getMakeDelay(4),this.listPromiseIgro.push(i),[4,i.prosime];case 1:return s.sent(),e>=30?(this.bigWin.node.active=!1,this.megaWin.node.active=!0,this.megaWin.play("MegaWin_Show"),this.megaWin.once(cc.Animation.EventType.FINISHED,function(){y.megaWin.play("MegaWin_Loop")}),p.Windown.QuyBa.audio.playEffect(p.Windown.QuyBa.audio.bgmBigwinEnd),this.isClickBtnFast?[3,3]:(r=p.Windown.QuyBa.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,3];case 2:s.sent(),s.label=3;case 3:return e>=50?(this.megaWin.node.active=!1,this.superWin.node.active=!0,this.superWin.play("SuperWin_Show"),this.superWin.once(cc.Animation.EventType.FINISHED,function(){y.superWin.play("SuperWin_Loop")}),p.Windown.QuyBa.audio.playEffect(p.Windown.QuyBa.audio.bgmBigwinEnd),this.isClickBtnFast?[3,5]:(r=p.Windown.QuyBa.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,5];case 4:s.sent(),s.label=5;case 5:return p.Windown.QuyBa.audio.stopEffect(p.Windown.QuyBa.audio.bgmBigwinMain),p.Windown.QuyBa.audio.playEffect(p.Windown.QuyBa.audio.bgmBigwinEnd),p.Windown.QuyBa.dataFinish.agWin>1e4&&((a=d.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.QuyBa),a.putInt("mt",p.Windown.MatChuoc.dataFinish.agWin),a.putUtfString("nn",p.Windown.User.nickName),a.putUtfString("dt","bw"),d.ConectManager.getIns().sendRequest(u.REQUEST_CODE.AddBigWin,a)),this.lb_Money.setMoneyNoTime(t),this.lb_Money.node.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),c=p.Windown.QuyBa.getMakeDelay(4),this.listPromiseIgro.push(c),this.btnFast.interactable=!0,[4,c.prosime];case 6:return s.sent(),p.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){o(null),y.node.destroy()}))),[3,8];case 7:return f=s.sent(),o(null),this.node.destroy(),cc.log(f.stack),h.Util.ThrowErrProsime(f),[3,8];case 8:return[2]}})})})},e.prototype.startChipFalling=function(){var t=this,e=cc.tween(this.node).call(function(){for(var e=function(){var e=p.Windown.RandomNumber(-360,360),n=640+p.Windown.RandomNumber(50,1e3),o=p.Windown.RandomNumber(3,6),i=t.getChip(),r=p.Windown.RandomFloatNumber(.6,1.01),a=p.Windown.RandomNumber(0,360);i.setScale(r,r),i.setPosition(e,n),i.parent=t.coinParent,i.angle=a,cc.tween(i).by(o,{position:cc.v3(i.getPosition().x,-cc.view.getVisibleSize().height-i.getPosition().y,0)}).call(function(){t.chipPool.put(i)}).start()},n=0;n<20;n++)e()}),n=cc.tween(this.node).delay(2);cc.tween(this.node).sequence(e,n).repeatForever().start()},e.prototype.getChip=function(){return 0==this.chipPool.size()&&this.chipPool.put(cc.instantiate(this.coinTemp.node)),this.chipPool.get()},e.prototype.onClickBtnShowFast=function(){for(this.btnFast.interactable=!1,this.isClickBtnFast=!0;this.listPromiseIgro.length>0;)this.listPromiseIgro.shift().cancle(!0)},r([m(cc.Animation)],e.prototype,"bigWin",void 0),r([m(cc.Animation)],e.prototype,"megaWin",void 0),r([m(cc.Animation)],e.prototype,"superWin",void 0),r([m(cc.Animation)],e.prototype,"coinTemp",void 0),r([m(cc.Node)],e.prototype,"coinParent",void 0),r([m(c.default)],e.prototype,"lb_Money",void 0),r([m(cc.Button)],e.prototype,"btnFast",void 0),r([y],e)}(cc.Component);n.BigWinQuyBa=S,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],BottleControllerQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"1ebednmDx5BYYGE9xN/+Tk9","BottleControllerQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BottleControllerQuyBa=void 0;var c=t("./BottleItemQuyBa"),l=t("../../../Scritps/Other/LbMonoSpace"),u=t("../../../Scritps/Windown"),p=t("../../../Scritps/Util"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listBottle=[],e.listPosBottle=[],e.listPosBottleHis=[],e.listBonus=[2,2,2,2],e.listBonusOld=[2,2,2,2],e.nodeAddMoney=null,e.thanhBar=null,e.isHistory=!1,e}return i(e,t),e.prototype.onLoad=function(){this.listPosBottle=[cc.v2(-237,-49.5),cc.v2(-123,-49.5),cc.v2(-9,-49.5),cc.v2(115,-49.5),cc.v2(260,-30)],this.listPosBottleHis=[cc.v2(-143.23,-49.5),cc.v2(-51.756,-49.5),cc.v2(38.516,-49.5),cc.v2(133.602,-49.5),cc.v2(248.41,-38)],this.initBottleFirstGame()},e.prototype.start=function(){this.node.children[0].setSiblingIndex(this.node.children.length-1)},e.prototype.updateBonus=function(t){this.listBonusOld=this.listBonus.slice(),this.listBonus=t},e.prototype.initBottleFirstGame=function(){for(var t=0;t<5;t++){var e=u.Windown.QuyBa.asset.getMultiBottle();this.listBottle.push(e);var n=e.getComponent(c.BottleItemQuyBa);e.setPosition(this.isHistory?this.listPosBottleHis[t]:this.listPosBottle[t]),e.setParent(this.isHistory?this.node.getChildByName("Container"):this.node),n.bottleController=this,n.index=t,e.setScale(this.isHistory?cc.v2(.8,.8):cc.v2(.9,.9))}this.listBottle[4].getComponent(cc.Animation).play("BotleNormalGold"),this.listBottle[4].getComponent(c.BottleItemQuyBa).lbMultiNormal.string="x4",this.listBottle[4].getComponent(c.BottleItemQuyBa).multi=4,this.isHistory&&this.node.children[0].getChildByName("main_bg_multiplier_mask").setSiblingIndex(this.node.children[0].children.length-1)},e.prototype.getBottle=function(t){return this.listBottle[t]},e.prototype.effectBottleTakeMulti=function(t){this.listBottle[t].getComponent(c.BottleItemQuyBa).takeBottleItem(this.listBonus[t])},e.prototype.effectTextTakeMulti=function(t){return this.listBottle[t].getComponent(c.BottleItemQuyBa).multiTakeEffect()},e.prototype.effectTextMergeMulti=function(t,e){return this.listBottle[t].getComponent(c.BottleItemQuyBa).multiMergeEffect(e)},e.prototype.mutilUpReel=function(t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,c,l;return s(this,function(){try{for(e=Math.max.apply(Math,t.lsstack),o=!1,i=0,r=e;i<=r;i++)for(a=u.Windown.QuyBa.stateSpin.listColum[i],c=a.result,l=0;l<c.length;l++)11==c[l].i&&(o=!0,this.effectBottleTakeMulti(a.index-1));o&&u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.symWildActivate),n(null)}catch(s){p.Util.ThrowErrProsime(s)}return[2]})})})]})})},e.prototype.multiTakeEffect=function(t,e){var n=this;return new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a,h,d,f,y,m=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),n=[],i=this.getListCollumWild(t,e),r=0,i.length>0&&(1==i.length?(n.push(this.effectTextTakeMulti(i[0]-1)),r+=this.listBonus[i[0]-1],u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.multiActivate)):(a=this.getDistanceCol(i[0]-1,i[i.length-1]-1),i.forEach(function(t){n.push(m.effectTextMergeMulti(t-1,a)),r+=m.listBonus[t-1]}))),n.length>0?(u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.multiCombine),[4,u.Windown.QuyBa.getPromiseAll(n)]):[3,2];case 1:s.sent(),s.label=2;case 2:return i.length>1?(h=this.getDistanceCol(i[0]-1,i[i.length-1]-1),d=this.listBottle[i[0]-1].getComponent(c.BottleItemQuyBa).lbMultiEffect.node,(f=cc.instantiate(d)).getComponent(l.default).string="x"+r,f.name="FakeMulti",f.setParent(this.node),f.active=!0,f.setPosition(h),cc.tween(f).to(.1,{scale:3.5}).to(.1,{position:this.nodeAddMoney.position},{easing:"cubicIn"}).call(function(){o(null)}).to(.1,{opacity:0,scale:4},{easing:"sineOut"}).call(function(){f.destroy()}).start()):o(null),[3,4];case 3:return y=s.sent(),p.Util.ThrowErrProsime(y),[3,4];case 4:return[2]}})})})},e.prototype.getListCollumWild=function(t,e){for(var n=[],o=Math.max.apply(Math,e.lsstack),i=0;i<=o;i++)null==t[i].find(function(t){return 11==t.i})||n.includes(i)||n.push(i);return n},e.prototype.getDistanceCol=function(t,e){var n=this.listBottle[t].getComponent(c.BottleItemQuyBa),o=this.listBottle[e].getComponent(c.BottleItemQuyBa),i=u.Windown.convertNodeInOtherNode(n.lbMultiEffect.node,this.node),r=u.Windown.convertNodeInOtherNode(o.lbMultiEffect.node,this.node),a=i.x+(r.x-i.x)/2;return cc.v2(a,i.y)},e.prototype.updatePositionBottle=function(t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,l,h,d,f,y=this;return s(this,function(s){switch(s.label){case 0:if(s.trys.push([0,2,,3]),this.updateBonus(t),2==t[3])return n(null),[2];for(e=0,o=function(t){var n=i.listBottle[t];if(cc.isValid(n)){i.listBottle[t]=null;var o=n.getComponent(c.BottleItemQuyBa),r=o.index-e;o.nextStep(i.listPosBottle[r],function(){o.index=r,y.listBottle[r]=n})}else e++},i=this,h=0;h<4;h++)o(h);return 0!=e&&u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.shakerMove),cc.log("updatePositionBottle step="+e),[4,u.Windown.QuyBa.getMakeDelay(.2).prosime];case 1:for(s.sent(),r=0,a=function(t){var e=l.listBottle[t];if(!cc.isValid(e)){var n=l.listBottle[4];if(cc.isValid(n))u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.shakerMove),n.getComponent(c.BottleItemQuyBa).jumpStep(l.listPosBottle[3],l.listPosBottle[t],function(){y.listBottle[t]=n,n.getComponent(c.BottleItemQuyBa).index=t,u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.shakerStop)}),l.listBottle[4]=null,r++;else{var o=u.Windown.QuyBa.asset.getMultiBottle();o.setParent(l.node);var i=o.getComponent(c.BottleItemQuyBa);i.bottleController=l,i.index=t,i.setMulti(l.listBonus[t]),o.setPosition(l.listPosBottle[4].x+100,l.listPosBottle[4].y),l.thanhBar.setSiblingIndex(l.node.children.length),cc.tween(o).delay((u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2)*r).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,{position:cc.v3(l.listPosBottle[4].x,l.listPosBottle[4].y)}).call(function(){i.jumpStep(y.listPosBottle[3],y.listPosBottle[t],function(){cc.log("Set Listbottle index:"+t),y.listBottle[t]=o,i.index=t,u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.shakerStop)})}).start(),r++}}},l=this,h=0;h<4;h++)a(h);return 0!=r?((d=u.Windown.QuyBa.asset.getMultiBottle()).setParent(this.node),d.setPosition(this.listPosBottle[4].x+100,this.listPosBottle[4].y),d.getComponent(c.BottleItemQuyBa).bottleController=this,d.getComponent(c.BottleItemQuyBa).index=4,d.getComponent(c.BottleItemQuyBa).setMulti(this.listBonus[this.listBonus.length-1]+2),this.thanhBar.setSiblingIndex(this.node.children.length),cc.tween(d).delay((u.Windown.QuyBa.stateSpin.isMaxSpeed?.15:.3)*r).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.15:.3,{position:cc.v3(this.listPosBottle[4].x,this.listPosBottle[4].y)}).call(function(){y.listBottle[4]=d,cc.log("Update PositionBottle1"),cc.log(y.listBottle),n(null)}).start()):(cc.log("Update PositionBottle2"),cc.log(this.listBottle),n(null)),[3,3];case 2:return f=s.sent(),p.Util.ThrowErrProsime(f),[3,3];case 3:return[2]}})})})]})})},e.prototype.resetBottle=function(){var t=this;this.listBottle.forEach(function(e,n){var o=e.getComponent(c.BottleItemQuyBa);n<4&&2!=t.listBonus[n]&&(o.multi=2,o.reset()),4==n&&4!=o.multi&&(o.multi=4,o.reset())})},e.prototype.setBonusHistory=function(t){for(var e=0;e<t.length;e++){var n=t[e];n>2&&this.listBottle[e].getComponent(c.BottleItemQuyBa).setMultiHistory(n)}},e.prototype.onClickTest=function(t,e){this.listBottle[parseInt(e)].getComponent(c.BottleItemQuyBa).takeBottleItem(2)},r([f(cc.Node)],e.prototype,"nodeAddMoney",void 0),r([f(cc.Node)],e.prototype,"thanhBar",void 0),r([f],e.prototype,"isHistory",void 0),r([d],e)}(cc.Component);n.BottleControllerQuyBa=y,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./BottleItemQuyBa":"BottleItemQuyBa"}],BottleItemQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"70d92OYmJJLgLDLyPcJY/Fx","BottleItemQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BottleItemQuyBa=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./QuyBaSpeedControl"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbMultiEffect=null,e.lbMultiNormal=null,e.animation=null,e.multi=2,e.initPosYMultiEff=23.584,e.bottleController=null,e.index=0,e}return i(e,t),e.prototype.start=function(){this.lbMultiEffect.node.active=!1,this.lbMultiNormal.node.active=!0},e.prototype.setMulti=function(t){this.multi=t,this.lbMultiNormal.string="x"+this.multi,this.lbMultiEffect.string="x"+this.multi,this.multi>2&&this.animation.play("BotleNormalGold")},e.prototype.setMultiHistory=function(t,e){var n=this;void 0===e&&(e=!1),2==t?this.animation.play("BotleNormal"):this.animation.play("BotleNormalGold"),this.scheduleOnce(function(){e?(n.lbMultiEffect.string="x"+t,n.lbMultiEffect.node.position=cc.v3(n.lbMultiEffect.node.position.x,110),n.lbMultiEffect.node.active=!0,n.lbMultiNormal.node.active=!1,n.lbMultiEffect.node.setScale(cc.v3(2,2))):(n.lbMultiNormal.string="x"+t,n.lbMultiEffect.node.active=!1,n.lbMultiNormal.node.active=!0)},1)},e.prototype.takeBottleItem=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e=this;return s(this,function(){try{cc.tween(this.lbMultiEffect.node).delay(u.Windown.QuyBa.stateSpin.isMaxSpeed?.15:.3).call(function(){e.lbMultiEffect.node.active=!0,e.lbMultiEffect.string="x"+t,e.lbMultiNormal.node.active=!1;var n=t>=4?"TakeBotleGold":"TakeBottle";e.animation.play(n),e.animation.getComponent(p.QuyBaSpeedControl).onPlay()}).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,{scale:2.4,position:cc.v3(this.lbMultiEffect.node.position.x,139)},{easing:"sineIn"}).start(),n(null)}catch(o){l.Util.ThrowErrProsime(o)}return[2]})})})},e.prototype.multiTakeEffect=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return a(t,void 0,void 0,function(){var t,n=this;return s(this,function(){try{t=u.Windown.convertNodeInOtherNode(this.lbMultiEffect.node,this.bottleController.node),this.lbMultiEffect.node.parent=this.bottleController.node,this.lbMultiEffect.node.opacity=255,this.lbMultiEffect.node.setPosition(t),cc.tween(this.lbMultiEffect.node).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.05:.1,{scale:3.5}).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,{position:this.bottleController.nodeAddMoney.position},{easing:"cubicIn"}).call(function(){n.bottleController.listBottle[n.bottleController.listBottle.indexOf(n.node)]=null,cc.log("set bang null1"),e(null)}).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,{opacity:0,scale:5},{easing:"cubicOut"}).delay(.25).call(function(){n.node.destroy(),n.lbMultiEffect.node.destroy()}).start()}catch(o){l.Util.ThrowErrProsime(o)}return[2]})})})]})})},e.prototype.multiMergeEffect=function(t){var e=this;return cc.log("multiMergeEffect"),new Promise(function(n){return a(e,void 0,void 0,function(){var e,o=this;return s(this,function(){try{(e=cc.instantiate(this.lbMultiEffect.node)).name="FakeMulti",e.setParent(this.bottleController.node),e.setPosition(u.Windown.convertNodeInOtherNode(this.lbMultiEffect.node,this.bottleController.node)),this.lbMultiEffect.node.active=!1,cc.tween(e).to(.1,{position:t},{easing:cc.easing.quadIn}).call(function(){n(null)}).to(.1,{opacity:0}).delay(.2).call(function(){o.bottleController.listBottle[o.bottleController.listBottle.indexOf(o.node)]=null}).delay(.25).call(function(){o.node.destroy(),e.destroy()}).start()}catch(i){l.Util.ThrowErrProsime(i)}return[2]})})})},e.prototype.nextStep=function(t,e){cc.tween(this.node).to(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,{position:t},{easing:cc.easing.sineIn}).call(function(){e()}).start()},e.prototype.jumpStep=function(t,e,n){this.node.runAction(cc.sequence(cc.jumpTo(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,cc.v2(t.x,t.y),50,1).easing(cc.easeSineIn(.3)),cc.moveTo(u.Windown.QuyBa.stateSpin.isMaxSpeed?.1:.2,e),cc.callFunc(n)))},e.prototype.reset=function(){this.animation.play("BottleReset"),this.node.getChildByName("ReadyState").active=4!=this.index,this.node.getChildByName("PrepareState").active=4==this.index},e.prototype.resetTextMulti=function(){cc.log("resetTextMulti"),this.lbMultiEffect.string="x"+this.multi,this.lbMultiNormal.string="x"+this.multi},r([f(c.default)],e.prototype,"lbMultiEffect",void 0),r([f(c.default)],e.prototype,"lbMultiNormal",void 0),r([f(cc.Animation)],e.prototype,"animation",void 0),r([d],e)}(cc.Component);n.BottleItemQuyBa=y,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./QuyBaSpeedControl":"QuyBaSpeedControl"}],CachChoiQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"75943vJ8ZFNxKZ0sEr1NaPz","CachChoiQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onClickClose=function(){var t=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).call(function(){cc.tween(t.node).to(.3,{opacity:0}).start()}).call(function(){t.node.destroy()}).start()},r([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],DetailHistoryQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"cba40rcoMxHqK84MTtvhloC","DetailHistoryQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("./ItemResultDetailQuyBa"),u=t("../../../Scritps/Windown"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.itemTemplate=null,e.lbTitle=null,e.lbTime=null,e.lbBet=null,e.lbWin=null,e.lbMNUser=null,e.lbCuocCoSo=null,e.isFreeSpin=!1,e}return i(e,t),e.prototype.onLoad=function(){this.itemTemplate.active=!1},e.prototype.show=function(t){var e=this;this.node.active=!0,this.node.setPosition(721.812,this.node.position.y),u.Windown.stopAllActionByTarget(this.node),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,cc.v2(0,0)),cc.fadeIn(.3).easing(cc.easeElasticIn(.3))));var n=t.date,o=t.infolog,i=JSON.parse(o);cc.log(o),this.isFreeSpin=i.numFreeSpin>0,0==i.agBet?this.lbTitle.string="Free spin":this.lbTitle.string="Spin normal",this.lbTime.string=u.Windown.formatDate(new Date(n),"dd/MM HH:mm:ss"),this.lbBet.string=u.Windown.formatNumber(20*i.agBet),this.lbWin.string=u.Windown.formatNumber(i.agWin),this.lbMNUser.string=u.Windown.formatNumber(i.agUser),this.lbCuocCoSo.string=u.Windown.formatNumber(i.agBet);for(var r=JSON.parse(i.arrBonus);this.parentItem.children.length>0;){var a=this.parentItem.children[0];a.removeFromParent(),a.destroy()}i.views.forEach(function(t,n){var o=e.parentItem.children[n];null==o&&((o=cc.instantiate(e.itemTemplate)).parent=e.parentItem,o.active=!0),o.active=!0;var a=o.getComponent(l.default);i.listItemWin[n]&&(i.listItemWin[n].lsIdItem=JSON.parse(i.listItemWin[n].lsIdItem),i.listItemWin[n].lsstack=JSON.parse(i.listItemWin[n].lsstack),i.listItemWin[n].lsAgWin=JSON.parse(i.listItemWin[n].lsAgWin)),a.init(t,i.listItemWin[n],r[n],i.agBet)});for(var s=i.views.length;s<this.parentItem.children.length;s++)this.parentItem.children[s].active=!1},e.prototype.onClickClose=function(){var t=this;u.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(721.812,0)),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){t.node.active=!1})))},r([c(cc.Node)],e.prototype,"parentItem",void 0),r([c(cc.Node)],e.prototype,"itemTemplate",void 0),r([c(cc.Label)],e.prototype,"lbTitle",void 0),r([c(cc.Label)],e.prototype,"lbTime",void 0),r([c(cc.Label)],e.prototype,"lbBet",void 0),r([c(cc.Label)],e.prototype,"lbWin",void 0),r([c(cc.Label)],e.prototype,"lbMNUser",void 0),r([c(cc.Label)],e.prototype,"lbCuocCoSo",void 0),r([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemResultDetailQuyBa":"ItemResultDetailQuyBa"}],EffectQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"41bc7anlZxB3J9Jd3DE1Qdt","EffectQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectQuyBa=void 0;var c=t("../../../Scritps/Game/GAME_TYPE"),l=t("./BigWinQuyBa"),u=t("./StartFreeSpinQuyBa"),p=t("./EndFreeSpinQuyBa"),h=t("./NearFSQuyBa"),d=t("../../../Scritps/Windown"),f=t("../../../Scritps/Util"),y=cc._decorator,m=y.ccclass,S=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listNodeBoxMoney=[],e.nodeEffNearWin=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.switchFS=function(t,e){t?(this.listNodeBoxMoney.forEach(function(t){t.setPosition(t.position.x,-609)}),d.Windown.QuyBa.switchBkgGame(!0,e)):(d.Windown.QuyBa.switchBkgGame(!1),this.listNodeBoxMoney.forEach(function(t){t.setPosition(t.position.x,-381.5)}))},e.prototype.showBigWin=function(t,e){var n=this;return new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r;return s(this,function(a){switch(a.label){case 0:return[4,d.Windown.loadRes(c.default.QuyBa.toString(),"Prefabs/BigWin",cc.Prefab)];case 1:return n=a.sent(),(i=cc.instantiate(n)).parent=this.node,r=i.getComponent(l.BigWinQuyBa),[4,d.Windown.QuyBa.getPromise(r.init(t,e))];case 2:return a.sent(),o(null),[2]}})})})},e.prototype.showTakeFreeSpin=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),d.Windown.QuyBa.stateSpin.freeSpinCache=t,d.Windown.QuyBa.stateSpin.activeAllSymbol(),d.Windown.QuyBa.listColum.forEach(function(t){t.getListSymbolResult().forEach(function(t){t.effectScaterShowFS()})}),d.Windown.loadRes(c.default.QuyBa.toString(),"Prefabs/ShowFreeSpin",cc.Prefab),[4,d.Windown.QuyBa.getMakeDelay(1.3).prosime];case 1:return a.sent(),d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.scatterWinHighligh),d.Windown.UIManager.showLoading(),[4,d.Windown.loadRes(c.default.QuyBa.toString(),"Prefabs/ShowFreeSpin",cc.Prefab)];case 2:return e=a.sent(),d.Windown.UIManager.hideLoading(),(o=cc.instantiate(e)).parent=this.node,i=o.getComponent(u.StartFreeSpinQuyBa),[4,d.Windown.QuyBa.getPromise(i.show(t,this.listNodeBoxMoney))];case 3:return a.sent(),d.Windown.QuyBa.setLbFreeSpinLeft(t),d.Windown.QuyBa.effect.switchFS(!0),[4,d.Windown.QuyBa.getMakeDelay(1).prosime];case 4:return a.sent(),n(null),[3,6];case 5:return r=a.sent(),f.Util.ThrowErrProsime(r),[3,6];case 6:return[2]}})})})},e.prototype.showEndFree=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t<1?(d.Windown.QuyBa.audio.stopBkgFs(),this.switchFS(!1),n(null),[2]):[4,d.Windown.loadRes(c.default.QuyBa.toString(),"Prefabs/EndFreeSpin",cc.Prefab)];case 1:return e=a.sent(),this.switchFS(!1),(o=cc.instantiate(e)).parent=this.node,i=o.getComponent(p.EndFreeSpinQuyBa),[4,d.Windown.QuyBa.getPromise(i.show(t))];case 2:return a.sent(),n(null),[3,4];case 3:return r=a.sent(),f.Util.ThrowErrProsime(r),[3,4];case 4:return[2]}})})})},e.prototype.activeNodeNearWin=function(t){d.Windown.QuyBa.activeMask(!0);for(var e=t;e<6;e++)d.Windown.QuyBa.activeMask(!1,e);if(null==this.nodeEffNearWin)for(this.nodeEffNearWin=cc.instantiate(d.Windown.QuyBa.asset.nearFS),this.nodeEffNearWin.setParent(d.Windown.QuyBa.parentEffect),e=0;e<t;e++)d.Windown.QuyBa.listColum[e].getListSymbolResult().forEach(function(t){return t.effectScaterShowFS()});this.nodeEffNearWin.getComponent(h.NearFSQuyBa).init(t)},e.prototype.offNearWin=function(){d.Windown.QuyBa.activeMask(!1),d.Windown.QuyBa.audio.stopEffect(d.Windown.QuyBa.audio.fastspinStart),this.nodeEffNearWin&&this.nodeEffNearWin.getComponent(h.NearFSQuyBa).effOff(),this.nodeEffNearWin=null;for(var t=0,e=d.Windown.QuyBa.listColum;t<e.length;t++)for(var n=0,o=e[t].getListSymbolResult();n<o.length;n++){var i=o[n];i.checkIsInView()&&i.effectScaterIdle()}},e.prototype.activeNearWinNoSap=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,l,u,p,h,y,m,S,v,g,b,w;return s(this,function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),t=d.Windown.QuyBa.stateSpin.curentCountScater>2&&!d.Windown.QuyBa.stateSpin.isMaxSpeed,d.Windown.QuyBa.nearWinNoSap.active||!t)return e(null),[2];for(d.Windown.QuyBa.nearWinNoSap.opacity=255,d.Windown.QuyBa.nearWinNoSap.active=!0,d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.heartbeatNoise),n=!1,d.Windown.QuyBa.stateSpin.offAllSymbol(!1),o=0,i=d.Windown.QuyBa.listColum;o<i.length;o++){for(S=i[o],r=0,a=S.getListSymbolResult();r<a.length;r++)if(!(b=a[r]).checkIsInView()){n=!0;break}if(n)break}if(!n)return e(null),[2];for(c=0,l=d.Windown.QuyBa.listColum;c<l.length;c++)for(S=l[c],u=0,p=S.getListSymbolResult();u<p.length;u++)(b=p[u]).checkIsInView()&&b.effectNearWinScater(!0);d.Windown.QuyBa.infoBar.showOneMoreScater(),h=0,s.label=1;case 1:return h<4?(d.Windown.QuyBa.audio.playEffectNoStop(d.Windown.QuyBa.audio.heartbeat),[4,d.Windown.QuyBa.getMakeDelay(.7).prosime]):[3,4];case 2:s.sent(),s.label=3;case 3:return h++,[3,1];case 4:for(d.Windown.QuyBa.activeMask(!1),y=0,m=d.Windown.QuyBa.listColum;y<m.length;y++)for(S=m[y],v=0,g=S.getListSymbolResult();v<g.length;v++)(b=g[v]).checkIsInView()&&b.effectScaterIdle();return e(null),[3,6];case 5:return w=s.sent(),f.Util.ThrowErrProsime(w),[3,6];case 6:return[2]}})})})},e.prototype.offNearWinNoSap=function(){d.Windown.QuyBa.nearWinNoSap.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){d.Windown.QuyBa.nearWinNoSap.active=!1})))},r([S([cc.Node])],e.prototype,"listNodeBoxMoney",void 0),r([m],e)}(cc.Component);n.EffectQuyBa=v,cc._RF.pop()},{"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./BigWinQuyBa":"BigWinQuyBa","./EndFreeSpinQuyBa":"EndFreeSpinQuyBa","./NearFSQuyBa":"NearFSQuyBa","./StartFreeSpinQuyBa":"StartFreeSpinQuyBa"}],EffectSymbolQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"9dab7hWY5RCSIXqKYlBqqSS","EffectSymbolQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectSymbolQuyBa=void 0;var c=t("../../../Scritps/Windown"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=null,e}return i(e,t),e.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.effTakeItem=function(t,e,n){return a(this,void 0,void 0,function(){var o,i,r;return s(this,function(a){switch(a.label){case 0:return this.node.opacity=0,this.node.runAction(cc.fadeIn(.2)),c.Windown.QuyBa.stateSpin.isMaxSpeed,(o=this.node.getChildByName("spine").getComponent(sp.Skeleton)).premultipliedAlpha=12!=t,(i=cc.find("item",this.node).getComponent(cc.Sprite)).spriteFrame=c.Windown.QuyBa.asset.getSfItemSymbol(t,e,!1),r=o,[4,c.Windown.QuyBa.asset.getSpine(t,e)];case 1:return r.skeletonData=a.sent(),this.animation.play("TakeSymbol"+e),n.node.active=!1,o.node.active=!0,i.node.active=!1,o.setAnimation(0,"win",!1),t<11&&cc.tween(o.node).to(.25,{scale:1.25},{easing:"cubicOut"}).start(),[2]}})})},e.prototype.effectRemoveTakeItem=function(){var t=this,e=(c.Windown.QuyBa.stateSpin.isMaxSpeed,this.node.getChildByName("spine"));cc.Tween.stopAllByTarget(e),cc.tween(e).to(.1,{scale:1.5,opacity:0}).call(function(){t.node.destroy()}).start()},e.prototype.effRemoveItem=function(t){var e=this,n=c.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,o=this.getComponent(cc.Animation);o.once(cc.Animation.EventType.FINISHED,function(){e.node.destroy()}),cc.js.formatStr("TakeSymbol%s_End",t),o.play(o.getClips()[0].name),null==o.getAnimationState(o.getClips()[0].name)&&(console.log("Null Eff Remove"),this.node.destroy()),o.getAnimationState(o.getClips()[0].name).speed=n},r([u],e)}(cc.Component));n.EffectSymbolQuyBa=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],EndFreeSpinQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"36a3b+1Ui9MDKniVxZK9Wn1","EndFreeSpinQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EndFreeSpinQuyBa=void 0;var c=t("../../../Scritps/DefineTs/REQUEST_CODE"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Other/LbMonoSpace"),h=t("../../../Scritps/Util"),d=t("../../../Scritps/Windown"),f=cc._decorator,y=f.ccclass,m=f.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btnThuThap=null,e.coinTemp=null,e.coinContainer=null,e.chipPool=null,e}return i(e,t),e.prototype.start=function(){this.spawnCoin()},e.prototype.onLoad=function(){this.chipPool=new cc.NodePool("ChipPool")},e.prototype.update=function(){},e.prototype.spawnCoin=function(){var t=this,e=cc.tween().call(function(){for(var e=function(){var e=t.getCoin();e.active=!0,e.setParent(t.coinContainer),e.setScale(.5),e.setPosition(cc.v3(0,0,0));var n=t.getRandomPosInCircle();cc.tween(e).delay(d.Windown.RandomFloatNumber(0,.75)).to(2,{position:cc.v3(n.x,n.y,0),scale:1.8}).call(function(){t.chipPool.put(e)}).start()},n=0;n<15;n++)e()}),n=cc.tween().delay(1);cc.tween(this.node).sequence(e,n).repeatForever().start()},e.prototype.getCoin=function(){return 0==this.chipPool.size()&&this.chipPool.put(cc.instantiate(this.coinTemp)),this.chipPool.get()},e.prototype.getRandomPosInCircle=function(){var t=Math.random()*Math.PI*2,e=1500*Math.cos(t),n=1500*Math.sin(t);return cc.v2(e,n)},e.prototype.show=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,p=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.bgmTotalwinMain),this.getComponent(cc.Animation).play("EndFreeSpin"),e=[],o=d.Windown.QuyBa.getMakeDelay(3),e.push(o),this.btnThuThap.active=!1,this.label.resetLb(),this.label.time=3,this.label.setMoney(t),i=function(){for(;e.length>0;)e.shift().cancle(!1);if(cc.tween(p.node).to(.3,{opacity:0}).call(function(){p.node.destroy(),n(null),d.Windown.QuyBa.audio.stopBkgFs()}).start(),t>1e4){var o=u.ConectManager.getIns().getSFSObj();o.putInt("gt",l.default.QuyBa),o.putInt("mt",t),o.putUtfString("nn",d.Windown.User.nickName),o.putUtfString("dt","fs"),u.ConectManager.getIns().sendRequest(c.REQUEST_CODE.AddBigWin,o)}},this.scheduleOnce(function(){p.node.once(cc.Node.EventType.TOUCH_END,function(){for(;e.length>0;)e.shift().cancle(!0)})},.5),[4,o.prosime];case 1:return s.sent(),this.node.targetOff(this),r=d.Windown.QuyBa.getMakeDelay(3),e.push(r),this.label.setMoneyNoTime(t),this.label.node.runAction(cc.sequence(cc.scaleTo(.15,.15),cc.scaleTo(.15,.7))),this.btnThuThap.active=!0,this.btnThuThap.opacity=0,cc.tween(this.btnThuThap).to(.5,{opacity:255}).start(),this.btnThuThap.once("click",i),d.Windown.QuyBa.audio.stopEffect(d.Windown.QuyBa.audio.bgmTotalwinMain),d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.bgmTotalwinEnd),[4,r.prosime];case 2:return s.sent(),i(),[3,4];case 3:return a=s.sent(),h.Util.ThrowErrProsime(a),[3,4];case 4:return[2]}})})})},r([m(p.default)],e.prototype,"label",void 0),r([m(cc.Node)],e.prototype,"btnThuThap",void 0),r([m(cc.Node)],e.prototype,"coinTemp",void 0),r([m(cc.Node)],e.prototype,"coinContainer",void 0),r([y],e)}(cc.Component);n.EndFreeSpinQuyBa=S,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],InfoBarControllerQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"7a6f1i+/aRN1rORVaehXMFP","InfoBarControllerQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoBarControllerQuyBa=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./QuyBaSpeedControl"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentContent=null,e.parentMoney=null,e.parentOneMore=null,e.listInfoBar=[],e.spMaskInfoBar=[],e.lbMoney=null,e.takeBigWin=null,e.spWin=null,e.spTotalWin=null,e.smallWin=null,e.isShowOneMoreScater=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.showRdContent(),this.parentContent.setPosition(cc.v3(360,this.parentContent.getPosition().y,0)),this.parentContent.runAction(cc.repeatForever(cc.sequence(cc.moveTo(65,cc.v2(-4779.665)),cc.callFunc(function(){t.parentContent.setPosition(306.493,t.parentContent.getPosition().y)}))))},e.prototype.showRdContent=function(){this.parentContent.active=!0,this.parentOneMore.active=!1,this.parentMoney.active=!1},e.prototype.reset=function(){cc.log("reset Info bar"),this.spMaskInfoBar.forEach(function(t){return t.node.active=!0}),this.smallWin.active=!1,this.getComponent(cc.Animation).play("NormalState")},e.prototype.showTakeMoneyTurn=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return[2,new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a;return s(this,function(){try{console.log("Infobar showTakeMoneyTurn: "+t+" : x "+e),cc.find("ParrentMOney/info_win",this.node).active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,n=u.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,i=u.Windown.QuyBa.curRoomBet*u.Windown.QuyBa.totalLineBet,r=t/i,1!=e&&u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeSmallwinMultiplied),r<7?(this.getComponent(cc.Animation).play("WinNormal"),this.node.getComponent(p.QuyBaSpeedControl).onPlay()):(this.takeBigWin.active=!0,this.takeBigWin.runAction(cc.fadeIn(.2)),this.getComponent(cc.Animation).playAdditive("BigWin"),this.node.getComponent(p.QuyBaSpeedControl).onPlay()),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(t),(a=this.lbMoney.node.parent).setScale(0,0,0),a.opacity=50,a.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3/n),cc.scaleTo(.5/n,1).easing(cc.easeBackOut())),cc.callFunc(function(){}))),o(null)}catch(s){l.Util.ThrowErrProsime(s)}return[2]})})})]})})},e.prototype.showTakeMoney=function(t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(n){return a(e,void 0,void 0,function(){var e,o;return s(this,function(i){switch(i.label){case 0:return u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeSmallwin),cc.find("ParrentMOney/info_win",this.node).active=!1,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(t),e=this.lbMoney.node.parent,o=u.Windown.QuyBa.curRoomBet*u.Windown.QuyBa.totalLineBet,t/o<10?(this.getComponent(cc.Animation).play("WinNormal"),this.node.getComponent(p.QuyBaSpeedControl).onPlay()):(this.getComponent(cc.Animation).playAdditive("BigWin"),this.node.getComponent(p.QuyBaSpeedControl).onPlay()),e.setScale(0,0,0),e.opacity=50,e.runAction(cc.spawn(cc.fadeIn(.3),cc.scaleTo(.5,1).easing(cc.easeBackOut()))),u.Windown.QuyBa.stateSpin.isMaxSpeed?[3,2]:[4,u.Windown.QuyBa.getMakeDelay(.75).prosime];case 1:return i.sent(),[3,4];case 2:return cc.log("Doi 2 Giay"),[4,u.Windown.QuyBa.getMakeDelay(.5).prosime];case 3:i.sent(),i.label=4;case 4:return n(null),[2]}})})})]})})},e.prototype.offOneMoreScater=function(){},e.prototype.showTotalMoney=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,10]),0==t?(n(null),[2]):(e=u.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,o=u.Windown.QuyBa.curRoomBet*u.Windown.QuyBa.totalLineBet,(i=t/o)<5?(this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.parentMoney.setScale(0,0,0),cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut(.3))),this.lbMoney.resetLb(),this.lbMoney.setMoneyNoTime(t),this.node.getComponent(cc.Animation).play("WinNormal"),this.node.getComponent(p.QuyBaSpeedControl).onPlay(),u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeInfobarTotalwin),[4,u.Windown.QuyBa.getMakeDelay(1/e).prosime]):[3,2]);case 1:return a.sent(),[3,8];case 2:return i<=10?(u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeInfobarTotalwinMedMain),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.node.getComponent(cc.Animation).play("BigWin"),this.node.getComponent(p.QuyBaSpeedControl).onPlay(),this.lbMoney.resetLb(),this.lbMoney.time=.5,this.lbMoney.setMoney(t),[4,u.Windown.QuyBa.getMakeDelay(.5).prosime]):[3,5];case 3:return a.sent(),u.Windown.QuyBa.audio.stopEffect(u.Windown.QuyBa.audio.prizeInfobarTotalwinMedMain),u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeInfobarTotalwinMedEnd),this.parentMoney.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),[4,u.Windown.QuyBa.getMakeDelay(.3).prosime];case 4:return a.sent(),[3,8];case 5:return[4,u.Windown.QuyBa.getPromise(u.Windown.QuyBa.effect.showBigWin(t,i))];case 6:return a.sent(),this.node.getComponent(cc.Animation).play("MegaWin"),this.node.getComponent(p.QuyBaSpeedControl).onPlay(),this.parentMoney.setScale(0,0,0),u.Windown.QuyBa.audio.playEffect(u.Windown.QuyBa.audio.prizeInfobarTotalwin),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeElasticOut(.3))),this.lbMoney.resetLb(),this.lbMoney.setMoneyNoTime(t),[4,u.Windown.QuyBa.getMakeDelay(1).prosime];case 7:a.sent(),a.label=8;case 8:return n(null),[3,10];case 9:return r=a.sent(),l.Util.ThrowErrProsime(r),[3,10];case 10:return[2]}})})})},e.prototype.showOneMoreScater=function(){this.isShowOneMoreScater||(this.isShowOneMoreScater=!0,this.parentContent.active=!1,this.parentOneMore.active=!0,this.parentMoney.active=!1,u.Windown.stopAllActionByTarget(this.parentOneMore),this.parentOneMore.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.15).easing(cc.easeSineInOut(.3)),cc.scaleTo(.3,1).easing(cc.easeSineInOut(.3))))))},r([f(cc.Node)],e.prototype,"parentContent",void 0),r([f(cc.Node)],e.prototype,"parentMoney",void 0),r([f(cc.Node)],e.prototype,"parentOneMore",void 0),r([f([cc.SpriteFrame])],e.prototype,"listInfoBar",void 0),r([f([cc.Sprite])],e.prototype,"spMaskInfoBar",void 0),r([f(c.default)],e.prototype,"lbMoney",void 0),r([f(cc.Node)],e.prototype,"takeBigWin",void 0),r([f(cc.SpriteFrame)],e.prototype,"spWin",void 0),r([f(cc.SpriteFrame)],e.prototype,"spTotalWin",void 0),r([f(cc.Node)],e.prototype,"smallWin",void 0),r([d],e)}(cc.Component);n.InfoBarControllerQuyBa=y,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./QuyBaSpeedControl":"QuyBaSpeedControl"}],ItemAddScatterQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"b619aqjRbNDvqLiHCc/gUGn","ItemAddScatterQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemAddScatterQuyBa=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._symbol=null,e.bkg=null,e.ske=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.init=function(t){this._symbol=t,this._symbol.node.on(cc.Node.EventType.POSITION_CHANGED,this.changePos,this),this.changParent(),this.ske.setAnimation(0,"spawn",!1),this.ske.addAnimation(0,"idle",!0)},e.prototype.showFS=function(){this.ske.setAnimation(0,"idle",!0)},e.prototype.idle=function(){this.ske.setAnimation(0,"idle",!0)},e.prototype.winFS=function(){this.ske.setAnimation(0,"win",!1),this.ske.addAnimation(0,"win_idle",!0)},e.prototype.changParent=function(){this.node.parent=this._symbol.node.parent,this.node.setSiblingIndex(1e3),this.changePos()},e.prototype.changePos=function(){this.node.setPosition(this._symbol.node.getPosition())},e.prototype.remove=function(t){var e=this;void 0===t&&(t=.2),this._symbol.node.targetOff(this),this.node.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.node.destroy()})))},e.prototype.effectNearWinNoSap=function(){this.ske.setAnimation(0,"idle",!0)},r([c(cc.Node)],e.prototype,"bkg",void 0),r([c(sp.Skeleton)],e.prototype,"ske",void 0),r([s],e)}(cc.Component);n.ItemAddScatterQuyBa=l,cc._RF.pop()},{}],ItemLichSuQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"b2bc7wuq7hOfYUAxr29y3Va","ItemLichSuQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../../../Scritps/DefineTs/REQUEST_CODE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Windown"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTime=null,e.lbBet=null,e.lbWin=null,e.data=null,e}return i(e,t),e.prototype.initItem=function(t){try{this.data=t;var e=this.data.date,n=this.data.bet,o=this.data.agWin;this.lbTime.string=p.Windown.formatDate(new Date(e),"dd/MM\nHH:mm:ss"),this.lbBet.string=p.Windown.formatNumber(n*p.Windown.QuyBa.totalLineBet),this.lbWin.string=p.Windown.formatNumber(o)}catch(i){console.error(i)}},e.prototype.onClick=function(){var t=u.ConectManager.getIns().getSFSObj();t.putInt("id",this.data.id),u.ConectManager.getIns().sendRequest(l.REQUEST_CODE.HistoryChiTietQuyBa,t,p.Windown.QuyBa.roomSFS),p.Windown.QuyBa.audio.playClick(),p.Windown.UIManager.showLoading()},r([c(cc.Label)],e.prototype,"lbTime",void 0),r([c(cc.Label)],e.prototype,"lbBet",void 0),r([c(cc.Label)],e.prototype,"lbWin",void 0),r([s],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],ItemResultDetailQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"706464HPHlF34YjjdFZTlwr","ItemResultDetailQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Scritps/Windown"),s=t("./BottleControllerQuyBa"),c=t("./BottleItemQuyBa"),l=t("./SymbolQuyBa"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentMul=null,e.lbTitleToHopWin=null,e.parentItemResult=null,e.parentItemWin=null,e.colorOf=null,e.bottleControl=null,e.playTable=[[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,4,4,6,6,8,10,20,30,0,0],[2,2,2,6,6,10,10,15,25,25,40,0,0],[3,3,3,8,8,12,12,20,30,50,50,0,0],[4,4,4,10,10,15,15,30,50,60,80,0,0]],e}return i(e,t),e.prototype.init=function(t,e,n,o){var i=this;if(e){this.lbTitleToHopWin.string="T\u1ed5 h\u1ee3p win",this.parentItemWin.active=!0;for(var r=this.parentItemWin.children[0],s=0,u=e.lsIdItem.length;s<u;s++){var p=e.lsIdItem[s];e.lsAgWin[s],null==(w=this.parentItemWin.children[s])&&((w=cc.instantiate(r)).parent=this.parentItemWin),w.active=!0,w.children[0].getComponent(l.SymbolQuyBa).result=p,w.children[0].getComponent(l.SymbolQuyBa).typeItem=l.TYPE_ITEM.NONE,w.children[0].getComponent(l.SymbolQuyBa).setImgResult(!1)}for(s=e.lsIdItem.length;s<this.parentItemWin.children.length;s++)this.parentItemWin.children[s].active=!1}else this.lbTitleToHopWin.string="-------------",this.parentItemWin.active=!1;var h=this.parentItemResult.children,d=h[0].children[0];t.forEach(function(t,e){var n=h[e],o=null;t.forEach(function(t,e){var i=n.children[e],r=t.i,a=t.t||1,s=t.s||1;null==i&&((i=cc.instantiate(d)).parent=n),i.getComponent(l.SymbolQuyBa).result=r,i.getComponent(l.SymbolQuyBa).typeItem=a,i.getComponent(l.SymbolQuyBa).sizeItem=s,i.getComponent(l.SymbolQuyBa).setImgResult(!1),i.children[0].height=165*s,i.children[1].height=165*s,i.height=165*s;var c=o?o.position.y+o.height/2*(2/3):-260;i.setPosition(0,c+i.height/2*(2/3)),o=i})}),n.forEach(function(t,e){i.bottleControl.listBottle[e].getComponent(c.BottleItemQuyBa).setMultiHistory(t)});var f=1;if(e){var y=e.lsIdItem,m=e.lsstack,S=e.lsAgWin,v=Math.max.apply(Math,m);for(s=0;s<t.length;s++){var g=t[s];if(s<=v)for(var b=0;b<g.length;b++)if(11==g[b].i){f+=n[s-1];break}}for(f=1==f?1:f-1,cc.log("multiBonus="+f),s=0,u=y.length;s<u;s++){var w,B="",W=1,_=0;for(b=0;b<m[s]+1;b++){for(var C=h[b],Q=0,I=0,E=C.children.length;I<E;I++)t[b][I].i!=y[s]&&11!=t[b][I].i||(C.children[I],Q++),11==t[b][I].i&&this.bottleControl.listBottle[b-1].getComponent(c.BottleItemQuyBa).setMultiHistory(n[b-1],!0);B+=Q+"x",Q>=1&&(W*=Q)}B+=this.playTable[m[s]][y[s]]+"x"+a.Windown.formatNumber(o),_=0==_?1:_,B+="x"+f,(w=this.parentItemWin.children[s]).children[1].getComponent(cc.Label).string="B\u1ed9 "+(m[s]+1),w.children[2].getComponent(cc.Label).string=W+" \u0111\u01b0\u1eddng",w.children[3].getComponent(cc.Label).string=B+"= "+a.Windown.formatNumber(S[s]*f)}}this.bottleControl.listBottle[4].getComponent(c.BottleItemQuyBa).setMultiHistory(n[3]+2),this.parentMul.children[0].children[1].getComponent(cc.Label).string=""+f},e.prototype.getArrSf=function(t,e,n){return[a.Windown.QuyBa.asset.getSfBkg(t,e,n),a.Windown.QuyBa.asset.getSfItemSymbol(t,e)]},r([h(cc.Node)],e.prototype,"parentMul",void 0),r([h(cc.Label)],e.prototype,"lbTitleToHopWin",void 0),r([h(cc.Node)],e.prototype,"parentItemResult",void 0),r([h(cc.Node)],e.prototype,"parentItemWin",void 0),r([h(cc.Color)],e.prototype,"colorOf",void 0),r([h(s.BottleControllerQuyBa)],e.prototype,"bottleControl",void 0),r([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./BottleControllerQuyBa":"BottleControllerQuyBa","./BottleItemQuyBa":"BottleItemQuyBa","./SymbolQuyBa":"SymbolQuyBa"}],ItemSlotQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"2b413mCGP5KF4Sm+0q71+X9","ItemSlotQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemSlotQuyBa=n.TYPE_MOVE=void 0;var c=t("../../../Scritps/DefineTs/StateReelSlot"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./SymbolQuyBa"),h=cc._decorator,d=h.ccclass,f=h.property;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD_NEW=1]="ADD_NEW"})(n.TYPE_MOVE||(n.TYPE_MOVE={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.result=[],e.listItemSymbol=[],e.parentItemFront=null,e.parentItemActive=null,e.funReject=null,e.resolve=null,e.stateWhel=c.default.WAITING,e.resultTemp=[],e.listResultRandomCache=[],e.listIconEff=[],e.nodeWildDT=null,e.nodeWildShowDT=null,e.isScater=!1,e.index=-1,e.indexNodeFirt=0,e.isMoveSlowDown=!1,e.deltaSlowDown=0,e.listNumMutilWild=[],e.indexMaxWild=0,e.sizeSymbol=7,e.parentItem=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.getListSymbolResult=function(){var t=[],e=this.getListSymbol();return this.result.forEach(function(n,o){t.push(e[o+1])}),t},e.prototype.getListSymbol=function(){return this.listItemSymbol},e.prototype.initParent=function(){this.parentItemFront=cc.instantiate(this.parentItem),this.parentItemFront.setPosition(u.Windown.convertNodeInOtherNode(this.parentItem,u.Windown.QuyBa.parentItemFront)),this.parentItemFront.parent=u.Windown.QuyBa.parentItemFront,this.parentItemActive=cc.instantiate(this.parentItem),this.parentItemActive.setPosition(u.Windown.convertNodeInOtherNode(this.parentItem,u.Windown.QuyBa.parentItemActive)),this.parentItemActive.parent=u.Windown.QuyBa.parentItemActive},e.prototype.forceStopSpin=function(t,e){return this.funReject&&this.funReject(),t&&(this.offNearWin(),u.Windown.QuyBa.audio.stopEffect(u.Windown.QuyBa.audio.fastspinEnd),this.isMoveSlowDown=!1),this.stopSpinIsFastSpin(t,e)},e.prototype.setResultFirtGame=function(t){var e=t.slice(1,t.length-1);this.setResult(e),this.initParent();for(var n=this.parentItem.children,o=0,i=this.sizeSymbol;o<i;o++){var r=n[o];null==r&&((r=this.getSymbol()).parent=this.parentItem),r.setSiblingIndex(o),r.setPosition(cc.v3(0,0,0));var a=r.getComponent(p.SymbolQuyBa);a.setItemColum(this),a.setResult(t[o]),null!=t[o]&&12==t[o].i&&(a.bgScatter.active=!0,a.bgScatter.opacity=255)}this.initListSymbol(),this.getListSymbol().forEach(function(t){t.initPosStartGame()})},e.prototype.initListSymbol=function(){for(var t=[],e=0,n=this.parentItem.children;e<n.length;e++){var o=n[e].getComponent(p.SymbolQuyBa);o&&t.push(o)}this.listItemSymbol=t},e.prototype.setResult=function(t){this.result=t,this.resultTemp=t.slice()},e.prototype.getSymbol=function(){return u.Windown.QuyBa.asset.getSymbol()},e.prototype.runSpin=function(){this.stateWhel=c.default.RUN,this.getListSymbol().forEach(function(t){t.runSpin()})},e.prototype.stopSpin=function(t,e){var n=this;return new Promise(function(o,i){return a(n,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,7,,8]),this.setResult(e),this.funReject=i,this.isScater=t,this.resolve=o,t?[3,2]:[4,u.Windown.QuyBa.getMakeDelay(.1-.01*this.index).prosime];case 1:r.sent(),o(null),r.label=2;case 2:return t?[4,u.Windown.QuyBa.getMakeDelay(.5).prosime]:[3,5];case 3:return r.sent(),this.activeNodeNearWin(),this.runSlowDownActicon(),[4,u.Windown.QuyBa.getMakeDelay(.5).prosime];case 4:return r.sent(),this.stateWhel=c.default.SHOW_EFFECT,[3,6];case 5:this.stateWhel=c.default.STOP,this.recaculateSpeedSpin(!1),r.label=6;case 6:return[3,8];case 7:return n=r.sent(),l.Util.ThrowErrProsime(n),[3,8];case 8:return[2]}})})})},e.prototype.getIdSymbolResult=function(){return this.stateWhel==c.default.STOP&&this.resultTemp.pop()||this.getRandomResult()},e.prototype.getRandomResult=function(t){(this.index<2||6==this.index)&&(t=1);var e=Object.create(null);return t?(e.s=t,e.i=u.Windown.RandomNumber(0,13)):(e.i=u.Windown.RandomNumber(0,13),e.i<12?e.s=u.Windown.RandomNumber(1,5):e.s=1),11!=e.i&&12!=e.i||(e.t=u.Windown.RandomNumber(1,3)),e},e.prototype.recaculateSpeedSpin=function(t){var e=this.getListSymbol(),n=e[0].node.getPosition().y,o=-this.node.height-e[0].node.height*(2/3)/2,i=Math.abs(o-n),r=.3;t&&(r=2),e.forEach(function(t){t.stopSpin(cc.moveBy(r,cc.v2(0,-i)).easing(cc.easeSineOut()))})},e.prototype.runSlowDownActicon=function(){this.getListSymbol().forEach(function(t){u.Windown.stopAllActionByTarget(t.node)}),this.isMoveSlowDown=!0,this.deltaSlowDown=3500},e.prototype.activeNodeNearWin=function(){u.Windown.QuyBa.effect.activeNodeNearWin(this.index)},e.prototype.reSetResultColum=function(){var t=this.getListSymbol();if(t.length>this.sizeSymbol)for(;t.length>this.sizeSymbol;)u.Windown.QuyBa.asset.putSymbol(t[t.length-1].node),t.pop();else if(t.length<this.sizeSymbol)for(var e=t.length;e<this.sizeSymbol;e++){var n=this.getSymbol();this.parentItem.addChild(n);var o=n.getComponent(p.SymbolQuyBa);o.setItemColum(this),t.push(o)}this.result.forEach(function(e,n){t[n+1].setResult(e)}),e=this.result.length+1;for(var i=t.length;e<i;e++)t[e].setResult(t[e].objSFS);t.forEach(function(t){t.canRun=!1,u.Windown.stopAllActionByTarget(t.node),t.initPosStartGame()})},e.prototype.stopSpinIsFastSpin=function(t,e){var n=this;return new Promise(function(t){n.stateWhel!=c.default.END?(n.setResult(e),n.stateWhel=c.default.END,u.Windown.stopAllActionByTarget(n.parentItem),n.parentItem.setPosition(cc.v3(n.parentItem.getPosition().x,n.node.height/2,0)),n.reSetResultColum(),u.Windown.QuyBa.updateNewTotalLine(n.result.length),n.isMoveSlowDown=!1,n.parentItem.setPosition(cc.v3(n.parentItem.getPosition().x,n.parentItem.getPosition().y+20,0)),n.parentItem.runAction(cc.sequence(cc.moveBy(.04,cc.v2(0,-20)).easing(cc.easeSineIn()),cc.callFunc(function(){n.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),t(null)})))):t(null)})},e.prototype.offNearWin=function(){5==this.index&&u.Windown.QuyBa.effect.offNearWin()},e.prototype.effStopSpin=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){try{if(this.stateWhel==c.default.END)return[2];this.stateWhel=c.default.END,u.Windown.stopAllActionByTarget(this.parentItem),this.reSetResultColum(),this.sizeSymbol>6&&(u.Windown.QuyBa.audio.playStopAudio(),u.Windown.QuyBa.updateNewTotalLine(this.result.length)),this.funReject=null,this.isMoveSlowDown=!1,this.isScater?(this.offNearWin(),this.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),this.resolve&&this.resolve(null),this.resolve=null):this.parentItem.runAction(cc.sequence(cc.moveBy(.05,cc.v2(0,10)),cc.moveBy(.1,cc.v2(.05,-10)),cc.callFunc(function(){t.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()})})))}catch(e){l.Util.ThrowErrProsime(e)}return[2]})})},e.prototype.effectStartSpin=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.checkAndRemoveItem=function(t){for(var e=!1,n=this.getListSymbol().slice(1,this.result.length+1),o=0;o<n.length;o++)n[o].result!=t&&11!=n[o].result||(1==n[o].typeItem?(n[o].removeItem(),this.result[o]=null):(n[o].effectRemoveItem(),n[o].isShuff=!0,n[o].actionRandomNewResultNextKhung(11)),e=!0);e&&(this.result=this.result.filter(function(t){return null!=t}))},e.prototype.checkItemWin=function(t){return a(this,void 0,void 0,function(){var e,n,o,i,r,a,c,p;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e=this.getListSymbolResult(),n=u.Windown.QuyBa.stateSpin.isMaxSpeed?0:.05,[4,u.Windown.QuyBa.getMakeDelay(this.index*n).prosime];case 1:for(s.sent(),o=function(e){if((e.result==t||11==e.result)&&(e.takeItem(),11==e.result&&!cc.isValid(e.efTakeWild))){var n=u.Windown.QuyBa.asset.getNodeTakeWild();n.setParent(u.Windown.QuyBa.parentMultiEffect),n.setPosition(u.Windown.convertNodeInOtherNode(u.Windown.QuyBa.multiBottleControl.getBottle(i.index-1),u.Windown.QuyBa.parentMultiEffect)),n.getComponent(cc.Animation).once(cc.Animation.EventType.FINISHED,function(){e.efTakeWild=null,n.destroy()}),e.efTakeWild=n;var o=cc.Vec2.distance(u.Windown.convertNodeInOtherNode(e.node,u.Windown.QuyBa.multiBottleControl.node),u.Windown.QuyBa.multiBottleControl.getBottle(i.index-1).getPosition()),r=n.children[0];r.setContentSize(cc.size(r.width,r.height*o/350)),n.getComponent(cc.Animation).play("TakeWild")}},i=this,r=0,a=e;r<a.length;r++)c=a[r],o(c);return[3,3];case 2:return p=s.sent(),l.Util.ThrowErrProsime(p),[3,3];case 3:return[2]}})})},e.prototype.addNewListSymbol=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,c,h,d,f,y,m,S,v,g;return s(this,function(s){switch(s.label){case 0:for(s.trys.push([0,6,,7]),u.Windown.QuyBa.stateSpin.curentCountScater,e=u.Windown.QuyBa.stateSpin.isMaxSpeed?3:1,(o=this.result.slice()).reverse(),this.setResult(t),i=this.result.length-o.length,o.length=this.result.length,o.reverse(),r=this.getListSymbol(),a=r[0],c=a,h=0;h<i;h++)(d=u.Windown.QuyBa.asset.getSymbol()).setPosition(0,d.position.y),this.parentItem.addChild(d),d.setSiblingIndex(0),(S=d.getComponent(p.SymbolQuyBa)).setItemColum(this),this.getListSymbol().unshift(S);for(f=this.getListSymbol(),y=[],f[0].setResult(this.getRandomResult()),this.result.forEach(function(t,e){var n=f[e+1];t.t,n.typeItem,n.isShuff||n.setResult(t)}),a.node.setPosition(a.node.position.x,c.node.height*(2/3)/2),m=a.getIndexOf()-1;m>=0;)S=f[m],v=S.node,S.node.setPosition(S.node.position.x,a.node.position.y+c.node.height*(2/3)/2+v.height*(2/3)/2),a=S,m--;return y.length<1?1!=e?[3,2]:[4,u.Windown.QuyBa.getMakeDelay(.5).prosime]:[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return[4,u.Windown.QuyBa.getPromiseAll(y)];case 4:s.sent(),s.label=5;case 5:return n(null),[3,7];case 6:return g=s.sent(),l.Util.ThrowErrProsime(g),[3,7];case 7:return[2]}})})})},e.prototype.moveSymbolInView=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,p,h,d;return s(this,function(){try{if(t=u.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,this.getListSymbol().forEach(function(t){t.offItem()}),(n=this.getListSymbol().filter(function(t){return t.checkIsInView()})).reverse(),o=this.getListYByListResult(),n.length>0)for(i=0,r=n.length;i<r;i++)a=n[i],c=a.getIndexOf()-1,p=o[c],Math.abs(p-a.node.position.y)>2&&(h=cc.moveTo(.25/t,cc.v2(a.node.position.x,p)).easing(cc.easeSineIn()),d=cc.sequence(cc.moveBy(.075/t,cc.v2(0,17)),cc.moveBy(.075/t,cc.v2(0,-17)),cc.callFunc(function(){})),a.node.runAction(cc.sequence(h,cc.callFunc(function(){u.Windown.QuyBa.audio.playSymCollapse()}),d)));e(null)}catch(s){l.Util.ThrowErrProsime(s)}return[2]})})})},e.prototype.getListYByListResult=function(){var t=[],e=this.getListSymbol()[0].size.height*(2/3),n=this.getListSymbol().slice(1,this.result.length+1),o=-n[0].sizeItem*e/2;t.push(o);for(var i=1;i<n.length;i++)o-=n[i-1].sizeItem*e/2+n[i].sizeItem*e/2,t.push(o);return t},e.prototype.moveSymbolNew=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,p;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t=this.getListSymbol().filter(function(t){return t.checkIsInView()}),n=u.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,o=this.getListSymbolResult(),i=[],r=o.reverse(),(a=this.getListYByListResult()).reverse(),c=0,r.forEach(function(e,o){var r=e.node,s=a[o];!t.includes(e)&&Math.abs(s-r.position.y)>2&&i.push(new Promise(function(t){var e=cc.moveTo(.25/n,cc.v2(r.position.x,s)).easing(cc.easeSineIn()),i=cc.sequence(cc.moveBy(.075,cc.v2(0,17)),cc.moveBy(.075,cc.v2(0,-17)),cc.callFunc(function(){t(null)}));r.runAction(cc.sequence(cc.delayTime(c),e,cc.callFunc(function(){}),i)),1==n&&(c+=u.Windown.RandomNumber(0,4)<2?0:.05*o)}))}),i.length>0&&1==n&&u.Windown.QuyBa.nearWinNoSap.active?(u.Windown.QuyBa.audio.playEffectNoStop(u.Windown.QuyBa.audio.heartbeatSlowdrop),[4,u.Windown.QuyBa.getMakeDelay(.5).prosime]):[3,2];case 1:s.sent(),s.label=2;case 2:return[4,u.Windown.QuyBa.getPromiseAll(i)];case 3:return s.sent(),t.forEach(function(t){t.offItem()}),this.reSetResultColum(),e(null),[3,5];case 4:return p=s.sent(),l.Util.ThrowErrProsime(p),[3,5];case 5:return[2]}})})})},e.prototype.update=function(t){var e=this;this.isMoveSlowDown&&(this.getListSymbol().forEach(function(n){n.node.setPosition(n.node.position.x,n.node.position.y-t*e.deltaSlowDown)}),this.deltaSlowDown>500?this.deltaSlowDown-=1800*t:this.deltaSlowDown<1e3&&(this.stateWhel=c.default.STOP,this.isMoveSlowDown=!1,this.recaculateSpeedSpin(!0)))},r([f],e.prototype,"sizeSymbol",void 0),r([f(cc.Node)],e.prototype,"parentItem",void 0),r([d],e)}(cc.Component);n.ItemSlotQuyBa=y,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./SymbolQuyBa":"SymbolQuyBa"}],LichSuQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"a31b67YozlLjIsM8esGRVzr","LichSuQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../../../Scritps/DefineTs/REQUEST_CODE"),u=t("../../../Scritps/Popup/PageData/PageData"),p=t("./ItemLichSuQuyBa"),h=t("./DetailHistoryQuyBa"),d=t("../../../Scritps/Windown"),f=t("../../../Scritps/Network/ConectManager"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageDate=null,e.detail=null,e.listData=null,e.maxRow=11,e}return i(e,t),e.prototype.onLoad=function(){this.detail.node.active=!1},e.prototype.show=function(){this.node.active=!0,this.reset(),this.node.setPosition(this.node.getPosition().x,-1280,0),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:cc.v3(0,0,0)}).start(),f.ConectManager.getIns().sendRequest(l.REQUEST_CODE.HistoryQuyBa,null,d.Windown.QuyBa.roomSFS),d.Windown.UIManager.showLoading()},e.prototype.responseServer=function(t){d.Windown.UIManager.hideLoading(),console.log("Reponse History M: "+d.Windown.SFSObjToJson(t));var e=JSON.parse(d.Windown.SFSObjToJson(t));if(e.errorMessage)d.Windown.Dialog.showLog(e.errorMessage);else{var n=e.history;this.initWithListData(n)}},e.prototype.responseServerChiTiet=function(t){var e=JSON.parse(d.Windown.SFSObjToJson(t));d.Windown.UIManager.hideLoading(),this.showDetail(e)},e.prototype.initWithListData=function(t){this.pageDate.content.children;var e=t.length,n=Math.floor(e/this.maxRow);e%this.maxRow>0&&n++,0==n&&(n=1),this.pageDate.setTotalPage(n),this.listData=t,this.onChangePage(1)},e.prototype.onChangePage=function(t){for(var e=this.pageDate.content,n=e.children,o=n[0],i=(t-1)*this.maxRow,r=0,a=this.maxRow;r<a;r++){var s=n[r];if(i<this.listData.length){null==s&&(s=cc.instantiate(o),e.addChild(s),s.setPosition(cc.v3(s.getPosition().x,-(r+1)*s.height+s.height/2,0)));var c=this.listData[i];s.getComponent(p.default).initItem(c),s.active=!0,i++}else{if(!s)break;s.active=!1}}},e.prototype.showDetail=function(t){this.detail.show(t)},e.prototype.resetContent=function(){for(var t=this.pageDate.content.children,e=0,n=t.length;e<n;e++)t[e].active=!1},e.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},e.prototype.onClickClose=function(){var t=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:cc.v3(0,-1280,0)}).call(function(){t.node.active=!1}).start()},r([c(u.default)],e.prototype,"pageDate",void 0),r([c(h.default)],e.prototype,"detail",void 0),r([s],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryQuyBa":"DetailHistoryQuyBa","./ItemLichSuQuyBa":"ItemLichSuQuyBa"}],NearFSQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"5a6a38e14tFiLLUAL5+f7JB","NearFSQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NearFSQuyBa=void 0;var a=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e._curItem=null,e.indexCol=0,e}return i(e,t),e.prototype.init=function(t){if(this.indexCol=t,this._curItem){var e=this._curItem;e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.destroy()})))}a.Windown.QuyBa.audio.playEffect(a.Windown.QuyBa.audio.fastspinStart);var n=a.Windown.QuyBa.listColum[t],o=cc.instantiate(this.item);o.parent=this.node,o.opacity=0,o.runAction(cc.fadeIn(.3)),o.setPosition(a.Windown.convertNodeInOtherNode(n.node,this.node)),this._curItem=o},e.prototype.effOff=function(){if(this._curItem){5==this.indexCol&&a.Windown.QuyBa.audio.playEffect(a.Windown.QuyBa.audio.fastspinEnd);var t=this._curItem;t.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.destroy()})))}},r([l(cc.Prefab)],e.prototype,"item",void 0),r([c],e)}(cc.Component);n.NearFSQuyBa=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],QuyBaSpeedControl:[function(t,e,n){"use strict";cc._RF.push(e,"e6062Bu8sRJW6+O5BYpzQ0p","QuyBaSpeedControl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.QuyBaSpeedControl=void 0;var a=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalSpeed=1,e.animation=null,e.spine=null,e.isSpine=!1,e}return i(e,t),e.prototype.onLoad=function(){this.isSpine?this.spine=this.node.getComponent(sp.Skeleton):this.animation=this.node.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.onPlay=function(){null!=this.animation&&(this.animation.getAnimationState(this.animation.currentClip.name).speed=a.Windown.QuyBa.stateSpin.isMaxSpeed?3:this.normalSpeed)},e.prototype.onEnable=function(){cc.isValid(this.spine)&&(this.spine.timeScale=a.Windown.QuyBa.stateSpin.isMaxSpeed?3:1)},r([l],e.prototype,"isSpine",void 0),r([c],e)}(cc.Component);n.QuyBaSpeedControl=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],QuyBaView:[function(t,e,n){"use strict";cc._RF.push(e,"8a495TlUTZJK4f3+JcYMrbe","QuyBaView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.QuyBaView=void 0;var c=t("../../../Scritps/Game/GAME_TYPE"),l=t("./EffectQuyBa"),u=t("./SpinNormalQuyBa"),p=t("./ItemSlotQuyBa"),h=t("../../../Scritps/DefineTs/EVENT_MANAGER"),d=t("../../../Scritps/DefineTs/TextDefine"),f=t("../../../Scritps/DefineTs/StateReelSlot"),y=t("./AssetQuyBa"),m=t("./InfoBarControllerQuyBa"),S=t("../../../Scritps/Obs/LbMoneyChange"),v=t("../../../Scritps/Other/LbMonoSpace"),g=t("./BottleControllerQuyBa"),b=t("./LichSuQuyBa"),w=t("./AudioQuyBa"),B=t("../../../Scritps/Windown"),W=t("../../../Scritps/Network/ConectManager"),_=t("../../../Scritps/DefineTs/REQUEST_CODE"),C=t("../../../Scritps/Util"),Q=cc._decorator,I=Q.ccclass,E=Q.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bkgSprite=null,e.effect=null,e.parentMask=null,e.btnSpin=null,e.lb_totalBet=null,e.lb_FSLeft=null,e.asset=null,e.infoBar=null,e.multiBottleControl=null,e._popupLichSu=null,e.audio=null,e.parentItem=null,e.parentItemFront=null,e.parentItemActive=null,e.listNodeDeactive=[],e.parentEffect=null,e.parentMultiEffect=null,e.nearWinNoSap=null,e.labelChipReviceInBox=null,e.lb_CountAuto=null,e.lb_TotalLine=null,e.nodeBtnSeting=null,e.toggleTurbo=null,e.nodeBtnPlay=null,e.nodeChooseAuto=null,e.btnStartAuto=null,e.isDoneStartSpin=!1,e.isShowBtnPlay=!0,e.gameType=-1,e.dataFinish=null,e.stateSpin=null,e.listColum=[],e.roomSFS=null,e.listConfigBet=[],e.listResult=null,e.listResultConvert=[],e.curRoomBet=50,e.totalLineBet=20,e.stateReel=0,e.currentTotalLine=1,e.isMouseEnterSpin=!1,e.sfsObjTest=null,e.sfsObjTest2=null,e.funEnd=null,e.sfs=null,e}return i(e,t),e.prototype.onLoad=function(){B.Windown.QuyBa=this,cc.log("start Quy Ba"),this.gameType=c.default.QuyBa,this.gameType=c.default.QuyBa,this.sfs=W.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(h.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.stateReel=f.default.WAITING,this.stateSpin=new u.SpinNormalQuyBa,this.sendJoinRoom(),this.activeMask(!1),this.registerBtnSpinEffect(),cc.game.setFrameRate(60)},e.prototype.start=function(){var t=this;this.setupView(),this.initItem(),this.switchBkgGame(!1),cc.sys.isNative||this.scheduleOnce(function(){return a(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,B.Windown.loadBundle(c.default.QuyBa.toString())];case 1:return t.sent().loadDir("Spine",function(){}),[2]}})})},3),this.asset.preloadTakeSymbol()},e.prototype.onJoinRoom=function(t){cc.log("onJoinRoom "+t.room.groupId);var e=t.room;if("SlotBar"==e.groupId){this.roomSFS=e,B.Windown.UIManager.hideLoadingData();var n=e.getVariable("cf").value;cc.log(n);var o=[],i=JSON.parse(n);for(var r in i){var a=Object.create(null);a.bet=parseInt(r),a.perJp=i[r].percentPot/100,o.push(a)}o.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=o,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=B.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),B.Windown.UIManager.hideLoading(),B.Windown.UIManager.hideLoadingData(),B.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.userExitRoom=function(t){cc.log("user exit room"),"SlotBar"==t.room.groupId&&t.user.isItMe&&cc.director.loadScene("main")},e.prototype.extResponse=function(t){var e=t.cmd,n=t.params;switch(e){case _.REQUEST_CODE.SpinQuyBa:this.handleFinish(n);break;case _.REQUEST_CODE.HistoryQuyBa:this._popupLichSu&&this._popupLichSu.responseServer(n);break;case _.REQUEST_CODE.HistoryChiTietQuyBa:this._popupLichSu&&this._popupLichSu.responseServerChiTiet(n);break;case _.REQUEST_CODE.GetIdJoinRoom:cc.log("extResponse:",B.Windown.SFSObjToJson(n))}},e.prototype.onCreateError=function(){cc.log("creat errr"),B.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),B.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM)},e.prototype.onJoinGame=function(t){var e=[],n=t;for(var o in n){var i=Object.create(null);i.bet=parseInt(o),i.perJp=n[o].percentPot/100,e.push(i)}e.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=e,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=B.Windown.formatNumber(this.totalLineBet*this.curRoomBet)},e.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return W.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),this.sfsObjTest=null,void cc.log("send test ne");if(null!=this.sfsObjTest2)return W.ConectManager.getIns().sendRequest("testSpin2",this.sfsObjTest2,this.roomSFS),this.sfsObjTest2=null,void cc.log("send test ne");var t=W.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),cc.log("sendClickSpin:",t),W.ConectManager.getIns().sendRequest(_.REQUEST_CODE.SpinQuyBa,t,this.roomSFS),cc.log(_.REQUEST_CODE.SpinQuyBa)},e.prototype.onClickSendFixData=function(){var t=Object.create(null);t.view=[[{i:12},{i:8},{i:5},{i:0},{i:1}],[{i:0,s:2,t:2},{i:12,s:2},{i:9}],[{i:1,s:2,t:2},{i:0,s:2,t:2},{i:1}],[{i:12},{i:0,s:2,t:2},{i:2},{i:6}],[{i:12,s:2},{i:10},{i:7},{i:2}],[{i:10},{i:0},{i:7},{i:10},{i:3}]],t.bet=this.curRoomBet,this.sfsObjTest=t,this.onClickBtnSpin()},e.prototype.handleHistory=function(t){this._popupLichSu&&this._popupLichSu.responseServer(t)},e.prototype.handleHistoryInfoM=function(t){this._popupLichSu&&this._popupLichSu.responseServerChiTiet(t)},e.prototype.registerBtnSpinEffect=function(){},e.prototype.sendJoinRoom=function(){var t=W.ConectManager.getIns().getSFSObj();cc.log("sendJoinRoom:"+c.default.QuyBa),t.putInt("gameType",c.default.QuyBa),t.putInt("roomType",-1),t.putInt("mark",-1),W.ConectManager.getIns().sendRequest(_.REQUEST_CODE.GetIdJoinRoom,t)},e.prototype.onDestroy=function(){B.Windown.QuyBa=null,this.dataFinish&&(B.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),B.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),B.Windown.UIManager.changeRotation(),this.clearAllMakeDelay()},e.prototype.onDisconnect=function(){cc.log("disconnect"),B.Windown.UIManager.hideLoading(),B.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.handleResponse=function(t,e){console.log("handleResponse: "+JSON.stringify(t)),console.log("handleResponse: "+e)},e.prototype.handleFinish=function(t){var e=this,n=JSON.parse(B.Windown.SFSObjToJson(t));if(this.isDoneStartSpin){if(console.log("HandleFinish stringtify: "+JSON.stringify(n)),n.errorMessage)return this.stateSpin.handleErrSpin(),B.Windown.Dialog.showLog(n.errorMessage),this.activeAllBtn(),void this.onClickResetCountAuto();this.dataFinish=n,B.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.agUser,n.agWin),this.truTienBet(this.dataFinish.agBet*this.totalLineBet,this.dataFinish.agUser),this.listResult=n.views;var o=n.arrBonus;o="[]"==o?"[[2,2,2,2]]":o,this.listResultConvert=this.convertResult(this.listResult,n.listItemWin,JSON.parse(o)),this.stateSpin.isMaxSpeed,this.stateReel=f.default.CAN_STOP;var i=this.stateSpin.isMaxSpeed?0:.5;this.scheduleOnce(this.funEnd=function(){e.stateSpin.onEnd()},i)}else this.scheduleOnce(function(){e.handleFinish(t)},.05)},e.prototype.resetForNewGame=function(){this.stateReel=f.default.WAITING,this.setStateEffBtnSpin()},e.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!0,t.node.children.forEach(function(t){t.getComponent(cc.Sprite)&&(t.color=cc.Color.fromHEX(new cc.Color,"#00CCFF"),null!=t.children[0]&&(t.children[0].color=cc.Color.fromHEX(new cc.Color,"#00CCFF")))})})},e.prototype.setCountAuto=function(t){this.lb_CountAuto.node.parent.active=!(t<1),this.lb_CountAuto.string=t.toString()},e.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1,B.Windown.QuyBa.audio.playClick()},e.prototype.truTienBet=function(t,e){0!=t&&B.Windown.MoneyUser.subMoney(t,e)},e.prototype.onClickBtnSpin=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:cc.log("stateReel="+this.stateReel),e.label=1;case 1:return e.trys.push([1,5,,6]),this.stateReel!=f.default.WAITING?[3,3]:(this.audio.playEffect(this.audio.spinBtn),this.stateReel=f.default.RUN,this.setStateEffBtnSpin(),this.offAllBtn(),this.infoBar.reset(),this.isDoneStartSpin=!1,this.sendClickSpin(),0==this.stateSpin.freeSpinLeft&&this.multiBottleControl.resetBottle(),[4,B.Windown.QuyBa.getPromise(this.stateSpin.onStart())]);case 2:return e.sent(),this.isDoneStartSpin=!0,[3,4];case 3:this.stateReel==f.default.CAN_STOP?this.stateSpin.isMaxSpeed||(cc.log("nhay vao forestop ne"),this.stateReel=f.default.RUN,this.unschedule(this.funEnd),this.stateSpin.onForceEnd()):this.stateReel==f.default.STOP||this.stateReel==f.default.SHOW_EFFECT&&(this.audio.playClick(),this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),e.label=4;case 4:return[3,6];case 5:return t=e.sent(),C.Util.ThrowErrProsime(t),[3,6];case 6:return[2]}})})},e.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!1,t.node.children.forEach(function(t){t.getComponent(cc.Sprite)&&(t.color=cc.Color.fromHEX(new cc.Color,"#999999")),null!=t.children[0]&&(t.children[0].color=cc.Color.fromHEX(new cc.Color,"#999999"))})})},e.prototype.setStateEffBtnSpin=function(){var t=this.btnSpin.getComponent(cc.Animation),e=cc.find("sb_arrow",this.btnSpin),n=cc.find("sb_arrow_blur",this.btnSpin);if(this.stateReel!=f.default.STOP){e.color=cc.Color.WHITE;var o=cc.Material.getBuiltinMaterial("2d-sprite");e.getComponent(cc.Sprite).setMaterial(0,o)}if(this.stateReel==f.default.WAITING||this.stateReel==f.default.SHOW_EFFECT)n.active=!1,e.active=!0,B.Windown.stopAllActionByTarget(e),e.runAction(cc.repeatForever(cc.rotateBy(3,-360)));else if(this.stateReel==f.default.RUN)t.play("ButtonSpin_Click"),n.active=!0,B.Windown.stopAllActionByTarget(n),n.runAction(cc.repeatForever(cc.rotateBy(.3,-360))),e.active=!1,this.infoBar.showRdContent();else if(this.stateReel==f.default.STOP){e.active=!0,n.active=!1,B.Windown.stopAllActionByTarget(n),B.Windown.stopAllActionByTarget(e);var i=cc.Material.getBuiltinMaterial("2d-gray-sprite");e.getComponent(cc.Sprite).setMaterial(0,i),e.color=cc.Color.GRAY}},e.prototype.setupView=function(){var t=cc.find("Game",this.node);if(cc.sys.isMobile)t.angle=90,this.bkgSprite.angle=90,e=1280/720,this.bkgSprite.setScale(e,e,e);else{var e=cc.view.getDesignResolutionSize().height/1280;t.angle=0,t.setScale(e,e,e),this.bkgSprite.angle=0;var n=this.bkgSprite.addComponent(cc.Widget);n.left=0,n.right=0,n.bottom=0,n.top=0}B.Windown.UIManager.changeRotation(!0)},e.prototype.showBigWin=function(){this.effect.showBigWin(99999,50)},e.prototype.showFreeSpin=function(){this.effect.showTakeFreeSpin(10)},e.prototype.showEndFreeSpin=function(){this.effect.showEndFree(123123)},e.prototype.getMakeDelay=function(t){return B.Windown.CpPromise.getDelay(t,this)},e.prototype.getPromise=function(t){return B.Windown.CpPromise.getDelayByPromise(t,this).prosime},e.prototype.getPromiseAll=function(t){return B.Windown.CpPromise.getDelayPromiseAll(t,this).prosime},e.prototype.clearAllMakeDelay=function(){B.Windown.CpPromise.targetOff(this)},e.prototype.activeMask=function(t,e){var n=this.parentMask.children;t?e?(B.Windown.stopAllActionByTarget(n[e]),n[e].runAction(cc.fadeTo(.3,200))):n.forEach(function(t){B.Windown.stopAllActionByTarget(t),t.runAction(cc.fadeTo(.3,200))}):e?(B.Windown.stopAllActionByTarget(n[e]),n[e].runAction(cc.fadeOut(.3))):n.forEach(function(t){B.Windown.stopAllActionByTarget(t),t.runAction(cc.fadeOut(.3))})},e.prototype.updateNewTotalLine=function(t){this.currentTotalLine*=t,this.lb_TotalLine.string=this.currentTotalLine.toString()},e.prototype.resetLbTotalLine=function(){this.currentTotalLine=1,this.lb_TotalLine.string="..."},e.prototype.initItem=function(){for(var t,e=this.getRdViewFirtGame(),n=this.getRdViewForLoop(0),o=cc.instantiate(this.parentItem.children[0]),i=.6666*o.width,r=(o.height,0);r<6;r++){var a=n[r].pop();e[r].unshift(a),e[r].push(a);var s=null,c=this.parentItem.children[r];null==c&&((c=cc.instantiate(o)).parent=this.parentItem),(s=c.getComponent(p.ItemSlotQuyBa)).node.setPosition(cc.v3(i*r+i/2-6*i/2,0,0)),s.index=r,this.listColum.push(s),n[r].length>0&&(t=s.listResultRandomCache).unshift.apply(t,n[r]),s.setResultFirtGame(e[r])}},e.prototype.getRdViewForLoop=function(t){for(var e,n=[],o=0,i=6-t;o<i;o++){var r=t>0&&5!=t&&B.Windown.RandomNumber(0,100)<20?B.Windown.RandomNumber(3,5):B.Windown.RandomNumber(1,3);n.push([{i:(void 0,e=B.Windown.RandomNumber(0,100),e<5?12:e<10?11:B.Windown.RandomNumber(0,11)),s:r,t:r>1&&B.Windown.RandomNumber(0,100)<30?1:0}])}var a=0;return n.forEach(function(t){var e=t[0].s||1;e>a&&(a=e)}),n.forEach(function(t){for(var e=t[0].s||1,n=0,o=a-e;n<o;n++)t.unshift({i:B.Windown.RandomNumber(0,12),t:0,s:1})}),n},e.prototype.convertResult=function(t,e,n){var o=this,i=[],r=e.slice();return t.forEach(function(a,s){var c=Object.create(null);c.listSFSObj=[];var l=1;if(r.length>0&&r[s]){var u=Math.max.apply(Math,JSON.parse(r[s].lsstack));l=o.caculateMultiInView(t[s],n[s],u)}c.agWin=0,c.listReelMul=n[s],c.mutil=l,c.view=t[s],a.forEach(function(t,n){var o=[];if(t.forEach(function(t){o.push(t)}),o.reverse(),c.listSFSObj.push(o),n==a.length-1){var i=e.shift();i&&(i.lsIdItem=JSON.parse(i.lsIdItem),i.lsstack=JSON.parse(i.lsstack),i.lsAgWin=JSON.parse(i.lsAgWin),i.lsAgWin.length>0&&(c.listItemWin=i,c.isNoSap=!0),i.lsAgWin.forEach(function(t){c.agWin+=t}))}}),c.countScater=o.getCountScater(c.listSFSObj),i.push(c)}),i},e.prototype.switchBkgGame=function(t){var e=this,n=cc.find("Game/BkgGround/FreeSpin",this.node),o=cc.find("Game/BkgGround/freespin_bg",this.node);t?(n.active=!0,this.lb_FSLeft.node.parent.active=!0,o.active=!0,this.nodeBtnPlay.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.nodeBtnPlay.active=!1})))):(n.active=!1,o.active=!1,this.lb_FSLeft.node.parent.active=!1,this.nodeBtnPlay.active=!0,this.nodeBtnPlay.opacity=255),this.lb_TotalLine._updateString()},e.prototype.setLbFreeSpinLeft=function(t){var e=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=t.toString(),t<1?(cc.find("last_spin",e).active=!0,cc.find("remaining_spin",e).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last_spin",e).active=!1,cc.find("remaining_spin",e).active=!0,this.lb_FSLeft.node.active=!0)},e.prototype.caculateMultiInView=function(t,e,n){var o=0;return t.forEach(function(t,i){if(i<=n)for(var r=0;r<t.length;r++)if(11==t[r].i){o+=e[i-1];break}}),o=0==o?1:o},e.prototype.getCountScater=function(t){var e=0;return t.forEach(function(t){t.forEach(function(t){12==t.i&&e++})}),e},e.prototype.getListActiveScaster=function(t){for(var e=[],n=0,o=0;o<t.length;o++)n>=3?e.push(!0):e.push(!1),t[o].forEach(function(t){12==t.i&&n++});return e},e.prototype.showMoneyAllWin=function(t){this.labelChipReviceInBox.setMoney(t),B.Windown.MoneyUser.removeDelay(this.gameType)},e.prototype.getRdViewFirtGame=function(){for(var t,e,n=[],o=0,i=function(){var t=B.Windown.RandomNumber(0,100);return t<10?4:t<30?3:2},r=0;r<6;r++){for(var a=[],s=0;s<5;s++)(l=Object.create(null)).i=(t=s,void 0,(e=B.Windown.RandomNumber(0,100))<3&&o<3?(o++,12):e<6&&t>0&&t<5?11:B.Windown.RandomNumber(0,11)),l.t=1,l.s=1,a.push(l);n.push(a)}var c=function(t,e,n,o){if(!(n+o<=5))return!1;for(var i=n;i<o+n;i++){var r=t[e][i];if(1!=r.s||12==r.i)return!1}return!0};for(n.forEach(function(t,e){t.forEach(function(t,o){if(e>0&&e<5&&12!=t.i&&1==t.s&&B.Windown.RandomNumber(0,100)<30){var r=i();if(c(n,e,o,r))for(var a=t.i,s=B.Windown.RandomNumber(0,100)<50?1:2,l=o;l<r+o;l++)n[e][l].i=a,n[e][l].s=r,n[e][l].t=s}})}),r=0;r<n.length;r++)for(a=n[r],s=0;s<a.length;s++){var l;if((l=a[s])&&1!=l.s)for(var u=s+1,p=s+1+l.s-1;u<p;u++)a[u]=null}for(var h in n)n[h]=n[h].filter(function(t){return null!=t});return n},e.prototype.onClickTest=function(){this.effect.showEndFree(123456)},e.prototype.onClickSeting=function(){if(B.Windown.QuyBa.audio.playClick(),cc.log("click onClickSeting"),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)t=cc.v2(0,-750),this.nodeBtnPlay.runAction(cc.fadeIn(.4)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.3),cc.moveTo(.3,t)));else{B.Windown.stopAllActionByTarget(this.nodeBtnPlay),B.Windown.stopAllActionByTarget(this.nodeBtnSeting);var t=cc.v2(0,-515.279);this.nodeBtnPlay.runAction(cc.fadeOut(.3)),this.nodeBtnSeting.opacity=0,this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.4),cc.moveTo(.3,t)))}},e.prototype.onClickBackToLobby=function(){B.Windown.QuyBa.audio.playClick(),this.roomSFS?(cc.log("Vao day"),W.ConectManager.getIns().sendLeaveRoom(this.roomSFS)):cc.director.loadScene("main")},e.prototype.onClickTurbo=function(){B.Windown.QuyBa.audio.playClick(),cc.log("clmm onClickTurbo");var t=this.toggleTurbo.isChecked;this.toggleTurbo.node.children[1].active=!t,this.stateSpin.isMaxSpeed=t,t?B.Windown.UIManager.showAlertMini("\u0110\xe3 b\u1eadt quay nhanh"):B.Windown.UIManager.showAlertMini("\u0110\xe3 t\u1eaft quay nhanh")},e.prototype.onClickCloseListAuto=function(){var t=this;cc.log("onClickCloseListAuto"),B.Windown.QuyBa.audio.playClick(),B.Windown.stopAllActionByTarget(this.nodeChooseAuto),this.nodeChooseAuto.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){var e=t.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer);e.allowSwitchOff=!0,e.toggleItems.forEach(function(t){t.isChecked&&(t.isChecked=!1)}),t.nodeChooseAuto.active=!1,t.btnStartAuto.interactable=!1,t.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#00CCFF")})))},e.prototype.onClickItemAutoSpin=function(t){B.Windown.QuyBa.audio.playClick(),this.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer).allowSwitchOff=!1;var e=t.node.name,n=Number(e);this.stateSpin.countAutoSpin=n,this.btnStartAuto.interactable=!0,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#00CCFF")},e.prototype.onClickStartAutoSpin=function(){this.onClickBtnSpin(),this.onClickCloseListAuto(),B.Windown.QuyBa.stateSpin.countAutoSpin>0&&B.Windown.QuyBa.setCountAuto(B.Windown.QuyBa.stateSpin.countAutoSpin)},e.prototype.onClickShowListAuto=function(){B.Windown.QuyBa.audio.playClick(),this.nodeChooseAuto.active=!0,this.nodeChooseAuto.opacity=0,this.nodeChooseAuto.runAction(cc.fadeIn(.3)),this.btnStartAuto.interactable=!1,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#00CCFF")},e.prototype.onClickCachChoi=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return B.Windown.QuyBa.audio.playClick(),B.Windown.UIManager.showLoading(),[4,B.Windown.loadRes(this.gameType.toString(),"Prefabs/CachChoi",cc.Prefab)];case 1:return t=e.sent(),cc.instantiate(t).parent=B.Windown.QuyBa.node.getChildByName("Game"),B.Windown.UIManager.hideLoading(),[2]}})})},e.prototype.onClickLichSu=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return B.Windown.QuyBa.audio.playClick(),B.Windown.UIManager.showLoading(),[4,B.Windown.loadRes(this.gameType.toString(),"Prefabs/LichSu",cc.Prefab)];case 1:return t=e.sent(),this._popupLichSu=cc.instantiate(t).getComponent(b.default),this._popupLichSu.node.parent=B.Windown.QuyBa.node.getChildByName("Game"),this._popupLichSu.show(),[2]}})})},e.prototype.onClickChangeBet=function(t,e){if(B.Windown.QuyBa.audio.playClick(),this.listConfigBet.length<1)B.Windown.Dialog.showLog(d.TextDefine.Error);else{var n=-1;for(var o in this.listConfigBet)if(this.listConfigBet[o].bet==this.curRoomBet){n=parseInt(o);break}0==e?n--:n++,n<0&&(n=this.listConfigBet.length-1),n>this.listConfigBet.length-1&&(n=0),this.curRoomBet=this.listConfigBet[n].bet,this.lb_totalBet.string=B.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},r([E(cc.Node)],e.prototype,"bkgSprite",void 0),r([E(l.EffectQuyBa)],e.prototype,"effect",void 0),r([E(cc.Node)],e.prototype,"parentMask",void 0),r([E(cc.Node)],e.prototype,"btnSpin",void 0),r([E(cc.Label)],e.prototype,"lb_totalBet",void 0),r([E(v.default)],e.prototype,"lb_FSLeft",void 0),r([E(y.AssetQuyBa)],e.prototype,"asset",void 0),r([E(m.InfoBarControllerQuyBa)],e.prototype,"infoBar",void 0),r([E(g.BottleControllerQuyBa)],e.prototype,"multiBottleControl",void 0),r([E(b.default)],e.prototype,"_popupLichSu",void 0),r([E(w.default)],e.prototype,"audio",void 0),r([E(cc.Node)],e.prototype,"parentItem",void 0),r([E(cc.Node)],e.prototype,"parentItemFront",void 0),r([E(cc.Node)],e.prototype,"parentItemActive",void 0),r([E([cc.Button])],e.prototype,"listNodeDeactive",void 0),r([E(cc.Node)],e.prototype,"parentEffect",void 0),r([E(cc.Node)],e.prototype,"parentMultiEffect",void 0),r([E(cc.Node)],e.prototype,"nearWinNoSap",void 0),r([E(S.default)],e.prototype,"labelChipReviceInBox",void 0),r([E(v.default)],e.prototype,"lb_CountAuto",void 0),r([E(v.default)],e.prototype,"lb_TotalLine",void 0),r([E(cc.Node)],e.prototype,"nodeBtnSeting",void 0),r([E(cc.Toggle)],e.prototype,"toggleTurbo",void 0),r([E(cc.Node)],e.prototype,"nodeBtnPlay",void 0),r([E(cc.Node)],e.prototype,"nodeChooseAuto",void 0),r([E(cc.Button)],e.prototype,"btnStartAuto",void 0),r([I],e)}(cc.Component);n.QuyBaView=M,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetQuyBa":"AssetQuyBa","./AudioQuyBa":"AudioQuyBa","./BottleControllerQuyBa":"BottleControllerQuyBa","./EffectQuyBa":"EffectQuyBa","./InfoBarControllerQuyBa":"InfoBarControllerQuyBa","./ItemSlotQuyBa":"ItemSlotQuyBa","./LichSuQuyBa":"LichSuQuyBa","./SpinNormalQuyBa":"SpinNormalQuyBa"}],SpinNormalQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"8efd9R3aZJEQKqNK6qI3Vnw","SpinNormalQuyBa");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SpinNormalQuyBa=void 0;var a=t("../../../Scritps/DefineTs/StateReelSlot"),s=t("../../../Scritps/Windown"),c=t("../../../Scritps/Util"),l=cc._decorator,u=l.ccclass,p=(l.property,function(){function t(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.freeSpinLeft=0,this.freeSpinCache=0,this.moneyTotalFs=0,this.curentCountScater=0,this.isShowNearWin=!1,this.listColum=s.Windown.QuyBa.listColum,this.effect=s.Windown.QuyBa.effect}return t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.activeAllSymbol=function(){s.Windown.QuyBa.activeMask(!1)},t.prototype.onStart=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:i.trys.push([0,8,,9]),this.removeAllMutilAdded(),t=.05,n=0,i.label=1;case 1:return n<this.listColum.length?(0==n&&s.Windown.QuyBa.audio.playEffect(s.Windown.QuyBa.audio.spinActiveLoop,.7,!0),this.isMaxSpeed?[3,3]:[4,s.Windown.QuyBa.getMakeDelay(t*n).prosime]):[3,5];case 2:i.sent(),i.label=3;case 3:t-=.012,this.listColum[n].runSpin(),i.label=4;case 4:return n++,[3,1];case 5:return this.isMaxSpeed?[4,s.Windown.QuyBa.getMakeDelay(.2).prosime]:[3,7];case 6:i.sent(),i.label=7;case 7:return[3,9];case 8:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,9];case 9:return e(null),[2]}})})})},t.prototype.removeAllMutilAdded=function(){var t=this;return new Promise(function(e){s.Windown.QuyBa.resetLbTotalLine(),t.listColum.forEach(function(t){t.getListSymbol().forEach(function(t){t.removeAddScater(0)})}),e(null)})},t.prototype.checkIsNearFS=function(){return this.isShowNearWin},t.prototype.handleErrSpin=function(){return i(this,void 0,void 0,function(){var t,e,n;return r(this,function(o){switch(o.label){case 0:s.Windown.QuyBa.audio.stopEffect(s.Windown.QuyBa.audio.spinActiveLoop),t=0,e=this.listColum,o.label=1;case 1:return t<e.length?(n=e[t],this.isMaxSpeed?[3,3]:[4,s.Windown.QuyBa.getPromise(n.stopSpin(!1,n.result))]):[3,5];case 2:return o.sent(),[3,4];case 3:n.stopSpin(!1,n.result),o.label=4;case 4:return t++,[3,1];case 5:return s.Windown.QuyBa.resetForNewGame(),[2]}})})},t.prototype.onEnd=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,l,u,p,h,d;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,12,,13]),t=s.Windown.QuyBa.listResultConvert,e=s.Windown.QuyBa.getListActiveScaster(t[0].listSFSObj),n=0,o=[],this.isShowNearWin=!1,i=0,l=e;i<l.length;i++)if(h=l[i]){this.isShowNearWin=!0;break}this.curentCountScater=t[0].countScater,u=0,p=this.listColum,r.label=1;case 1:return u<p.length?(h=p[u],this.isMaxSpeed?[3,3]:[4,s.Windown.QuyBa.getPromise(h.stopSpin(e[n],t[0].listSFSObj[n]))]):[3,6];case 2:return r.sent(),[3,4];case 3:o.push(h.stopSpinIsFastSpin(e[n],t[0].listSFSObj[n])),r.label=4;case 4:n++,r.label=5;case 5:return u++,[3,1];case 6:return this.isMaxSpeed?[4,s.Windown.QuyBa.getPromiseAll(o)]:[3,9];case 7:return r.sent(),[4,s.Windown.QuyBa.getMakeDelay(.1).prosime];case 8:return r.sent(),[3,11];case 9:return[4,s.Windown.QuyBa.getMakeDelay(.5).prosime];case 10:r.sent(),r.label=11;case 11:return s.Windown.QuyBa.stateReel!=a.default.RUN&&this.handleStopAllColum(),[3,13];case 12:return d=r.sent(),c.Util.ThrowErrProsime(d),[3,13];case 13:return[2]}})})},t.prototype.handleStopAllColum=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,l;return r(this,function(r){switch(r.label){case 0:if(r.trys.push([0,21,,22]),s.Windown.QuyBa.stateReel==a.default.STOP)return[2];s.Windown.QuyBa.audio.stopEffect(s.Windown.QuyBa.audio.spinActiveLoop),s.Windown.QuyBa.stateReel=a.default.STOP,s.Windown.QuyBa.setStateEffBtnSpin(),t=s.Windown.QuyBa.listResultConvert,this.activeAllSymbol(),console.log("handleStopAllColum: "),s.Windown.QuyBa.infoBar.offOneMoreScater(),s.Windown.QuyBa.infoBar.showRdContent(),e=0,n=t.length,r.label=1;case 1:return e<n?(o=t[e],this.curentCountScater=o.countScater,o.listItemWin?(s.Windown.QuyBa.getPromise(s.Windown.QuyBa.multiBottleControl.mutilUpReel(o.listItemWin)),[4,s.Windown.QuyBa.getPromise(this.checkAndShowLineAn(o.listItemWin,o.agWin))]):[3,14]):[3,16];case 2:return r.sent(),[4,s.Windown.QuyBa.getPromise(this.checkAndRemoveSymbol(o.listItemWin,o.view))];case 3:return r.sent(),[4,s.Windown.QuyBa.multiBottleControl.multiTakeEffect(o.view,o.listItemWin)];case 4:return r.sent(),[4,s.Windown.QuyBa.infoBar.showTakeMoneyTurn(o.agWin*o.mutil,o.mutil)];case 5:return r.sent(),i=[],o.isNoSap?[4,s.Windown.QuyBa.getMakeDelay(s.Windown.QuyBa.stateSpin.isMaxSpeed?.2:0).prosime]:[3,11];case 6:return r.sent(),[4,s.Windown.QuyBa.getPromise(this.addNewSymbol(t[e+1]))];case 7:return r.sent(),i.push(s.Windown.QuyBa.multiBottleControl.updatePositionBottle(t[e+1].listReelMul)),[4,s.Windown.QuyBa.getPromise(this.moveSymbolInView())];case 8:return r.sent(),[4,s.Windown.QuyBa.getPromise(s.Windown.QuyBa.effect.activeNearWinNoSap())];case 9:return r.sent(),s.Windown.QuyBa.infoBar.isShowOneMoreScater=!1,[4,s.Windown.QuyBa.getPromise(this.moveSymbolNew())];case 10:r.sent(),r.label=11;case 11:return i.length>0?[4,s.Windown.QuyBa.getPromiseAll(i)]:[3,13];case 12:r.sent(),r.label=13;case 13:return[3,15];case 14:s.Windown.QuyBa.multiBottleControl.updateBonus(t[e].listReelMul),r.label=15;case 15:return e++,[3,1];case 16:return this.isMaxSpeed?[3,18]:[4,s.Windown.QuyBa.getMakeDelay(.4).prosime];case 17:r.sent(),r.label=18;case 18:return[4,s.Windown.QuyBa.getPromise(this.showMoneyTotalRevice())];case 19:return r.sent(),[4,s.Windown.QuyBa.getPromise(this.checkAndShowEffect())];case 20:return r.sent(),this.resetForNextNextSpin(),[3,22];case 21:return l=r.sent(),c.Util.ThrowErrProsime(l),[3,22];case 22:return[2]}})})},t.prototype.resetForNextNextSpin=function(){var t=this;if(s.Windown.QuyBa.resetForNewGame(),this.freeSpinLeft>0)s.Windown.QuyBa.scheduleOnce(function(){s.Windown.QuyBa.setLbFreeSpinLeft(t.freeSpinLeft-1),s.Windown.QuyBa.onClickBtnSpin()},.5);else if(this.countAutoSpin>0){var e=s.Windown.QuyBa.stateSpin.isMaxSpeed?2:1;s.Windown.QuyBa.scheduleOnce(function(){t.countAutoSpin--,s.Windown.QuyBa.setCountAuto(t.countAutoSpin),s.Windown.QuyBa.onClickBtnSpin()},.5/e)}else s.Windown.QuyBa.activeAllBtn()},t.prototype.showMoneyTotalRevice=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n;return r(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=s.Windown.QuyBa.dataFinish.agWin,this.lastFreeSpinLeft>0&&(this.moneyTotalFs+=t),s.Windown.QuyBa.activeMask(!1),t<1?(e(null),[2]):[4,s.Windown.QuyBa.getPromise(s.Windown.QuyBa.infoBar.showTotalMoney(t))];case 1:return o.sent(),s.Windown.QuyBa.showMoneyAllWin(t),e(null),[3,3];case 2:return n=o.sent(),c.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})})},t.prototype.moveSymbolNew=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o,i,a,l;return r(this,function(r){switch(r.label){case 0:for(o in r.trys.push([0,7,,8]),t=[],n=[],this.listColum)n.push(o);i=0,r.label=1;case 1:return i<n.length?(a=n[i],s.Windown.QuyBa.nearWinNoSap.active?[4,s.Windown.QuyBa.getPromise(this.listColum[a].moveSymbolNew())]:[3,3]):[3,5];case 2:return r.sent(),[3,4];case 3:t.push(this.listColum[a].moveSymbolNew()),r.label=4;case 4:return i++,[3,1];case 5:return[4,s.Windown.QuyBa.getPromiseAll(t)];case 6:return r.sent(),s.Windown.QuyBa.nearWinNoSap.active=!1,e(null),[3,8];case 7:return l=r.sent(),c.Util.ThrowErrProsime(l),[3,8];case 8:return[2]}})})})},t.prototype.moveSymbolInView=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:for(n in i.trys.push([0,2,,3]),t=[],this.listColum)t.push(this.listColum[n].moveSymbolInView());return[4,s.Windown.QuyBa.getPromiseAll(t)];case 1:return i.sent(),e(null),[3,3];case 2:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,3];case 3:return[2]}})})})},t.prototype.addNewSymbol=function(t){var e=this;return new Promise(function(n){return i(e,void 0,void 0,function(){var e,o,i;return r(this,function(r){switch(r.label){case 0:for(o in r.trys.push([0,2,,3]),e=[],this.listColum)e.push(this.listColum[o].addNewListSymbol(t.listSFSObj[o]));return[4,s.Windown.QuyBa.getPromiseAll(e)];case 1:return r.sent(),n(null),[3,3];case 2:return i=r.sent(),c.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})})},t.prototype.checkAndRemoveSymbol=function(t){var e=this;return new Promise(function(n){return i(e,void 0,void 0,function(){var e,o,i,a,s;return r(this,function(){try{for(this.activeAllSymbol(),e=t.lsIdItem,o=t.lsstack,i=0,a=e.length;i<a;i++)for(s=0;s<o[i]+1;s++)this.listColum[s].checkAndRemoveItem(e[i],0);n(null)}catch(r){c.Util.ThrowErrProsime(r)}return[2]})})})},t.prototype.checkAndShowEffect=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=s.Windown.QuyBa.dataFinish.Scarter4,n=s.Windown.QuyBa.dataFinish.numFreeSpin,this.freeSpinLeft=n,!t&&this.lastFreeSpinLeft<1?(e(null),[2]):t?[4,s.Windown.QuyBa.getPromise(s.Windown.QuyBa.effect.showTakeFreeSpin(n))]:[3,2];case 1:i.sent(),i.label=2;case 2:return 1==this.lastFreeSpinLeft&&this.freeSpinLeft<1?[4,s.Windown.QuyBa.getPromise(this.effect.showEndFree(this.moneyTotalFs))]:[3,4];case 3:i.sent(),this.moneyTotalFs=0,i.label=4;case 4:return this.lastFreeSpinLeft=this.freeSpinLeft,e(null),[3,6];case 5:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,6];case 6:return[2]}})})})},t.prototype.checkAndShowLineAn=function(t,e){var n=this;return new Promise(function(o){return i(n,void 0,void 0,function(){var n,i,a,l,u,p,h,d,f;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,3,,4]),this.offAllSymbol(),n=t.lsIdItem,i=t.lsstack,a=t.lsAgWin,l=[],u=0,p=n.length;u<p;u++){for(h=0;h<i[u]+1;h++)d=this.listColum[h],l.push(d.checkItemWin(n[u],i[u]));a[u]}return[4,s.Windown.QuyBa.getPromiseAll(l)];case 1:return r.sent(),[4,s.Windown.QuyBa.getPromise(s.Windown.QuyBa.infoBar.showTakeMoney(e))];case 2:return r.sent(),o(null),[3,4];case 3:return f=r.sent(),c.Util.ThrowErrProsime(f),[3,4];case 4:return[2]}})})})},t.prototype.onForceEnd=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,a,l,u;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,3,,4]),s.Windown.QuyBa.clearAllMakeDelay(),t=s.Windown.QuyBa.listResultConvert,e=s.Windown.QuyBa.getListActiveScaster(t[0].listSFSObj),n=[],o=0,i=0,a=this.listColum;i<a.length;i++)l=a[i],n.push(l.forceStopSpin(e[o],t[0].listSFSObj[o])),o++;return s.Windown.QuyBa.audio.playEffect(s.Windown.QuyBa.audio.spinStopQuick),[4,s.Windown.QuyBa.getPromiseAll(n)];case 1:return r.sent(),[4,s.Windown.QuyBa.getMakeDelay(.25).prosime];case 2:return r.sent(),this.handleStopAllColum(),[3,4];case 3:return u=r.sent(),c.Util.ThrowErrProsime(u),[3,4];case 4:return[2]}})})},t.prototype.offAllSymbol=function(t){void 0===t&&(t=!0),s.Windown.QuyBa.activeMask(!0)},o([u("SpinNormalQuyBa")],t)}());n.SpinNormalQuyBa=p,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],StartFreeSpinQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"a5132YuhD9HKbYMJ8po2aBl","StartFreeSpinQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.StartFreeSpinQuyBa=void 0;var a=t("../../../Scritps/Other/LbMonoSpace"),s=t("../../../Scritps/Windown"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btnBatDau=null,e}return i(e,t),e.prototype.show=function(t){var e=this;return new Promise(function(n){s.Windown.QuyBa.audio.playBkgfs(),s.Windown.QuyBa.audio.playEffect(s.Windown.QuyBa.audio.fsTrans),e.label.string=t.toString();var o=function(){s.Windown.QuyBa.audio.stopEffect(s.Windown.QuyBa.audio.fsTrans),e.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.node.destroy()}))),n(null)};e.btnBatDau.interactable=!1,e.scheduleOnce(function(){e.btnBatDau.interactable=!0,e.btnBatDau.node.once("click",o),e.btnBatDau.node.runAction(cc.sequence(cc.delayTime(5),cc.callFunc(o)))},1)})},r([u(a.default)],e.prototype,"label",void 0),r([u(cc.Button)],e.prototype,"btnBatDau",void 0),r([l],e)}(cc.Component);n.StartFreeSpinQuyBa=p,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Windown":void 0}],SymbolQuyBa:[function(t,e,n){"use strict";cc._RF.push(e,"5ceb54kRyRJkrj9wJPpxtc5","SymbolQuyBa");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SymbolQuyBa=n.TYPE_ITEM=void 0;var c,l=t("./ItemSlotQuyBa"),u=t("../../../Scritps/DefineTs/StateReelSlot"),p=t("./ItemAddScatterQuyBa"),h=t("./EffectSymbolQuyBa"),d=t("../../../Scritps/Windown"),f=t("../../../Scritps/Util"),y=cc._decorator,m=y.ccclass,S=y.property;(function(t){t[t.NONE=1]="NONE",t[t.WILD=2]="WILD"})(c=n.TYPE_ITEM||(n.TYPE_ITEM={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.result=-1,e.sizeBkg=cc.size(175,165),e.size=cc.size(175,165),e.nodeScater=null,e.itemColum=null,e.typeItem=c.NONE,e.spriteItem=null,e.spriteBkg=null,e.bgScatter=null,e.bgWild=null,e.skeletonItem=null,e.efWin=null,e.efTakeWild=null,e.canRun=!1,e.objSFS=null,e.sizeItem=1,e.isShuff=!1,e.isTransToWild=!1,e.isShowEffectSpawn=!1,e.isHasTakeItem=!1,e}return i(e,t),e.prototype.effectScaterShowFS=function(){12==this.result&&this.checkIsInView()&&cc.isValid(this.nodeScater)&&(this.activeItem(),this.nodeScater.node.active=!0,d.Windown.QuyBa.stateReel==u.default.RUN?this.nodeScater.showFS():d.Windown.QuyBa.stateReel==u.default.STOP&&this.nodeScater.winFS())},e.prototype.checkIsInView=function(){return this.node.getPosition().y<0&&this.node.getPosition().y>-this.size.height*(2/3)*(this.itemColum.sizeSymbol-2)},e.prototype.activeItem=function(t){void 0===t&&(t=.3),this.setParentNode(this.itemColum.parentItemActive)},e.prototype.setParentNode=function(t){this.node.parent=t,this.nodeScater&&this.nodeScater.changParent()},e.prototype.setItemColum=function(t){this.itemColum=t,this.node.angle=0,this.size.height=165},e.prototype.setResult=function(t){if(null!=t&&null!=t){var e=t;null!=e&&(null!=e.t&&null!=e.t||(e.t=1),null!=e.s&&null!=e.s||(e.s=1),this.objSFS=e,this.result=e.i,this.typeItem=e.t,this.sizeItem=e.s,this.setSize(),this.itemColum.stateWhel==u.default.RUN?this.setImgResult(!0):this.setImgResult(!1),this.node.opacity=255,this.isShuff=!1,this.isShowEffectSpawn=!1,this.checkItemFront(),this.node.setSiblingIndex(12==this.result?100:50))}},e.prototype.setImgResult=function(t){return a(this,void 0,void 0,function(){var e,n;return s(this,function(o){switch(o.label){case 0:return e=!(!t||d.Windown.RandomNumber(0,100)<10&&this.result<11),this.spriteItem.spriteFrame=this.getSpItem(e),this.spriteBkg.spriteFrame=this.getSpBkg(t),this.spriteBkg.sizeMode=cc.Sprite.SizeMode.RAW,this.spriteBkg.node.active=!0,this.spriteBkg.spriteFrame,cc.isValid(this.itemColum)&&this.itemColum.stateWhel!=u.default.END&&(this.bgScatter.active=!1),t?(this.node.setScale(cc.v2(2/3*2,2/3*2)),e?this.spriteItem.node.setScale(cc.v3(1,1)):this.spriteItem.node.setScale(cc.v3(.5,1/1.8))):(this.node.setScale(cc.v3(2/3,2/3,2/3)),this.spriteItem.node.setScale(cc.v3(1,1))),t?[3,4]:this.result<11?(this.spriteItem.node.active=!0,this.skeletonItem.node.active=!1,[3,3]):[3,1];case 1:return[4,this.getSpin()];case 2:null!=(n=o.sent())&&(this.skeletonItem.skeletonData=n,this.skeletonItem.node.active=!0,this.spriteItem.node.active=!1),o.label=3;case 3:return[3,5];case 4:this.spriteItem.node.active=!0,this.skeletonItem.node.active=!1,o.label=5;case 5:return[2]}})})},e.prototype.setSize=function(){this.node.setContentSize(this.size.width,this.size.height*this.sizeItem)},e.prototype.getSpItem=function(t){return d.Windown.QuyBa.asset.getSfItemSymbol(this.result,this.sizeItem,t)},e.prototype.runSpin=function(){var t=this;this.offItemFront();var e=cc.repeatForever(cc.moveBy(d.Windown.QuyBa.stateSpin.isMaxSpeed?.4:.8,cc.v2(0,-2500)));d.Windown.stopAllActionByTarget(this.node);var n=.2;d.Windown.QuyBa.stateSpin.isMaxSpeed||(n=.2-.02*this.itemColum.index),this.node.runAction(cc.sequence(cc.moveBy(n,cc.v2(0,50)).easing(cc.easeSineIn()),cc.callFunc(function(){t.canRun=!0,t.node.runAction(e)}))),12==this.result&&this.bgScatter.getComponent(cc.Animation).play("BgScatterHide")},e.prototype.getSpBkg=function(t){return 11==this.result||12==this.result?null:d.Windown.QuyBa.asset.getSfBkg(this.result,this.sizeItem,this.typeItem,t)},e.prototype.offItemFront=function(){this.setParentNode(this.itemColum.parentItem)},e.prototype.removeAddScater=function(t){null!=this.nodeScater&&(this.nodeScater.remove(t),this.nodeScater=null,this.skeletonItem.node.active=!0)},e.prototype.initPosStartGame=function(){var t,e=this.getIndexOf(),n=this.itemColum.getListSymbol()[e-1],o=null==n?void 0:n.node.getPosition().y;t=n?o-this.node.height*(2/3)/2-n.node.height*(2/3)/2:this.node.height*(2/3)/2,this.node.setPosition(0,t,0),this.checkItemFront()},e.prototype.getIndexOf=function(){return this.itemColum.getListSymbol().indexOf(this)},e.prototype.offItem=function(){this.node.parent!=this.itemColum.parentItem&&this.checkItemFront()},e.prototype.effectSpawnSymbol=function(t){return void 0===t&&(t=!0),a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),this.isShowEffectSpawn||!this.checkIsInView()?[2]:(this.isShowEffectSpawn=!0,this.checkItemFront(),12!=this.result?[3,2]:(t&&d.Windown.QuyBa.audio.playEffectNoStop(d.Windown.QuyBa.audio.symScatter),d.Windown.QuyBa.stateSpin.checkIsNearFS()&&(this.effectActiveScater(),this.effectNearWinScater(!0)),[4,this.showSkeleton(!0)]));case 1:return n.sent(),d.Windown.QuyBa.stateSpin.checkIsNearFS()&&this.effectScaterShowFS(),[3,3];case 2:11==this.result?(this.showSkeleton(!0),t&&d.Windown.QuyBa.audio.playEffectNoStop(d.Windown.QuyBa.audio.symWild)):this.showSkeleton(!1),n.label=3;case 3:return[3,5];case 4:return e=n.sent(),f.Util.ThrowErrProsime(e),[3,5];case 5:return[2]}})})},e.prototype.getSpin=function(t){return a(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return null==t&&(t=this.result),[4,d.Windown.QuyBa.asset.getSpine(t,this.sizeItem)];case 1:return[2,e.sent()]}})})},e.prototype.showSkeleton=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var n,o=this;return s(this,function(i){switch(i.label){case 0:return n=null,[4,this.getSpin()];case 1:return n=i.sent(),this.skeletonItem.premultipliedAlpha=12!=this.result,n&&(this.skeletonItem.node.active=!0,this.skeletonItem.skeletonData=n,this.skeletonItem.setAnimation(0,e?"win":"spawn",!1),this.spriteItem.node.active=!1,t?this.skeletonItem.addAnimation(0,"idle",!0):this.skeletonItem.setCompleteListener(function(){o.skeletonItem.node.active=!1,o.spriteItem.node.active=!0,o.skeletonItem.setCompleteListener(null)})),12==this.result&&(this.bgScatter.active=!0,this.bgScatter.getComponent(cc.Animation).play("BgScatter")),[2]}})})},e.prototype.removeItem=function(){var t=this;this.effectRemoveItem();var e=this.getIndexOf();e>-1&&this.itemColum.getListSymbol().splice(e,1),this.node.runAction(cc.sequence(cc.fadeOut(.15),cc.callFunc(function(){d.Windown.QuyBa.asset.putSymbol(t.node)}))),d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.symShrink)},e.prototype.effectRemoveItem=function(){return a(this,void 0,void 0,function(){var t,e,n;return s(this,function(o){switch(o.label){case 0:return cc.isValid(this.efWin)?(n=(e=cc).instantiate,[4,d.Windown.QuyBa.asset.getEffRemoveItem(this.sizeItem)]):[3,2];case 1:t=n.apply(e,[o.sent()]),11==this.result&&(t.getChildByName("wh_vfx_a_screen").active=!1),t.parent=d.Windown.QuyBa.parentEffect,t.setPosition(d.Windown.convertNodeInOtherNode(this.node,d.Windown.QuyBa.parentEffect)),t.getComponent(h.EffectSymbolQuyBa).effRemoveItem(this.sizeItem),cc.isValid(this.efWin)&&this.efWin.getComponent(h.EffectSymbolQuyBa).effectRemoveTakeItem(),o.label=2;case 2:return this.efWin=null,cc.log("chay den eff null"),this.isHasTakeItem=!1,[2]}})})},e.prototype.stopSpin=function(t){var e=this;this.getIndexOf(),d.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(t,cc.callFunc(function(){e.itemColum.effStopSpin()})))},e.prototype.effectNearWinScater=function(t){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.activeItem(),this.nodeScater.node.active=!0,d.Windown.stopAllActionByTarget(this.nodeScater.node),this.nodeScater.effectNearWinNoSap(t),this.nodeScater.showFS())},e.prototype.checkItemFront=function(){!this.checkIsInView()||11!=this.result&&12!=this.result?this.setParentNode(this.itemColum.parentItem):this.setParentNode(this.itemColum.parentItemFront)},e.prototype.effectActiveScater=function(){12==this.result&&this.checkIsInView()&&(this.nodeScater=cc.instantiate(d.Windown.QuyBa.asset.nodeAddScater).getComponent(p.ItemAddScatterQuyBa),this.nodeScater.init(this),this.nodeScater.node.active=!0,this.skeletonItem.node.active=!1,this.nodeScater.node.setScale(2/3,2/3),this.bgScatter.active=!0,this.bgScatter.getComponent(cc.Animation).play("BgScatter"))},e.prototype.effectTransformToWild=function(){return a(this,void 0,void 0,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return this.isShuff?(this.spriteBkg.node.active=!1,this.spriteItem.node.active=!1,t=null,[4,this.getSpin(11)]):[3,2];case 1:t=n.sent(),this.skeletonItem.node.active=!0,t&&(cc.isValid(this.efWin)&&(this.efWin.getComponentInChildren(sp.Skeleton).node.active=!1),this.skeletonItem.skeletonData=t,this.skeletonItem.setAnimation(0,"awaken",!1),this.skeletonItem.setCompleteListener(function(){e.skeletonItem.setCompleteListener(null),e.skeletonItem.setAnimation(0,"idle",!0)})),n.label=2;case 2:return[2]}})})},e.prototype.takeItem=function(){return a(this,void 0,void 0,function(){var t,e,n;return s(this,function(o){switch(o.label){case 0:return this.isHasTakeItem?[2]:(this.isHasTakeItem=!0,n=(e=cc).instantiate,[4,d.Windown.QuyBa.asset.getEffectTakeSymbol(this.sizeItem)]);case 1:return(t=n.apply(e,[o.sent()])).parent=d.Windown.QuyBa.parentEffect,t.setPosition(d.Windown.convertNodeInOtherNode(this.node,d.Windown.QuyBa.parentEffect)),t.getComponent(h.EffectSymbolQuyBa).effTakeItem(this.result,this.sizeItem,this.skeletonItem),this.spriteItem.node.active=!1,this.activeItem(0),this.efWin=t,t.setSiblingIndex(9999),11==this.result&&this.setWildBg(),[2]}})})},e.prototype.setWildBg=function(){this.bgWild.active=!0;var t=0;switch(this.sizeItem){case 2:t=295;break;case 3:t=383;break;case 4:t=470.866}cc.tween(this.bgWild.children[0]).set({position:cc.v3(this.bgWild.children[0].position.x,0),opacity:0}).to(.2,{position:cc.v3(this.bgWild.children[0].position.x,t),opacity:255},{easing:"sineOut"}).start(),cc.tween(this.bgWild.children[1]).set({position:cc.v3(this.bgWild.children[0].position.x,0),opacity:0}).to(.2,{position:cc.v3(this.bgWild.children[0].position.x,-t),opacity:255},{easing:"sineOut"}).start()},e.prototype.actionRandomNewResultNextKhung=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),this.isShowEffectSpawn=!1,this.typeItem++,this.typeItem=this.typeItem%3,e=d.Windown.QuyBa.stateSpin.isMaxSpeed?2:1,d.Windown.QuyBa.audio.playEffect(d.Windown.QuyBa.audio.symWildSpawn),11!=t?[3,3]:(this.result=t,this.spriteItem.node.active=!1,this.isShowEffectSpawn=!1,this.effectTransformToWild(),1!=e?[3,2]:[4,d.Windown.QuyBa.getMakeDelay(.4).prosime]);case 1:i.sent(),i.label=2;case 2:n(null),i.label=3;case 3:return[3,5];case 4:return o=i.sent(),f.Util.ThrowErrProsime(o),[3,5];case 5:return[2]}})})})},e.prototype.update=function(){this.canRun&&this.checkEndCot()},e.prototype.checkEndCot=function(){if(0==this.getIndexOf()){var t=this.node.height*(2/3)/2;if(this.node.position.y<=t){var e=this.itemColum.getIdSymbolResult(),n=this.itemColum.getListSymbol(),o=n.pop();n.unshift(o),o.node.setSiblingIndex(0),o.setResult(e),o.moveWhenListChange(l.TYPE_MOVE.NORMAL)}}},e.prototype.moveWhenListChange=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var o=this.getIndexOf(),i=this.itemColum.getListSymbol()[o+1],r=i.getPos(),a=r.y,s=null;t==l.TYPE_MOVE.NORMAL&&(s=a+this.node.height*(2/3)/2+i.node.height*(2/3)/2,r.y=s,this.setPos(r))},e.prototype.setPos=function(t){this.node.setPosition(t)},e.prototype.getPos=function(){return this.node.getPosition()},e.prototype.effectScaterIdle=function(){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.nodeScater.node.active=!0,this.skeletonItem.node.active=!1,this.nodeScater.idle())},r([S(cc.Sprite)],e.prototype,"spriteItem",void 0),r([S(cc.Sprite)],e.prototype,"spriteBkg",void 0),r([S(cc.Node)],e.prototype,"bgScatter",void 0),r([S(cc.Node)],e.prototype,"bgWild",void 0),r([S(sp.Skeleton)],e.prototype,"skeletonItem",void 0),r([m],e)}(cc.Component);n.SymbolQuyBa=v,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./EffectSymbolQuyBa":"EffectSymbolQuyBa","./ItemAddScatterQuyBa":"ItemAddScatterQuyBa","./ItemSlotQuyBa":"ItemSlotQuyBa"}]},{},["AssetQuyBa","AudioQuyBa","BigWinQuyBa","BottleControllerQuyBa","BottleItemQuyBa","CachChoiQuyBa","DetailHistoryQuyBa","EffectQuyBa","EffectSymbolQuyBa","EndFreeSpinQuyBa","InfoBarControllerQuyBa","ItemAddScatterQuyBa","ItemLichSuQuyBa","ItemResultDetailQuyBa","ItemSlotQuyBa","LichSuQuyBa","NearFSQuyBa","QuyBaSpeedControl","QuyBaView","SpinNormalQuyBa","StartFreeSpinQuyBa","SymbolQuyBa"]);