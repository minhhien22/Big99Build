window.__require=function t(e,n,i){function o(r,c){if(!n[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){return o(e[r][1][t]||t)},p,p.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({KingKongAssets:[function(t,e,n){"use strict";cc._RF.push(e,"8b53aSiKNFKALQs4ThC+Zez","KingKongAssets");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./KingKongSymbol"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.symbol=null,e.symbolAtlas=null,e.paylineAtlas=null,e.nodeNFS=null,e.symbolScatter=null,e.evenBall=null,e.assetParent=null,e}var n;return o(e,t),n=e,e.prototype.onLoad=function(){n.instance=this},e.prototype.start=function(){},e.prototype.onDestroy=function(){n.instance=null},e.instance=null,s([l(r.default)],e.prototype,"symbol",void 0),s([l(cc.SpriteAtlas)],e.prototype,"symbolAtlas",void 0),s([l(cc.SpriteAtlas)],e.prototype,"paylineAtlas",void 0),s([l(cc.Node)],e.prototype,"nodeNFS",void 0),s([l(cc.Node)],e.prototype,"symbolScatter",void 0),s([l(cc.Node)],e.prototype,"evenBall",void 0),s([l(cc.Node)],e.prototype,"assetParent",void 0),n=s([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./KingKongSymbol":"KingKongSymbol"}],KingKongAudio:[function(t,e,n){"use strict";cc._RF.push(e,"04779T1u/ZBiIwn/wZl2yft","KingKongAudio");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Parent/AudioManager"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.click=null,e.fsSpin=null,e.bgm_fs=null,e.SE_BigWin=null,e.SE_FreeSpinEnd=null,e.SE_ReelSpeedUp=null,e.SE_Scoring_01=null,e.SE_ScoringEnd=null,e.SE_Base_Hit=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.6))},e.prototype.playIndexTakeLine=function(){},e.prototype.playSmalWin=function(){},e.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.fsSpin),this.playEffect(this.bgm_fs,.6,!0)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},s([l(cc.AudioClip)],e.prototype,"click",void 0),s([l(cc.AudioClip)],e.prototype,"fsSpin",void 0),s([l(cc.AudioClip)],e.prototype,"bgm_fs",void 0),s([l(cc.AudioClip)],e.prototype,"SE_BigWin",void 0),s([l(cc.AudioClip)],e.prototype,"SE_FreeSpinEnd",void 0),s([l(cc.AudioClip)],e.prototype,"SE_ReelSpeedUp",void 0),s([l(cc.AudioClip)],e.prototype,"SE_Scoring_01",void 0),s([l(cc.AudioClip)],e.prototype,"SE_ScoringEnd",void 0),s([l([cc.AudioClip])],e.prototype,"SE_Base_Hit",void 0),s([a],e)}(r.default);n.default=p,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],KingKongCollum:[function(t,e,n){"use strict";cc._RF.push(e,"16739gUTr5H/K3tjh1AOyFX","KingKongCollum");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,s){function r(t){try{a(i.next(t))}catch(e){s(e)}}function c(t){try{a(i.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Scritps/Windown"),l=t("./KingKongSymbol"),p=t("./KingKongView"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collumIndex=0,e.numberSymbol=4,e.listSymbols=[],e.kingKongView=null,e.symbolContainer=null,e.initPos=cc.v2(0,0),e.stepMove=160,e.positionReset=320,e.isStop=!1,e.listIDResult=[],e.spineNFS=null,e.isNeerSpin=!1,e.isChangeSpeedNFS=!1,e.speedNFS=.05,e.nodeNFS=null,e.resolveStop=null,e.isSetDarkForNFS=!1,e}return o(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.numberSymbol;t++){var e=cc.instantiate(this.kingKongView.AssetsKingKong.symbol.node).getComponent(l.default);this.listSymbols.push(e),this.symbolContainer.addChild(e.node),e.node.setPosition(cc.v2(0,this.initPos.y-160*t)),e.node.active=!0,e.collumCtrl=this,e.setRandomSprite(),e.indexSymbol=t}},e.prototype.update=function(){},e.prototype.start=function(){},e.prototype.spinSymbol=function(){var t=this;this.listSymbols.forEach(function(e){t.kingKongView.isTurbo?e.speed=.05:e.speed=.08,e.spin()})},e.prototype.stopCollumCompleted=function(){this.listSymbols.sort(function(t,e){return t.indexSymbol-e.indexSymbol}),4==this.collumIndex&&(this.kingKongView.activeAllSymbol(),this.kingKongView.allCollumStopCompleted()),null!=this.nodeNFS&&(this.nodeNFS.active=!1),null!=this.resolveStop&&(this.resolveStop(),this.resolveStop=null)},e.prototype.activeAllSymbol=function(){this.listSymbols.forEach(function(t){t.sprite.node.color=cc.Color.WHITE})},e.prototype.prepareStop=function(){this.hideNFS(),cc.log("prepareStop---")},e.prototype.Stop=function(t){return r(this,void 0,void 0,function(){var e=this;return c(this,function(){return this.listIDResult=t,[2,new Promise(function(t){e.isNeerSpin?(cc.log("nearFSP:"+e.collumIndex),e.isChangeSpeedNFS=!0,e.showNFS(),e.kingKongView.setDarkForNFS(e),e.scheduleOnce(function(){e.isChangeSpeedNFS=!1,e.isStop=!0,e.resolveStop=t},3.5),e.slowDownSpeed()):(e.isStop=!0,e.scheduleOnce(function(){t(null),a.Windown.KingKong.audio.playEffect(a.Windown.KingKong.audio.SE_Base_Hit[e.collumIndex])},.2))})]})})},e.prototype.showScatter=function(){for(var t=0;t<this.listSymbols.length;t++)12==this.listSymbols[t].id&&this.listSymbols[t].showScatter()},e.prototype.slowDownSpeed=function(t){var e=this;void 0===t&&(t=.5),a.Windown.KingKong.audio.playEffect(a.Windown.KingKong.audio.SE_ReelSpeedUp);var n={a:.05};cc.tween(n).to(3.5,{a:t},{progress:function(t,n,i,o){e.speedNFS=t+(n-t)*o},easing:cc.easing.quadIn}).start()},e.prototype.showSymbolWin=function(t){this.listSymbols[t].showEffectWin()},e.prototype.getSpeedNFS=function(){return this.speedNFS},e.prototype.showNFS=function(){null==this.nodeNFS&&(this.nodeNFS=cc.instantiate(a.Windown.KingKong.AssetsKingKong.nodeNFS),this.nodeNFS.parent=this.node.parent,this.nodeNFS.x=this.node.x,this.nodeNFS.y=this.node.y,a.Windown.KingKong.isFreeSpin?this.nodeNFS.getComponent(cc.Animation).play("NearFreeSpin2"):this.nodeNFS.getComponent(cc.Animation).play("NearFreeSpin")),this.nodeNFS.active=!0},e.prototype.hideNFS=function(){this.spineNFS&&(this.spineNFS.active=!1)},e.prototype.hideAllSymbol=function(t){void 0===t&&(t=-1),this.listSymbols.forEach(function(e){e.sprite.node.color=e.id!=t?cc.Color.GRAY:cc.Color.WHITE,e.hideSpine()})},e.prototype.Reset=function(){this.isStop=!1,this.listIDResult=[],this.listSymbols.forEach(function(t){t.Reset()}),this.isNeerSpin=!1,this.speedNFS=.05,this.isChangeSpeedNFS=!1,this.isSetDarkForNFS=!1},s([d],e.prototype,"collumIndex",void 0),s([d],e.prototype,"numberSymbol",void 0),s([d([l.default])],e.prototype,"listSymbols",void 0),s([d(p.default)],e.prototype,"kingKongView",void 0),s([d(cc.Node)],e.prototype,"symbolContainer",void 0),s([d],e.prototype,"initPos",void 0),s([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./KingKongSymbol":"KingKongSymbol","./KingKongView":"KingKongView"}],KingKongEffect:[function(t,e,n){"use strict";cc._RF.push(e,"41482Sn7CNPf6wQwGNTd1jq","KingKongEffect");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,s){function r(t){try{a(i.next(t))}catch(e){s(e)}}function c(t){try{a(i.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectContainer=null,e.animBigWin=null,e.lbBgWin=null,e.btnConfirm=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.showBigWin=function(t){return r(this,void 0,void 0,function(){var e=this;return c(this,function(){return[2,new Promise(function(n){return r(e,void 0,void 0,function(){var e,i=this;return c(this,function(){try{this.effectContainer.active=!0,this.animBigWin.node.parent.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation("Win_1",1),this.animBigWin.node.parent.active=!0,this.animBigWin.setAnimation(0,"Idle",!1),this.lbBgWin.resetLb(),this.lbBgWin.time=3,this.lbBgWin.callBack=function(){i.btnConfirm.node.active=!0},this.lbBgWin.setMoney(t,!0),this.btnConfirm.node.active=!1,this.btnConfirm.node.off("click"),this.btnConfirm.node.on("click",function(){n(null),i.animBigWin.node.parent.active=!1,i.effectContainer.active=!1}),e=this.animBigWin.node.parent.getChildByName("BigWin_FX"),cc.tween(e).by(2,{angle:-360}).repeatForever().start(),cc.tween(e).set({opacity:150}).to(.5,{opacity:255}).start()}catch(o){l.Util.ThrowErrProsime(o)}return[2]})})})]})})},e.prototype.showStartFS=function(){return r(this,void 0,void 0,function(){return c(this,function(){return[2]})})},e.prototype.showEndFS=function(){return r(this,void 0,void 0,function(){return c(this,function(){return[2]})})},s([h(cc.Node)],e.prototype,"effectContainer",void 0),s([h(sp.Skeleton)],e.prototype,"animBigWin",void 0),s([h(a.default)],e.prototype,"lbBgWin",void 0),s([h(cc.Button)],e.prototype,"btnConfirm",void 0),s([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0}],KingKongHistoryDetail:[function(t,e,n){"use strict";cc._RF.push(e,"80698mIAQJMvIKQ0wUsF36G","KingKongHistoryDetail");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTitle=null,e.lbTime=null,e.lbBet=null,e.lbWin=null,e.lbMNUser=null,e.parentItem=null,e.itemPayline=null,e.scrItemPayline=null,e.listItem=[],e.isFreeSpin=!1,e.payLine=[],e}return o(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.parentItem.childrenCount;t++){var e=this.parentItem.children[t];this.listItem.push(e.children)}this.payLine=r.Windown.KingKong.payLine},e.prototype.show=function(t){this.node.active=!0,this.node.x=721.812,cc.Tween.stopAllByTarget(this.node),this.node.opacity=0,cc.tween(this.node).to(.2,{x:0,opacity:255},{easing:cc.easing.quadIn}).start();var e=t.get("date"),n=t.get("infolog"),i=JSON.parse(n);this.isFreeSpin=i.freeSpin,this.lbTitle.string=this.isFreeSpin?"QUAY MI\u1ec4N PH\xcd":"QUAY TH\u01af\u1edcNG",this.lbTime.string=r.Windown.formatDate(new Date(e),"dd/MM HH:mm:ss");var o=i.isScarter,s=JSON.parse(i.views),c=0;s.forEach(function(t){t.includes(12)&&c++});for(var a=0;a<5;a++)for(var l=0;l<3;l++){var p=s[a][l];this.listItem[a][l].getComponent(cc.Sprite).spriteFrame=r.Windown.KingKong.AssetsKingKong.symbolAtlas.getSpriteFrame(p.toString()),this.listItem[a][l].color=cc.Color.GRAY,!o&&2!=c||12!=p||(this.listItem[a][l].color=cc.Color.WHITE)}this.lbBet.string=r.Windown.formatNumber(20*i.agBet),this.lbWin.string=r.Windown.formatNumber(i.agWin),this.lbMNUser.string=r.Windown.formatNumber(i.agUser),this.setLineAn(i.listLineWin,s)},e.prototype.onClickClose=function(){var t=this;r.Windown.KingKong.audio.playClick(),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.2,{x:720,opacity:0},{easing:cc.easing.quadOut}).call(function(){t.node.active=!1}).start()},e.prototype.setLineAn=function(t){this.scrItemPayline.content.children.forEach(function(t){t.active=!1});for(var e=0,n=t.length;e<n;e++){t[e].symbol;for(var i=t[e].stack,o=r.Windown.KingKong.payLine[t[e].id-1],s=0;s<i+1;s++)this.listItem[s][o[s]].color=cc.Color.WHITE;var c=this.scrItemPayline.content.children[e];cc.isValid(c)||((c=cc.instantiate(this.scrItemPayline.content.children[0])).parent=this.scrItemPayline.content),c.active=!0,c.getComponentInChildren(cc.Sprite).spriteFrame=r.Windown.KingKong.AssetsKingKong.paylineAtlas.getSpriteFrame("line_"+t[e].id),c.getChildByName("lbWin").getComponent(cc.Label).string="W: "+r.Windown.formatMoney(t[e].agWinLine),c.getChildByName("lbIdLine").getComponent(cc.Label).string=t[e].id+""}},s([l(cc.Label)],e.prototype,"lbTitle",void 0),s([l(cc.Label)],e.prototype,"lbTime",void 0),s([l(cc.Label)],e.prototype,"lbBet",void 0),s([l(cc.Label)],e.prototype,"lbWin",void 0),s([l(cc.Label)],e.prototype,"lbMNUser",void 0),s([l(cc.Node)],e.prototype,"parentItem",void 0),s([l(cc.Node)],e.prototype,"itemPayline",void 0),s([l(cc.ScrollView)],e.prototype,"scrItemPayline",void 0),s([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],KingKongHistory:[function(t,e,n){"use strict";cc._RF.push(e,"6c88flrUh5CK4nF9b9ArS5J","KingKongHistory");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/DefineTs/REQUEST_CODE"),c=t("../../../Scritps/Network/ConectManager"),a=t("../../../Scritps/Popup/PageData/PageData"),l=t("../../../Scritps/Windown"),p=t("./KingKongHistoryDetail"),u=t("./KingKongItemHistory"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageDate=null,e.detail=null,e.listData=null,e.maxRow=11,e}return o(e,t),e.prototype.show=function(){this.node.active=!0,this.reset(),this.node.y=-1280,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{y:0},{easing:cc.easing.quadOut}).start(),c.ConectManager.getIns().sendRequest(r.REQUEST_CODE.HistoryInCa,null,l.Windown.KingKong.roomSFS),l.Windown.UIManager.showLoading()},e.prototype.start=function(){},e.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},e.prototype.resetContent=function(){for(var t=this.pageDate.content.children,e=0,n=t.length;e<n;e++)t[e].active=!1},e.prototype.responseServer=function(t){l.Windown.UIManager.hideLoading();var e=t.getSFSArray("history");this.initWithListData(e)},e.prototype.initWithListData=function(t){cc.log("history:"+l.Windown.SFSArrToJson(t)),this.pageDate.content.children;var e=t.size(),n=Math.floor(e/this.maxRow);e%this.maxRow>0&&n++,0==n&&(n=1),this.pageDate.setTotalPage(n),this.listData=t,this.onChangePage(1)},e.prototype.onChangePage=function(t){for(var e=this.pageDate.content,n=e.children,i=n[0],o=(t-1)*this.maxRow,s=0,r=this.maxRow;s<r;s++){var c=n[s];if(o<this.listData.size()){null==c&&(c=cc.instantiate(i),e.addChild(c),c.y=-(s+1)*c.height+c.height/2);var a=this.listData.getSFSObject(o);c.getComponent(u.default).initItem(a),c.active=!0,o++}else{if(!c)break;c.active=!1}}},e.prototype.onClickClose=function(){var t=this;l.Windown.KingKong.audio.playClick(),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.2,{y:-1280},{easing:cc.easing.quadIn}).call(function(){t.node.active=!1}).start()},e.prototype.showDetail=function(t){this.detail.show(t)},s([f(a.default)],e.prototype,"pageDate",void 0),s([f(p.default)],e.prototype,"detail",void 0),s([d],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./KingKongHistoryDetail":"KingKongHistoryDetail","./KingKongItemHistory":"KingKongItemHistory"}],KingKongInfoBar:[function(t,e,n){"use strict";cc._RF.push(e,"4d651Lh9BJOyqEc08wQUma9","KingKongInfoBar");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Obs/LbMoneyChange"),c=t("../../../Scritps/Windown"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTotalWin=null,e.lbInfo=null,e}return o(e,t),e.prototype.start=function(){},e.prototype.prepareSpin=function(){},e.prototype.updateTotalWin=function(t){c.Windown.KingKong.audio.playEffect(c.Windown.KingKong.audio.SE_Scoring_01),this.lbTotalWin.resetLb(),this.lbTotalWin.time=1.5,this.lbTotalWin.setMoney(t),this.lbTotalWin.cb=function(){c.Windown.KingKong.audio.stopEffect(c.Windown.KingKong.audio.SE_Scoring_01),c.Windown.KingKong.audio.playEffect(c.Windown.KingKong.audio.SE_ScoringEnd)},this.lbInfo.node.active=!1,this.lbTotalWin.node.parent.active=!0},e.prototype.updateInfoText=function(t){this.lbInfo.node.active=!0,this.lbInfo.string=t,this.lbTotalWin.node.parent.active=!1},s([p(r.default)],e.prototype,"lbTotalWin",void 0),s([p(cc.Label)],e.prototype,"lbInfo",void 0),s([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Windown":void 0}],KingKongItemHistory:[function(t,e,n){"use strict";cc._RF.push(e,"9b00ddOoqRBj5E/WTaHQQlK","KingKongItemHistory");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTime=null,e.lbBet=null,e.lbWin=null,e.data=null,e}return o(e,t),e.prototype.initItem=function(t){try{this.data=t;var e=this.data.get("date");this.lbTime.string=r.Windown.formatDate(new Date(e),"dd/MM\nHH:mm:ss");var n=this.data.get("infolog"),i=JSON.parse(n);this.lbBet.string=r.Windown.formatNumber(20*i.agBet),this.lbWin.string=r.Windown.formatNumber(i.agWin)}catch(o){console.error(o)}},e.prototype.onClick=function(){r.Windown.KingKong.audio.playClick(),r.Windown.KingKong.popupLichSu.showDetail(this.data)},s([l(cc.Label)],e.prototype,"lbTime",void 0),s([l(cc.Label)],e.prototype,"lbBet",void 0),s([l(cc.Label)],e.prototype,"lbWin",void 0),s([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],KingKongSettingAuto:[function(t,e,n){"use strict";cc._RF.push(e,"48a94xzn2xAZ6ygRVAH5fFu","KingKongSettingAuto");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnConfirm=null,e.tglUnlimited=null,e.tglLoseLimited=null,e.currentTglSession=null,e.lbLoseLitmitedValue=null,e.listTglLoseLimit=[],e.autoSpinNumber=0,e.loseLimited=0,e.isTurbo=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.tglLoseLimited.node.children.forEach(function(e){t.listTglLoseLimit.push(e.getComponent(cc.Toggle))})},e.prototype.start=function(){},e.prototype.onEnable=function(){null!=this.currentTglSession&&(0!=r.Windown.KingKong.autoSpinRemain?(this.currentTglSession.checkEvents[0].customEventData=r.Windown.KingKong.autoSpinRemain+"",this.currentTglSession.node.active=!0,this.currentTglSession.getComponentInChildren(cc.Label).string="("+r.Windown.KingKong.autoSpinRemain+")",this.currentTglSession.isChecked=!0,this.currentTglSession.check()):this.currentTglSession.getComponentInChildren(cc.Label).string="(0)")},e.prototype.onClickClose=function(){var t=this;cc.tween(this.node).to(.3,{y:-this.node.height,opacity:150},{easing:cc.easing.sineIn}).call(function(){t.node.active=!1}).start()},e.prototype.onClickSelectNumberSession=function(t,e){this.autoSpinNumber=parseInt(e),this.btnConfirm.node.color=cc.Color.WHITE,this.btnConfirm.node.children[0].color=cc.Color.WHITE,this.btnConfirm.interactable=!0,this.tglLoseLimited.allowSwitchOff=!1,this.listTglLoseLimit.forEach(function(t){t.interactable=!0,t.node.color=cc.Color.WHITE}),this.tglUnlimited.check()},e.prototype.onClickClearSession=function(){this.autoSpinNumber=0,this.btnConfirm.interactable=!1,this.btnConfirm.node.color=cc.Color.GRAY,this.btnConfirm.node.children[0].color=cc.Color.GRAY,this.tglUnlimited.isChecked=!1,this.tglLoseLimited.allowSwitchOff=!0,this.listTglLoseLimit.forEach(function(t){t.interactable=!1,t.node.color=cc.Color.GRAY,t.isChecked=!1})},e.prototype.onClickSelectLoseLimited=function(t,e){switch(e){case"unlimited":this.loseLimited=9999999;break;case"500":this.loseLimited=500;break;case"100":this.loseLimited=100;break;case"50":this.loseLimited=50;break;case"10":this.loseLimited=10}this.loseLimited<1e3?(this.lbLoseLitmitedValue.node.active=!0,this.lbLoseLitmitedValue.string="[-"+r.Windown.formatNumber(this.loseLimited*r.Windown.KingKong.betValue)+"]"):this.lbLoseLitmitedValue.node.active=!1,cc.log("loseLimited==="+this.loseLimited)},e.prototype.onClickTurbo=function(){this.isTurbo=!this.isTurbo,r.Windown.KingKong.isTurbo=this.isTurbo},e.prototype.onClickConfirm=function(){r.Windown.KingKong.setAutoSpin(this.autoSpinNumber,this.loseLimited),this.onClickClose()},s([l(cc.Button)],e.prototype,"btnConfirm",void 0),s([l(cc.Toggle)],e.prototype,"tglUnlimited",void 0),s([l(cc.ToggleContainer)],e.prototype,"tglLoseLimited",void 0),s([l(cc.Toggle)],e.prototype,"currentTglSession",void 0),s([l(cc.Label)],e.prototype,"lbLoseLitmitedValue",void 0),s([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],KingKongSetting:[function(t,e,n){"use strict";cc._RF.push(e,"d6adbWwuG9H45MJb/Kb2Q4A","KingKongSetting");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),c=cc._decorator,a=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeFunction=null,e.NodeBet=null,e.spriteSound=null,e.nodeRule=null,e.scrRule=null,e.sprSoundState=[],e.soundOn=!0,e}return o(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){cc.tween(this.node).set({opacity:0}).to(.3,{opacity:255},{easing:cc.easing.sineOut}).start()},e.prototype.show=function(t){void 0===t&&(t=1);var e=1==t?this.NodeFunction:this.NodeBet,n=1==t?this.NodeBet:this.NodeFunction;e.active=!0,n.active=!1,cc.tween(e).set({y:-this.node.height/2-e.height/2}).to(.3,{y:-this.node.height/2+e.height/2},{easing:cc.easing.sineOut}).start()},e.prototype.setConfigBet=function(t){for(var e=this.NodeBet.getChildByName("TglContainer"),n=0;n<t.length;n++){var i=e.children[n].getComponent(cc.Toggle);i.checkEvents[0].customEventData=t[n]+"",i.node.getComponentInChildren(cc.Label).string=r.Windown.formatNumber(t[n])+""}},e.prototype.onClickHome=function(){r.Windown.KingKong.onClickBackToLobby()},e.prototype.onClickSound=function(){this.soundOn=!this.soundOn,this.spriteSound.spriteFrame=this.sprSoundState[this.soundOn?0:1],r.Windown.KingKong.audio.isActiveMusic=this.soundOn,r.Windown.KingKong.audio.isActiveSound=this.soundOn},e.prototype.onClickRule=function(){this.nodeRule.active=!0,cc.Tween.stopAllByTarget(this.nodeRule),cc.tween(this.nodeRule).set({y:-1280,opacity:0}).to(.3,{y:0,opacity:255},{easing:cc.easing.quadIn}).start(),this.NodeFunction.active=!1},e.prototype.onHideRule=function(){var t=this;this.NodeFunction.active=!0,cc.Tween.stopAllByTarget(this.nodeRule),cc.tween(this.nodeRule).to(.2,{y:-1280},{easing:cc.easing.quadOut}).call(function(){t.nodeRule.active=!1}).start(),this.scrRule.scrollToTop()},e.prototype.onHideSetting=function(){var t=this;cc.tween(this.node).to(.1,{opacity:0},{easing:cc.easing.sineIn}).call(function(){t.node.active=!1}).start()},e.prototype.onClickHistory=function(){r.Windown.KingKong.audio.playClick(),r.Windown.KingKong.onShowPopupHistory()},e.prototype.onClickSelectBet=function(t,e){r.Windown.KingKong.setBetValue(parseInt(e))},s([l(cc.Node)],e.prototype,"NodeFunction",void 0),s([l(cc.Node)],e.prototype,"NodeBet",void 0),s([l(cc.Sprite)],e.prototype,"spriteSound",void 0),s([l(cc.Node)],e.prototype,"nodeRule",void 0),s([l(cc.ScrollView)],e.prototype,"scrRule",void 0),s([l([cc.SpriteFrame])],e.prototype,"sprSoundState",void 0),s([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],KingKongSymbol:[function(t,e,n){"use strict";cc._RF.push(e,"a66f5jokn9IOIZKip+Gjcgm","KingKongSymbol");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),c=t("./KingKongAssets"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.spine=null,e.indexSymbol=0,e.indexStop=-1,e.speed=.1,e.id=0,e.symbolAtlas=null,e.collumCtrl=null,e.spriteAnim=null,e.initSpriteScale=1,e.animScatter=null,e.animWild=null,e}return o(e,t),e.prototype.update=function(){this.collumCtrl.isChangeSpeedNFS&&(this.speed=this.collumCtrl.speedNFS)},e.prototype.onLoad=function(){this.spriteAnim=this.sprite.node.getComponent(cc.Animation),this.symbolAtlas=c.default.instance.symbolAtlas,this.initSpriteScale=this.sprite.node.scale},e.prototype.start=function(){},e.prototype.setSprite=function(t,e){void 0===e&&(e=!1),this.id=t,this.sprite.spriteFrame=this.symbolAtlas.getSpriteFrame(t+""),this.sprite.sizeMode=cc.Sprite.SizeMode.TRIMMED,t<4&&this.sprite.node.setContentSize(cc.size(1.2*this.sprite.node.width,1.2*this.sprite.node.height)),this.sprite.node.scale=11==this.id?.7:.8,this.spine&&(this.spine.active=!1),this.collumCtrl.isSetDarkForNFS&&12!=this.id?this.sprite.node.color=cc.Color.GRAY:this.sprite.node.color=cc.Color.WHITE},e.prototype.setSpine=function(){},e.prototype.setRandomSprite=function(){var t=r.Windown.RandomNumber(0,10);this.sprite.spriteFrame=this.symbolAtlas.getSpriteFrame(t.toString()),this.sprite.sizeMode=cc.Sprite.SizeMode.TRIMMED,t<4&&this.sprite.node.setContentSize(cc.size(1.2*this.sprite.node.width,1.2*this.sprite.node.height)),this.sprite.node.scale=11==t?.7:.8},e.prototype.spin=function(){var t=this,e=this.node.y-this.collumCtrl.stepMove;this.indexSymbol++,cc.tween(this.node).to(.25,{y:e},{easing:cc.easing.backIn}).call(function(){t.loopMove()}).start()},e.prototype.loopMove=function(){var t=this;this.indexSymbol>3&&(this.node.y=this.collumCtrl.positionReset,this.indexSymbol=0,this.setSprite(r.Windown.RandomNumber(0,8),!0)),this.indexSymbol++,cc.tween(this.node).by(this.speed,{y:-this.collumCtrl.stepMove}).call(function(){t.collumCtrl.isStop?t.stopMove():t.loopMove()}).start()},e.prototype.stopMove=function(){var t=this;if(this.indexSymbol>3)if(this.node.y=this.collumCtrl.positionReset,this.indexSymbol=0,this.collumCtrl.listIDResult.length>0){this.indexStop=this.collumCtrl.listIDResult.length;var e=this.collumCtrl.listIDResult.pop();this.setSprite(e),this.stopMove()}else{this.node.y=this.collumCtrl.positionReset+this.collumCtrl.stepMove;var n=(this.indexSymbol=0)?cc.easing.backOut:null;cc.tween(this.node).to(this.speed,{y:this.node.y-this.collumCtrl.stepMove},{easing:n}).start(),this.setSprite(r.Windown.RandomNumber(0,9))}else{n=this.indexSymbol+1==this.indexStop?cc.easing.backOut:null;var i=this.indexSymbol+1==this.indexStop?3*this.speed:this.speed;this.collumCtrl.isNeerSpin&&(n=null,i=this.speed),this.indexSymbol++,cc.tween(this.node).by(i,{y:-this.collumCtrl.stepMove},{easing:n}).call(function(){t.indexSymbol!=t.indexStop?t.stopMove():3==t.indexSymbol&&t.collumCtrl.stopCollumCompleted()}).start(),3==this.indexSymbol&&this.scheduleOnce(function(){t.collumCtrl.prepareStop()},.85*i)}},e.prototype.showEffectWin=function(){switch(this.id){case 11:this.spine.active=!0,this.sprite.node.active=!1,this.spine.destroyAllChildren();var t=cc.instantiate(r.Windown.KingKong.AssetsKingKong.assetParent.getChildByName("Symbol_"+this.id));this.spine.addChild(t),t.active=!0;break;case 12:this.spine.active=!0,this.sprite.node.active=!1;break;default:this.spine.active=!1,this.sprite.node.active=!0,this.sprite.node.color=cc.Color.WHITE,this.spriteAnim.play("SymbolWin")}},e.prototype.Reset=function(){0==this.indexSymbol&&this.setSprite(r.Windown.RandomNumber(0,9)),this.sprite.node.color=cc.Color.WHITE,this.indexStop=-1,this.spriteAnim.stop(),this.sprite.node.scale=11==this.id?.7:this.initSpriteScale,this.sprite.node.active=!0,this.spine.active=!1,this.hideSpine()},e.prototype.showScatter=function(){var t=this;this.sprite.node.active=!1,null==this.animScatter&&(this.animScatter=cc.instantiate(r.Windown.KingKong.AssetsKingKong.symbolScatter),this.animScatter.parent=this.node),this.scheduleOnce(function(){t.sprite.node.active=!0},2),cc.log("showScatter Windown.KingKong.isFreeSpin="+r.Windown.KingKong.isFreeSpin),r.Windown.KingKong.isWin2Scatter||r.Windown.KingKong.isFreeSpin||this.scheduleOnce(function(){var e=cc.instantiate(r.Windown.KingKong.AssetsKingKong.evenBall),n=r.Windown.KingKong.animKong.node.parent;e.active=!0,e.parent=n,e.setPosition(n.convertToNodeSpaceAR(t.node.parent.convertToWorldSpaceAR(t.node.position)));var i=r.Windown.KingKong.animKong.node.position;cc.tween(e).to(.5,{position:i},{easing:cc.easing.sineIn}).call(function(){3==t.collumCtrl.collumIndex&&(r.Windown.KingKong.animKong.playAnimation("Collect",1),r.Windown.KingKong.animKong.once("complete",function(){r.Windown.KingKong.animKong.playAnimation("Idle_2",1),r.Windown.KingKong.animKong.once("complete",function(){r.Windown.KingKong.animKong.playAnimation("Win_2",1),r.Windown.KingKong.animKong.once("complete",function(){cc.tween(r.Windown.KingKong.animKong.node).to(.3,{opacity:0}).call(function(){r.Windown.KingKong.animKong.node.active=!1,r.Windown.KingKong.animKong.node.opacity=255}).start()})})})),e.destroy()}).start()},1.5),this.animScatter.active=!0,this.animScatter.getChildByName("Symbol_1_ske_0").getComponent(dragonBones.ArmatureDisplay).playAnimation("Symbol_1",1)},e.prototype.hideSpine=function(){null!=this.animScatter&&(this.animScatter.active=!1),null!=this.animWild&&(this.animWild.active=!1)},s([p(cc.Sprite)],e.prototype,"sprite",void 0),s([p(cc.Node)],e.prototype,"spine",void 0),s([p],e.prototype,"indexSymbol",void 0),s([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./KingKongAssets":"KingKongAssets"}],KingKongView:[function(t,e,n){"use strict";cc._RF.push(e,"846abgTKt1FjqOmq2RxVufX","KingKongView");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,i){var o,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(s<3?o(r):s>3?o(e,n,r):o(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,s){function r(t){try{a(i.next(t))}catch(e){s(e)}}function c(t){try{a(i.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.WIN_TYPE=n.GAME_STATE=n.SPINE_TYPE=void 0;var a,l,p,u=t("../../../Scritps/DefineTs/EVENT_MANAGER"),h=t("../../../Scritps/DefineTs/PlayerPP"),d=t("../../../Scritps/DefineTs/REQUEST_CODE"),f=t("../../../Scritps/DefineTs/TextDefine"),g=t("../../../Scritps/Game/GAME_TYPE"),S=t("../../../Scritps/Network/ConectManager"),y=t("../../../Scritps/Other/LbMonoSpace"),m=t("../../../Scritps/Other/MakeDelay"),v=t("../../../Scritps/Util"),b=t("../../../Scritps/Windown"),w=t("./KingKongAssets"),_=t("./KingKongAudio"),K=t("./KingKongCollum"),C=t("./KingKongEffect"),F=t("./KingKongHistory"),R=t("./KingKongInfoBar"),W=t("./KingKongSetting"),E=t("./KingKongSettingAuto"),A=cc._decorator,O=A.ccclass,N=A.property;(function(t){t[t.NORMAL=0]="NORMAL",t[t.AUTO=1]="AUTO"})(a=n.SPINE_TYPE||(n.SPINE_TYPE={})),function(t){t[t.PREPARE=0]="PREPARE",t[t.SPINNING=1]="SPINNING",t[t.SHOWING_RESULT=2]="SHOWING_RESULT",t[t.JOIN_GAME=3]="JOIN_GAME"}(l=n.GAME_STATE||(n.GAME_STATE={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.BIGWIN=1]="BIGWIN"}(p=n.WIN_TYPE||(n.WIN_TYPE={}));var B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bkgSprite=null,e.collumContainer=null,e.sprGameName=null,e.maskFS=null,e.nodeFSLeft=null,e.nodeBottomNormal=null,e.nodePopupClickToFS=null,e.maskEndFS=null,e.maskGetFS=null,e.baseBgSpin=null,e.listSfBgGetFS=[],e.listSfBGSpin=[],e.btnSpin=null,e.btnAuto=null,e.btnStopAuto=null,e.btnChangeBet=null,e.lbAutoSpinRemain=null,e.lbBetValue=null,e.lbBalance=null,e.lbTotalWin=null,e.lbFSGet=null,e.lbFSRemain=null,e.lbFSTotal=null,e.lbFSTotalWin=null,e.animKong=null,e.animBaseBGVolcano=null,e.animBaseBGFront=null,e.AssetsKingKong=null,e.infoBar=null,e.settingView=null,e.settingAuto=null,e.effectController=null,e.popupLichSu=null,e.audio=null,e.makeDelay=null,e.listCol=[],e.listCollum=[],e.listBetValue=[],e.spinReelView=[],e.isAutoSpin=!1,e.isTurbo=!1,e.isScatter=!1,e.isFreeSpin=!1,e.isWin2Scatter=!1,e.autoSpinRemain=0,e.limitLoseValue=0,e.betValue=1e3,e.gameType=-1,e.winType=0,e.curRoomBet=100,e.totalLineBet=20,e.agWin=0,e.agUser=0,e.freeSpinLeft=0,e.currentFSTurn=0,e.totalFreeSpin=0,e.totalWinFS=0,e.limitAgUserLose=0,e.dataFinish=null,e.sfs=null,e.roomSFS=null,e.listConfigBet=[],e.listLineWin=[],e.stopShowLineCB=null,e.spinType=a.NORMAL,e.gameState=l.JOIN_GAME,e.objDelayWaitShowAgWin=null,e.payLine=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,2,2],[2,2,1,0,0],[1,0,1,2,1],[1,2,1,0,1],[1,0,0,1,0],[1,2,2,1,2],[0,1,0,0,1],[2,1,2,2,1],[0,2,0,2,0],[2,0,2,0,2],[1,0,2,0,1],[1,2,0,2,1],[0,1,1,1,0],[2,1,1,1,2],[0,2,2,2,0]],e.indexSpinTest=0,e.indexSpin=0,e}return o(e,t),e.prototype.onLoad=function(){b.Windown.KingKong=this,this.makeDelay=new m.default(this),cc.log("start KingKong"),this.gameType=g.default.KingKong,this.sfs=S.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(u.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.setupView(),this.gameState=l.JOIN_GAME,this.sendJoinRoom(),this.agUser=b.Windown.User.userAg},e.prototype.sendJoinRoom=function(){cc.log("send creat room");try{var t=S.ConectManager.getIns().getValibleRoomName(),e=new SFS2X.RoomSettings(t),n=new SFS2X.RoomExtension("SlotInCaExtension","ext.Room.SlotInCa.SlotGameView");e.extension=n,e.isGame=!0,e.maxUsers=1,e.groupId="SlotInCa",this.sfs.send(new SFS2X.CreateRoomRequest(e,!0))}catch(i){cc.error(i),this.onDisconnect()}},e.prototype.onDestroy=function(){b.Windown.KingKong=null,this.dataFinish&&(b.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),b.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),b.Windown.UIManager.changeRotation(),this.makeDelay.clear()},e.prototype.onDisconnect=function(){cc.log("disconnect"),b.Windown.UIManager.hideLoading(),b.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.extResponse=function(t){var e=t.cmd,n=t.params;switch(e){case d.REQUEST_CODE.SpinInCa:cc.log(b.Windown.SFSObjToJson(n)),this.handleFinish(n);break;case d.REQUEST_CODE.HistoryInCa:this.popupLichSu.responseServer(n);break;case d.REQUEST_CODE.HistoryChiTietInCa:break;default:cc.log("extResponse:",b.Windown.SFSObjToJson(n))}},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),b.Windown.UIManager.hideLoading(),b.Windown.UIManager.hideLoadingData(),b.Windown.Dialog.showLog(f.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.onJoinRoom=function(t){var e=this,n=t.room;if("SlotInCa"==n.groupId){this.roomSFS=n,b.Windown.UIManager.hideLoadingData();var i=n.getVariable("cf").value;cc.log(i);var o=[],s=JSON.parse(i);for(var r in s){var c=Object.create(null);c.bet=parseInt(r),c.perJp=s[r].percentPot/100,o.push(c)}o.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=o;var a=[];this.listConfigBet.forEach(function(t,n){n>0&&a.push(t.bet*e.totalLineBet)}),this.settingView.setConfigBet(a),this.curRoomBet=this.listConfigBet[1].bet,this.setBetValue(this.curRoomBet*this.totalLineBet),this.lbBalance.string=b.Windown.formatNumber(b.Windown.User.userAg),this.lbTotalWin.string="0"}},e.prototype.userExitRoom=function(t){cc.log("user exit room"),"SlotInCa"==t.room.groupId&&t.user.isItMe&&cc.director.loadScene("main")},e.prototype.onCreateError=function(){b.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),b.Windown.Dialog.showLog(f.TextDefine.ERR_JOIN_ROOM)},e.prototype.start=function(){for(var t=0,e=this.listCol.length;t<e;t++){var n=this.listCol[t].getComponent(K.default);this.listCollum.push(n)}this.animBaseBGFront.armatureName="Volcano",this.animBaseBGFront.playAnimation("Base_BG",-1),this.animBaseBGVolcano.playAnimation("Base_BG",-1)},e.prototype.setBetValue=function(t){this.betValue=t,this.curRoomBet=this.betValue/this.totalLineBet,this.lbBetValue.string=b.Windown.formatNumber(this.betValue)+"",cc.log("curRoomBet="+this.curRoomBet)},e.prototype.setupView=function(){var t=cc.find("Game",this.node);if(cc.sys.isMobile)t.angle=90,this.bkgSprite.angle=90,this.bkgSprite.scale=1280/720;else{var e=cc.winSize.height/1280;t.angle=0,t.scale=e,this.bkgSprite.angle=0;var n=this.bkgSprite.addComponent(cc.Widget);n.left=0,n.right=0,n.bottom=0,n.top=0}b.Windown.UIManager.changeRotation(!0)},e.prototype.onClickSpin=function(){this.audio.playClick(),cc.log("onClickSpin:",this.gameState),this.gameState!=l.SHOWING_RESULT&&(this.infoBar.lbTotalWin.setMoneyNoTime(0),cc.log("totaFreeSPin="+this.totalFreeSpin),this.totalFreeSpin>0&&(this.currentFSTurn++,this.lbFSRemain.string=this.currentFSTurn+""),this.startSpin(),this.setStateBtn(),this.effectButtonSpin(),this.sendClickSpin())},e.prototype.onClickSpinTest=function(){this.audio.playClick(),this.gameState!=l.SHOWING_RESULT&&(this.totalFreeSpin>0&&(this.currentFSTurn++,this.lbFSRemain.string=this.currentFSTurn+""),this.startSpin(),this.setStateBtn(),this.effectButtonSpin(),this.sendClickSpinTest("[[1,2,3],[12,3,4],[12,5,6],[12,7,8],[9,10,11]]"))},e.prototype.sendClickSpinTest=function(t){this.lbBalance.setMoney(this.agUser-this.betValue);var e=S.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),e.putUtfString("arr",t),S.ConectManager.getIns().sendRequest("testSpinInCa",e,this.roomSFS)},e.prototype.sendClickSpin=function(){this.lbBalance.setMoney(this.agUser-this.betValue);var t=S.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),S.ConectManager.getIns().sendRequest(d.REQUEST_CODE.SpinInCa,t,this.roomSFS)},e.prototype.startSpin=function(){this.autoSpinRemain>0&&this.isAutoSpin?(this.autoSpinRemain--,this.lbAutoSpinRemain.node.active=!0,this.lbAutoSpinRemain.string=this.autoSpinRemain+""):(this.autoSpinRemain=0,this.lbAutoSpinRemain.node.active=!1),this.setStateSpin(l.SPINNING),this.listCollum.forEach(function(t){t.spinSymbol()})},e.prototype.activeAllSymbol=function(){this.listCollum.forEach(function(t){t.activeAllSymbol()})},e.prototype.handleFinish=function(t){var e=this;t.containsKey(h.PlayerPP.ERR_MESSAGE)?b.Windown.Dialog.showLog(t.get(h.PlayerPP.ERR_MESSAGE)):(this.dataFinish=t,this.agWin=this.dataFinish.getLong("agWin"),this.agUser=this.dataFinish.getLong("agUser"),this.spinReelView=JSON.parse(t.get("views")),this.isWin2Scatter=this.checkWin2Scatter(),this.isScatter=t.getBool("isScarter"),this.listLineWin=JSON.parse(b.Windown.SFSArrToJson(t.get("listLineWin"))),this.isFreeSpin=t.getBool("freeSpin"),this.freeSpinLeft=t.getInt("numFreeSpin"),this.isScatter&&(this.totalFreeSpin+=15),this.isFreeSpin&&(this.totalWinFS+=this.agWin),this.agWin>10*this.betValue?this.winType=p.BIGWIN:this.winType=p.NORMAL,this.setNearSpinEffect(),this.scheduleOnce(function(){e.handleStopSpin()},this.isAutoSpin?.5:1))},e.prototype.checkWin2Scatter=function(){var t=0;return this.spinReelView.forEach(function(e){e.includes(12)&&t++}),2==t},e.prototype.getMakeDelay=function(t){return this.makeDelay.getDelay(t)},e.prototype.handleStopSpin=function(){return r(this,void 0,void 0,function(){var t,e,n,i;return c(this,function(o){switch(o.label){case 0:o.trys.push([0,8,,9]),t=0,e=this.listCollum.length,o.label=1;case 1:return t<e?(n=this.listCollum[t]).isNeerSpin?[4,n.Stop(this.spinReelView[t])]:[3,3]:[3,7];case 2:return o.sent(),[3,4];case 3:n.Stop(this.spinReelView[t]),o.label=4;case 4:return[4,b.Windown.KingKong.getMakeDelay(this.isAutoSpin?.1:.25).prosime];case 5:o.sent(),o.label=6;case 6:return t++,[3,1];case 7:return[3,9];case 8:return i=o.sent(),v.Util.ThrowErrProsime(i),[3,9];case 9:return[2]}})})},e.prototype.allCollumStopCompleted=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this.setStateSpin(l.SHOWING_RESULT),this.currentFSTurn==this.totalFreeSpin&&this.isFreeSpin?[4,this.showTotalWinFreeSPin()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.isScatter||this.isWin2Scatter?[4,this.showScatterSymbol()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.listLineWin.length>0||this.isWin2Scatter||this.isScatter?(this.infoBar.updateTotalWin(this.agWin),cc.tween(this.node).delay(1.5).call(function(){t.setStateBtn(),t.effectButtonSpin()}).start(),this.lbBalance.setMoney(this.agUser),this.listLineWin.length>0?[4,this.showAllWinLine()]:[3,6]):[3,7];case 5:e.sent(),e.label=6;case 6:return[3,8];case 7:this.setStateBtn(),this.effectButtonSpin(),e.label=8;case 8:return this.isScatter?[4,this.effectController.showBigWin(this.agWin)]:[3,11];case 9:return e.sent(),[4,this.showBgFS()];case 10:e.sent(),e.label=11;case 11:return cc.log("winType=",this.winType),this.winType!=p.BIGWIN?[3,15]:this.isFreeSpin&&this.currentFSTurn==this.totalFreeSpin?[4,this.effectController.showBigWin(this.totalWinFS)]:[3,13];case 12:return e.sent(),[3,15];case 13:return this.isScatter?[3,15]:[4,this.effectController.showBigWin(this.agWin)];case 14:e.sent(),e.label=15;case 15:return this.objDelayWaitShowAgWin=b.Windown.KingKong.getMakeDelay(this.agWin>0?.5:.25),[4,this.objDelayWaitShowAgWin.prosime];case 16:return e.sent(),this.resetSlotView(),[2]}})})},e.prototype.showScatterSymbol=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t,n;return c(this,function(i){switch(i.label){case 0:for(i.trys.push([0,2,,3]),t=0;t<this.listCollum.length;t++)this.listCollum[t].showScatter();return[4,b.Windown.KingKong.getMakeDelay(this.isWin2Scatter||this.isFreeSpin?3:8).prosime];case 1:return i.sent(),cc.log("ShowwScatter Symbol xong"),e(null),[3,3];case 2:return n=i.sent(),v.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})})]})})},e.prototype.showBgFS=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t=this;return c(this,function(){try{this.sprGameName.active=!1,this.isFreeSpin?cc.tween(this.maskGetFS).delay(2).to(.5,{scale:2,opacity:0,y:-50},{easing:cc.easing.sineIn}).call(function(){t.maskGetFS.y=0,t.maskGetFS.scale=1,t.maskGetFS.opacity=255,t.maskFS.active=!1,e(null)}).start():(this.animBaseBGVolcano.playAnimation("TS",1),this.animBaseBGFront.playAnimation("TS",1),this.animBaseBGVolcano.once("complete",function(){t.animBaseBGFront.playAnimation("Free_BG",-1),t.animBaseBGVolcano.playAnimation("Free_BG",-1),t.maskEndFS.active=!1,cc.tween(t.maskGetFS).delay(.5).to(.5,{scale:2,opacity:0,y:-50},{easing:cc.easing.sineIn}).call(function(){t.maskGetFS.y=0,t.maskGetFS.scale=1,t.maskGetFS.opacity=255,t.maskFS.active=!1,e(null)}).start()})),this.maskFS.active=!0,this.maskGetFS.active=!0,this.isFreeSpin?this.maskGetFS.getChildByName("sprTextMask").getComponent(cc.Sprite).spriteFrame=this.listSfBgGetFS[1]:this.maskGetFS.getChildByName("sprTextMask").getComponent(cc.Sprite).spriteFrame=this.listSfBgGetFS[0],this.nodeBottomNormal.active=!1,this.nodeFSLeft.active=!0,this.baseBgSpin.spriteFrame=this.listSfBGSpin[1],this.lbFSTotal.setMoney(this.totalFreeSpin,!1)}catch(n){v.Util.ThrowErrProsime(n)}return[2]})})})]})})},e.prototype.showAllWinLine=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(){return cc.log("showAllWinLine"),[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t,n,i,o;return c(this,function(s){switch(s.label){case 0:for(s.trys.push([0,3,,4]),this.hideAllSymbol(),t=0,n=this.listLineWin.length;t<n;t++)i=this.listLineWin[t],this.effectWinline(i.id,i.symbol,i.stack);return this.btnSpin.node.off("click"),this.btnSpin.node.on("click",function(){cc.log("OnCLickBtnSpin"),e(null)}),this.isScatter||this.isFreeSpin||this.isAutoSpin?[4,b.Windown.KingKong.getMakeDelay(1.5).prosime]:[3,2];case 1:s.sent(),e(null),s.label=2;case 2:return[3,4];case 3:return o=s.sent(),v.Util.ThrowErrProsime(o),[3,4];case 4:return[2]}})})})]})})},e.prototype.stopShowLine=function(t){t(null)},e.prototype.effectWinline=function(t,e,n){for(var i=this.payLine[t-1],o=0;o<n+1;o++)this.listCollum[o].showSymbolWin(i[o]+1)},e.prototype.resetSlotView=function(){cc.log("ResetSlotViewL Limit Lose="+this.limitLoseValue),cc.log("ResetSlotViewL Limit AGUser="+this.limitAgUserLose),this.setStateSpin(l.PREPARE),this.infoBar.prepareSpin(),this.listCollum.forEach(function(t){t.Reset()}),this.agUser<this.limitAgUserLose&&(this.limitAgUserLose=0,this.isAutoSpin,this.autoSpinRemain=0,this.infoBar.updateInfoText("Ch\u1ea1m h\u1ea1n m\u1ee9c d\u1eebng l\u1ed7!")),this.isAutoSpin&&this.autoSpinRemain>0?0==this.totalFreeSpin&&this.onClickSpin():(this.lbAutoSpinRemain.node.active=!1,this.btnStopAuto.node.active=!1),this.isScatter&&!this.isFreeSpin&&(this.nodePopupClickToFS.active=!0,this.isAutoSpin=!0),this.isFreeSpin&&(this.currentFSTurn==this.totalFreeSpin?(cc.log("resetFreeSpin"),this.isFreeSpin=!1,this.currentFSTurn=0,this.totalFreeSpin=0,this.totalWinFS=0,this.indexSpinTest=0,this.lbFSRemain.string="0"):this.onClickSpin())},e.prototype.hidePopupClickToFS=function(){this.nodePopupClickToFS.active=!1,this.onClickSpin()},e.prototype.hideAllSymbol=function(t){void 0===t&&(t=-1),this.listCollum.forEach(function(e){e.hideAllSymbol(t)})},e.prototype.setDarkForNFS=function(t){this.listCollum.forEach(function(e){e!=t&&(e.isSetDarkForNFS=!0,e.hideAllSymbol(12))})},e.prototype.setStateSpin=function(t){switch(this.gameState=t,this.gameState){case l.SPINNING:case l.SHOWING_RESULT:case l.JOIN_GAME:case l.PREPARE:}},e.prototype.setStateBtn=function(){this.gameState==l.SPINNING?(this.btnAuto.node.getChildByName("blockEven").active=!0,this.btnSpin.node.getChildByName("blockEven").active=!0,this.btnChangeBet.node.getChildByName("blockEven").active=!0):(this.btnAuto.node.getChildByName("blockEven").active=!1,this.btnSpin.node.getChildByName("blockEven").active=!1,this.btnChangeBet.node.getChildByName("blockEven").active=!1)},e.prototype.effectButtonSpin=function(){var t=this.btnSpin.node.getChildByName("arrow");this.gameState==l.SPINNING?cc.tween(t).to(.3,{angle:180},{easing:cc.easing.sineIn}).start():this.gameState==l.SHOWING_RESULT&&cc.tween(t).to(.3,{angle:0},{easing:cc.easing.sineOut}).start()},e.prototype.onClickMenu=function(){this.audio.playClick(),this.settingView.node.active=!0,this.settingView.show(1)},e.prototype.onClickChangeBet=function(){this.audio.playClick(),this.isAutoSpin||(this.settingView.node.active=!0,this.settingView.show(2))},e.prototype.onClickAuto=function(){this.audio.playClick(),this.settingAuto.node.active=!0,cc.tween(this.settingAuto.node).set({y:-this.settingAuto.node.height,opacity:150}).to(.3,{y:0,opacity:255},{easing:cc.easing.sineOut}).start()},e.prototype.onClickStopAuto=function(){this.audio.playClick(),this.btnStopAuto.node.active=!1,this.isAutoSpin=!1,this.lbAutoSpinRemain.node.active=!1},e.prototype.setAutoSpin=function(t,e){this.isAutoSpin=!0,this.autoSpinRemain=t,this.limitLoseValue=e*this.betValue,this.btnStopAuto.node.active=!0,this.lbAutoSpinRemain.string=this.autoSpinRemain+"",this.lbAutoSpinRemain.node.active=!0,this.limitAgUserLose=this.agUser-this.limitLoseValue,this.onClickSpin()},e.prototype.setNearSpinEffect=function(){var t=this,e=0;this.spinReelView.forEach(function(n){e>=2&&3==t.listCollum[t.spinReelView.indexOf(n)].collumIndex&&(t.listCollum[t.spinReelView.indexOf(n)].isNeerSpin=!0),n.includes(12)&&e++})},e.prototype.showTotalWinFreeSPin=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t,n,i,o,s=this;return c(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.maskEndFS.active=!0,this.maskFS.active=!0,this.maskGetFS.active=!1,t=this.maskEndFS.getChildByName("Volcano_text_1").getComponent(dragonBones.ArmatureDisplay),n=this.maskEndFS.getChildByName("Volcano_text_0").getComponent(dragonBones.ArmatureDisplay),t.playAnimation("FreeSpin_nd_1_fnt",1),n.playAnimation("FreeSpin_nd_1_fnt",1),this.animBaseBGFront.playAnimation("FreeSpinEnd_1",1),this.animBaseBGVolcano.playAnimation("FreeSpinEnd_1",1),(i=this.maskEndFS.getChildByName("TS_MSG03_vn_png")).y=400,i.scaleY=.5,i.opacity=0,this.totalWinFS>10*this.betValue?this.winType=p.BIGWIN:this.winType=p.NORMAL,cc.tween(i).delay(2).call(function(){s.lbFSTotalWin.setMoney(s.totalWinFS)}).to(.3,{scaleY:1,opacity:255,y:165}).to(.1,{scaleY:.8}).to(.1,{scaleY:1}).delay(2.5).call(function(){s.lbFSTotal.resetLb(),s.maskEndFS.active=!1,s.animBaseBGFront.playAnimation("Base_BG",-1),s.animBaseBGVolcano.playAnimation("Base_BG",-1),s.maskFS.active=!1,s.nodeFSLeft.active=!1,s.nodeBottomNormal.active=!0,s.baseBgSpin.spriteFrame=s.listSfBGSpin[0],s.animKong.node.active=!0,s.animKong.playAnimation("Idle_1",-1),s.sprGameName.active=!0,e(null)}).start(),[4,b.Windown.KingKong.getMakeDelay(3).prosime];case 1:return r.sent(),[3,3];case 2:return o=r.sent(),v.Util.ThrowErrProsime(o),[3,3];case 3:return[2]}})})})]})})},e.prototype.showBigWin=function(){return r(this,void 0,void 0,function(){var t=this;return c(this,function(){return[2,new Promise(function(){return r(t,void 0,void 0,function(){return c(this,function(){return[2]})})})]})})},e.prototype.onClickBackToLobby=function(){b.Windown.KingKong.audio.playClick(),this.roomSFS?S.ConectManager.getIns().sendLeaveRoom(this.roomSFS):cc.director.loadScene("main")},e.prototype.onShowPopupHistory=function(){this.popupLichSu.show()},e.instance=null,s([N(cc.Node)],e.prototype,"bkgSprite",void 0),s([N(cc.Node)],e.prototype,"collumContainer",void 0),s([N(cc.Node)],e.prototype,"sprGameName",void 0),s([N(cc.Node)],e.prototype,"maskFS",void 0),s([N(cc.Node)],e.prototype,"nodeFSLeft",void 0),s([N(cc.Node)],e.prototype,"nodeBottomNormal",void 0),s([N(cc.Node)],e.prototype,"nodePopupClickToFS",void 0),s([N(cc.Node)],e.prototype,"maskEndFS",void 0),s([N(cc.Node)],e.prototype,"maskGetFS",void 0),s([N(cc.Sprite)],e.prototype,"baseBgSpin",void 0),s([N([cc.SpriteFrame])],e.prototype,"listSfBgGetFS",void 0),s([N([cc.SpriteFrame])],e.prototype,"listSfBGSpin",void 0),s([N(cc.Button)],e.prototype,"btnSpin",void 0),s([N(cc.Button)],e.prototype,"btnAuto",void 0),s([N(cc.Button)],e.prototype,"btnStopAuto",void 0),s([N(cc.Button)],e.prototype,"btnChangeBet",void 0),s([N(cc.Label)],e.prototype,"lbAutoSpinRemain",void 0),s([N(y.default)],e.prototype,"lbBetValue",void 0),s([N(y.default)],e.prototype,"lbBalance",void 0),s([N(cc.Label)],e.prototype,"lbTotalWin",void 0),s([N(y.default)],e.prototype,"lbFSGet",void 0),s([N(y.default)],e.prototype,"lbFSRemain",void 0),s([N(y.default)],e.prototype,"lbFSTotal",void 0),s([N(y.default)],e.prototype,"lbFSTotalWin",void 0),s([N(dragonBones.ArmatureDisplay)],e.prototype,"animKong",void 0),s([N(dragonBones.ArmatureDisplay)],e.prototype,"animBaseBGVolcano",void 0),s([N(dragonBones.ArmatureDisplay)],e.prototype,"animBaseBGFront",void 0),s([N(w.default)],e.prototype,"AssetsKingKong",void 0),s([N(R.default)],e.prototype,"infoBar",void 0),s([N(W.default)],e.prototype,"settingView",void 0),s([N(E.default)],e.prototype,"settingAuto",void 0),s([N(C.default)],e.prototype,"effectController",void 0),s([N(F.default)],e.prototype,"popupLichSu",void 0),s([N(_.default)],e.prototype,"audio",void 0),s([N([cc.Node])],e.prototype,"listCol",void 0),s([O],e)}(cc.Component);n.default=B,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Other/MakeDelay":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./KingKongAssets":"KingKongAssets","./KingKongAudio":"KingKongAudio","./KingKongCollum":"KingKongCollum","./KingKongEffect":"KingKongEffect","./KingKongHistory":"KingKongHistory","./KingKongInfoBar":"KingKongInfoBar","./KingKongSetting":"KingKongSetting","./KingKongSettingAuto":"KingKongSettingAuto"}]},{},["KingKongAssets","KingKongAudio","KingKongCollum","KingKongEffect","KingKongHistory","KingKongHistoryDetail","KingKongInfoBar","KingKongItemHistory","KingKongSetting","KingKongSettingAuto","KingKongSymbol","KingKongView"]);