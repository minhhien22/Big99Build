window.__require=function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=i[r]={exports:{}};t[r][0].call(p.exports,function(e){return o(t[r][1][e]||e)},p,p.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({AssetCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"9860eVrX0dNJLwYhg0q+vC8","AssetCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=e("../../../Scritps/DefineTs/BUNDLE"),l=e("../../../Scritps/Game/GAME_TYPE"),p=e("../../../Scritps/Windown"),h=e("./SymbolCaiShen"),u=cc._decorator,d=u.ccclass,m=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlasSymbol=null,t.atlasSpecial=null,t.listSkeData1=[],t.listSkeData2=[],t.itemSymbolCaishen=null,t.itemEffNearWin=null,t.effectBkgShuffSymbol=null,t.itemNearWinNoSap=null,t.itemXu=null,t.itemSymbolMutil=null,t.itemAddScater=null,t.itemShuffToWild=null,t.itemShuffToNormal=null,t.itemLongWild=null,t.nearFS=null,t.poolSymbol=new cc.NodePool(h.default),t.poolAddScater=new cc.NodePool(h.default),t.poolEffNearWin=new cc.NodePool,t.poolBkgShuffSymbol=new cc.NodePool,t.poolWinSymbol1=new cc.NodePool,t.poolWinSymbol2=new cc.NodePool,t.poolWinSymbol3=new cc.NodePool,t.poolWinSymbol4=new cc.NodePool,t.poolNearWinNoSap=new cc.NodePool,t.poolXu=new cc.NodePool,t.poolShuffToWild=new cc.NodePool,t.poolShuffToNormal=new cc.NodePool,t}return o(t,e),t.prototype.getSfItemSymbol=function(e,t,i){return i?this.atlasSymbol.getSpriteFrame(this.getNameSymbolWithId(e)+"_blur"):this.atlasSymbol.getSpriteFrame(this.getNameSymbolWithId(e))},t.prototype.getSfBgSymbol=function(e,t,i){return i?this.atlasSymbol.getSpriteFrame(this.getNameBgWithId(e)+this.getNameSizeItem(t)+"_blur"):this.atlasSymbol.getSpriteFrame(this.getNameBgWithId(e)+this.getNameSizeItem(t))},t.prototype.getSfBorderSymbol=function(e,t,i){var n;return n=1==e?"h_silver_frame":"h_gold_frame",i?this.atlasSymbol.getSpriteFrame(n+this.getNameSizeItem(t)+"_blur"):this.atlasSymbol.getSpriteFrame(n+this.getNameSizeItem(t))},t.prototype.getSfBgCaishen=function(e,t){var i;return i=1==e?"s_pattern_a"+this.getNameSizeItem(t):"s_pattern_b"+this.getNameSizeItem(t),this.atlasSymbol.getSpriteFrame(i)},t.prototype.getEffectTakeSymbol=function(e){return p.Windown.loadRes(l.default.Caishen+"","Prefabs/TakeItem"+e,cc.Prefab)},t.prototype.getEffRemoveItem=function(e){return p.Windown.loadRes(l.default.Caishen+"","Prefabs/EffRemoveItem"+e,cc.Prefab)},t.prototype.getNameSymbolWithId=function(e){var t="";switch(e){case 0:t="l_10";break;case 1:t="l_j";break;case 2:t="l_q";break;case 3:t="l_k";break;case 4:t="l_a";break;case 5:t="h_cracker";break;case 6:t="h_cymbal";break;case 7:t="h_purse";break;case 8:t="h_koi";break;case 9:t="h_toad";break;case 10:t="h_dragon";break;case 11:t="s_wild";break;case 12:t="s_scatter_a"}return t},t.prototype.getSymbol=function(){var e=null;return(e=this.poolSymbol.size()>0?this.poolSymbol.get():cc.instantiate(this.itemSymbolCaishen)).scale=2/3,e.active=!0,e},t.prototype.putSymbol=function(e){this.poolSymbol.put(e)},t.prototype.getNearWin=function(){var e=null;return(e=this.poolEffNearWin.size()>0?this.poolEffNearWin.get():cc.instantiate(this.itemEffNearWin)).active=!0,e},t.prototype.putNearWin=function(e){e.destroy()},t.prototype.getSpine=function(e,t){return 11!==e?p.Windown.loadRes(c.BUNDLE.Caishen,"Spines/Symbol/"+this.getNameSpineWithID(e,t),sp.SkeletonData):p.Windown.loadRes(c.BUNDLE.Caishen,"Spines/Wild/"+this.getNameSpineWithID(e,t),sp.SkeletonData)},t.prototype.getWildCaishenSpine=function(e){return p.Windown.loadRes(c.BUNDLE.Caishen,"Spines/Wild/"+cc.js.formatStr("s_wild_feature_1x%s_atlas_wilds",e),sp.SkeletonData)},t.prototype.putSymbolMutil=function(e){e.destroy()},t.prototype.getSymbolMutil=function(){return null},t.prototype.getNameSpineWithID=function(e){var t="";switch(e){case 0:t="l_10_atlas_symbols";break;case 1:t="l_j_atlas_symbols";break;case 2:t="l_q_atlas_symbols";break;case 3:t="l_k_atlas_symbols";break;case 4:t="l_a_atlas_symbols";break;case 5:t="h_cracker_atlas_symbols";break;case 6:t="h_cymbal_atlas_symbols";break;case 7:t="h_purse_atlas_symbols";break;case 8:t="h_koi_atlas_symbols";break;case 9:t="h_toad_atlas_symbols";break;case 10:t="h_lion_atlas_symbols";break;case 11:t="s_wild_atlas_wilds";break;case 12:t="s_scatter_a_atlas_symbols"}return t},t.prototype.getBkgShuffSymbol=function(){var e=null;return(e=this.poolBkgShuffSymbol.size()>0?this.poolBkgShuffSymbol.get():cc.instantiate(this.effectBkgShuffSymbol)).active=!0,e},t.prototype.getNameBgWithId=function(e){return e<5?"l_block":"h_block"},t.prototype.getNameSizeItem=function(e){var t="";switch(e){case 1:t="_a";break;case 2:t="_b";break;case 3:t="_c";break;case 4:t="_d"}return t},t.prototype.putBkgShuffSymbol=function(e){e.destroy()},t.prototype.getWinSymbol=function(e){return r(this,void 0,Promise,function(){var t,i;return a(this,function(n){switch(n.label){case 0:return i=(t=cc).instantiate,[4,p.Windown.loadRes(l.default.Caishen+"","Prefabs/TakeItem"+e,cc.Prefab)];case 1:return[2,i.apply(t,[n.sent()])]}})})},t.prototype.putWinSymbol=function(e){e.destroy()},t.prototype.getNearWinNoSap=function(){var e=null;return(e=this.poolNearWinNoSap.size()>0?this.poolNearWinNoSap.get():cc.instantiate(this.itemNearWinNoSap)).active=!0,e},t.prototype.putNearWinNoSap=function(e){e.destroy()},t.prototype.getXu=function(){var e=null;return(e=this.poolXu.size()>0?this.poolXu.get():cc.instantiate(this.itemXu)).active=!0,e},t.prototype.putXu=function(e){this.poolXu.put(e)},t.prototype.preloadTakeSymbol=function(){for(var e=cc.assetManager.getBundle(l.default.Caishen+""),t=1;t<4;t++)e.preload("Prefabs/TakeItem"+t,function(e){e&&cc.log("Err preload:"+e)}),e.preload("Prefabs/EffRemoveItem"+t,function(e){e&&cc.log("Err preload:"+e)})},t.prototype.getAddScater=function(){var e=null;return(e=this.poolAddScater.size()>0?this.poolAddScater.get():cc.instantiate(this.itemAddScater)).active=!0,e},t.prototype.putAddScater=function(e){e.destroy()},t.prototype.getShuffToWild=function(){var e=null;return(e=this.poolShuffToWild.size()>0?this.poolShuffToWild.get():cc.instantiate(this.itemShuffToWild)).active=!0,e},t.prototype.putShuffToWild=function(e){e.destroy()},t.prototype.getShuffToNormal=function(e){return r(this,void 0,Promise,function(){var t,i;return a(this,function(n){switch(n.label){case 0:return i=(t=cc).instantiate,[4,p.Windown.loadRes(l.default.Caishen+"","Prefabs/NodeAddShuff"+e,cc.Prefab)];case 1:return[2,i.apply(t,[n.sent()])]}})})},t.prototype.putShuffToNormal=function(e){e.destroy()},t.prototype.onDestroy=function(){this.poolSymbol.clear(),this.poolEffNearWin.clear(),this.poolBkgShuffSymbol.clear(),this.poolNearWinNoSap.clear(),this.poolXu.clear(),this.poolWinSymbol1.clear(),this.poolWinSymbol2.clear(),this.poolWinSymbol3.clear(),this.poolWinSymbol4.clear(),this.poolAddScater.clear(),this.poolShuffToWild.clear(),this.poolShuffToNormal.clear()},s([m(cc.SpriteAtlas)],t.prototype,"atlasSymbol",void 0),s([m(cc.SpriteAtlas)],t.prototype,"atlasSpecial",void 0),s([m([sp.SkeletonData])],t.prototype,"listSkeData1",void 0),s([m([sp.SkeletonData])],t.prototype,"listSkeData2",void 0),s([m(cc.Prefab)],t.prototype,"itemSymbolCaishen",void 0),s([m(cc.Node)],t.prototype,"itemEffNearWin",void 0),s([m(cc.Node)],t.prototype,"effectBkgShuffSymbol",void 0),s([m(cc.Node)],t.prototype,"itemNearWinNoSap",void 0),s([m(cc.Node)],t.prototype,"itemXu",void 0),s([m(cc.Node)],t.prototype,"itemSymbolMutil",void 0),s([m(cc.Prefab)],t.prototype,"itemAddScater",void 0),s([m(cc.Node)],t.prototype,"itemShuffToWild",void 0),s([m(cc.Node)],t.prototype,"itemShuffToNormal",void 0),s([m(cc.Node)],t.prototype,"itemLongWild",void 0),s([m(cc.Prefab)],t.prototype,"nearFS",void 0),s([d],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/DefineTs/BUNDLE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Windown":void 0,"./SymbolCaiShen":"SymbolCaiShen"}],AudioCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"e35130mrZBGiZgFn/dkYp23","AudioCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Parent/AudioManager"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.click=null,t.bgm_bigwin_end=null,t.bgm_bigwin_end_coin=null,t.bgm_bigwin_main=null,t.bgm_fs=null,t.bgm_mg=null,t.bgm_totalwin_end=null,t.bgm_totalwin_main=null,t.fastspinEnd=null,t.fastspinStart=null,t.fsIntro=null,t.fsSpin=null,t.heartbeat=null,t.heartbeatNoise=null,t.heartbeatSlowdrop=null,t.list_item_click=null,t.menu_icon_press=null,t.prizeInfobarTotalwin=null,t.prizeInfobarTotalwinAndChip=null,t.spinActiveLoop=null,t.prizeInfoSmallwin=null,t.prizeInfobarTotalwinMedEnd=null,t.prizeInfobarTotalwinMedMain=null,t.prizePayoutHighlight=null,t.prizePayoutHighlightStart=null,t.prizeSmallwin=null,t.prizeWinMultiplied=null,t.scatterWinHighlight=null,t.slider_effect=null,t.spinBtn=null,t.spinStop=null,t.symCollapse=null,t.symRouletteEnd=null,t.symRouletteRolling=null,t.symRouletteStart=null,t.symScatter=null,t.symShrink=null,t.wildShrink=null,t.symWild=null,t.uiCollect=null,t.wallet_counting_above=null,t.spinStopQuick=null,t.bgmBigwinMain=null,t.bgmBigwinEnd=null,t.scatterWinHighligh=null,t.fsTrans=null,t.bgmTotalwinMain=null,t.bgmTotalwinEnd=null,t.openSpinFree=null,t.spinFSTick=null,t.spinFSStop=null,t.fsTransClose=null,t}return o(t,e),t.prototype.playClick=function(){this.playEffect(this.click)},t.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.6))},t.prototype.playIndexTakeLine=function(){},t.prototype.playSmalWin=function(){},t.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.bgm_fs,.6,!0)},t.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},t.prototype.playStopAudio=function(){var e=this.spinStop;this.playEffectNoStop(e,1)},t.prototype.playSymCollapse=function(){this.playEffectNoStop(this.symCollapse,.3)},s([l(cc.AudioClip)],t.prototype,"click",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_bigwin_end",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_bigwin_end_coin",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_bigwin_main",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_fs",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_mg",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_totalwin_end",void 0),s([l(cc.AudioClip)],t.prototype,"bgm_totalwin_main",void 0),s([l(cc.AudioClip)],t.prototype,"fastspinEnd",void 0),s([l(cc.AudioClip)],t.prototype,"fastspinStart",void 0),s([l(cc.AudioClip)],t.prototype,"fsIntro",void 0),s([l(cc.AudioClip)],t.prototype,"fsSpin",void 0),s([l(cc.AudioClip)],t.prototype,"heartbeat",void 0),s([l(cc.AudioClip)],t.prototype,"heartbeatNoise",void 0),s([l(cc.AudioClip)],t.prototype,"heartbeatSlowdrop",void 0),s([l(cc.AudioClip)],t.prototype,"list_item_click",void 0),s([l(cc.AudioClip)],t.prototype,"menu_icon_press",void 0),s([l(cc.AudioClip)],t.prototype,"prizeInfobarTotalwin",void 0),s([l(cc.AudioClip)],t.prototype,"prizeInfobarTotalwinAndChip",void 0),s([l(cc.AudioClip)],t.prototype,"spinActiveLoop",void 0),s([l(cc.AudioClip)],t.prototype,"prizeInfoSmallwin",void 0),s([l(cc.AudioClip)],t.prototype,"prizeInfobarTotalwinMedEnd",void 0),s([l(cc.AudioClip)],t.prototype,"prizeInfobarTotalwinMedMain",void 0),s([l(cc.AudioClip)],t.prototype,"prizePayoutHighlight",void 0),s([l(cc.AudioClip)],t.prototype,"prizePayoutHighlightStart",void 0),s([l(cc.AudioClip)],t.prototype,"prizeSmallwin",void 0),s([l(cc.AudioClip)],t.prototype,"prizeWinMultiplied",void 0),s([l(cc.AudioClip)],t.prototype,"scatterWinHighlight",void 0),s([l(cc.AudioClip)],t.prototype,"slider_effect",void 0),s([l(cc.AudioClip)],t.prototype,"spinBtn",void 0),s([l(cc.AudioClip)],t.prototype,"spinStop",void 0),s([l(cc.AudioClip)],t.prototype,"symCollapse",void 0),s([l(cc.AudioClip)],t.prototype,"symRouletteEnd",void 0),s([l(cc.AudioClip)],t.prototype,"symRouletteRolling",void 0),s([l(cc.AudioClip)],t.prototype,"symRouletteStart",void 0),s([l(cc.AudioClip)],t.prototype,"symScatter",void 0),s([l(cc.AudioClip)],t.prototype,"symShrink",void 0),s([l(cc.AudioClip)],t.prototype,"wildShrink",void 0),s([l(cc.AudioClip)],t.prototype,"symWild",void 0),s([l(cc.AudioClip)],t.prototype,"uiCollect",void 0),s([l(cc.AudioClip)],t.prototype,"wallet_counting_above",void 0),s([l(cc.AudioClip)],t.prototype,"spinStopQuick",void 0),s([l(cc.AudioClip)],t.prototype,"bgmBigwinMain",void 0),s([l(cc.AudioClip)],t.prototype,"bgmBigwinEnd",void 0),s([l(cc.AudioClip)],t.prototype,"scatterWinHighligh",void 0),s([l(cc.AudioClip)],t.prototype,"fsTrans",void 0),s([l(cc.AudioClip)],t.prototype,"bgmTotalwinMain",void 0),s([l(cc.AudioClip)],t.prototype,"bgmTotalwinEnd",void 0),s([l(cc.AudioClip)],t.prototype,"openSpinFree",void 0),s([l(cc.AudioClip)],t.prototype,"spinFSTick",void 0),s([l(cc.AudioClip)],t.prototype,"spinFSStop",void 0),s([l(cc.AudioClip)],t.prototype,"fsTransClose",void 0),s([c],t)}(r.default);i.default=p,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],BigWinCaiShen:[function(e,t,i){"use strict";cc._RF.push(t,"ed905nILIdAx47oqlinLTaU","BigWinCaiShen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.BigWinCaishen=void 0;var c=e("../../../Scritps/Other/LbMonoSpace"),l=e("../../../Scritps/Game/GAME_TYPE"),p=e("../../../Scritps/DefineTs/REQUEST_CODE"),h=e("../../../Scritps/Windown"),u=e("../../../Scritps/Util"),d=e("../../../Scritps/Network/ConectManager"),m=cc._decorator,f=m.ccclass,y=m.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bigWin=null,t.megaWin=null,t.superWin=null,t.coinTemp=null,t.coinParent=null,t.lb_Money=null,t.btnFast=null,t.chipPool=null,t.listPromiseIgro=[],t.isClickBtnFast=!1,t}return o(t,e),t.prototype.init=function(e,t){var i=this;return this.bigWin.node.active=!1,this.megaWin.node.active=!1,this.superWin.node.active=!1,new Promise(function(n){return r(i,void 0,void 0,function(){var i,o,s,r,c,m,f,y,I=this;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,7,,8]),this.btnFast.interactable=!1,this.scheduleOnce(function(){I.btnFast.interactable=!0},1),this.lb_Money.node.active=!0,this.lb_Money.node.active=!0,this.lb_Money.resetLb(),4,i=t<15?6:t<30?10:14,this.lb_Money.time=i,this.lb_Money.setMoney(e),this.bigWin.node.active=!0,this.bigWin.play("BigWinStart"),(o=this.bigWin.getComponentInChildren(sp.Skeleton)).setAnimation(0,"spawn",!1),o.setCompleteListener(function(){o.setAnimation(0,"idle",!0),o.setCompleteListener(null)}),this.bigWin.once(cc.Animation.EventType.FINISHED,function(){I.bigWin.play("BigWinLoop")}),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.bgmBigwinMain),s=h.Windown.Caishen.getMakeDelay(4),this.listPromiseIgro.push(s),[4,s.prosime];case 1:return a.sent(),t>=30?(this.bigWin.node.active=!1,this.megaWin.node.active=!0,(o=this.megaWin.getComponentInChildren(sp.Skeleton)).setAnimation(0,"spawn",!1),o.setCompleteListener(function(){o.setAnimation(0,"idle",!0),o.setCompleteListener(null)}),this.megaWin.play("MegaWinStart"),this.megaWin.once(cc.Animation.EventType.FINISHED,function(){I.megaWin.play("MegaWinLoop")}),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.bgmBigwinEnd),this.isClickBtnFast?[3,3]:(r=h.Windown.Caishen.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,3];case 2:a.sent(),a.label=3;case 3:return t>=50?(this.megaWin.node.active=!1,this.superWin.node.active=!0,(o=this.superWin.getComponentInChildren(sp.Skeleton)).setAnimation(0,"spawn",!1),o.setCompleteListener(function(){o.setAnimation(0,"idle",!0),o.setCompleteListener(null)}),this.superWin.play("SuperWinStart"),this.superWin.once(cc.Animation.EventType.FINISHED,function(){I.superWin.play("SuperWinLoop")}),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.bgmBigwinEnd),this.isClickBtnFast?[3,5]:(r=h.Windown.Caishen.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,5];case 4:a.sent(),a.label=5;case 5:return h.Windown.Caishen.audio.stopEffect(h.Windown.Caishen.audio.bgmBigwinMain),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.bgmBigwinEnd),this.lb_Money.setMoneyNoTime(e),this.lb_Money.node.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),(c=this.node.getChildByName("bw_shine")).active=!0,cc.tween(c).set({scale:0,opacity:255}).to(.3,{scale:3.75}).to(1.5,{scale:5,opacity:0},{easing:cc.easing.sineOut}).call(function(){c.active=!1}).start(),m=h.Windown.Caishen.getMakeDelay(4),this.listPromiseIgro.push(m),this.btnFast.interactable=!0,(f=d.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.Caishen),f.putInt("mt",e),f.putUtfString("nn",h.Windown.User.nickName),f.putUtfString("dt","bw"),d.ConectManager.getIns().sendRequest(p.REQUEST_CODE.AddBigWin,f),[4,m.prosime];case 6:return a.sent(),h.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){n(null),I.node.destroy()}))),[3,8];case 7:return y=a.sent(),n(null),this.node.destroy(),cc.log(y.stack),u.Util.ThrowErrProsime(y),[3,8];case 8:return[2]}})})})},t.prototype.startChipFalling=function(){var e=this,t=cc.tween(this.node).call(function(){for(var t=function(){var t=h.Windown.RandomNumber(-360,360),i=640+h.Windown.RandomNumber(50,1e3),n=h.Windown.RandomNumber(3,6),o=e.getChip(),s=h.Windown.RandomFloatNumber(.6,1.01),r=h.Windown.RandomNumber(0,360);o.setScale(s,s),o.setPosition(t,i),o.parent=e.coinParent,o.angle=r,cc.tween(o).by(n,{position:cc.v3(o.getPosition().x,-cc.view.getVisibleSize().height-o.getPosition().y,0)}).call(function(){e.chipPool.put(o)}).start()},i=0;i<20;i++)t()}),i=cc.tween(this.node).delay(2);cc.tween(this.node).sequence(t,i).repeatForever().start()},t.prototype.getChip=function(){return 0==this.chipPool.size()&&this.chipPool.put(cc.instantiate(this.coinTemp.node)),this.chipPool.get()},t.prototype.onClickBtnShowFast=function(){for(this.btnFast.interactable=!1,this.isClickBtnFast=!0;this.listPromiseIgro.length>0;)this.listPromiseIgro.shift().cancle(!0)},s([y(cc.Animation)],t.prototype,"bigWin",void 0),s([y(cc.Animation)],t.prototype,"megaWin",void 0),s([y(cc.Animation)],t.prototype,"superWin",void 0),s([y(cc.Animation)],t.prototype,"coinTemp",void 0),s([y(cc.Node)],t.prototype,"coinParent",void 0),s([y(c.default)],t.prototype,"lb_Money",void 0),s([y(cc.Button)],t.prototype,"btnFast",void 0),s([f],t)}(cc.Component);i.BigWinCaishen=I,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],CachChoiCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"dfad0GpVfNJnLWtCk9mHqVi","CachChoiCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onClickClose=function(){var e=this;r.Windown.Caishen.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.node.destroy()})))},s([c],t)}(cc.Component));i.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],CaishenSpeedControl:[function(e,t,i){"use strict";cc._RF.push(t,"56991p0DvdLVrMFm5aq9Y9S","CaishenSpeedControl");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.CaishenSpeedControl=void 0;var r=e("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalSpeed=1,t.animation=null,t.spine=null,t.isSpine=!1,t}return o(t,e),t.prototype.onLoad=function(){this.isSpine?this.spine=this.node.getComponent(sp.Skeleton):this.animation=this.node.getComponent(cc.Animation)},t.prototype.start=function(){},t.prototype.onPlay=function(){null!=this.animation&&(this.animation.getAnimationState(this.animation.currentClip.name).speed=r.Windown.Caishen.stateSpin.isMaxSpeed?2:this.normalSpeed)},t.prototype.onEnable=function(){cc.isValid(this.spine)&&(this.spine.timeScale=r.Windown.Caishen.stateSpin.isMaxSpeed?2:1)},s([l],t.prototype,"isSpine",void 0),s([c],t)}(cc.Component);i.CaishenSpeedControl=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],CaishenView:[function(e,t,i){"use strict";cc._RF.push(t,"61c30bFkqZAmJv8hatv66Ss","CaishenView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=e("../../../Scritps/DefineTs/BUNDLE"),l=e("../../../Scritps/DefineTs/EVENT_MANAGER"),p=e("../../../Scritps/DefineTs/PlayerPP"),h=e("../../../Scritps/DefineTs/REQUEST_CODE"),u=e("../../../Scritps/DefineTs/StateReelSlot"),d=e("../../../Scritps/DefineTs/TextDefine"),m=e("../../../Scritps/Game/GAME_TYPE"),f=e("../../../Scritps/Network/ConectManager"),y=e("../../../Scritps/Obs/LbMoneyChange"),I=e("../../../Scritps/Other/LbMonoSpace"),S=e("../../../Scritps/Other/MakeDelay"),g=e("../../../Scritps/Util"),v=e("../../../Scritps/Windown"),C=e("./AssetCaishen"),b=e("./AudioCaishen"),w=e("./EffectCaishen"),W=e("./InfoBarControllerCaishen"),_=e("./ItemSlotCaishen"),z=e("./ItemSlotCaishenNgang"),E=e("./LichSuCaishen"),k=e("./SpinNormalCaishen"),F=cc._decorator,A=F.ccclass,O=F.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.asset=null,t.bkgSprite=null,t.itemSlotCaishenNgang=null,t.parentItem=null,t.parentEffect=null,t.parentItemFront=null,t.parentItemActive=null,t.nodeLine=null,t.effect=null,t.labelChipReviceInBox=null,t.lb_totalBet=null,t.lb_FSLeft=null,t.lb_BonusFS=null,t.lb_TotalLine=null,t.lb_TotalLineFS=null,t.lb_CountAuto=null,t.infoBar=null,t.btnSpin=null,t.parentMask=null,t.nodeChooseAuto=null,t._popupLichSu=null,t.audio=null,t.listNodeDeactive=[],t.nodeBtnPlay=null,t.nodeBtnSeting=null,t.toggleTurbo=null,t.btnStartAuto=null,t.nearWinNoSap=null,t.listColum=[],t.listResult=null,t.listResultConvert=[],t.listConfigBet=[],t.gameType=-1,t.sfs=null,t.roomSFS=null,t.stateReel=0,t.totalLineBet=20,t.curRoomBet=50,t.funEnd=null,t.isShowBtnPlay=!0,t.dataFinish=null,t.sfsObjTest=null,t.sfsObjTest2=null,t.stateSpin=null,t.makeDelay=null,t.isDoneStartSpin=!1,t.currentTotalLine=1,t.index=-1,t}return o(t,e),t.prototype.onLoad=function(){v.Windown.Caishen=this,this.makeDelay=new S.default(this),cc.log("start Caishen"),this.gameType=m.default.Caishen,this.sfs=f.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(l.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),cc.systemEvent.on(l.EVENT_MANAGER.LOGIN,this.onLogin,this),this.stateReel=u.default.WAITING,this.stateSpin=new k.default,this.sendJoinRoom(),this.activeMask(!1)},t.prototype.onLogin=function(){this.sendJoinRoom()},t.prototype.sendJoinRoom=function(){var e=f.ConectManager.getIns().getSFSObj();e.putInt("gameType",m.default.Caishen),e.putInt("roomType",-1),e.putInt("mark",-1),f.ConectManager.getIns().sendRequest(h.REQUEST_CODE.GetIdJoinRoom,e)},t.prototype.onDisconnect=function(){cc.log("disconnect"),v.Windown.UIManager.hideLoading(),v.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},t.prototype.userExitRoom=function(e){cc.log("user exit room"),"SlotCS"==e.room.groupId&&e.user.isItMe&&cc.director.loadScene("main")},t.prototype.onCreateError=function(){cc.log("creat errr"),v.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),v.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM)},t.prototype.onJoinRoom=function(e){cc.log("onJoinRoom "+e.room.groupId);var t=e.room;if("SlotCS"==t.groupId){this.roomSFS=t,v.Windown.UIManager.hideLoadingData();var i=t.getVariable("cf").value;cc.log(i);var n=[],o=JSON.parse(i);for(var s in o){var r=Object.create(null);r.bet=parseInt(s),r.perJp=o[s].percentPot/100,n.push(r)}n.sort(function(e,t){return e.bet-t.bet}),this.listConfigBet=n,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=v.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},t.prototype.switchBkgGame=function(e){var t=cc.find("Game/Background/FreeSpin",this.node),i=cc.find("Game/Background/Line/Normal",this.node),n=cc.find("Game/Background/Line/FreeSpin",this.node),o=cc.find("Game/Background/ui_reel_frame",this.node),s=cc.find("Game/Background/bns_reel_frame",this.node),r=cc.find("Game/Background/Bot/Normal",this.node),a=cc.find("Game/Background/Bot/FreeSpin",this.node),c=cc.find("Game/Background/bg_btm",this.node),l=cc.find("Game/Background/bns_bg",this.node);e?(i.active=o.active=r.active=c.active=!1,n.active=s.active=t.active=a.active=l.active=!0,v.Windown.Caishen.lb_FSLeft.node.parent.active=!0,this.infoBar.reset(),this.infoBar.showRdContent()):(i.active=o.active=r.active=c.active=!0,t.active=n.active=s.active=a.active=l.active=!1,v.Windown.Caishen.lb_FSLeft.node.parent.active=!1,this.infoBar.reset(),this.infoBar.showRdContent())},t.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),v.Windown.UIManager.hideLoading(),v.Windown.UIManager.hideLoadingData(),v.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},t.prototype.activeMask=function(e,t){var i=this.parentMask.children;e?t?(i[t].stopAllActions(),i[t].runAction(cc.fadeTo(.3,150))):i.forEach(function(e){e.stopAllActions(),e.runAction(cc.fadeTo(.3,150))}):t?(i[t].stopAllActions(),i[t].runAction(cc.fadeOut(.3))):i.forEach(function(e){e.stopAllActions(),e.runAction(cc.fadeOut(.3))})},t.prototype.extResponse=function(e){var t=e.cmd,i=e.params;switch(t){case h.REQUEST_CODE.SpinCaishen:this.handleFinish(i);break;case h.REQUEST_CODE.HistoryCaishen:this._popupLichSu&&this._popupLichSu.responseServer(i);break;case h.REQUEST_CODE.HistoryChiTietCaishen:this._popupLichSu&&this._popupLichSu.responseServerChiTiet(i);break;case h.REQUEST_CODE.REQUEST_GET_LastSpin_SLOT:this.handleGetLastSpinSlot(i)}},t.prototype.handleGetLastSpinSlot=function(e){var t=e.get("t"),i=e.get("iF");if(t==m.default.Caishen&&i&&null==this.dataFinish){var n=e.get("d"),o=n.get("numFreeSpin");return this.stateSpin.lastFreeSpinLeft=o+1,this.stateSpin.freeSpinLeft=o,this.lb_FSLeft.string=this.stateSpin.lastFreeSpinLeft.toString(),n.get("bonusSpin"),cc.log(v.Windown.SFSObjToJson(n)),this.dataFinish=n,void this.onClickBtnSpin()}t==m.default.Caishen&&this.stateReel==u.default.RUN&&(!e.containsKey("d")||this.dataFinish&&v.Windown.SFSObjToJson(this.dataFinish)==v.Windown.SFSObjToJson(e.get("d"))?this.sendClickSpin():this.handleFinish(e.get("d")))},t.prototype.handleWaitSPin=function(){},t.prototype.handleFinish=function(e){var t=this;if(this.isDoneStartSpin){if(e.containsKey(p.PlayerPP.ERR_MESSAGE))return this.stateSpin.handleErrSpin(),v.Windown.Dialog.showLog(e.get(p.PlayerPP.ERR_MESSAGE)),this.activeAllBtn(),void this.onClickResetCountAuto();this.dataFinish=e,cc.log(v.Windown.SFSObjToJson(e)),v.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.get("agUser"),e.get("agWin")),this.truTienBet(this.dataFinish.get("agBet")*this.totalLineBet,this.dataFinish.get("agUser")),this.listResult=e.get("views");var i=e.get("bonusSpin");this.lb_BonusFS.string=i+"",this.listResultConvert=this.convertResult(this.listResult,JSON.parse(v.Windown.SFSArrToJson(e.get("listItemWin"))),i),this.stateSpin.isMaxSpeed,this.stateReel=u.default.CAN_STOP;var n=this.stateSpin.isMaxSpeed?0:.5;this.scheduleOnce(this.funEnd=function(){t.stateSpin.onEnd()},n)}else this.scheduleOnce(function(){t.handleFinish(e)},.05)},t.prototype.onDestroy=function(){v.Windown.Caishen=null,this.dataFinish&&(v.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),v.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),v.Windown.UIManager.changeRotation(),this.clearAllMakeDelay()},t.prototype.start=function(){var e=this;this.setupView(),this.initItem(),cc.sys.isNative||this.scheduleOnce(function(){return r(e,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,v.Windown.loadBundle(m.default.Caishen.toString())];case 1:return e.sent().loadDir("Spine",function(){}),[2]}})})},3),this.asset.preloadTakeSymbol()},t.prototype.initItem=function(){for(var e=cc.instantiate(this.parentItem.children[0]),t=e.width,i=0;i<6;i++){var n=this.parentItem.children[i];null==n&&((n=cc.instantiate(e)).parent=this.parentItem);var o=n.getComponent(_.default);this.listColum.push(o),o.index=i,o.node.x=t*i+t/2-6*t/2,o.node.y=0,o.setResultFirtGame()}this.itemSlotCaishenNgang.index=0,this.itemSlotCaishenNgang.setResultFirtGame()},t.prototype.setupView=function(){var e=cc.find("Game",this.node);if(cc.sys.isMobile)cc.log("Setup View: Node game scale=="+e.scale),e.angle=90,this.bkgSprite.angle=90,this.bkgSprite.scale=1280/720;else{var t=cc.winSize.height/1280;e.angle=0,e.scale=t,this.bkgSprite.angle=0;var i=this.bkgSprite.addComponent(cc.Widget);i.left=0,i.right=0,i.bottom=0,i.top=0}v.Windown.UIManager.changeRotation(!0)},t.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return f.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),void(this.sfsObjTest=null);if(null!=this.sfsObjTest2)return f.ConectManager.getIns().sendRequest("testSpin2",this.sfsObjTest2,this.roomSFS),void(this.sfsObjTest2=null);var e=f.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),f.ConectManager.getIns().sendRequest(h.REQUEST_CODE.SpinCaishen,e,this.roomSFS)},t.prototype.onClickBtnSpin=function(){return r(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.stateReel!=u.default.WAITING?[3,2]:(this.audio.playEffect(this.audio.spinBtn),this.stateReel=u.default.RUN,this.setStateEffBtnSpin(),this.offAllBtn(),this.infoBar.reset(),this.sendClickSpin(),this.isDoneStartSpin=!1,[4,this.stateSpin.onStart()]);case 1:return t.sent(),this.isDoneStartSpin=!0,[3,3];case 2:this.stateReel==u.default.CAN_STOP?this.stateSpin.isMaxSpeed||(this.stateReel=u.default.RUN,this.unschedule(this.funEnd),this.stateSpin.onForceEnd()):this.stateReel==u.default.STOP||this.stateReel==u.default.SHOW_EFFECT&&(this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),t.label=3;case 3:return[3,5];case 4:return e=t.sent(),g.Util.ThrowErrProsime(e),[3,5];case 5:return[2]}})})},t.prototype.showContentTip=function(){},t.prototype.updateNewTotalLine=function(e){this.currentTotalLine*=e,this.lb_TotalLine.string=this.currentTotalLine.toString(),this.lb_TotalLineFS.string=this.currentTotalLine.toString()},t.prototype.resetForNewGame=function(){this.stateReel=u.default.WAITING,this.setStateEffBtnSpin()},t.prototype.resetLbTotalLine=function(){this.currentTotalLine=1,this.lb_TotalLine.string="...",this.lb_TotalLineFS.string="..."},t.prototype.setStateEffBtnSpin=function(){var e=this.btnSpin.getComponent(cc.Animation),t=cc.find("sb_arrow",this.btnSpin),i=cc.find("sb_arrow_blur",this.btnSpin);if(this.stateReel!=u.default.STOP){t.color=cc.Color.WHITE;var n=cc.Material.getBuiltinMaterial("2d-sprite");t.getComponent(cc.Sprite).setMaterial(0,n)}if(this.stateReel==u.default.WAITING||this.stateReel==u.default.SHOW_EFFECT)i.active=!1,t.active=!0,v.Windown.stopAllActionByTarget(t),t.runAction(cc.repeatForever(cc.rotateBy(3,-360)));else if(this.stateReel==u.default.RUN)e.play("ButtonSpin_Click"),i.active=!0,v.Windown.stopAllActionByTarget(i),i.runAction(cc.repeatForever(cc.rotateBy(.3,-360))),t.active=!1,this.infoBar.showRdContent();else if(this.stateReel==u.default.STOP){t.active=!0,i.active=!1,v.Windown.stopAllActionByTarget(i),v.Windown.stopAllActionByTarget(t);var o=cc.Material.getBuiltinMaterial("2d-gray-sprite");t.getComponent(cc.Sprite).setMaterial(0,o),t.color=cc.Color.GRAY}},t.prototype.setLbFreeSpinLeft=function(e){var t=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=e+"",e<1?(cc.find("last",t).active=!0,cc.find("remaining",t).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last",t).active=!1,cc.find("remaining",t).active=!0,this.lb_FSLeft.node.active=!0)},t.prototype.setCountAuto=function(e){this.lb_CountAuto.node.parent.active=!(e<1),this.lb_CountAuto.string=e.toString()},t.prototype.showMoneyAllWin=function(e){cc.log("money win: "+e),this.labelChipReviceInBox.setMoney(e),v.Windown.MoneyUser.removeDelay(this.gameType)},t.prototype.offLbFree=function(){this.lb_FSLeft.node.parent.active=!1},t.prototype.onClickSendObjTest=function(){var e=f.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),e.putUtfString("arr",'[[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":1}],\n            [{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0}],\n            [{"size":1,"typeItem":0,"idItem":12},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":11}],\n            [{"size":1,"typeItem":0,"idItem":12},{"size":3,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":12}],\n            [{"size":4,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":4}],\n            [{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2}]]'),this.sfsObjTest=e,this.onClickBtnSpin(),cc.log("onClickSendObjTest")},t.prototype.onClickSendFixData=function(){var e=f.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),this.index++,e.putUtfString("arr",'[[{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7}],[{"size":2,"typeItem":1,"idItem":0},{"size":2,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":5}],[{"size":3,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":12},{"size":3,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":12}],[{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":2,"typeItem":1,"idItem":9},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":2}]]'),this.sfsObjTest=e,this.onClickBtnSpin()},t.prototype.onClickSendFixData2=function(){var e=f.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet);var t="";-1==this.index?t='{"agWin":550,"bonusSpin":0,"numFreeSpin":0,"listItemWin":[{"lsIdItem":"[2,1]","lsstack":"[2,2]","lsAgWin":"[50,100]"},{"lsIdItem":"[3]","lsstack":"[4]","lsAgWin":"[400]"}],"agUser":31553270,"Scarter4":false,"agBet":50,"views":[[[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3},{"size":3,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":1},{"size":2,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":6}],[{"size":3,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":7},{"size":2,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":10},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":7}]],[[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":4},{"size":3,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":6}],[{"size":3,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":7},{"size":2,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":10},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":7}]],[[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":4},{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":7},{"size":2,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":10},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":7}]]]}':0==this.index?t='{"agWin":2950,"bonusSpin":0,"numFreeSpin":0,"listItemWin":[{"lsIdItem":"[8]","lsstack":"[2]","lsAgWin":"[1000]"},{"lsIdItem":"[3,1,0]","lsstack":"[5,3,2]","lsAgWin":"[500,100,50]"},{"lsIdItem":"[9,5]","lsstack":"[2,2]","lsAgWin":"[1000,300]"}],"agUser":31564220,"Scarter4":false,"agBet":50,"views":[[[{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":9}],[{"size":1,"typeItem":0,"idItem":7},{"size":4,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":3}],[{"size":4,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":8}],[{"size":3,"typeItem":1,"idItem":3},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":8}]],[[{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":7},{"size":2,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":3}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":2},{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0}],[{"size":3,"typeItem":1,"idItem":3},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":8}]],[[{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":5},{"size":2,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":9}],[{"size":3,"typeItem":2,"idItem":2},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":8}]],[[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":7},{"size":2,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":1}],[{"size":3,"typeItem":2,"idItem":2},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":8}]]]}':1==this.index?t='{"agWin":0,"bonusSpin":0,"numFreeSpin":0,"listItemWin":[],"agUser":31572870,"Scarter4":false,"agBet":50,"views":[[[{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":2},{"size":2,"typeItem":0,"idItem":10},{"size":2,"typeItem":1,"idItem":4},{"size":1,"typeItem":0,"idItem":7}],[{"size":3,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":1,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":4}],[{"size":2,"typeItem":1,"idItem":7},{"size":2,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":4}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":10},{"size":1,"typeItem":0,"idItem":9}]]]}':2==this.index?t='{"agWin":0,"bonusSpin":0,"numFreeSpin":0,"listItemWin":[],"agUser":31571870,"Scarter4":false,"agBet":50,"views":[[[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":11},{"size":2,"typeItem":1,"idItem":2},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":2}],[{"size":3,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":2}],[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":3},{"size":3,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":1}],[{"size":3,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":7}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":4}]]]}':3==this.index&&(t='{"agWin":2400,"bonusSpin":0,"numFreeSpin":0,"listItemWin":[{"lsIdItem":"[8]","lsstack":"[3]","lsAgWin":"[1250]"},{"lsIdItem":"[1]","lsstack":"[5]","lsAgWin":"[400]"},{"lsIdItem":"[0]","lsstack":"[2]","lsAgWin":"[300]"},{"lsIdItem":"[4]","lsstack":"[2]","lsAgWin":"[400]"},{"lsIdItem":"[2]","lsstack":"[2]","lsAgWin":"[50]"}],"agUser":31573270,"Scarter4":false,"agBet":50,"views":[[[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3}],[{"size":1,"typeItem":0,"idItem":4},{"size":4,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":4}],[{"size":2,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":8},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":1,"idItem":1},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":11}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":2}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2}]],[[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":4}],[{"size":2,"typeItem":0,"idItem":0},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":1,"idItem":1},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":2}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2}]],[[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":4}],[{"size":2,"typeItem":0,"idItem":0},{"size":2,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":2}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3}]],[[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":2}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":4}],[{"size":2,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":2},{"size":2,"typeItem":1,"idItem":4},{"size":1,"typeItem":0,"idItem":2}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":6}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3}]],[[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":2}],[{"size":2,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":2},{"size":2,"typeItem":2,"idItem":5},{"size":1,"typeItem":0,"idItem":6}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":5}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3}]],[[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":1,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":6}],[{"size":2,"typeItem":2,"idItem":6},{"size":2,"typeItem":2,"idItem":5},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":6},{"size":3,"typeItem":2,"idItem":6},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":1}],[{"size":2,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":3},{"size":2,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3}]]]}'),this.index++,e.putUtfString("data",t),this.sfsObjTest2=e,this.onClickBtnSpin()},t.prototype.onClickTest=function(){return r(this,void 0,void 0,function(){var e;return a(this,function(){return(e=f.ConectManager.getIns().getSFSObj()).putInt("bet",this.curRoomBet),e.putUtfString("arr",'[[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":8},{"size":3,"typeItem":1,"idItem":2},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":2}],[{"size":3,"typeItem":1,"idItem":0},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":9}],[{"size":1,"typeItem":0,"idItem":12},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":3}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":7}]]'),this.sfsObjTest=e,this.onClickBtnSpin(),[2]})})},t.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1,v.Windown.Caishen.audio.playClick()},t.prototype.onClickItemAutoSpin=function(e){v.Windown.Caishen.audio.playClick(),this.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer).allowSwitchOff=!1;var t=e.node.name,i=Number(t);this.stateSpin.countAutoSpin=i,this.btnStartAuto.interactable=!0,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#FF8E26")},t.prototype.onClickStartAutoSpin=function(){this.onClickBtnSpin(),this.onClickCloseListAuto(),v.Windown.Caishen.stateSpin.countAutoSpin>0&&v.Windown.Caishen.setCountAuto(v.Windown.Caishen.stateSpin.countAutoSpin)},t.prototype.onClickShowListAuto=function(){v.Windown.Caishen.audio.playClick(),this.nodeChooseAuto.active=!0,this.nodeChooseAuto.opacity=0,this.nodeChooseAuto.runAction(cc.fadeIn(.3)),this.btnStartAuto.interactable=!1,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")},t.prototype.onClickCloseListAuto=function(){var e=this;v.Windown.Caishen.audio.playClick(),this.nodeChooseAuto.stopAllActions(),this.nodeChooseAuto.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){var t=e.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer);t.allowSwitchOff=!0,t.toggleItems.forEach(function(e){e.isChecked&&e.uncheck()}),e.nodeChooseAuto.active=!1,e.btnStartAuto.interactable=!1,e.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")})))},t.prototype.convertResult=function(e,t,i){var n=this,o=[];return v.Windown.foreachSFSArray(e,function(e){var s=Object.create(null);s.listSFSObj=[],s.listSFSObjNgang=[],s.mutil=i,s.agWin=0,v.Windown.foreachSFSArray(e,function(i,n){var o=[];if(v.Windown.foreachSFSArray(i,function(e,t){t==i.size()-1&&n>0&&n<5?s.listSFSObjNgang.push(e):o.push(e)}),o.reverse(),s.listSFSObj.push(o),n==e.size()-1){var r=t.shift();r&&(r.lsIdItem=JSON.parse(r.lsIdItem),r.lsstack=JSON.parse(r.lsstack),r.lsAgWin=JSON.parse(r.lsAgWin),r.lsAgWin.length>0&&(s.listItemWin=r,s.isNoSap=!0),r.lsAgWin.forEach(function(e){s.agWin+=e}))}}),s.countScater=n.getCountScater(s.listSFSObj,s.listSFSObjNgang),s.listSFSObjNgang.reverse(),o.push(s)}),o},t.prototype.setResult=function(){},t.prototype.getListActiveScaster=function(e,t){var i=[],n=0;t.forEach(function(e){12==e.getInt("idItem")&&n++});for(var o=0;o<e.length;o++)n>2?i.push(!0):i.push(!1),e[o].forEach(function(e){12==e.getInt("idItem")&&n++});return i},t.prototype.onClickChangeBet=function(e,t){if(v.Windown.Caishen.audio.playClick(),this.listConfigBet.length<1)v.Windown.Dialog.showLog(d.TextDefine.Error);else{var i=-1;for(var n in this.listConfigBet)if(this.listConfigBet[n].bet==this.curRoomBet){i=parseInt(n);break}0==t?i--:i++,i<0&&(i=this.listConfigBet.length-1),i>this.listConfigBet.length-1&&(i=0),this.curRoomBet=this.listConfigBet[i].bet,this.lb_totalBet.string=v.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},t.prototype.onClickCachChoi=function(){return r(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return v.Windown.Caishen.audio.playClick(),v.Windown.UIManager.showLoading(),[4,v.Windown.loadRes(this.gameType.toString(),"Prefabs/CachChoi",cc.Prefab)];case 1:return e=t.sent(),cc.instantiate(e).parent=v.Windown.Caishen.node.getChildByName("Game"),v.Windown.UIManager.hideLoading(),[2]}})})},t.prototype.onClickBackToLobby=function(){v.Windown.Caishen.audio.playClick(),this.roomSFS?f.ConectManager.getIns().sendLeaveRoom(this.roomSFS):cc.director.loadScene("main")},t.prototype.onClickTurbo=function(){v.Windown.Caishen.audio.playClick();var e=this.toggleTurbo.isChecked;this.toggleTurbo.node.children[1].active=!e,this.stateSpin.isMaxSpeed=e,e?v.Windown.UIManager.showAlertMini("\u0110\xe3 b\u1eadt Auto"):v.Windown.UIManager.showAlertMini("T\u1eaft Auto")},t.prototype.onClickSeting=function(){if(v.Windown.Caishen.audio.playClick(),cc.log("click onClickSeting"),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)e=cc.v2(0,-750),this.nodeBtnPlay.runAction(cc.fadeIn(.4)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.3),cc.moveTo(.3,e)));else{this.nodeBtnPlay.stopAllActions(),this.nodeBtnSeting.stopAllActions();var e=cc.v2(0,-525.279);this.nodeBtnPlay.runAction(cc.fadeOut(.3)),this.nodeBtnSeting.opacity=0,this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.4),cc.moveTo(.4,e)))}},t.prototype.getCountScater=function(e,t){var i=0;return e.forEach(function(e){e.forEach(function(e){12==e.getInt("idItem")&&i++})}),t.forEach(function(e){12==e.getInt("idItem")&&i++}),i},t.prototype.getMakeDelay=function(e){return this.makeDelay.getDelay(e)},t.prototype.clearAllMakeDelay=function(){this.makeDelay.clear()},t.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(e){e.interactable=!0,e.node.children.forEach(function(e){e.color=cc.Color.fromHEX(new cc.Color,"#FFD500")})})},t.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(e){e.interactable=!1,e.node.children.forEach(function(e){e.color=cc.Color.fromHEX(new cc.Color,"#999999")})})},t.prototype.truTienBet=function(e,t){0!=e&&v.Windown.MoneyUser.subMoney(e,t)},t.prototype.effectShake=function(e,t){void 0===e&&(e=.2),void 0===t&&(t=10)},t.prototype.onClickLichSu=function(){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){return v.Windown.Caishen.audio.playClick(),v.Windown.UIManager.showLoading(),cc.assetManager.getBundle(c.BUNDLE.Caishen).load("Prefabs/LichSu",cc.Prefab,function(t,i){var n=i;e._popupLichSu=cc.instantiate(n).getComponent(E.default),e._popupLichSu.node.parent=v.Windown.Caishen.node.getChildByName("Game"),e._popupLichSu.show()}),[2]})})},t.prototype.getPromise=function(e){return v.Windown.CpPromise.getDelayByPromise(e,this).prosime},t.prototype.getPromiseAll=function(e){return v.Windown.CpPromise.getDelayPromiseAll(e,this).prosime},s([O(C.default)],t.prototype,"asset",void 0),s([O(cc.Node)],t.prototype,"bkgSprite",void 0),s([O(z.default)],t.prototype,"itemSlotCaishenNgang",void 0),s([O(cc.Node)],t.prototype,"parentItem",void 0),s([O(cc.Node)],t.prototype,"parentEffect",void 0),s([O(cc.Node)],t.prototype,"parentItemFront",void 0),s([O(cc.Node)],t.prototype,"parentItemActive",void 0),s([O(cc.Node)],t.prototype,"nodeLine",void 0),s([O(w.EffectCaishen)],t.prototype,"effect",void 0),s([O(y.default)],t.prototype,"labelChipReviceInBox",void 0),s([O(cc.Label)],t.prototype,"lb_totalBet",void 0),s([O(I.default)],t.prototype,"lb_FSLeft",void 0),s([O(I.default)],t.prototype,"lb_BonusFS",void 0),s([O(I.default)],t.prototype,"lb_TotalLine",void 0),s([O(I.default)],t.prototype,"lb_TotalLineFS",void 0),s([O(I.default)],t.prototype,"lb_CountAuto",void 0),s([O(W.default)],t.prototype,"infoBar",void 0),s([O(cc.Node)],t.prototype,"btnSpin",void 0),s([O(cc.Node)],t.prototype,"parentMask",void 0),s([O(cc.Node)],t.prototype,"nodeChooseAuto",void 0),s([O(b.default)],t.prototype,"audio",void 0),s([O([cc.Button])],t.prototype,"listNodeDeactive",void 0),s([O(cc.Node)],t.prototype,"nodeBtnPlay",void 0),s([O(cc.Node)],t.prototype,"nodeBtnSeting",void 0),s([O(cc.Toggle)],t.prototype,"toggleTurbo",void 0),s([O(cc.Button)],t.prototype,"btnStartAuto",void 0),s([O(cc.Node)],t.prototype,"nearWinNoSap",void 0),s([A],t)}(cc.Component);i.default=R,cc._RF.pop()},{"../../../Scritps/DefineTs/BUNDLE":void 0,"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Other/MakeDelay":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetCaishen":"AssetCaishen","./AudioCaishen":"AudioCaishen","./EffectCaishen":"EffectCaishen","./InfoBarControllerCaishen":"InfoBarControllerCaishen","./ItemSlotCaishen":"ItemSlotCaishen","./ItemSlotCaishenNgang":"ItemSlotCaishenNgang","./LichSuCaishen":"LichSuCaishen","./SpinNormalCaishen":"SpinNormalCaishen"}],DetailHistoryCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"da27fwYoF5G2oJhk4ZFP7fa","DetailHistoryCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),a=e("./ItemResultDetailCaishen"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentItem=null,t.itemTemplate=null,t.lbTitle=null,t.lbTime=null,t.lbBet=null,t.lbWin=null,t.lbMNUser=null,t.lbCuocCoSo=null,t.isFreeSpin=!1,t}return o(t,e),t.prototype.show=function(e){var t=this;this.node.active=!0,this.node.x=721.812,this.node.stopAllActions(),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,0,0),cc.fadeIn(.3).easing(cc.easeElasticIn(3))));var i=e.get("date"),n=e.get("infolog"),o=JSON.parse(n);cc.log(n),this.isFreeSpin=o.numFreeSpin>0,0==o.agBet?this.lbTitle.string="Quay Mi\u1ec5n Ph\xed":this.lbTitle.string="Quay Th\u01b0\u1eddng",this.lbTime.string=r.Windown.formatDate(new Date(i),"dd/MM HH:mm:ss"),this.lbBet.string=r.Windown.formatNumber(20*o.agBet),this.lbWin.string=r.Windown.formatNumber(o.agWin),this.lbMNUser.string=r.Windown.formatNumber(o.agUser),this.lbCuocCoSo.string=r.Windown.formatNumber(o.agBet);var s=o.bonusSpin;for(cc.log(r.Windown.SFSObjToJson(e));this.parentItem.childrenCount>0;){var c=this.parentItem.children[0];c.removeFromParent(),c.destroy()}o.views.forEach(function(e,i){var n=t.parentItem.children[i];null==n&&((n=cc.instantiate(t.itemTemplate)).parent=t.parentItem,n.active=!0),n.active=!0;var r=n.getComponent(a.default);o.listItemWin[i]&&(o.listItemWin[i].lsIdItem=JSON.parse(o.listItemWin[i].lsIdItem),o.listItemWin[i].lsstack=JSON.parse(o.listItemWin[i].lsstack),o.listItemWin[i].lsAgWin=JSON.parse(o.listItemWin[i].lsAgWin)),r.init(e,o.listItemWin[i],s,o.agBet)});for(var l=o.views.length;l<this.parentItem.childrenCount;l++)this.parentItem.children[l].active=!1},t.prototype.onClickClose=function(){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,721.812,0),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){e.node.active=!1})))},s([p(cc.Node)],t.prototype,"parentItem",void 0),s([p(cc.Node)],t.prototype,"itemTemplate",void 0),s([p(cc.Label)],t.prototype,"lbTitle",void 0),s([p(cc.Label)],t.prototype,"lbTime",void 0),s([p(cc.Label)],t.prototype,"lbBet",void 0),s([p(cc.Label)],t.prototype,"lbWin",void 0),s([p(cc.Label)],t.prototype,"lbMNUser",void 0),s([p(cc.Label)],t.prototype,"lbCuocCoSo",void 0),s([l],t)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemResultDetailCaishen":"ItemResultDetailCaishen"}],EffectCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"3295441sWFPGKJi/YN7qtUg","EffectCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.EffectCaishen=void 0;var c=e("../../../Scritps/Game/GAME_TYPE"),l=e("./StartFreeSpinCaishen"),p=e("./EndFreeSpinCaishen"),h=e("./NearFSCaishen"),u=e("../../../Scritps/Windown"),d=e("../../../Scritps/Util"),m=e("./BigWinCaiShen"),f=e("./SpinFreeSpinCaishen"),y=cc._decorator,I=y.ccclass,S=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listNodeBoxMoney=[],t.nodeEffNearWin=null,t}return o(t,e),t.prototype.start=function(){},t.prototype.switchFS=function(e,t){e?(this.listNodeBoxMoney.forEach(function(e){e.setPosition(e.position.x,-609)}),u.Windown.Caishen.switchBkgGame(!0,t)):(u.Windown.Caishen.switchBkgGame(!1),this.listNodeBoxMoney.forEach(function(e){e.setPosition(e.position.x,-381.5)}))},t.prototype.showBigWin=function(e,t){var i=this;return new Promise(function(n){return r(i,void 0,void 0,function(){var i,o,s;return a(this,function(r){switch(r.label){case 0:return[4,u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/BigWin",cc.Prefab)];case 1:return i=r.sent(),(o=cc.instantiate(i)).parent=this.node,s=o.getComponent(m.BigWinCaishen),[4,u.Windown.Caishen.getPromise(s.init(e,t))];case 2:return r.sent(),n(null),[2]}})})})},t.prototype.showSpinFreeSpin=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),u.Windown.Caishen.stateSpin.activeAllSymbol(),u.Windown.Caishen.listColum.forEach(function(e){e.getListSymbolResult().forEach(function(e){e.effectScaterShowFS()})}),u.Windown.Caishen.audio.playEffect(u.Windown.Caishen.audio.scatterWinHighlight),u.Windown.Caishen.itemSlotCaishenNgang.getListSymbolResult().forEach(function(e){e.effectNearWinScater(!1)}),u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/SpinFreeSpin",cc.Prefab),[4,u.Windown.Caishen.getMakeDelay(1.3).prosime];case 1:return r.sent(),u.Windown.Caishen.audio.playBkgfs(),u.Windown.UIManager.showLoading(),[4,u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/SpinFreeSpin",cc.Prefab)];case 2:return t=r.sent(),u.Windown.UIManager.hideLoading(),(n=cc.instantiate(t)).parent=this.node,o=n.getComponent(f.default),u.Windown.Caishen.audio.playEffect(u.Windown.Caishen.audio.openSpinFree),[4,o.init(e)];case 3:return r.sent(),i(null),[3,5];case 4:return s=r.sent(),d.Util.ThrowErrProsime(s),[3,5];case 5:return[2]}})})})},t.prototype.showTakeFreeSpin=function(e,t){var i=this;return new Promise(function(n){return r(i,void 0,void 0,function(){var i,o,s,r;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),u.Windown.Caishen.stateSpin.freeSpinCache=e,u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/StartFreeSpin",cc.Prefab),u.Windown.Caishen.audio.playEffect(u.Windown.Caishen.audio.scatterWinHighligh),[4,u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/StartFreeSpin",cc.Prefab)];case 1:return i=a.sent(),(o=cc.instantiate(i)).parent=this.node,s=o.getComponent(l.StartFreeSpinCaishen),[4,u.Windown.Caishen.getPromise(s.show(e,t))];case 2:return a.sent(),u.Windown.Caishen.setLbFreeSpinLeft(e),u.Windown.Caishen.effect.switchFS(!0),[4,u.Windown.Caishen.getMakeDelay(1).prosime];case 3:return a.sent(),n(null),[3,5];case 4:return r=a.sent(),d.Util.ThrowErrProsime(r),[3,5];case 5:return[2]}})})})},t.prototype.showEndFree=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e<1?(u.Windown.Caishen.audio.stopBkgFs(),this.switchFS(!1),i(null),[2]):[4,u.Windown.loadRes(c.default.Caishen.toString(),"Prefabs/EndFreeSpin",cc.Prefab)];case 1:return t=r.sent(),this.switchFS(!1),(n=cc.instantiate(t)).parent=this.node,o=n.getComponent(p.EndFreeSpinCaishen),[4,u.Windown.Caishen.getPromise(o.show(e))];case 2:return r.sent(),i(null),[3,4];case 3:return s=r.sent(),d.Util.ThrowErrProsime(s),[3,4];case 4:return[2]}})})})},t.prototype.activeNodeNearWin=function(e){u.Windown.Caishen.activeMask(!0);for(var t=e;t<6;t++)u.Windown.Caishen.activeMask(!1,t);if(null==this.nodeEffNearWin)for(this.nodeEffNearWin=cc.instantiate(u.Windown.Caishen.asset.nearFS),this.nodeEffNearWin.setParent(u.Windown.Caishen.parentEffect),t=0;t<e;t++)u.Windown.Caishen.listColum[t].getListSymbolResult().forEach(function(e){return e.effectScaterShowFS()});this.nodeEffNearWin.getComponent(h.NearFSCaishen).init(e)},t.prototype.offNearWin=function(){u.Windown.Caishen.activeMask(!1),u.Windown.Caishen.audio.stopEffect(u.Windown.Caishen.audio.fastspinStart),this.nodeEffNearWin&&this.nodeEffNearWin.getComponent(h.NearFSCaishen).effOff(),this.nodeEffNearWin=null;for(var e=0,t=u.Windown.Caishen.listColum;e<t.length;e++)for(var i=0,n=t[e].getListSymbolResult();i<n.length;i++)n[i].checkIsInView()},t.prototype.activeNearWinNoSap=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,i,n,o,s,r,c,l,p,h,m,f,y,I,S,g,v,C;return a(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),cc.log("activeNearWinNoSap"),e=u.Windown.Caishen.stateSpin.curentCountScater>2&&!u.Windown.Caishen.stateSpin.isMaxSpeed,u.Windown.Caishen.nearWinNoSap.active||!e)return t(null),[2];for(u.Windown.Caishen.nearWinNoSap.opacity=255,u.Windown.Caishen.nearWinNoSap.active=!0,u.Windown.Caishen.audio.playEffect(u.Windown.Caishen.audio.heartbeatNoise),i=!1,u.Windown.Caishen.stateSpin.offAllSymbol(!1),n=0,o=u.Windown.Caishen.listColum;n<o.length;n++){for(I=o[n],s=0,r=I.getListSymbolResult();s<r.length;s++)if(!(v=r[s]).checkIsInView()){i=!0;break}if(i)break}if(!i)return t(null),[2];for(c=0,l=u.Windown.Caishen.listColum;c<l.length;c++)for(I=l[c],p=0,h=I.getListSymbolResult();p<h.length;p++)(v=h[p]).checkIsInView()&&v.effectNearWinScater(!0);u.Windown.Caishen.infoBar.showOneMoreScater(),m=0,a.label=1;case 1:return m<4?(u.Windown.Caishen.audio.playEffectNoStop(u.Windown.Caishen.audio.heartbeat),[4,u.Windown.Caishen.getMakeDelay(.7).prosime]):[3,4];case 2:a.sent(),a.label=3;case 3:return m++,[3,1];case 4:for(u.Windown.Caishen.activeMask(!1),f=0,y=u.Windown.Caishen.listColum;f<y.length;f++)for(I=y[f],S=0,g=I.getListSymbolResult();S<g.length;S++)(v=g[S]).checkIsInView()&&v.effectScaterIdle();return t(null),[3,6];case 5:return C=a.sent(),d.Util.ThrowErrProsime(C),[3,6];case 6:return[2]}})})})},t.prototype.offNearWinNoSap=function(){u.Windown.Caishen.nearWinNoSap.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){u.Windown.Caishen.nearWinNoSap.active=!1})))},s([S([cc.Node])],t.prototype,"listNodeBoxMoney",void 0),s([I],t)}(cc.Component);i.EffectCaishen=g,cc._RF.pop()},{"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./BigWinCaiShen":"BigWinCaiShen","./EndFreeSpinCaishen":"EndFreeSpinCaishen","./NearFSCaishen":"NearFSCaishen","./SpinFreeSpinCaishen":"SpinFreeSpinCaishen","./StartFreeSpinCaishen":"StartFreeSpinCaishen"}],EffectSymbolCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"83a8fFhK1FI+4Bk42+++GQY","EffectSymbolCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.EffectSymbolCaishen=void 0;var c=e("../../../Scritps/Util"),l=e("../../../Scritps/Windown"),p=cc._decorator,h=p.ccclass,u=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.colorBg=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#BFD17D","#BFD17D","#7DD8B7","#7DD8B7","#B37CC7","#B37CC7"],t}return o(t,e),t.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation)},t.prototype.start=function(){},t.prototype.effTakeItem=function(e,t,i,n){return r(this,void 0,void 0,function(){var o,s,r,c;return a(this,function(a){switch(a.label){case 0:return this.node.opacity=0,this.node.runAction(cc.fadeIn(.2)),l.Windown.Caishen.stateSpin.isMaxSpeed,o=this.node.getChildByName("spine").getComponent(sp.Skeleton),s=cc.find("sprite",this.node).getComponent(cc.Sprite),0!=i&&((r=cc.find("khung",this.node).getComponent(cc.Sprite)).node.active=!0,r.spriteFrame=l.Windown.Caishen.asset.getSfBorderSymbol(i,t,!1)),s.spriteFrame=l.Windown.Caishen.asset.getSfItemSymbol(e,t,!1),c=o,[4,l.Windown.Caishen.asset.getSpine(e,t)];case 1:return c.skeletonData=a.sent(),this.animation.play("EffectTakeSymbol"+t),n.node.active=!1,o.node.active=!0,s.node.active=!1,o.timeScale=.8,o.setAnimation(0,"win",!1),[2]}})})},t.prototype.effectShuffToWild=function(e){return r(this,void 0,void 0,function(){var t,i;return a(this,function(n){switch(n.label){case 0:return this.animation.play("EffectTakeSymbol"+e),t=this.node.getChildByName("spine").getComponent(sp.Skeleton),cc.find("sprite",this.node).getComponent(cc.Sprite),i=t,[4,l.Windown.Caishen.asset.getWildCaishenSpine(e)];case 1:return i.skeletonData=n.sent(),t.node.active=!0,t.timeScale=1,t.setAnimation(0,"win",!1),t.setCompleteListener(function(){cc.log("effectShuffToWild Chay vao day"),l.Windown.Caishen.audio.playEffect(l.Windown.Caishen.audio.wildShrink),t.setCompleteListener(null),t.setAnimation(0,"break",!1)}),[2]}})})},t.prototype.effectRemoveTakeItem=function(){var e=this,t=(l.Windown.Caishen.stateSpin.isMaxSpeed,this.node.getChildByName("spine"));cc.Tween.stopAllByTarget(t),cc.tween(this.node).to(.2,{scale:0}).call(function(){e.node.destroy()}).start()},t.prototype.effRemoveItem=function(){var e=this,t=l.Windown.Caishen.stateSpin.isMaxSpeed?2:1,i=this.getComponent(cc.Animation);i.once(cc.Animation.EventType.FINISHED,function(){e.node.destroy()}),i.play(i.getClips()[0].name),null==i.getAnimationState(i.getClips()[0].name)&&(console.log("Null Eff Remove"),this.node.destroy()),i.getAnimationState(i.getClips()[0].name).speed=t},t.prototype.effShuffItem=function(e,t,i,n){var o=this;return new Promise(function(s){return r(o,void 0,void 0,function(){var o,r,p,h,u,d,m,f,y,I,S;return a(this,function(a){switch(a.label){case 0:a.trys.push([0,6,,7]),this.node.opacity=255,this.node.height=e,o=cc.find("sprite",this.node).getComponent(cc.Sprite),r=l.Windown.Caishen.asset.getSfItemSymbol(t,n,!1),p=this.node.getChildByName("khung").getComponent(cc.Sprite),h=this.node.getChildByName("bkg").getComponent(cc.Sprite),u=this.node.getChildByName("caishenBg").getComponent(cc.Sprite),h.spriteFrame=l.Windown.Caishen.asset.getSfBgSymbol(t,n),cc.log("effShuffItem:curId=="+t),h.node.color=(new cc.Color).fromHEX(this.colorBg[t]),p.spriteFrame=l.Windown.Caishen.asset.getSfBorderSymbol(1,n,!1),p.node.active=!0,u.spriteFrame=l.Windown.Caishen.asset.getSfBgCaishen(2,n),this.getComponent(cc.Animation).play("EffectTakeSymbolSilver"),o.spriteFrame=r,(d=cc.instantiate(p.node)).setParent(this.node),d.active=!1,d.opacity=0,(m=d.getComponent(cc.Sprite)).spriteFrame=l.Windown.Caishen.asset.getSfBorderSymbol(2,n,!1),f=l.Windown.Caishen.stateSpin.isMaxSpeed?.05:.1,l.Windown.Caishen.stateSpin.isMaxSpeed,l.Windown.Caishen.stateSpin.isMaxSpeed,y=0,a.label=1;case 1:if(!(y<11))return[3,4];for(I=l.Windown.RandomNumber(0,11);t==I||11==y&&I==i;)I=l.Windown.RandomNumber(0,11);return t=I,l.Windown.Caishen.audio.playEffectNoStop(l.Windown.Caishen.audio.symRouletteRolling),r=l.Windown.Caishen.asset.getSfItemSymbol(I,n,!1),o.spriteFrame=r,[4,l.Windown.Caishen.getMakeDelay(.07).prosime];case 2:a.sent(),a.label=3;case 3:return y++,[3,1];case 4:return l.Windown.Caishen.audio.stopEffect(l.Windown.Caishen.audio.symRouletteRolling),d.active=!0,h.spriteFrame=l.Windown.Caishen.asset.getSfBgSymbol(i,n),h.node.color=(new cc.Color).fromHEX(this.colorBg[i]),cc.tween(o.node).to(f,{scale:1.2}).to(f,{scale:.95}).to(f,{scale:1}).start(),cc.tween(d).to(2*f,{opacity:255}).call(function(){d.active=!1,p.spriteFrame=m.spriteFrame}).start(),l.Windown.Caishen.audio.playEffectNoStop(l.Windown.Caishen.audio.symRouletteEnd),r=l.Windown.Caishen.asset.getSfItemSymbol(i,n,!1),o.spriteFrame=r,[4,l.Windown.Caishen.getMakeDelay(.7).prosime];case 5:return a.sent(),this.node.destroy(),s(null),[3,7];case 6:return S=a.sent(),c.Util.ThrowErrProsime(S),[3,7];case 7:return[2]}})})})},s([h],t)}(cc.Component));i.EffectSymbolCaishen=u,cc._RF.pop()},{"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],EndFreeSpinCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"337838LWDRCEa8QwRELnPPW","EndFreeSpinCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.EndFreeSpinCaishen=void 0;var c=e("../../../Scritps/DefineTs/REQUEST_CODE"),l=e("../../../Scritps/Game/GAME_TYPE"),p=e("../../../Scritps/Network/ConectManager"),h=e("../../../Scritps/Other/LbMonoSpace"),u=e("../../../Scritps/Util"),d=e("../../../Scritps/Windown"),m=cc._decorator,f=m.ccclass,y=m.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.btnThuThap=null,t.coinTemp=null,t.coinContainer=null,t.chipPool=null,t.listParticle=[],t}return o(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){this.chipPool=new cc.NodePool("ChipPool"),this.listParticle=this.node.getChildByName("Container").getComponentsInChildren(cc.ParticleSystem3D)},t.prototype.update=function(){},t.prototype.spawnCoin=function(){var e=this,t=cc.tween().call(function(){for(var t=function(){var t=e.getCoin();t.active=!0,t.setParent(e.coinContainer),t.setScale(.5),t.setPosition(cc.v3(0,0,0));var i=e.getRandomPosInCircle();cc.tween(t).delay(d.Windown.RandomFloatNumber(0,.75)).to(2,{position:cc.v3(i.x,i.y,0),scale:1.8}).call(function(){e.chipPool.put(t)}).start()},i=0;i<15;i++)t()}),i=cc.tween().delay(1);cc.tween(this.node).sequence(t,i).repeatForever().start()},t.prototype.getCoin=function(){return 0==this.chipPool.size()&&this.chipPool.put(cc.instantiate(this.coinTemp)),this.chipPool.get()},t.prototype.getRandomPosInCircle=function(){var e=Math.random()*Math.PI*2,t=1500*Math.cos(e),i=1500*Math.sin(e);return cc.v2(t,i)},t.prototype.show=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s,r,h,m=this;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),d.Windown.Caishen.audio.playEffect(d.Windown.Caishen.audio.bgmTotalwinMain),this.getComponent(cc.Animation).play("EndFreeSpin"),t=[],n=d.Windown.Caishen.getMakeDelay(4.5),t.push(n),this.btnThuThap.active=!1,this.label.resetLb(),this.label.time=4.5,this.label.setMoney(e),o=function(){for(;t.length>0;)t.shift().cancle(!1);m.listParticle.forEach(function(e){cc.tween(e.node).to(.3,{opacity:0}).start()}),cc.tween(m.node).to(.3,{opacity:0}).call(function(){m.node.destroy(),i(null),d.Windown.Caishen.audio.stopBkgFs()}).start()},this.scheduleOnce(function(){m.node.once(cc.Node.EventType.TOUCH_END,function(){for(;t.length>0;)t.shift().cancle(!0)})},.5),[4,n.prosime];case 1:return a.sent(),this.node.targetOff(this),s=d.Windown.Caishen.getMakeDelay(3),t.push(s),this.label.setMoneyNoTime(e),this.label.node.runAction(cc.sequence(cc.scaleTo(.15,1.15),cc.scaleTo(.15,1))),this.btnThuThap.active=!0,this.btnThuThap.opacity=0,e>1e4&&((r=p.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.Caishen),r.putInt("mt",e),r.putUtfString("nn",d.Windown.User.nickName),r.putUtfString("dt","fs"),p.ConectManager.getIns().sendRequest(c.REQUEST_CODE.AddBigWin,r)),cc.tween(this.btnThuThap).to(.5,{opacity:255}).start(),this.btnThuThap.once("click",o),d.Windown.Caishen.audio.stopEffect(d.Windown.Caishen.audio.bgmTotalwinMain),d.Windown.Caishen.audio.playEffect(d.Windown.Caishen.audio.bgmTotalwinEnd),[4,s.prosime];case 2:return a.sent(),o(),[3,4];case 3:return h=a.sent(),u.Util.ThrowErrProsime(h),[3,4];case 4:return[2]}})})})},s([y(h.default)],t.prototype,"label",void 0),s([y(cc.Node)],t.prototype,"btnThuThap",void 0),s([y(cc.Node)],t.prototype,"coinTemp",void 0),s([y(cc.Node)],t.prototype,"coinContainer",void 0),s([f],t)}(cc.Component);i.EndFreeSpinCaishen=I,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],InfoBarControllerCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"cc544AfT5NHioVZd1F733PW","InfoBarControllerCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=e("../../../Scritps/Other/LbMonoSpace"),l=e("../../../Scritps/Util"),p=e("../../../Scritps/Windown"),h=e("./CaishenSpeedControl"),u=cc._decorator,d=u.ccclass,m=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbMoney=null,t.lbBonus=null,t.spTotalWin=null,t.spWin=null,t.spInfoBar=null,t.listInfoBar=[],t.spMaskInfoBar=[],t.listMaskInfoBar=[],t.parentOneMore=null,t.bgFS=null,t.parentContent=null,t.parentContentFS=null,t.parentMoney=null,t.takeBigWin=null,t.particleChipLeft=null,t.particleChipRight=null,t.isShowOneMoreScater=!1,t.ani=null,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.parentContent.x=360,this.parentContent.runAction(cc.repeatForever(cc.sequence(cc.moveTo(80,-5723.291,4.555),cc.callFunc(function(){e.parentContent.x=272})))),this.showRdContent(),this.ani=this.getComponent(cc.Animation)},t.prototype.showRdContent=function(){p.Windown.Caishen.stateSpin.freeSpinLeft>0?(this.parentContentFS.active=!0,this.parentContent.active=!1):(this.parentContent.active=!0,this.parentContentFS.active=!1),this.parentOneMore.active=!1,this.parentMoney.active=!1,this.isShowOneMoreScater=!1},t.prototype.showOneMoreScater=function(){this.isShowOneMoreScater||(this.isShowOneMoreScater=!0,this.parentContent.active=!1,this.parentOneMore.active=!0,this.parentMoney.active=!1,this.getComponent(cc.Animation).play("InfoBarOneMoreScater"))},t.prototype.showTakeMoney=function(e){return r(this,void 0,void 0,function(){var t=this;return a(this,function(){return[2,new Promise(function(i){return r(t,void 0,void 0,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return p.Windown.Caishen.audio.playEffect(p.Windown.Caishen.audio.prizeSmallwin),cc.find("ParentMoney/win_info",this.node).active=!1,cc.find("ParentMoney/win_info",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,this.parentContent.active=!1,this.parentContentFS.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(e),t=this.lbMoney.node.parent,n=p.Windown.Caishen.curRoomBet*p.Windown.Caishen.totalLineBet,e/n<10?(this.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(h.CaishenSpeedControl).onPlay()):(this.getComponent(cc.Animation).playAdditive("BigWinNormal"),this.node.getComponent(h.CaishenSpeedControl).onPlay()),t.setScale(0,0,0),t.opacity=50,t.runAction(cc.spawn(cc.fadeIn(.3),cc.scaleTo(.5,1).easing(cc.easeBackOut()))),p.Windown.Caishen.stateSpin.isMaxSpeed?[3,2]:[4,p.Windown.Caishen.getMakeDelay(.75).prosime];case 1:return o.sent(),[3,4];case 2:return[4,p.Windown.Caishen.getMakeDelay(.5).prosime];case 3:o.sent(),o.label=4;case 4:return i(null),[2]}})})})]})})},t.prototype.showTakeMoneyTurn=function(e,t){return r(this,void 0,void 0,function(){var i=this;return a(this,function(){return[2,new Promise(function(n){return r(i,void 0,void 0,function(){var i,o,s,r,c;return a(this,function(){try{cc.find("ParentMoney/win_info",this.node).active=!0,cc.find("ParentMoney/win_info",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,(i=cc.find("FreeSpin/bns_mtp_glow",this.node.parent).getComponent(cc.Animation)).play("bns_mtp_glow_win"),cc.tween(p.Windown.Caishen.lb_BonusFS.node.parent).to(.3,{scale:1.4}).to(.3,{scale:.9}).to(.4,{scale:1},{easing:cc.easing.sineOut}).start(),o=p.Windown.Caishen.stateSpin.isMaxSpeed?2:1,s=p.Windown.Caishen.curRoomBet*p.Windown.Caishen.totalLineBet,r=e/s,1!=t&&p.Windown.Caishen.audio.playEffect(p.Windown.Caishen.audio.prizeInfoSmallwin),r<7?(this.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(h.CaishenSpeedControl).onPlay()):(this.takeBigWin.active=!0,this.takeBigWin.runAction(cc.fadeIn(.2)),this.getComponent(cc.Animation).playAdditive("BigWinNormal"),this.node.getComponent(h.CaishenSpeedControl).onPlay()),this.parentContent.active=!1,this.parentContentFS.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(e),(c=this.lbMoney.node.parent).setScale(0,0,0),c.opacity=50,c.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3/o),cc.scaleTo(.5/o,1).easing(cc.easeBackOut())),cc.callFunc(function(){}))),i.play("bns_mtp_glow_normal"),n(null)}catch(a){l.Util.ThrowErrProsime(a)}return[2]})})})]})})},t.prototype.reset=function(){var e=this;cc.log("reset Infobar"),this.spInfoBar.spriteFrame=this.listInfoBar[0],this.spInfoBar.node.width=656,this.spMaskInfoBar.forEach(function(t){t.spriteFrame=e.listMaskInfoBar[0]}),this.ani.stop(),0==p.Windown.Caishen.stateSpin.freeSpinLeft?this.ani.play("NormalState"):(this.ani.play("NormalStateFS"),this.lbBonus.string=p.Windown.Caishen.dataFinish.get("bonusSpin")+"")},t.prototype.offOneMoreScater=function(){},t.prototype.effectDropOneMorScater=function(){this.parentOneMore.stopAllActions(),this.parentOneMore.runAction(cc.sequence(cc.scaleTo(.1,1.18).easing(cc.easeSineOut()),cc.scaleTo(.1,1).easing(cc.easeSineIn())))},t.prototype.showTotalMoney=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s,r,c;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,8,,9]),0==e?(i(null),[2]):(t=p.Windown.Caishen.stateSpin.isMaxSpeed?2:1,n=p.Windown.Caishen.curRoomBet*p.Windown.Caishen.totalLineBet,(o=e/n)<7?(this.parentContent.active=!1,this.parentContentFS.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.parentMoney.setScale(0,0,0),cc.find("ParentMoney/win_info",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut())),this.lbMoney.resetLb(),this.lbMoney.setMoneyNoTime(e),this.node.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(h.CaishenSpeedControl).onPlay(),p.Windown.Caishen.audio.playEffect(p.Windown.Caishen.audio.prizeInfobarTotalwin),[4,p.Windown.Caishen.getMakeDelay(1/t).prosime]):[3,2]);case 1:return a.sent(),[3,7];case 2:return o>=10?[4,p.Windown.Caishen.getPromise(p.Windown.Caishen.effect.showBigWin(e,o))]:[3,4];case 3:a.sent(),a.label=4;case 4:return p.Windown.Caishen.audio.playEffect(p.Windown.Caishen.audio.prizeInfobarTotalwinAndChip),this.parentContent.active=!1,this.parentContentFS.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParentMoney/win_info",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.lbMoney.resetLb(),this.lbMoney.time=.5,this.lbMoney.setMoney(e),o<10?(this.node.getComponent(cc.Animation).play("BigWinNormal"),this.node.getComponent(h.CaishenSpeedControl).onPlay(),(s=cc.instantiate(this.particleChipLeft.node)).setParent(this.node),s.active=!0,(r=cc.instantiate(this.particleChipRight.node)).setParent(this.node),r.active=!0,this.scheduleOnce(function(){s.destroy(),r.destroy()},2),0==p.Windown.Caishen.stateSpin.freeSpinLeft?(s.setPosition(cc.v2(-285.796,-44.787)),r.setPosition(cc.v2(285.796,-44.787))):(s.setPosition(cc.v2(-285.796,-102.239)),r.setPosition(cc.v2(285.796,-102.239)))):(this.node.getComponent(cc.Animation).play("BigWinTotal"),this.node.getComponent(h.CaishenSpeedControl).onPlay()),[4,p.Windown.Caishen.getMakeDelay(.5).prosime];case 5:return a.sent(),this.parentMoney.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),[4,p.Windown.Caishen.getMakeDelay(.3).prosime];case 6:a.sent(),a.label=7;case 7:return i(null),[3,9];case 8:return c=a.sent(),l.Util.ThrowErrProsime(c),[3,9];case 9:return[2]}})})})},s([m(c.default)],t.prototype,"lbMoney",void 0),s([m(c.default)],t.prototype,"lbBonus",void 0),s([m(cc.SpriteFrame)],t.prototype,"spTotalWin",void 0),s([m(cc.SpriteFrame)],t.prototype,"spWin",void 0),s([m(cc.Sprite)],t.prototype,"spInfoBar",void 0),s([m([cc.SpriteFrame])],t.prototype,"listInfoBar",void 0),s([m([cc.Sprite])],t.prototype,"spMaskInfoBar",void 0),s([m([cc.SpriteFrame])],t.prototype,"listMaskInfoBar",void 0),s([m(cc.Node)],t.prototype,"parentOneMore",void 0),s([m(cc.Node)],t.prototype,"bgFS",void 0),s([m(cc.Node)],t.prototype,"parentContent",void 0),s([m(cc.Node)],t.prototype,"parentContentFS",void 0),s([m(cc.Node)],t.prototype,"parentMoney",void 0),s([m(cc.Node)],t.prototype,"takeBigWin",void 0),s([m(cc.ParticleSystem3D)],t.prototype,"particleChipLeft",void 0),s([m(cc.ParticleSystem3D)],t.prototype,"particleChipRight",void 0),s([d],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./CaishenSpeedControl":"CaishenSpeedControl"}],ItemAddScaterCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"a61f2I4n9ZKHLMzyX/uhcqT","ItemAddScaterCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShow=!1,t}return o(t,e),t.prototype.start=function(){},t.prototype.show=function(){},t.prototype.effectNearWinNoSap=function(){this.node.getComponent(cc.Animation);var e=this.node.getComponentInChildren(sp.Skeleton);e.setAnimation(0,"spawn",!1),e.setCompleteListener(function(){e.setAnimation(0,"idle",!0),e.setCompleteListener(null)})},t.prototype.idle=function(){cc.log("effectIdles"),this.node.getComponentInChildren(sp.Skeleton).setAnimation(0,"idle",!0)},t.prototype.effectDrop=function(){cc.log("effectDrop"),this.node.getComponentInChildren(sp.Skeleton).setAnimation(0,"win",!0)},t.prototype.efWin=function(){cc.log("efWin");var e=this.node.getComponentInChildren(sp.Skeleton);e.setAnimation(0,"win",!1),e.setCompleteListener(function(){e.setAnimation(0,"idle",!0),e.setCompleteListener(null)})},s([a],t)}(cc.Component));i.default=c,cc._RF.pop()},{}],ItemLichSuCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"87397E9M4FOHrs08IbF6Hdk","ItemLichSuCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/DefineTs/REQUEST_CODE"),a=e("../../../Scritps/Network/ConectManager"),c=e("../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbTime=null,t.lbBet=null,t.lbWin=null,t.data=null,t}return o(t,e),t.prototype.initItem=function(e){try{this.data=e;var t=this.data.get("date"),i=this.data.get("bet"),n=this.data.get("agWin");this.lbTime.string=c.Windown.formatDate(new Date(t),"dd/MM\nHH:mm:ss"),this.lbBet.string=c.Windown.formatNumber(i*c.Windown.Caishen.totalLineBet),this.lbWin.string=c.Windown.formatNumber(n)}catch(o){console.error(o)}},t.prototype.onClick=function(){var e=a.ConectManager.getIns().getSFSObj();e.putInt("id",this.data.get("id")),console.log("id la: "+this.data.get("id")),a.ConectManager.getIns().sendRequest(r.REQUEST_CODE.HistoryChiTietCaishen,e,c.Windown.Caishen.roomSFS),c.Windown.Caishen.audio.playClick(),c.Windown.UIManager.showLoading()},s([h(cc.Label)],t.prototype,"lbTime",void 0),s([h(cc.Label)],t.prototype,"lbBet",void 0),s([h(cc.Label)],t.prototype,"lbWin",void 0),s([p],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],ItemResultDetailCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"8bc82706ShNq6UImr45j92y","ItemResultDetailCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Other/LbMonoSpace"),a=e("../../../Scritps/Windown"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbX=null,t.lbTitleToHopWin=null,t.parentItemResult=null,t.parentItemWin=null,t.colorOf=null,t.playTable=[[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,4,4,6,6,8,10,20,30,0,0],[2,2,2,6,6,10,10,15,25,25,40,0,0],[3,3,3,8,8,12,12,20,40,50,60,0,0],[4,4,4,10,10,15,15,30,60,70,80,0,0]],t}return o(t,e),t.prototype.init=function(e,t,i,n){var o=this;if(i=0==i?1:i,t){this.lbTitleToHopWin.string="T\u1ed5 h\u1ee3p win",this.parentItemWin.active=!0;for(var s=this.parentItemWin.children[0],r=0,c=t.lsIdItem.length;r<c;r++){var l=t.lsIdItem[r];t.lsAgWin[r],null==(w=this.parentItemWin.children[r])&&((w=cc.instantiate(s)).parent=this.parentItemWin),w.active=!0;var p=this.getArrSf(l,1,0);w.children[0].children[0].getComponent(cc.Sprite).spriteFrame=p[0],w.children[0].children[1].getComponent(cc.Sprite).spriteFrame=p[2]}for(r=t.lsIdItem.length;r<this.parentItemWin.childrenCount;r++)this.parentItemWin.children[r].active=!1;this.lbX.node.parent.active=!0}else this.lbTitleToHopWin.string="-------------",this.parentItemWin.active=!1;var h=this.parentItemResult.children,u=h[0].children[0];if(e.forEach(function(e,t){var i=h[t],n=null;e.forEach(function(e,t){var s=i.children[t],r=e.idItem,a=e.typeItem,c=e.size;null==s&&((s=cc.instantiate(u)).parent=i);var l=o.getArrSf(r,c,a);s.children[0].getComponent(cc.Sprite).spriteFrame=l[0],s.children[1].getComponent(cc.Sprite).spriteFrame=l[1],s.children[2].getComponent(cc.Sprite).spriteFrame=l[2],s.children[0].color=o.colorOf,s.children[1].color=o.colorOf,s.children[2].color=o.colorOf,s.children[0].height=105*c,s.children[1].height=105*c,s.height=103*c;var p=n?n.y+n.height/2*.75:-230;s.y=p+s.height/2*.75,n=s})}),t){var d=t.lsIdItem,m=t.lsstack,f=t.lsAgWin;for(r=0,c=d.length;r<c;r++){for(var y="",I=0;I<m[r]+1;I++){for(var S=h[I],g=0,v=0,C=S.childrenCount;v<C;v++)if(e[I][v].idItem==d[r]||11==e[I][v].idItem){var b=S.children[v];b.children[0].color=cc.Color.WHITE,b.children[1].color=cc.Color.WHITE,b.children[2].color=cc.Color.WHITE,g++}y+=g+"x"}var w;y+=this.playTable[m[r]][d[r]]+"x"+a.Windown.formatNumber(n),y+="\nx"+i,(w=this.parentItemWin.children[r]).children[1].getComponent(cc.Label).string=y+"=\n"+a.Windown.formatNumber(f[r]*i)}}this.lbX.string=i.toString()},t.prototype.getArrSf=function(e,t,i){return[a.Windown.Caishen.asset.getSfBgSymbol(e,t),a.Windown.Caishen.asset.getSfBorderSymbol(i,t,!1),a.Windown.Caishen.asset.getSfItemSymbol(e,t)]},s([p(r.default)],t.prototype,"lbX",void 0),s([p(cc.Label)],t.prototype,"lbTitleToHopWin",void 0),s([p(cc.Node)],t.prototype,"parentItemResult",void 0),s([p(cc.Node)],t.prototype,"parentItemWin",void 0),s([p(cc.Color)],t.prototype,"colorOf",void 0),s([l],t)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Windown":void 0}],ItemSlotCaishenNgang:[function(e,t,i){"use strict";cc._RF.push(t,"4faa9ftkUpCbaCske+UEO89","ItemSlotCaishenNgang");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),a=e("./ItemSlotCaishen"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){},t.prototype.activeLongWild=function(){var e=this,t=cc.find("ParentItem/spine",this.itemLongWild).getComponent(sp.Skeleton),i=r.Windown.convertNodeInOtherNode(this.node,r.Windown.Caishen.parentEffect.parent.parent);this.itemLongWild.setParent(r.Windown.Caishen.parentEffect.parent.parent),this.itemLongWild.setPosition(i),t.setAnimation(0,"activate",!1),this.scheduleOnce(function(){r.Windown.Caishen.audio.playEffect(r.Windown.Caishen.audio.wildShrink)},1),t.setCompleteListener(function(){e.itemLongWild.destroy(),e.itemLongWild=null,e.getListSymbolResult().forEach(function(e){e.skeletonItem.setAnimation(0,"idle",!0)})}),t.node.y=230},s([l],t)}(a.default));i.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemSlotCaishen":"ItemSlotCaishen"}],ItemSlotCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"b8971Uo1ttNFrBbPjFsyFsS","ItemSlotCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_MOVE=void 0;var c=e("../../../Scritps/DefineTs/StateReelSlot"),l=e("../../../Scritps/Network/ConectManager"),p=e("../../../Scritps/Util"),h=e("../../../Scritps/Windown"),u=e("./SymbolCaiShen");(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD_NEW=1]="ADD_NEW"})(i.TYPE_MOVE||(i.TYPE_MOVE={}));var d=cc._decorator,m=d.ccclass,f=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentItem=null,t.sizeSymbol=7,t.parentItemFront=null,t.parentItemActive=null,t.funReject=null,t.resolve=null,t.stateWhel=c.default.WAITING,t.result=[],t.resultTemp=[],t.listIconEff=[],t.nodeEffNearWin=null,t.nodeWildDT=null,t.nodeWildShowDT=null,t.itemLongWild=null,t.isScater=!1,t.index=-1,t.indexNodeFirt=0,t.isMoveSlowDown=!1,t.deltaSlowDown=0,t.listNumMutilWild=[],t.indexMaxWild=0,t.listItemSymbol=[],t.listProSkip=[],t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.initParent=function(){this.parentItemFront=cc.instantiate(this.parentItem),this.parentItemFront.setPosition(h.Windown.convertNodeInOtherNode(this.parentItem,h.Windown.Caishen.parentItemFront)),this.parentItemFront.parent=h.Windown.Caishen.parentItemFront,this.parentItemActive=cc.instantiate(this.parentItem),this.parentItemActive.setPosition(h.Windown.convertNodeInOtherNode(this.parentItem,h.Windown.Caishen.parentItemActive)),this.parentItemActive.parent=h.Windown.Caishen.parentItemActive,6==this.sizeSymbol&&(this.parentItemFront.angle=-90,this.parentItemActive.angle=-90)},t.prototype.initListSymbol=function(){for(var e=[],t=0,i=this.parentItem.children;t<i.length;t++){var n=i[t].getComponent(u.default);n&&e.push(n)}this.listItemSymbol=e},t.prototype.getListSymbol=function(){return this.listItemSymbol},t.prototype.getListSymbolResult=function(){var e=[],t=this.getListSymbol();return this.result.forEach(function(i,n){e.push(t[n+1])}),e},t.prototype.setResultFirtGame=function(){var e=this.getListRandomResult(),t=e.slice(1,e.length-1);this.setResult(t),this.initParent();for(var i=this.parentItem.children,n=0,o=this.sizeSymbol;n<o;n++){var s=i[n];null==s&&((s=this.getSymbol()).parent=this.parentItem),s.setSiblingIndex(n),s.x=0;var r=s.getComponent(u.default);6==this.sizeSymbol?r.isVectical=!1:r.isVectical=!0,r.setItemColum(this),r.setResult(e[n])}this.initListSymbol(),this.getListSymbol().forEach(function(e){e.initPosStartGame(),e.checkItemFront()})},t.prototype.getListRandomResult=function(){var e=[];if(0==this.index||5==this.index)for(var t=0;t<this.sizeSymbol;t++)e.push(this.getRandomResult());else{e.push(this.getRandomResult());var i=this.getRandomResult();e.push(i);for(var n=i.getInt("size");n<5;)n+(i=this.getRandomResult(h.Windown.RandomNumber(1,6-n))).getInt("size")<=5&&(n+=i.getInt("size"),e.push(i));for(t=e.length;t<this.sizeSymbol;t++)e.push(this.getRandomResult())}return e},t.prototype.offNearWin=function(){var e=this;h.Windown.Caishen.activeMask(!0,6==this.sizeSymbol?6:this.index),this.nodeEffNearWin&&(cc.log("offNearWin:"),this.nodeEffNearWin.stopAllActions(),this.nodeEffNearWin.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.nodeEffNearWin.active=!1})))),5==this.index&&(h.Windown.Caishen.activeMask(!1),h.Windown.Caishen.infoBar.offOneMoreScater(),h.Windown.Caishen.infoBar.showRdContent())},t.prototype.setResult=function(e){this.result=e,this.resultTemp=e.slice(),this.indexMaxWild=this.resultTemp.length},t.prototype.checkAndRemoveItem=function(e,t){var i=!1,n=this.getListSymbol().slice(1,this.result.length+1);6==this.sizeSymbol&&(n.reverse(),n=n.slice(0,t+1)),6==this.sizeSymbol&&n.reverse();for(var o=0;o<n.length;o++)n[o].result!=e&&11!=n[o].result||(0!=n[o].typeItem||n[o].isShuff?(n[o].effectRemoveItem(),n[o].isShuff=!0):(n[o].removeItem(),this.result[o]=null),i=!0);i&&(this.result=this.result.filter(function(e){return null!=e}))},t.prototype.getNextIdShuffle=function(){},t.prototype.checkItemShuffle=function(e,t,i,n){var o=this;return new Promise(function(s){return r(o,void 0,void 0,function(){var o,r,c,l,h,u,d,m,f;return a(this,function(a){switch(a.label){case 0:for(a.trys.push([0,2,,3]),o=this.getListSymbol().slice(1,this.result.length+1),r=[],c=0,l=o;c<l.length;c++)if((h=l[c]).result==t&&0!=h.typeItem){for(u=h.getIndexOf()-1,d=u,m=u+1;m<this.result.length;m++)(e.includes(this.result[m].getInt("idItem"))&&this.index<=i||11==this.result[m].getInt("idItem"))&&d++;this.result.length!=n.length&&(this.result.length>n.length?d-=this.result.length-n.length:d+=n.length-this.result.length),r.push(h.actionRandomNewResultNextKhung(n[d].getInt("idItem")))}return[4,Promise.all(r)];case 1:return a.sent(),s(null),[3,3];case 2:return f=a.sent(),p.Util.ThrowErrProsime(f),[3,3];case 3:return[2]}})})})},t.prototype.checkItemWin=function(e,t){var i=this;return new Promise(function(n){return r(i,void 0,void 0,function(){var i,o,s,r;return a(this,function(){try{for(this.getListSymbol(),i=this.getListSymbol().slice(1,this.result.length+1),6==this.sizeSymbol&&(i.reverse(),i=i.slice(0,t+1)),o=0,s=i;o<s.length;o++)(r=s[o]).result!=e&&11!=r.result||(0!=r.typeItem||r.isShuff?cc.log("item shuffle,not take effect"):r.takeItem());n(null)}catch(a){p.Util.ThrowErrProsime(a)}return[2]})})})},t.prototype.addNewListSymbol=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s,r,c,l,d,m,f,y;return a(this,function(a){switch(a.label){case 0:for(a.trys.push([0,2,,3]),h.Windown.Caishen.stateSpin.curentCountScater,(t=this.result.slice()).reverse(),this.setResult(e),n=this.result.length-t.length,t.length=this.result.length,t.reverse(),o=this.getListSymbol(),s=o[0],r=0;r<n;r++)(c=h.Windown.Caishen.asset.getSymbol()).x=0,this.parentItem.addChild(c,0),c.setSiblingIndex(0),f=c.getComponent(u.default),6==this.sizeSymbol?f.isVectical=!1:f.isVectical=!0,f.setItemColum(this),this.getListSymbol().unshift(f);for(l=this.getListSymbol(),d=[],l[0].setResult(this.getRandomResult()),this.result.forEach(function(e,t){var i=l[t+1];e.getInt("typeItem")!=i.typeItem&&i.isShuff||i.setResult(e)}),s.node.y=s.node.height/2,m=s.getIndexOf()-1;m>=0;)(f=l[m]).node.y=s.node.y+s.node.height/2+f.node.height/2,s=f,m--;return[4,Promise.all(d)];case 1:return a.sent(),i(null),[3,3];case 2:return y=a.sent(),p.Util.ThrowErrProsime(y),[3,3];case 3:return[2]}})})})},t.prototype.getSymbol=function(){return h.Windown.Caishen.asset.getSymbol()},t.prototype.checkIsNorSap=function(){var e=this.getListSymbol().filter(function(e){return e.checkIsInView()}),t=0;return e.forEach(function(e){t+=e.sizeItem}),this.sizeSymbol-2-t>0},t.prototype.moveAllSymbol=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s,r,c,l,u,d,m,f,y,I,S,g,v,C;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,10,,11]),t=h.Windown.Caishen.stateSpin.curentCountScater>2&&!h.Windown.Caishen.stateSpin.isMaxSpeed,n=t||h.Windown.Caishen.stateSpin.isMaxSpeed?0:.05*h.Windown.RandomNumber(0,5),o=h.Windown.Caishen.stateSpin.isMaxSpeed?2:1,[4,h.Windown.Caishen.getMakeDelay(.2+n).prosime];case 1:if(a.sent(),(s=this.getListSymbol()).forEach(function(e){e.offItem()}),(r=s.filter(function(e){return e.checkIsInView()})).reverse(),r[r.length-1],r.length>0)for(c=r[0],l=-c.size.height*(this.sizeSymbol-2)+c.node.height/2,u=function(e,t){var i=r[e],n=i.node;if(Math.abs(l-n.y)>2){var s=cc.moveTo(.25/o,n.x,l).easing(cc.easeSineIn()),a=cc.sequence(cc.moveBy(.04,0,15).easing(cc.easeSineOut()),cc.moveBy(.04,0,-15).easing(cc.easeSineIn()),cc.callFunc(function(){i.effectSpawnSymbol()}));n.runAction(cc.sequence(s,cc.callFunc(function(){h.Windown.Caishen.audio.playSymCollapse()}),a))}else i.isShuff&&i.effectSpawnSymbol();e<t-1&&(l=l+n.height/2+r[e+1].node.height/2)},d=0,m=r.length;d<m;d++)u(d,m);return f=0,r.forEach(function(e){f+=e.sizeItem}),y=this.sizeSymbol-2-f,t?[4,h.Windown.Caishen.getMakeDelay(.4).prosime]:[3,8];case 2:return a.sent(),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.heartbeatNoise),h.Windown.Caishen.stateSpin.offAllSymbol(!1),r.forEach(function(e){e.effectNearWinScater(!0)}),h.Windown.Caishen.infoBar.showOneMoreScater(),y>0?[4,h.Windown.Caishen.getMakeDelay(3).prosime]:[3,5];case 3:return a.sent(),h.Windown.Caishen.activeMask(!1),h.Windown.Caishen.stateSpin.offAllEffectSymbolScater(),[4,h.Windown.Caishen.getMakeDelay(.3+.6*e).prosime];case 4:return a.sent(),[3,7];case 5:return[4,h.Windown.Caishen.getMakeDelay(3.5).prosime];case 6:a.sent(),a.label=7;case 7:r.forEach(function(e){e.removeAddScater()}),a.label=8;case 8:return t&&y>0&&!h.Windown.Caishen.stateSpin.isMaxSpeed&&h.Windown.Caishen.audio.playEffectNoStop(h.Windown.Caishen.audio.heartbeatSlowdrop),I=[],S=s,g=s[0].node.height/2,v=!0,S.forEach(function(e,t){var i=s[t],n=i.node;!r.includes(i)&&Math.abs(g-n.y)>1&&I.push(new Promise(function(e){var r=cc.moveTo(.25/o,n.x,g).easing(cc.easeSineIn()),a=cc.sequence(cc.moveBy(.04,0,15).easing(cc.easeSineOut()),cc.moveBy(.04,0,-15).easing(cc.easeSineIn()),cc.callFunc(function(){e(null),s[t].effectSpawnSymbol()}));n.runAction(cc.sequence(cc.delayTime(.05*(S.length-1-t)),r,cc.callFunc(function(){h.Windown.Caishen.audio.playSymCollapse(),i.isSmoke&&i.showSmoke(),v&&(h.Windown.Caishen.stateSpin.effectDropScater(),v=!1)}),a))})),t<S.length-1&&(g=g-n.height/2-s[t+1].node.height/2)}),[4,Promise.all(I)];case 9:return a.sent(),this.reSetResultColum(),i(null),[3,11];case 10:return C=a.sent(),p.Util.ThrowErrProsime(C),[3,11];case 11:return[2]}})})})},t.prototype.reset=function(){},t.prototype.runSpin=function(){this.stateWhel=c.default.RUN,this.getListSymbol().forEach(function(e){e.runSpin()})},t.prototype.stopSpin=function(e,t){var i=this;return new Promise(function(n,o){return r(i,void 0,void 0,function(){var i,s;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),0!=this.node.angle&&(i=this.checkLongWild(t),!this.isScater&&i&&this.showLongWild()),this.listProSkip=[],this.setResult(t),this.funReject=o,this.isScater=e,this.resolve=n,e?[3,2]:(this.listProSkip.push(h.Windown.Caishen.getMakeDelay(.07)),[4,this.listProSkip[this.listProSkip.length-1].prosime]);case 1:r.sent(),n(null),r.label=2;case 2:return e?(h.Windown.Caishen.effect.activeNodeNearWin(this.index),this.runSlowDownActicon(),this.listProSkip.push(h.Windown.Caishen.getMakeDelay(1.1)),[4,this.listProSkip[this.listProSkip.length-1].prosime]):[3,4];case 3:return r.sent(),this.stateWhel=c.default.SHOW_EFFECT,[3,5];case 4:this.stateWhel=c.default.STOP,this.recaculateSpeedSpin(!1),r.label=5;case 5:return[3,7];case 6:return s=r.sent(),p.Util.ThrowErrProsime(s),[3,7];case 7:return[2]}})})})},t.prototype.forceStopSpin=function(e,t){return this.listProSkip.forEach(function(e){e.cancle(!1)}),this.funReject&&this.funReject(),e&&(h.Windown.Caishen.effect.offNearWin(),h.Windown.Caishen.audio.stopEffect(h.Windown.Caishen.audio.fastspinStart),this.isMoveSlowDown=!1),this.stopSpinIsFastSpin(e,t)},t.prototype.stopSpinIsFastSpin=function(e,t){var i=this;return new Promise(function(e){return r(i,void 0,void 0,function(){var i,n,o=this;return a(this,function(){return this.stateWhel==c.default.SHOW_EFFECT?(e(null),[2]):(i=!1,0!=this.node.angle&&(i=this.checkLongWild(t),!this.isScater&&i&&this.showLongWild()),this.setResult(t),this.stateWhel=c.default.SHOW_EFFECT,this.parentItem.stopAllActions(),this.parentItem.y=this.node.height/2,this.reSetResultColum(),this.sizeSymbol>6&&(this.index>=1&&this.index<=4?h.Windown.Caishen.updateNewTotalLine(this.result.length+1):h.Windown.Caishen.updateNewTotalLine(this.result.length)),h.Windown.Caishen.audio.playEffect(h.Windown.Caishen.audio.spinStopQuick),this.isMoveSlowDown=!1,this.parentItem.y+=20,this.parentItem.runAction(cc.sequence(cc.moveBy(.04,0,-20).easing(cc.easeSineOut()),cc.callFunc(function(){o.getListSymbolResult().forEach(function(e){e.effectSpawnSymbol()}),e(null)}))),null!=this.itemLongWild&&((n=this.itemLongWild.getChildByName("ParentItem")).y=this.itemLongWild.height/2,n.runAction(cc.sequence(cc.moveBy(.04,cc.v2(0,-this.itemLongWild.height)),cc.moveBy(.04,0,10).easing(cc.easeSineOut()),cc.moveBy(.04,0,-10).easing(cc.easeSineIn())))),[2])})})})},t.prototype.recaculateSpeedSpin=function(e){var t=this.getListSymbol(),i=t[0].node.y,n=-this.node.height-t[0].node.height/2,o=Math.abs(n-i),s=.28;if(e&&(s=2),t.forEach(function(e){e.stopSpin(cc.moveBy(s,0,-o))}),null!=this.itemLongWild){var r=this.itemLongWild.getChildByName("ParentItem");r.y=this.itemLongWild.height/2,r.runAction(cc.sequence(cc.moveBy(s,cc.v2(0,-this.itemLongWild.height)),cc.moveBy(.04,0,10).easing(cc.easeSineOut()),cc.moveBy(.04,0,-10).easing(cc.easeSineIn())))}},t.prototype.checkLongWild=function(e){return 4==e.filter(function(e){return 11==e.getInt("idItem")}).length},t.prototype.showLongWild=function(){this.itemLongWild=cc.instantiate(h.Windown.Caishen.asset.itemLongWild),this.itemLongWild.setParent(h.Windown.Caishen.parentEffect);var e=h.Windown.convertNodeInOtherNode(this.node,h.Windown.Caishen.parentEffect);this.itemLongWild.getChildByName("ParentItem").y=this.itemLongWild.height/2,this.itemLongWild.setPosition(cc.v2(5,e.y)),this.itemLongWild.active=!0},t.prototype.errSpin=function(){},t.prototype.reSetResultColum=function(){var e=this.getListSymbol();if(e.length>this.sizeSymbol)for(;e.length>this.sizeSymbol;)h.Windown.Caishen.asset.putSymbol(e[e.length-1].node),e.pop();else if(e.length<this.sizeSymbol)for(var t=e.length;t<this.sizeSymbol;t++){var i=this.getSymbol();this.parentItem.addChild(i);var n=i.getComponent(u.default);6==this.sizeSymbol?n.isVectical=!1:n.isVectical=!0,n.setItemColum(this),e.push(n)}this.result.forEach(function(t,i){e[i+1].setResult(t)}),t=this.result.length+1;for(var o=e.length;t<o;t++)e[t].setResult(e[t].objSFS);e.forEach(function(e){e.canRun=!1,e.node.stopAllActions(),e.initPosStartGame(),e.setImgResult(!1)})},t.prototype.effStopSpin=function(){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){try{if(this.stateWhel==c.default.SHOW_EFFECT)return[2];this.stateWhel=c.default.SHOW_EFFECT,this.parentItem.stopAllActions(),this.parentItem.y=this.node.height/2,this.reSetResultColum(),this.sizeSymbol>6&&(h.Windown.Caishen.audio.playStopAudio(),this.index>=1&&this.index<=4?h.Windown.Caishen.updateNewTotalLine(this.result.length+1):h.Windown.Caishen.updateNewTotalLine(this.result.length)),this.funReject=null,this.isMoveSlowDown=!1,this.isScater?(h.Windown.Caishen.effect.offNearWin(),this.getListSymbolResult().forEach(function(e){e.effectSpawnSymbol()}),this.resolve&&this.resolve(null)):this.parentItem.runAction(cc.sequence(cc.moveBy(.04,0,10).easing(cc.easeSineOut()),cc.moveBy(.04,0,-10).easing(cc.easeSineIn()),cc.callFunc(function(){e.getListSymbolResult().forEach(function(e){e.effectSpawnSymbol()})})))}catch(t){p.Util.ThrowErrProsime(t)}return[2]})})},t.prototype.getIdSymbolResult=function(){return this.stateWhel==c.default.STOP&&this.resultTemp.pop()||this.getRandomResult()},t.prototype.checkLastSymbol=function(e){var t=this.getListSymbol();return t[t.length-1]==e},t.prototype.getRandomResult=function(e){0!=this.index&&5!=this.index||(e=1);var t=null;return t=l.ConectManager.getIns().getSFSObj(),e?(t.putInt("size",e),e>1?t.putInt("idItem",h.Windown.RandomNumber(0,11)):h.Windown.RandomNumber(0,100)<10?t.putInt("idItem",12):t.putInt("idItem",h.Windown.RandomNumber(0,11))):(h.Windown.RandomNumber(0,100)<10?t.putInt("idItem",12):t.putInt("idItem",h.Windown.RandomNumber(0,11)),t.getInt("idItem")<12?(h.Windown.RandomNumber(0,100),t.putInt("size",h.Windown.RandomNumber(1,5))):t.putInt("size",1)),12==t.getInt("idItem")&&t.putInt("size",1),1==t.getInt("size")||11==t.getInt("idItem")||12==t.getInt("idItem")?t.putInt("typeItem",0):t.putInt("typeItem",h.Windown.RandomNumber(0,3)),t},t.prototype.checkParentItem=function(){},t.prototype.runSlowDownActicon=function(){this.getListSymbol().forEach(function(e){e.node.stopAllActions()}),this.isMoveSlowDown=!0,this.deltaSlowDown=5e3},t.prototype.update=function(e){var t=this;this.isMoveSlowDown&&(this.getListSymbol().forEach(function(i){i.node.y-=e*t.deltaSlowDown}),this.deltaSlowDown>500?this.deltaSlowDown-=1800*e:this.deltaSlowDown<1e3&&(this.stateWhel=c.default.STOP,this.isMoveSlowDown=!1,this.recaculateSpeedSpin(!0)))},s([f(cc.Node)],t.prototype,"parentItem",void 0),s([f(cc.Integer)],t.prototype,"sizeSymbol",void 0),s([m],t)}(cc.Component);i.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./SymbolCaiShen":"SymbolCaiShen"}],LichSuCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"e8b4dT7/TFILoxzwmUQafRX","LichSuCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/DefineTs/REQUEST_CODE"),a=e("../../../Scritps/Network/ConectManager"),c=e("../../../Scritps/Popup/PageData/PageData"),l=e("../../../Scritps/Windown"),p=e("./DetailHistoryCaishen"),h=e("./ItemLichSuCaishen"),u=cc._decorator,d=u.ccclass,m=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageDate=null,t.detail=null,t.listData=null,t.maxRow=11,t}return o(t,e),t.prototype.show=function(){this.node.active=!0,this.reset(),this.node.y=-1280,this.node.stopAllActions(),this.node.runAction(cc.moveTo(.3,0,0)),a.ConectManager.getIns().sendRequest(r.REQUEST_CODE.HistoryCaishen,null,l.Windown.Caishen.roomSFS),cc.log("Showw lich su"),l.Windown.UIManager.showLoading(),this.detail.node.active=!1},t.prototype.responseServer=function(e){l.Windown.UIManager.hideLoading();var t=e.getSFSArray("history");this.initWithListData(t)},t.prototype.responseServerChiTiet=function(e){l.Windown.UIManager.hideLoading(),this.showDetail(e)},t.prototype.initWithListData=function(e){cc.log(l.Windown.SFSArrToJson(e)),this.pageDate.content.children;var t=e.size(),i=Math.floor(t/this.maxRow);t%this.maxRow>0&&i++,0==i&&(i=1),this.pageDate.setTotalPage(i),this.listData=e,this.onChangePage(1)},t.prototype.onChangePage=function(e){for(var t=this.pageDate.content,i=t.children,n=i[0],o=(e-1)*this.maxRow,s=0,r=this.maxRow;s<r;s++){var a=i[s];if(o<this.listData.size()){null==a&&(a=cc.instantiate(n),t.addChild(a),a.y=-(s+1)*a.height+a.height/2);var c=this.listData.getSFSObject(o);a.getComponent(h.default).initItem(c),a.active=!0,o++}else{if(!a)break;a.active=!1}}},t.prototype.showDetail=function(e){console.log(l.Windown.SFSObjToJson(e)),this.detail.node.active=!0,this.detail.show(e)},t.prototype.resetContent=function(){for(var e=this.pageDate.content.children,t=0,i=e.length;t<i;t++)e[t].active=!1},t.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},t.prototype.onClickClose=function(){var e=this;l.Windown.Caishen.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){e.node.active=!1})))},s([m(c.default)],t.prototype,"pageDate",void 0),s([m(p.default)],t.prototype,"detail",void 0),s([d],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryCaishen":"DetailHistoryCaishen","./ItemLichSuCaishen":"ItemLichSuCaishen"}],NearFSCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"80675TS9HRCvY4zHQ9o7goq","NearFSCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.NearFSCaishen=void 0;var r=e("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t._curItem=null,t.indexCol=0,t}return o(t,e),t.prototype.init=function(e){if(this.indexCol=e,this._curItem){var t=this._curItem;t.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.destroy()})))}r.Windown.Caishen.audio.playEffect(r.Windown.Caishen.audio.fastspinStart);var i=r.Windown.Caishen.listColum[e],n=cc.instantiate(this.item);n.parent=this.node,n.opacity=0,n.runAction(cc.fadeIn(.3)),n.setPosition(r.Windown.convertNodeInOtherNode(i.node,this.node)),this._curItem=n},t.prototype.effOff=function(){if(this._curItem){5==this.indexCol&&r.Windown.Caishen.audio.playEffect(r.Windown.Caishen.audio.fastspinEnd);var e=this._curItem;e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.destroy()})))}},s([l(cc.Prefab)],t.prototype,"item",void 0),s([c],t)}(cc.Component);i.NearFSCaishen=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],SpinFreeSpinCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"ba49brzPoFASLLoAGHIU7Gq","SpinFreeSpinCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../Scritps/Game/GAME_TYPE"),a=e("../../../Scritps/Other/LbMonoSpace"),c=e("../../../Scritps/Util"),l=e("../../../Scritps/Windown"),p=cc._decorator,h=p.ccclass,u=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.vongquay=null,t.animation=null,t.btnStart=null,t.lbMulti=null,t.multi=1,t.listGoc=[],t.callback=null,t._map=new Map,t.curRandomAngle=0,t}return o(t,e),t.prototype.onLoad=function(){this._map.set(5,[139,159.222]),this._map.set(6,[109.301,127.659]),this._map.set(7,[79.858,95.519]),this._map.set(8,[47.921,66.995]),this._map.set(9,[15,35]),this._map.set(10,[346.487,363]),this._map.set(11,[317.83,335.564]),this._map.set(12,[288.093,308.047]),this._map.set(13,[258.849,278.07]),this._map.set(14,[229.036,249.242]),this._map.set(15,[202,219.187])},t.prototype.start=function(){cc.assetManager.getBundle(r.default.Caishen+"").preload("Prefabs/StartFreeSpin",function(){})},t.prototype.init=function(e){var t=this;return new Promise(function(i){try{t.multi=e,t.callback=i,t.scheduleOnce(function(){t.onClickStart()},10)}catch(n){c.Util.ThrowErrProsime(n)}})},t.prototype.onClickStart=function(){var e=this;this.unscheduleAllCallbacks(),this.btnStart.getComponent(cc.Button).interactable=!1,this.listGoc=this._map.get(this.multi);var t=l.Windown.RandomFloatNumber(this.listGoc[0],this.listGoc[1]);l.Windown.Caishen.audio.playEffect(l.Windown.Caishen.audio.spinBtn),cc.tween(this.vongquay).by(5,{angle:1800+t},{easing:cc.easing.cubicOut}).delay(.5).call(function(){e.lbMulti.string=e.multi+"";var t=cc.instantiate(e.lbMulti.node.parent);t.setParent(e.lbMulti.node.parent.parent),cc.tween(t).to(.5,{scale:2,opacity:0},{easing:cc.easing.sineOut}).delay(3).call(function(){e.callback(null),e.onClose()}).start();var i=cc.find("Container/g_ui_shine",e.node);i.scale=0,cc.find("Container/f_particle_00",e.node).active=!0,cc.tween(i).set({opacity:0}).call(function(){l.Windown.Caishen.audio.playEffect(l.Windown.Caishen.audio.spinFSStop)}).to(.4,{opacity:200,scale:.7}).to(.35,{opacity:0,scale:.5}).start()}).start();var i=0;cc.tween({startNumber:0}).to(5,{startNumber:1e4},{onUpdate:function(){var t=e.getBonusFromAngle(e.vongquay.angle%360);0!=t&&(e.curRandomAngle=t),e.curRandomAngle!=t&&0==i?(l.Windown.Caishen.audio.playEffect(l.Windown.Caishen.audio.spinFSTick),i=1):i=0,e.lbMulti.string=(0!=t?t:e.curRandomAngle)+""}}).start(),this.btnStart.getComponent(cc.Animation).play("ButtonStartDisable")},t.prototype.getBonusFromAngle=function(e){var t=0;return this._map.forEach(function(i,n){e>i[0]&&e<i[1]&&(t=n)}),t},t.prototype.effectRandomMulti=function(){var e=this;this.lbMulti.node.active=!0,cc.tween({startNumber:0}).to(2,{startNumber:1e3},{progress:function(){e.lbMulti.string=+l.Windown.randomInt(5,16)+""}}).call(function(){e.lbMulti.string=e.multi+"";var t=cc.instantiate(e.lbMulti.node.parent);t.setParent(e.lbMulti.node.parent.parent),cc.tween(t).to(.5,{scale:2,opacity:0},{easing:cc.easing.sineOut}).delay(3).call(function(){e.callback(null),e.onClose()}).start();var i=cc.find("Container/g_ui_shine",e.node);i.scale=0,cc.find("Container/f_particle_00",e.node).active=!0,cc.tween(i).set({opacity:0}).to(.4,{opacity:200,scale:.7}).to(.35,{opacity:0,scale:.5}).start()}).start()},t.prototype.onClose=function(){this.node.destroy()},s([u(cc.Node)],t.prototype,"vongquay",void 0),s([u(cc.Animation)],t.prototype,"animation",void 0),s([u(cc.Node)],t.prototype,"btnStart",void 0),s([u(a.default)],t.prototype,"lbMulti",void 0),s([h],t)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],SpinNormalCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"50343Z7SBJEIrndDtrn4wyy","SpinNormalCaishen");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var s=e("../../../Scritps/DefineTs/StateReelSlot"),r=e("../../../Scritps/Util"),a=e("../../../Scritps/Windown"),c=function(){function e(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.freeSpinLeft=0,this.freeSpinCache=0,this.moneyTotalFs=0,this.curentCountScater=0,this.isShowNearWin=!1,this.itemCaishenNang=null,this.listColum=a.Windown.Caishen.listColum,this.itemCaishenNang=a.Windown.Caishen.itemSlotCaishenNgang,this.effect=a.Windown.Caishen.effect}return e.prototype.onStart=function(){var e=this;return new Promise(function(t){return n(e,void 0,void 0,function(){var e,i;return o(this,function(n){switch(n.label){case 0:n.trys.push([0,5,,6]),this.removeAllMutilAdded(),this.itemCaishenNang.runSpin(),e=0,n.label=1;case 1:return e<this.listColum.length?(this.listColum[e].runSpin(),this.isMaxSpeed?[3,3]:[4,a.Windown.Caishen.getMakeDelay(.025).prosime]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[3,6];case 5:return i=n.sent(),r.Util.ThrowErrProsime(i),[3,6];case 6:return t(null),[2]}})})})},e.prototype.onEnd=function(){return n(this,void 0,void 0,function(){var e,t,i,n,c,l,p,h,u,d;return o(this,function(o){switch(o.label){case 0:for(o.trys.push([0,15,,16]),cc.log("onend:========"),e=a.Windown.Caishen.listResultConvert,t=a.Windown.Caishen.getListActiveScaster(e[0].listSFSObj,e[0].listSFSObjNgang),i=0,n=[],this.isShowNearWin=!1,c=0,l=t;c<l.length;c++)if(u=l[c]){this.isShowNearWin=!0;break}return this.curentCountScater=e[0].countScater,this.isMaxSpeed?[3,2]:(this.itemCaishenNang.stopSpin(!1,e[0].listSFSObjNgang),[4,a.Windown.Caishen.getMakeDelay(.3).prosime]);case 1:return o.sent(),[3,3];case 2:this.itemCaishenNang.stopSpinIsFastSpin(!1,e[0].listSFSObjNgang),o.label=3;case 3:p=0,h=this.listColum,o.label=4;case 4:return p<h.length?(u=h[p],this.isMaxSpeed?[3,6]:[4,u.stopSpin(t[i],e[0].listSFSObj[i])]):[3,9];case 5:return o.sent(),[3,7];case 6:n.push(u.stopSpinIsFastSpin(t[i],e[0].listSFSObj[i])),o.label=7;case 7:i++,o.label=8;case 8:return p++,[3,4];case 9:return this.isMaxSpeed?[4,Promise.all(n)]:[3,12];case 10:return o.sent(),[4,a.Windown.Caishen.getMakeDelay(.1).prosime];case 11:return o.sent(),[3,14];case 12:return[4,a.Windown.Caishen.getMakeDelay(.5).prosime];case 13:o.sent(),o.label=14;case 14:return a.Windown.Caishen.stateReel!=s.default.RUN&&this.handleStopAllColum(),[3,16];case 15:return d=o.sent(),r.Util.ThrowErrProsime(d),[3,16];case 16:return[2]}})})},e.prototype.handleErrSpin=function(){return n(this,void 0,void 0,function(){var e,t,i;return o(this,function(n){switch(n.label){case 0:this.itemCaishenNang.stopSpin(!1,this.itemCaishenNang.result),e=0,t=this.listColum,n.label=1;case 1:return e<t.length?(i=t[e],this.isMaxSpeed?[3,3]:[4,i.stopSpin(!1,i.result)]):[3,5];case 2:return n.sent(),[3,4];case 3:i.stopSpin(!1,i.result),n.label=4;case 4:return e++,[3,1];case 5:return a.Windown.Caishen.resetForNewGame(),[2]}})})},e.prototype.onForceEnd=function(){return n(this,void 0,void 0,function(){var e,t,i,n,s,c,l,p;return o(this,function(o){switch(o.label){case 0:cc.log("onForceEnd"),o.label=1;case 1:for(o.trys.push([1,4,,5]),a.Windown.Caishen.clearAllMakeDelay(),e=a.Windown.Caishen.listResultConvert,t=a.Windown.Caishen.getListActiveScaster(e[0].listSFSObj,e[0].listSFSObjNgang),i=[],n=0,this.itemCaishenNang.forceStopSpin(!1,e[0].listSFSObjNgang),s=0,c=this.listColum;s<c.length;s++)l=c[s],i.push(l.forceStopSpin(t[n],e[0].listSFSObj[n])),n++;return a.Windown.Caishen.audio.playEffect(a.Windown.Caishen.audio.spinStopQuick),[4,Promise.all(i)];case 2:return o.sent(),[4,a.Windown.Caishen.getMakeDelay(.25).prosime];case 3:return o.sent(),this.handleStopAllColum(),[3,5];case 4:return p=o.sent(),r.Util.ThrowErrProsime(p),[3,5];case 5:return[2]}})})},e.prototype.handleStopAllColum=function(){return n(this,void 0,void 0,function(){var e,t,i,n,c,l,p;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,15,,16]),a.Windown.Caishen.stateReel==s.default.STOP?[2]:(a.Windown.Caishen.stateReel=s.default.STOP,a.Windown.Caishen.setStateEffBtnSpin(),e=a.Windown.Caishen.listResultConvert,this.offAllEffectSymbolScater(),this.activeAllSymbol(),a.Windown.Caishen.infoBar.offOneMoreScater(),a.Windown.Caishen.infoBar.showRdContent(),null==this.itemCaishenNang.itemLongWild?[3,2]:(this.itemCaishenNang.activeLongWild(),[4,a.Windown.Caishen.getMakeDelay(2).prosime]));case 1:o.sent(),o.label=2;case 2:t=0,i=e.length,o.label=3;case 3:return t<i?(n=e[t],this.curentCountScater=n.countScater,c=this.checkIsWaitShuffWild(n),l=this.checIsWaitShuffGold(n),n.listItemWin?(n.isNoSap&&this.checkItemShuffle(n.listItemWin,e[t+1]),a.Windown.Caishen.infoBar.showTakeMoneyTurn(n.agWin,n.mutil),[4,this.checkAndShowLineAn(n.listItemWin,n.agWin)]):[3,10]):[3,12];case 4:return o.sent(),[4,this.checkAndRemoveSymbol(n.listItemWin)];case 5:return o.sent(),[4,a.Windown.Caishen.getMakeDelay(c||l?a.Windown.Caishen.stateSpin.isMaxSpeed?.65:.4:0).prosime];case 6:return o.sent(),n.isNoSap?[4,a.Windown.Caishen.getMakeDelay(a.Windown.Caishen.stateSpin.isMaxSpeed?0:.5).prosime]:[3,10];case 7:return o.sent(),[4,this.addNewSymbol(e[t+1])];case 8:return o.sent(),a.Windown.Caishen.infoBar.isShowOneMoreScater=!1,[4,this.moveAllSymbol()];case 9:o.sent(),o.label=10;case 10:a.Windown.Caishen.infoBar.offOneMoreScater(),o.label=11;case 11:return t++,[3,3];case 12:return[4,this.showMoneyTotalRevice()];case 13:return o.sent(),[4,this.checkAndShowEffect()];case 14:return o.sent(),this.resetForNextNextSpin(),[3,16];case 15:return p=o.sent(),r.Util.ThrowErrProsime(p),[3,16];case 16:return[2]}})})},e.prototype.checkIsWaitShuffWild=function(e){var t=!1;if(e.isNoSap)for(var i=0,n=e.listSFSObj.length;i<n;i++)e.listSFSObj[i].forEach(function(i){e.listItemWin.lsIdItem.includes(i.getInt("idItem"))&&2==i.getInt("typeItem")&&(t=!0)});return t},e.prototype.checIsWaitShuffGold=function(e){var t=!1;if(e.isNoSap)for(var i=0,n=e.listSFSObj.length;i<n;i++)e.listSFSObj[i].forEach(function(i){e.listItemWin.lsIdItem.includes(i.getInt("idItem"))&&1==i.getInt("typeItem")&&(t=!0)});return t},e.prototype.checkIsNearFS=function(){return this.isShowNearWin},e.prototype.removeAllMutilAdded=function(){var e=this;return new Promise(function(t){a.Windown.Caishen.resetLbTotalLine(),e.listColum.forEach(function(e){e.getListSymbol().forEach(function(e){e.removeMutilWhenSpin()})}),e.itemCaishenNang.getListSymbol().forEach(function(e){e.removeMutilWhenSpin()}),t(null)})},e.prototype.checkAndRemoveSymbol=function(e){var t=this;return new Promise(function(i){return n(t,void 0,void 0,function(){var t,n,s,a,c,l,p,h;return o(this,function(o){switch(o.label){case 0:for(o.trys.push([0,2,,3]),this.activeAllSymbol(),t=e.lsIdItem,n=e.lsstack,s=[],a=0,c=t.length;a<c;a++)for(this.itemCaishenNang.checkAndRemoveItem(t[a],n[a]),l=0;l<n[a]+1;l++)p=this.listColum[l],s.push(p.checkAndRemoveItem(t[a],null));return[4,Promise.all(s)];case 1:return o.sent(),i(null),[3,3];case 2:return h=o.sent(),r.Util.ThrowErrProsime(h),[3,3];case 3:return[2]}})})})},e.prototype.addNewSymbol=function(e){var t=this;return new Promise(function(i){return n(t,void 0,void 0,function(){var t,n,s;return o(this,function(o){switch(o.label){case 0:for(n in o.trys.push([0,2,,3]),(t=[]).push(this.itemCaishenNang.addNewListSymbol(e.listSFSObjNgang)),this.listColum)t.push(this.listColum[n].addNewListSymbol(e.listSFSObj[n]));return[4,Promise.all(t)];case 1:return o.sent(),i(null),[3,3];case 2:return s=o.sent(),r.Util.ThrowErrProsime(s),[3,3];case 3:return[2]}})})})},e.prototype.moveAllSymbol=function(){var e=this;return new Promise(function(t){return n(e,void 0,void 0,function(){var e,i,n,s,c;return o(this,function(o){switch(o.label){case 0:for(s in o.trys.push([0,2,,3]),(e=a.Windown.Caishen.stateSpin.curentCountScater>2)&&a.Windown.Caishen.effect.activeNearWinNoSap(),i=0,(n=[]).push(this.itemCaishenNang.moveAllSymbol(i)),this.itemCaishenNang.checkIsNorSap()&&i++,this.listColum)n.push(this.listColum[s].moveAllSymbol(i)),this.listColum[s].checkIsNorSap()&&i++;return[4,Promise.all(n)];case 1:return o.sent(),e&&a.Windown.Caishen.effect.offNearWinNoSap(),t(null),[3,3];case 2:return c=o.sent(),r.Util.ThrowErrProsime(c),[3,3];case 3:return[2]}})})})},e.prototype.takeMutil=function(){},e.prototype.offAllSymbol=function(e){void 0===e&&(e=!0),a.Windown.Caishen.activeMask(!0)},e.prototype.activeAllSymbol=function(){a.Windown.Caishen.activeMask(!1)},e.prototype.checkItemShuffle=function(e,t){var i=this;return new Promise(function(s){return n(i,void 0,void 0,function(){var i,n,a,c,l,p;return o(this,function(){try{for(i=e.lsIdItem,n=e.lsstack,a=0,c=i.length;a<c;a++)for(l=0;l<n[a]+1;l++)p=this.listColum[l],t.listSFSObj[p.index],cc.log("col:"+p.index),p.checkItemShuffle(i,i[a],n[a],t.listSFSObj[p.index]);s(null)}catch(o){r.Util.ThrowErrProsime(o)}return[2]})})})},e.prototype.checkAndShowLineAn=function(e){var t=this;return new Promise(function(i){return n(t,void 0,void 0,function(){var t,n,s,c,l,p,h;return o(this,function(o){switch(o.label){case 0:for(o.trys.push([0,2,,3]),this.offAllSymbol(),t=e.lsIdItem,n=e.lsstack,s=e.lsAgWin,c=0,l=t.length;c<l;c++){for(this.itemCaishenNang.checkItemWin(t[c],n[c]),p=0;p<n[c]+1;p++)this.listColum[p].checkItemWin(t[c],null);s[c]}return[4,a.Windown.Caishen.getMakeDelay(.75).prosime];case 1:return o.sent(),i(null),[3,3];case 2:return h=o.sent(),r.Util.ThrowErrProsime(h),[3,3];case 3:return[2]}})})})},e.prototype.effectDropScater=function(){a.Windown.Caishen.infoBar.effectDropOneMorScater(),this.itemCaishenNang.getListSymbolResult().forEach(function(e){e.effectDropScater()}),this.listColum.forEach(function(e){e.getListSymbolResult().forEach(function(e){e.effectDropScater()})})},e.prototype.offAllEffectSymbolScater=function(){this.itemCaishenNang.getListSymbolResult().forEach(function(e){return e.removeAddScater()}),this.listColum.forEach(function(e){e.getListSymbolResult().forEach(function(e){e.removeAddScater()})})},e.prototype.resetForNextNextSpin=function(){var e=this;cc.log("reset nor nex"),this.itemCaishenNang.getListSymbolResult().forEach(function(e){return e.removeAddScater(!0)}),this.listColum.forEach(function(e){e.getListSymbolResult().forEach(function(e){e.removeAddScater(!0)})}),a.Windown.Caishen.resetForNewGame(),this.freeSpinLeft>0?a.Windown.Caishen.scheduleOnce(function(){a.Windown.Caishen.setLbFreeSpinLeft(e.freeSpinLeft-1),a.Windown.Caishen.onClickBtnSpin()},.5):this.countAutoSpin>0?a.Windown.Caishen.scheduleOnce(function(){e.countAutoSpin--,a.Windown.Caishen.setCountAuto(e.countAutoSpin),a.Windown.Caishen.onClickBtnSpin()},.5):a.Windown.Caishen.activeAllBtn()},e.prototype.checkAndShowEffect=function(){var e=this;return new Promise(function(t){return n(e,void 0,void 0,function(){var e,i,n,s;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),e=a.Windown.Caishen.dataFinish.getBool("Scarter4"),i=a.Windown.Caishen.dataFinish.get("numFreeSpin"),n=a.Windown.Caishen.dataFinish.get("bonusSpin"),this.freeSpinLeft=i,!e&&this.lastFreeSpinLeft<1?(t(null),[2]):e?[4,a.Windown.Caishen.effect.showSpinFreeSpin(n)]:[3,3];case 1:return o.sent(),[4,a.Windown.Caishen.effect.showTakeFreeSpin(i,n)];case 2:o.sent(),o.label=3;case 3:return 1==this.lastFreeSpinLeft&&this.freeSpinLeft<1?[4,this.effect.showEndFree(this.moneyTotalFs)]:[3,5];case 4:o.sent(),this.moneyTotalFs=0,o.label=5;case 5:return this.lastFreeSpinLeft=this.freeSpinLeft,t(null),[3,7];case 6:return s=o.sent(),r.Util.ThrowErrProsime(s),[3,7];case 7:return[2]}})})})},e.prototype.showMoneyTotalRevice=function(){var e=this;return new Promise(function(t){return n(e,void 0,void 0,function(){var e,i;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=a.Windown.Caishen.dataFinish.get("agWin"),this.lastFreeSpinLeft>0&&(this.moneyTotalFs+=e),a.Windown.Caishen.activeMask(!1),e<1?(t(null),[2]):[4,a.Windown.Caishen.infoBar.showTotalMoney(e)];case 1:return n.sent(),a.Windown.Caishen.showMoneyAllWin(e),t(null),[3,3];case 2:return i=n.sent(),r.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})})},e}();i.default=c,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],StartFreeSpinCaishen:[function(e,t,i){"use strict";cc._RF.push(t,"ede25y31TZHVpKsi0ZE++uZ","StartFreeSpinCaishen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.StartFreeSpinCaishen=void 0;var r=e("../../../Scritps/Other/LbMonoSpace"),a=e("../../../Scritps/Windown"),c=cc._decorator,l=c.ccclass,p=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbFreeSpin=null,t.lbBonus=null,t.btnBatDau=null,t.cb=null,t}return o(t,e),t.prototype.show=function(e,t){var i=this;return new Promise(function(n){i.cb=n,a.Windown.Caishen.audio.playEffect(a.Windown.Caishen.audio.fsTrans),i.lbFreeSpin.string=e.toString(),i.lbBonus.string="x"+t.toString();var o=function(){i.hide()};i.btnBatDau.interactable=!1,i.scheduleOnce(function(){i.btnBatDau.interactable=!0,i.btnBatDau.node.once("click",o),i.btnBatDau.node.runAction(cc.sequence(cc.delayTime(5),cc.callFunc(o)))},1)})},t.prototype.hide=function(){var e=this;this.unscheduleAllCallbacks(),a.Windown.Caishen.audio.stopEffect(a.Windown.Caishen.audio.fsTrans),a.Windown.Caishen.audio.playEffect(a.Windown.Caishen.audio.fsTransClose),this.getComponent(cc.Animation).getAnimationState("StartFreeSpinHide").isPlaying||(this.getComponent(cc.Animation).play("StartFreeSpinHide"),cc.tween(this.node).delay(.5).call(function(){e.cb(null)}).delay(1).call(function(){e.node.destroy()}).start())},s([p(r.default)],t.prototype,"lbFreeSpin",void 0),s([p(r.default)],t.prototype,"lbBonus",void 0),s([p(cc.Button)],t.prototype,"btnBatDau",void 0),s([l],t)}(cc.Component);i.StartFreeSpinCaishen=h,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Windown":void 0}],SymbolCaiShen:[function(e,t,i){"use strict";cc._RF.push(t,"22ae8fyEIxDI5tqqG8wKgH3","SymbolCaiShen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_ITEM=void 0;var c=e("../../../Scritps/DefineTs/StateReelSlot"),l=e("../../../Scritps/Util"),p=e("../../../Scritps/Windown"),h=e("./EffectSymbolCaishen"),u=e("./ItemAddScaterCaishen"),d=e("./ItemSlotCaishen"),m=cc._decorator,f=m.ccclass,y=m.property;(function(e){e[e.NONE=0]="NONE",e[e.BAC=1]="BAC",e[e.VANG=2]="VANG"})(i.TYPE_ITEM||(i.TYPE_ITEM={}));var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.spriteBkg=null,t.spriteKhung=null,t.bgCaishen=null,t.skeletonItem=null,t.listColorBkg=[null,null],t.isVectical=!0,t.nodeScater=null,t.sizeBkg=new cc.Size(185,162),t.size=new cc.Size(180,180),t.itemColum=null,t.result=-1,t.objSFS=null,t.typeItem=0,t.sizeItem=0,t.canRun=!1,t.efWin=null,t.listEffWin=[],t.efShuffWild=null,t.lastPos=null,t.isShuff=!1,t.isSmoke=!1,t.isShowEffectSpawn=!1,t.isHasTakeItem=!1,t.listSpine=[],t.colorBg=["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#BFD17D","#BFD17D","#7DD8B7","#7DD8B7","#B37CC7","#B37CC7"],t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.setItemColum=function(e){this.itemColum=e,this.isVectical?(this.node.angle=0,this.size.height=108):(this.size.height=120,this.node.angle=90)},t.prototype.setResult=function(e){var t=this;this.listSpine.forEach(function(e){e!=t.skeletonItem.node&&e.destroy()}),this.listSpine=[this.skeletonItem.node],this.skeletonItem.node.y=0,null!=e&&(this.result!=e.getInt("idItem")||this.typeItem!=e.getInt("typeItem")||this.sizeItem!=e.getInt("size")?(this.objSFS=e,this.result=e.getInt("idItem"),this.typeItem=e.getInt("typeItem"),this.sizeItem=e.getInt("size"),11==this.result&&this.sizeItem>1?(this.setLongWild(),this.isShuff=!1):(this.skeletonItem.node.active=!1,this.itemColum.stateWhel==c.default.RUN?this.setImgResult(!0):this.setImgResult(!1),this.isShuff=!1,this.isShowEffectSpawn=!1),12==this.result?this.node.zIndex=100:11==this.result?this.node.zIndex=50:this.node.zIndex=0,this.setSize()):this.itemColum.stateWhel==c.default.RUN?this.setImgResult(!0):11==this.result&&this.sizeItem>1?(this.setLongWild(),this.isShuff=!1):this.setImgResult(!1))},t.prototype.setSize=function(){this.node.setContentSize(this.size.width,this.size.height*this.sizeItem),this.sizeItem>1?this.spriteBkg.node.setContentSize(cc.size(this.spriteBkg.node.width,this.spriteBkg.node.height+20)):this.spriteBkg.node.setContentSize(cc.size(this.spriteBkg.node.width,this.spriteBkg.node.height+10)),this.spriteKhung.node.setContentSize(cc.size(this.spriteKhung.node.width,this.spriteKhung.node.height+20)),0!=this.itemColum.node.angle&&this.spriteBkg.node.setContentSize(cc.size(this.spriteBkg.node.width+5,this.spriteBkg.node.height))},t.prototype.setImgResult=function(e){return r(this,void 0,void 0,function(){var t;return a(this,function(i){switch(i.label){case 0:return this.sprite.spriteFrame=p.Windown.Caishen.asset.getSfItemSymbol(this.result,this.sizeItem,e),this.spriteBkg.spriteFrame=p.Windown.Caishen.asset.getSfBgSymbol(this.result,this.sizeItem,e),0!=this.typeItem?(this.spriteKhung.node.active=this.bgCaishen.node.active=!0,this.spriteKhung.spriteFrame=p.Windown.Caishen.asset.getSfBorderSymbol(this.typeItem,this.sizeItem,e),this.bgCaishen.spriteFrame=p.Windown.Caishen.asset.getSfBgCaishen(this.typeItem,this.sizeItem)):this.spriteKhung.node.active=this.bgCaishen.node.active=!1,this.result<11&&this.result>=0&&(this.spriteBkg.node.color=(new cc.Color).fromHEX(this.colorBg[this.result])),12==this.result||11==this.result?this.spriteBkg.node.active=!1:this.spriteBkg.node.active=!0,e?(this.sprite.node.active=!0,this.sprite.node.scale=2,this.spriteKhung.node.scale=2.1,this.result<5?(this.spriteBkg.node.scaleY=2.2,this.spriteBkg.node.scaleX=2):(this.spriteBkg.node.scaleY=2,this.spriteBkg.node.scaleX=2),[3,4]):[3,1];case 1:return this.sprite.node.scale=1,this.spriteBkg.node.scale=1,this.spriteKhung.node.scale=1,this.result<11||e?(this.sprite.node.active=!0,this.skeletonItem.node.active=!1,[3,4]):[3,2];case 2:return[4,p.Windown.Caishen.asset.getSpine(this.result,this.sizeItem)];case 3:null!=(t=i.sent())&&(this.skeletonItem.skeletonData=t,this.skeletonItem.node.active=!0,this.skeletonItem.setAnimation(0,"idle",!0),this.sprite.node.active=!1,12==this.result&&(this.skeletonItem.node.y=-3)),i.label=4;case 4:return[2]}})})},t.prototype.setLongWild=function(){return r(this,void 0,void 0,function(){var e,t,i,n,o=this;return a(this,function(s){switch(s.label){case 0:return[4,p.Windown.Caishen.asset.getSpine(this.result,this.sizeItem)];case 1:for(e=s.sent(),this.spriteBkg.node.active=this.bgCaishen.node.active=this.spriteKhung.node.active=this.sprite.node.active=!1,t=0;t<this.sizeItem;t++)i=this.listSpine[t],cc.isValid(i)||((i=cc.instantiate(this.skeletonItem.node)).parent=this.node,this.listSpine.push(i)),i.active=!0,(n=i.getComponent(sp.Skeleton)).skeletonData=e,n.setAnimation(0,"idle",!0);return this.listSpine.forEach(function(e,t){e.y=o.sizeBkg.height*o.sizeItem/2-(o.sizeBkg.height/2+t*o.sizeBkg.height)}),[2]}})})},t.prototype.checkItemFront=function(){!this.checkIsInView()||11!=this.result&&12!=this.result?this.node.parent=this.itemColum.parentItem:this.node.parent=this.itemColum.parentItemFront},t.prototype.offItemFront=function(){this.node.parent=this.itemColum.parentItem},t.prototype.getSpKhung=function(e){return p.Windown.Caishen.asset.getSfBorderSymbol(this.typeItem,this.sizeItem,e)},t.prototype.getSpBkg=function(){return p.Windown.Caishen.asset.getSfBgCaishen(this.result,this.sizeItem)},t.prototype.getSpItem=function(e){return p.Windown.Caishen.asset.getSfItemSymbol(this.result,this.sizeItem,e)},t.prototype.getAtlas=function(){return this.result<12?p.Windown.Caishen.asset.atlasSymbol:p.Windown.Caishen.asset.atlasSpecial},t.prototype.getIndexOf=function(){return this.itemColum.getListSymbol().indexOf(this)},t.prototype.getColorBkg=function(){return this.result<4?this.listColorBkg[this.result-1]:this.listColorBkg[3]},t.prototype.showSkeleton=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,function(){var t,i=this;return a(this,function(n){switch(n.label){case 0:return t=null,[4,p.Windown.Caishen.asset.getSpine(this.result,this.sizeItem)];case 1:return(t=n.sent())&&(this.skeletonItem.node.active=!0,this.skeletonItem.skeletonData=t,this.skeletonItem.setAnimation(0,"spawn",!1),this.sprite.node.active=!1,e?this.skeletonItem.addAnimation(0,"idle",!0):this.skeletonItem.setCompleteListener(function(){i.skeletonItem.node.active=!1,i.sprite.node.active=!0,i.skeletonItem.setCompleteListener(null)})),[2]}})})},t.prototype.hideSkeleton=function(){this.skeletonItem.node.active=!1},t.prototype.removeAddScater=function(e){null!=this.nodeScater&&(e?(this.nodeScater&&p.Windown.Caishen.asset.putAddScater(this.nodeScater.node),this.nodeScater=null):this.nodeScater.node.active=!1,this.skeletonItem.node.active=!0,this.offItem())},t.prototype.effectScaterShowFS=function(){12==this.result&&this.checkIsInView()&&cc.isValid(this.nodeScater)&&(this.activeItem(),this.nodeScater.node.active=!0,p.Windown.Caishen.stateReel==c.default.RUN||p.Windown.Caishen.stateReel==c.default.CAN_STOP?this.nodeScater.idle():p.Windown.Caishen.stateReel==c.default.STOP&&this.nodeScater.efWin())},t.prototype.effectNearWinScater=function(e){12==this.result&&(null==this.nodeScater&&(this.nodeScater=p.Windown.Caishen.asset.getAddScater().getComponent(u.default),this.nodeScater.node.parent=this.node,this.nodeScater.node.setPosition(0,0)),this.activeItem(),this.nodeScater.node.active=!0,this.nodeScater.node.stopAllActions(),this.nodeScater.effectNearWinNoSap(e),this.skeletonItem.node.active=!1)},t.prototype.effectScaterIdle=function(){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.nodeScater.node.active=!0,this.skeletonItem.node.active=!1,this.nodeScater.idle())},t.prototype.effectDropScater=function(){12==this.result&&this.nodeScater&&!p.Windown.Caishen.stateSpin.isMaxSpeed&&this.nodeScater.effectDrop()},t.prototype.showSmoke=function(){},t.prototype.checkIsInView=function(){return this.node.y<0&&this.node.y>-this.size.height*(this.itemColum.sizeSymbol-2)},t.prototype.offItem=function(){this.node.parent!=this.itemColum.parentItem&&this.checkItemFront()},t.prototype.activeItem=function(e){void 0===e&&(e=.3),this.node.parent=this.itemColum.parentItemActive},t.prototype.runSpin=function(){this.offItemFront();var e=cc.repeatForever(cc.moveBy(p.Windown.Caishen.stateSpin.isMaxSpeed?.5:1,0,-2500));this.node.stopAllActions(),this.node.runAction(e),this.canRun=!0},t.prototype.stopSpin=function(e){var t=this;this.node.stopAllActions(),this.getIndexOf(),this.node.runAction(cc.sequence(e,cc.callFunc(function(){t.itemColum.effStopSpin()})))},t.prototype.initPosStartGame=function(){var e,t=this.getIndexOf(),i=this.itemColum.getListSymbol()[t-1],n=null==i?void 0:i.node.y;e=i?n-this.node.height/2-i.node.height/2:this.node.height/2,this.node.y=e},t.prototype.setPos=function(e){this.node.setPosition(e)},t.prototype.getPos=function(){return this.node.getPosition()},t.prototype.moveWhenListChange=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=null);var n=this.getIndexOf(),o=this.itemColum.getListSymbol()[n+1],s=o.getPos(),r=s.y,a=null;e==d.TYPE_MOVE.NORMAL&&(a=r+this.node.height/2+o.node.height/2,s.y=a,this.setPos(s))},t.prototype.takeItem=function(){return r(this,void 0,void 0,function(){var e,t,i,n,o,s,r,c,u;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,7,,8]),this.isHasTakeItem?[2]:(this.isHasTakeItem=!0,11!=this.result||11==this.result&&1==this.sizeItem?(i=(t=cc).instantiate,[4,p.Windown.Caishen.asset.getEffectTakeSymbol(this.sizeItem)]):[3,2]);case 1:return(e=i.apply(t,[a.sent()])).parent=p.Windown.Caishen.parentEffect,cc.isValid(this.node.parent)?(e.setPosition(p.Windown.convertNodeInOtherNode(this.node,p.Windown.Caishen.parentEffect)),e.getComponent(h.EffectSymbolCaishen).effTakeItem(this.result,this.sizeItem,this.typeItem,this.skeletonItem),this.efWin=e,e.setSiblingIndex(9999)):e.destroy(),[3,6];case 2:n=0,a.label=3;case 3:return n<this.sizeItem?(r=(s=cc).instantiate,[4,p.Windown.Caishen.asset.getEffectTakeSymbol(1)]):[3,6];case 4:(o=r.apply(s,[a.sent()])).parent=p.Windown.Caishen.parentEffect,cc.isValid(this.listSpine[n].parent)?(c=p.Windown.convertNodeInOtherNode(this.listSpine[n],p.Windown.Caishen.parentEffect),o.setPosition(c),o.getComponent(h.EffectSymbolCaishen).effTakeItem(this.result,this.sizeItem,this.typeItem,this.skeletonItem),o.setSiblingIndex(9999),this.listEffWin.push(o)):o.destroy(),a.label=5;case 5:return n++,[3,3];case 6:return this.sprite.node.active=!1,this.listSpine.forEach(function(e){e.active=!1}),this.activeItem(0),[3,8];case 7:return u=a.sent(),l.Util.ThrowErrProsime(u),console.error(u),[3,8];case 8:return[2]}})})},t.prototype.removeEfWin=function(){this.efWin&&p.Windown.Caishen.asset.putWinSymbol(this.efWin),this.efWin=null},t.prototype.removeNodeClone=function(){},t.prototype.removeItem=function(){var e=this,t=this.getIndexOf();if(this.itemColum.sizeSymbol>6){var i=this.itemColum.getListSymbol()[t-1];i&&(i.isSmoke=!0)}t>-1&&this.itemColum.getListSymbol().splice(t,1),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){p.Windown.Caishen.asset.putSymbol(e.node)}))),p.Windown.Caishen.audio.playEffect(p.Windown.Caishen.audio.symShrink),this.effectRemoveItem()},t.prototype.effectRemoveItem=function(){return r(this,void 0,void 0,function(){var e,t,i,n,o=this;return a(this,function(s){switch(s.label){case 0:return this.efWin?(this.efWin.getComponent(h.EffectSymbolCaishen).effectRemoveTakeItem(),e=this.efWin.getSiblingIndex(),n=(i=cc).instantiate,[4,p.Windown.Caishen.asset.getEffRemoveItem(this.sizeItem)]):[3,2];case 1:(t=n.apply(i,[s.sent()])).parent=p.Windown.Caishen.parentEffect,cc.isValid(this.node.parent)?(t.setPosition(p.Windown.convertNodeInOtherNode(this.node,p.Windown.Caishen.parentEffect)),t.getComponent(h.EffectSymbolCaishen).effRemoveItem(),t.setSiblingIndex(e-1)):t.destroy(),s.label=2;case 2:return this.efShuffWild&&(this.efShuffWild.destroy(),this.efShuffWild=null),this.listEffWin.forEach(function(e){return r(o,void 0,void 0,function(){var t,i,n,o;return a(this,function(s){switch(s.label){case 0:return e.getComponent(h.EffectSymbolCaishen).effectRemoveTakeItem(),t=e.getSiblingIndex(),o=(n=cc).instantiate,[4,p.Windown.Caishen.asset.getEffRemoveItem(1)];case 1:return(i=o.apply(n,[s.sent()])).parent=p.Windown.Caishen.parentEffect,cc.isValid(e.parent)?(i.setPosition(p.Windown.convertNodeInOtherNode(e,p.Windown.Caishen.parentEffect)),i.getComponent(h.EffectSymbolCaishen).effRemoveItem(),i.setSiblingIndex(t-1)):(i.destroy(),e.getComponent(h.EffectSymbolCaishen).effectRemoveTakeItem()),[2]}})})}),this.efWin=null,this.isHasTakeItem=!1,[2]}})})},t.prototype.actionRandomNewResultNextKhung=function(e){var t=this;return new Promise(function(i){return r(t,void 0,void 0,function(){var t,n,o,s=this;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,9,,10]),this.isShowEffectSpawn=!1,this.typeItem++,this.typeItem=this.typeItem%3,this.spriteKhung.spriteFrame=this.getSpKhung(!1),this.isShuff=!0,11!=e?[3,3]:(this.sprite.node.active=!1,this.result=e,this.activeItem(),t=this.skeletonItem,[4,p.Windown.Caishen.asset.getWildCaishenSpine(this.sizeItem)]);case 1:return t.skeletonData=r.sent(),this.skeletonItem.node.active=!0,this.skeletonItem.timeScale=1,this.skeletonItem.setAnimation(0,"win",!1),this.skeletonItem.setCompleteListener(function(){s.skeletonItem.setCompleteListener(null),s.skeletonItem.setAnimation(0,"break",!1),p.Windown.Caishen.audio.playEffectNoStop(p.Windown.Caishen.audio.wildShrink)}),[4,p.Windown.Caishen.getMakeDelay(.4)];case 2:return r.sent(),i(null),[3,8];case 3:return[4,p.Windown.Caishen.asset.getShuffToNormal(this.sizeItem)];case 4:return(n=r.sent()).parent=p.Windown.Caishen.parentEffect,n.setPosition(p.Windown.convertNodeInOtherNode(this.node,p.Windown.Caishen.parentEffect)),[4,n.getComponent(h.EffectSymbolCaishen).effShuffItem(this.node.height,this.result,e,this.sizeItem)];case 5:return r.sent(),this.spriteBkg.node.active=!0,this.result=e,this.sprite.spriteFrame=p.Windown.Caishen.asset.getSfItemSymbol(this.result,this.sizeItem),this.spriteBkg.spriteFrame=p.Windown.Caishen.asset.getSfBgSymbol(this.result,this.sizeItem),this.spriteBkg.node.color=(new cc.Color).fromHEX(this.colorBg[this.result]),p.Windown.Caishen.stateSpin.isMaxSpeed?[4,p.Windown.Caishen.getMakeDelay(.4)]:[3,7];case 6:r.sent(),r.label=7;case 7:i(null),r.label=8;case 8:return[3,10];case 9:return o=r.sent(),l.Util.ThrowErrProsime(o),[3,10];case 10:return[2]}})})})},t.prototype.removeMutilWhenSpin=function(){this.removeEfWin()},t.prototype.effectSpawnSymbol=function(e){return void 0===e&&(e=!0),r(this,void 0,void 0,function(){return a(this,function(){try{if(this.isShowEffectSpawn||!this.checkIsInView())return[2];this.isShowEffectSpawn=!0,this.checkItemFront(),12==this.result?(e&&p.Windown.Caishen.audio.playEffectNoStop(p.Windown.Caishen.audio.symScatter),p.Windown.Caishen.stateSpin.checkIsNearFS()&&this.effectNearWinScater(!0)):11==this.result&&(this.showSkeleton(!0),e&&p.Windown.Caishen.audio.playEffectNoStop(p.Windown.Caishen.audio.symWild))}catch(t){l.Util.ThrowErrProsime(t)}return[2]})})},t.prototype.unuse=function(){this.skeletonItem.node.active=!1,this.itemColum=null,this.isShowEffectSpawn=!1,this.isShuff=!1,this.result=-1,this.node.opacity=255,this.sprite.node.opacity=255,this.node.x=0,this.node.scale=1,this.node.stopAllActions(),this.removeAddScater(!0),this.isSmoke=!1,this.listEffWin=[],this.isHasTakeItem=!1,this.typeItem=0},t.prototype.checkEndCot=function(){if(0==this.getIndexOf()){var e=this.node.height/2;if(this.node.y<=e){var t=this.itemColum.getIdSymbolResult(),i=this.itemColum.getListSymbol(),n=i.pop();i.unshift(n),n.node.zIndex=0,n.setResult(t),n.moveWhenListChange(d.TYPE_MOVE.NORMAL)}}},t.prototype.update=function(){this.canRun&&this.checkEndCot()},s([y(cc.Sprite)],t.prototype,"sprite",void 0),s([y(cc.Sprite)],t.prototype,"spriteBkg",void 0),s([y(cc.Sprite)],t.prototype,"spriteKhung",void 0),s([y(cc.Sprite)],t.prototype,"bgCaishen",void 0),s([y(sp.Skeleton)],t.prototype,"skeletonItem",void 0),s([y([cc.Color])],t.prototype,"listColorBkg",void 0),s([f],t)}(cc.Component);i.default=I,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./EffectSymbolCaishen":"EffectSymbolCaishen","./ItemAddScaterCaishen":"ItemAddScaterCaishen","./ItemSlotCaishen":"ItemSlotCaishen"}],TestAnim:[function(e,t,i){"use strict";cc._RF.push(t,"c1636vuF5dHRYdIJYgalAYP","TestAnim");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.anim=null,t.animName="hello",t}return o(t,e),t.prototype.start=function(){},t.prototype.onClickTest=function(){this.anim.play(this.animName)},s([c(cc.Animation)],t.prototype,"anim",void 0),s([c],t.prototype,"animName",void 0),s([a],t)}(cc.Component);i.default=l,cc._RF.pop()},{}]},{},["AssetCaishen","AudioCaishen","BigWinCaiShen","CachChoiCaishen","CaishenSpeedControl","CaishenView","DetailHistoryCaishen","EffectCaishen","EffectSymbolCaishen","EndFreeSpinCaishen","InfoBarControllerCaishen","ItemAddScaterCaishen","ItemLichSuCaishen","ItemResultDetailCaishen","ItemSlotCaishen","ItemSlotCaishenNgang","LichSuCaishen","NearFSCaishen","SpinFreeSpinCaishen","SpinNormalCaishen","StartFreeSpinCaishen","SymbolCaiShen","TestAnim"]);