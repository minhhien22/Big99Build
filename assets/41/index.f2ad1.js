window.__require=function t(e,i,n){function a(r,s){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=i[r]={exports:{}};e[r][0].call(p.exports,function(t){return a(e[r][1][t]||t)},p,p.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({"Baccarat.Assets":[function(t,e,i){"use strict";cc._RF.push(e,"c3929B7DJJFJ56uustrPN2z","Baccarat.Assets");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chipBetTemp=null,e.effectWin=null,e.chipBetSprites=[],e.listBetValue=[1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,1e5,15e4,2e5],e.chipBetPool=null,e.cardAtlas=null,e.spriteCard=[],e.animDealCardData=null,e.animNanBaiData=null,e}return a(e,t),e.prototype.onLoad=function(){this.chipBetPool=new cc.NodePool("chipbet");for(var t=39;t<52;t++)this.spriteCard.push(this.cardAtlas.getSpriteFrame(t+""));for(t=26;t<39;t++)this.spriteCard.push(this.cardAtlas.getSpriteFrame(t+""));for(t=0;t<13;t++)this.spriteCard.push(this.cardAtlas.getSpriteFrame(t+""));for(t=13;t<26;t++)this.spriteCard.push(this.cardAtlas.getSpriteFrame(t+""))},e.prototype.start=function(){},e.prototype.getCardSprite=function(t){return this.spriteCard[t-1]},e.prototype.getCardBack=function(){return this.cardAtlas.getSpriteFrame("52")},e.prototype.getEffectWin=function(t,e){void 0===e&&(e=!1);var i=cc.instantiate(this.effectWin);return i.getChildByName("lbChipWin").getComponent(cc.Label).string=r.Windown.formatMoney(t),i.active=!0,i},e.prototype.getChipBet=function(t){var e=null;0==this.chipBetPool.size()&&this.chipBetPool.put(cc.instantiate(this.chipBetTemp)),(e=this.chipBetPool.get()).active=!0,e.opacity=255,e.scale=1,e.value=0,e.gate=-1,e.playerID=0,e.isChipPayOther=null;var i=this.listBetValue.indexOf(t/1e3);return e.getComponent(cc.Sprite).spriteFrame=-1!=i?this.chipBetSprites[i]:this.chipBetSprites[this.chipBetSprites.length-1],e},o([l(cc.Node)],e.prototype,"chipBetTemp",void 0),o([l(cc.Node)],e.prototype,"effectWin",void 0),o([l([cc.SpriteFrame])],e.prototype,"chipBetSprites",void 0),o([l(cc.SpriteAtlas)],e.prototype,"cardAtlas",void 0),o([l(sp.SkeletonData)],e.prototype,"animDealCardData",void 0),o([l(sp.SkeletonData)],e.prototype,"animNanBaiData",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.Audio":[function(t,e,i){"use strict";cc._RF.push(e,"8ca9efPaMxHzZsWZa9sBXbH","Baccarat.Audio");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Parent/AudioManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgm_fs=null,e.click=null,e.flipCard=null,e.openCard=null,e.bankerWin=null,e.playerWin=null,e.youWin=null,e.gateWinEffect=null,e.dealer_startBet=null,e.dealer_endBet=null,e.getChip=null,e.chipMoveToPlayer_turn1=null,e.chipMoveToPlayer_turn2=null,e.throwChip=null,e.openPopup=null,e.fsSpin=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){cc.log("chay vao play music "+this.isActiveMusic),this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(1))},e.prototype.playIndexTakeLine=function(){},e.prototype.playSmalWin=function(){},e.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.bgm_fs,.6,!0)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},o([l(cc.AudioClip)],e.prototype,"bgm_fs",void 0),o([l(cc.AudioClip)],e.prototype,"click",void 0),o([l(cc.AudioClip)],e.prototype,"flipCard",void 0),o([l(cc.AudioClip)],e.prototype,"openCard",void 0),o([l(cc.AudioClip)],e.prototype,"bankerWin",void 0),o([l(cc.AudioClip)],e.prototype,"playerWin",void 0),o([l(cc.AudioClip)],e.prototype,"youWin",void 0),o([l(cc.AudioClip)],e.prototype,"gateWinEffect",void 0),o([l(cc.AudioClip)],e.prototype,"dealer_startBet",void 0),o([l(cc.AudioClip)],e.prototype,"dealer_endBet",void 0),o([l(cc.AudioClip)],e.prototype,"getChip",void 0),o([l(cc.AudioClip)],e.prototype,"chipMoveToPlayer_turn1",void 0),o([l(cc.AudioClip)],e.prototype,"chipMoveToPlayer_turn2",void 0),o([l(cc.AudioClip)],e.prototype,"throwChip",void 0),o([l(cc.AudioClip)],e.prototype,"openPopup",void 0),o([l(cc.AudioClip)],e.prototype,"fsSpin",void 0),o([c],e)}(r.default);i.default=p,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],"Baccarat.BigRoad":[function(t,e,i){"use strict";cc._RF.push(e,"b11de7wPypMRIitreKWlaa4","Baccarat.BigRoad");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PP:14,PLAYER_BP:15,PLAYER_PBP:145,BANKER_PP:34,BANKER_BP:35,BANKER_PBP:345,TIE_PP:24,TIE_BP:25,TIE_PBP:245}),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spfBanker=null,e.spfPlayer=null,e.spfTieBanker=null,e.spfTiePlayer=null,e.spfTie_BankerWinPlayerPair=null,e.spfTie_BankerWinBankerPair=null,e.spfTie_PlayerWinPlayerPair=null,e.spfBanker_BankerPair=null,e.spfBanker_PlayerPair=null,e.spfBanker_BankerPlayerPair=null,e.spfPlayer_BankerPair=null,e.spfPlayer_PlayerPair=null,e.spfPlayer_BankerPlayerPair=null,e.template=null,e.container=null,e.topRightPos=null,e.BacaratBetSite={PLAYER_PAIR:1,PLAYER:2,TIE:3,BANKER:4,BANKER_PAIR:5},e.dataHistory=[],e.deltaXCol=34,e.deltaYRow=34,e.currentIndex=0,e.currentCol=0,e.currentPosX=0,e}return a(e,t),e.prototype.start=function(){this.currentPosX=this.topRightPos.x},e.prototype.setInfo=function(t){for(var e=0,i=t.length;e<i-1;e++){var n=[];n.push(t[e]);var a=t[e];cc.log("idCheck="+a);for(var o=this.getGateWinNormal(a),s=e+1;s<i;s++){var c=t[s],l=this.getGateWinNormal(c);if(o!=r.TIE){if(o!=l&&o!=r.TIE){0!=n.length&&(e+=n.length-1);break}n.push(c)}else a=c}this.dataHistory.push(n)}for(e=0,i=this.dataHistory.length;e<i;e++){var p=this.dataHistory[e].reverse(),h=0;for(cc.log("dataCol=",p),s=0;s<p.length;s++){var u=p[s];if(this.getGateWinNormal(u)!=r.TIE){var d=cc.instantiate(this.template);d.parent=this.container,d.active=!0,d.getChildByName("spr").getComponent(cc.Sprite).spriteFrame=this.getSpf(u),d.setPosition(cc.v2(this.topRightPos.x-this.deltaXCol*this.currentCol,this.topRightPos.y-this.deltaYRow*h)),this.currentIndex++,h++}else cc.isValid(this.container.children[this.currentIndex-1])&&(this.container.children[this.currentIndex-1].getChildByName("tie").active=!0),s==p.length-1&&this.currentCol--}this.currentCol++}},e.prototype.getSpf=function(t){var e=null;switch(t){case r.BANKER:e=this.spfBanker;break;case r.BANKER_BP:e=this.spfBanker_BankerPair;break;case r.BANKER_PP:e=this.spfBanker_PlayerPair;break;case r.BANKER_PBP:e=this.spfBanker_BankerPlayerPair;break;case r.PLAYER:e=this.spfPlayer;break;case r.PLAYER_BP:e=this.spfPlayer_BankerPair;break;case r.PLAYER_PP:e=this.spfPlayer_PlayerPair;break;case r.PLAYER_PBP:e=this.spfPlayer_BankerPlayerPair;break;default:cc.log("BigRoad:ko vao case nao ca:"+t)}return e},e.prototype.getGateWinNormal=function(t){var e=0;switch(t){case r.PLAYER:case r.PLAYER_BP:case r.PLAYER_PP:case r.PLAYER_PBP:e=r.PLAYER;break;case r.BANKER:case r.BANKER_BP:case r.BANKER_PP:case r.BANKER_PBP:e=r.BANKER;break;case r.TIE:case r.TIE_BP:case r.TIE_PP:case r.TIE_PBP:e=r.TIE;break;default:cc.log("KO vao cAse nao getGateWinNormal:"+t)}return e},o([l(cc.SpriteFrame)],e.prototype,"spfBanker",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTieBanker",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTiePlayer",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_BankerWinPlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_BankerWinBankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_PlayerWinPlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_BankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_PlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_BankerPlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_BankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_PlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_BankerPlayerPair",void 0),o([l(cc.Node)],e.prototype,"template",void 0),o([l(cc.Node)],e.prototype,"container",void 0),o([l(cc.Vec2)],e.prototype,"topRightPos",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],"Baccarat.ButtonBet":[function(t,e,i){"use strict";cc._RF.push(e,"931e1pN48lEV4zRZ4h/Z0lo","Baccarat.ButtonBet");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrBtn=null,e.btnX2=null,e.btnRebet=null,e.btnBetB=null,e.currbetBtnBet=null,e.chipBorder=null,e.listBetValue=[1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,15e4,2e5],e.currentBetValue=1,e}return a(e,t),e.prototype.start=function(){var t=this;this.scrBtn.content.children.forEach(function(e,i){var n=new cc.Component.EventHandler;n.target=t.node,n.component="Baccarat.ButtonBet",n.handler="onClickBet",n.customEventData=t.listBetValue[i]+"",e.getComponent(cc.Button).clickEvents.push(n)}),this.currbetBtnBet.y=10},e.prototype.onClickBet=function(t,e){cc.log("clickbet:"+e),r.Windown.BaccaratView.audio.playEffect(r.Windown.BaccaratView.audio.chipMoveToPlayer_turn1),cc.tween(this.currbetBtnBet).to(.1,{y:0}).start(),this.currbetBtnBet=t.target,this.chipBorder.parent=this.currbetBtnBet,this.currentBetValue=1e3*parseInt(e),r.Windown.BaccaratView.currentBetValue=this.currentBetValue,cc.tween(this.currbetBtnBet).to(.1,{y:10}).start()},e.prototype.onClickX2=function(){var t=r.Windown.BaccaratView.HistoryBet.getTotalHistoryBet(),e=r.Windown.BaccaratView.HistoryBet.ListGateBet;if(2*t>r.Windown.User.userAg)r.Windown.UIManager.showAlertMini("B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n c\u01b0\u1ee3c X2!");else{for(var i=0;i<5;i++)e[i]>0&&(r.Windown.BaccaratController.sendBet(i+1,2*e[i]),r.Windown.BaccaratController.isCanSendData=!0);this.btnRebet.interactable=!1,this.btnX2.interactable=!1}},e.prototype.onClickRebet=function(){var t=r.Windown.BaccaratView.HistoryBet.getTotalHistoryBet(),e=r.Windown.BaccaratView.HistoryBet.ListGateBet;if(t>r.Windown.User.userAg)r.Windown.UIManager.showAlertMini("B\u1ea1n kh\xf4ng \u0111\u1ee7 ti\u1ec1n c\u01b0\u1ee3c l\u1ea1i!");else{for(var i=0;i<5;i++)e[i]>0&&(r.Windown.BaccaratController.sendBet(i+1,e[i]),r.Windown.BaccaratController.isCanSendData=!0);this.btnRebet.interactable=!1,this.btnX2.interactable=!1}},e.prototype.onChangeListChip=function(t,e){var i=this.scrBtn.getScrollOffset(),n=this.scrBtn.getMaxScrollOffset();"previous"==e?i.x<0&&cc.tween(this.scrBtn.content).to(.3,{x:this.scrBtn.content.x+100}).start():Math.abs(i.x)<n.x&&cc.tween(this.scrBtn.content).to(.3,{x:this.scrBtn.content.x-100}).start()},e.prototype.setStatusBtnBet=function(){var t=r.Windown.BaccaratView.HistoryBet.getTotalHistoryBet();cc.log("setStatusBtnBet:"+t),t>0?(this.btnRebet.interactable=t<=r.Windown.User.userAg,this.btnX2.interactable=2*t<r.Windown.User.userAg):this.btnRebet.interactable=this.btnX2.interactable=!1},o([l(cc.ScrollView)],e.prototype,"scrBtn",void 0),o([l(cc.Button)],e.prototype,"btnX2",void 0),o([l(cc.Button)],e.prototype,"btnRebet",void 0),o([l(cc.Button)],e.prototype,"btnBetB",void 0),o([l(cc.Node)],e.prototype,"currbetBtnBet",void 0),o([l(cc.Node)],e.prototype,"chipBorder",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.Card":[function(t,e,i){"use strict";cc._RF.push(e,"db539tYJPRGlYq+qbrxYgh0","Baccarat.Card");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_ANIM=i.TYPE_CARD=void 0;var r,s,c=t("../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property;(function(t){t[t.card_LEFT_1=0]="card_LEFT_1",t[t.card_LEFT_2=1]="card_LEFT_2",t[t.card_LEFT_3=2]="card_LEFT_3",t[t.card_RIGHT_1=3]="card_RIGHT_1",t[t.card_RIGHT_2=4]="card_RIGHT_2",t[t.card_RIGHT_3=5]="card_RIGHT_3"})(r=i.TYPE_CARD||(i.TYPE_CARD={})),function(t){t[t.NAN=0]="NAN",t[t.LAT=1]="LAT",t[t.SURE_WIN=2]="SURE_WIN",t[t.HIGHLIGHT=3]="HIGHLIGHT"}(s=i.TYPE_ANIM||(i.TYPE_ANIM={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TYPE=r.card_LEFT_1,e.spineCard=null,e.id=-1,e}return a(e,t),e.prototype.start=function(){},e.prototype.dealCard=function(){this.spineCard.skeletonData=c.Windown.BaccaratView.assets.animDealCardData,this.spineCard.setAnimation(0,this.getAnimNameDealCard(),!1)},e.prototype.nanCard=function(){this.spineCard.skeletonData=c.Windown.BaccaratView.assets.animNanBaiData,this.spineCard.setSkin("card_"+(this.id-1<10?"0"+(this.id-1):this.id-1)),this.spineCard.setSlotsToSetupPose(),this.spineCard.setAnimation(0,this.getAnimCardNan(s.NAN),!1)},e.prototype.openCard=function(){this.spineCard.skeletonData=c.Windown.BaccaratView.assets.animNanBaiData,this.spineCard.setSkin("card_"+(this.id-1<10?"0"+(this.id-1):this.id-1)),this.spineCard.setSlotsToSetupPose(),this.spineCard.setAnimation(0,this.getAnimCardNan(s.LAT),!1)},e.prototype.setCard=function(){c.Windown.BaccaratView.assets.getCardSprite(this.id),this.spineCard.skeletonData=c.Windown.BaccaratView.assets.animNanBaiData,this.spineCard.setSkin("card_"+(this.id-1<10?"0"+(this.id-1):this.id-1)),this.spineCard.setSlotsToSetupPose(),this.spineCard.setAnimation(0,this.getAnimCardValue(),!1)},e.prototype.setCardBack=function(){this.spineCard.skeletonData=c.Windown.BaccaratView.assets.animNanBaiData,this.spineCard.setSkin("card_52"),this.spineCard.setSlotsToSetupPose(),this.spineCard.setAnimation(0,this.getAnimCardValue(),!1)},e.prototype.getAnimCardNan=function(t){var e,i;switch(t){case s.NAN:i="nan";break;case s.LAT:i="lat";break;case s.SURE_WIN:i="surewin";break;case s.HIGHLIGHT:i="highlight"}var n="anim_%s_vertical_%s";switch(this.TYPE){case r.card_LEFT_1:e=cc.js.formatStr(n,i,"left2");break;case r.card_LEFT_2:e=cc.js.formatStr(n,i,"left1");break;case r.card_LEFT_3:e="anim_"+i+"_horizontal_left";break;case r.card_RIGHT_1:e=e=cc.js.formatStr(n,i,"right1");break;case r.card_RIGHT_2:e=e=cc.js.formatStr(n,i,"right2");break;case r.card_RIGHT_3:e="anim_"+i+"_horizontal_right"}return e},e.prototype.getAnimCardValue=function(){var t;switch(this.TYPE){case r.card_LEFT_1:t="Open_vertical_left2";break;case r.card_LEFT_2:t="Open_vertical_left1";break;case r.card_LEFT_3:t="Open_horizontal_left";break;case r.card_RIGHT_1:t="Open_vertical_right1";break;case r.card_RIGHT_2:t="Open_vertical_right2";break;case r.card_RIGHT_3:t="Open__horizontal_right"}return t},e.prototype.getAnimNameDealCard=function(){var t;switch(this.TYPE){case r.card_LEFT_1:t="anim_flycard_vertical_left2";break;case r.card_LEFT_2:t="anim_flycard_vertical_left1";break;case r.card_LEFT_3:t="anim_flycard_horizontal_left";break;case r.card_RIGHT_1:t="anim_flycard_vertical_right1";break;case r.card_RIGHT_2:t="anim_flycard_vertical_right2";break;case r.card_RIGHT_3:t="anim_flycard_horizontal_right"}return t},o([h({type:cc.Enum(r)})],e.prototype,"TYPE",void 0),o([h(sp.Skeleton)],e.prototype,"spineCard",void 0),o([p],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.ChipBet":[function(t,e,i){"use strict";cc._RF.push(e,"b2c9dxWN1hHoKMW78LL6xzK","Baccarat.ChipBet");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerID=0,e.value=0,e.gate=-1,e}return a(e,t),o([s],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],"Baccarat.DishRoadBoard":[function(t,e,i){"use strict";cc._RF.push(e,"8c845LrMoVADKOGcGrNxDL2","Baccarat.DishRoadBoard");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PP:14,PLAYER_BP:15,PLAYER_PBP:145,BANKER_PP:34,BANKER_BP:35,BANKER_PBP:345,TIE_PP:24,TIE_BP:25,TIE_PBP:245}),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spfBanker=null,e.spfPlayer=null,e.spfTie=null,e.spfTie_BankerPair=null,e.spfTie_PlayerPair=null,e.spfTie_BankerPlayerPair=null,e.spfBanker_BankerPair=null,e.spfBanker_PlayerPair=null,e.spfBanker_BankerPlayerPair=null,e.spfPlayer_BankerPair=null,e.spfPlayer_PlayerPair=null,e.spfPlayer_BankerPlayerPair=null,e.template=null,e.container=null,e.markRecentMatch=null,e.history=[],e.BacaratBetSite={PLAYER_PAIR:1,PLAYER:2,TIE:3,BANKER:4,BANKER_PAIR:5},e}return a(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(t){var e=this;this.history=t,this.markRecentMatch.active=!1,this.history.forEach(function(t,i){var n=null;n=e.container.childrenCount<72?cc.instantiate(e.template):e.container.children[e.history.indexOf(t)];var a=t,o=e.getSpf(a);n.getComponentInChildren(cc.Sprite).spriteFrame=o,n.parent=e.container,n.active=!0,cc.tween(n).set({opacity:0}).to(.3,{opacity:255}).call(function(){i==e.history.length-1&&(e.markRecentMatch.active=!0,cc.tween(e.markRecentMatch).sequence(cc.tween().to(.5,{scale:1}),cc.tween().to(.5,{scale:.8})).repeatForever().start())}).start()})},e.prototype.getSpf=function(t){var e=null;switch(t){case r.BANKER:case r.BANKER_PP:e=this.spfBanker;break;case r.BANKER_BP:e=this.spfBanker_BankerPair;break;case r.BANKER_PBP:e=this.spfBanker_BankerPlayerPair;break;case r.PLAYER:e=this.spfPlayer;break;case r.PLAYER_BP:e=this.spfPlayer_BankerPair;break;case r.PLAYER_PP:e=this.spfPlayer_PlayerPair;break;case r.PLAYER_PBP:e=this.spfPlayer_BankerPlayerPair;break;case r.TIE:e=this.spfTie;break;case r.TIE_BP:e=this.spfTie_BankerPair;break;case r.TIE_PP:e=this.spfTie_PlayerPair;break;case r.TIE_PBP:e=this.spfTie_BankerPlayerPair;break;default:cc.log("ko vao case nao:result= "+t)}return e},o([l(cc.SpriteFrame)],e.prototype,"spfBanker",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_BankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_PlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfTie_BankerPlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_BankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_PlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfBanker_BankerPlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_BankerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_PlayerPair",void 0),o([l(cc.SpriteFrame)],e.prototype,"spfPlayer_BankerPlayerPair",void 0),o([l(cc.Node)],e.prototype,"template",void 0),o([l(cc.Node)],e.prototype,"container",void 0),o([l(cc.Node)],e.prototype,"markRecentMatch",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],"Baccarat.HistoryBet":[function(t,e,i){"use strict";cc._RF.push(e,"e6d9eFbBkZBVYxeOPA7zija","Baccarat.HistoryBet");var n=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,o=a.ccclass,r=(a.property,function(){function t(){this.BET_PLAYER=0,this.BET_TIE=0,this.BET_BANKER=0,this.BET_PLAYER_P=0,this.BET_BANKER_P=0,this.ListGateBet=[this.BET_PLAYER,this.BET_TIE,this.BET_BANKER,this.BET_PLAYER_P,this.BET_BANKER_P]}return t.prototype.resetHistory=function(){this.ListGateBet.forEach(function(){})},t.prototype.getTotalHistoryBet=function(){var t=0;return this.ListGateBet.forEach(function(e){t+=e}),t},n([o],t)}());i.default=r,cc._RF.pop()},{}],"Baccarat.HistoryMini":[function(t,e,i){"use strict";cc._RF.push(e,"882baXqUhlKe44bJM1ERT8b","Baccarat.HistoryMini");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PP:14,PLAYER_BP:15,PLAYER_PBP:145,BANKER_PP:34,BANKER_BP:35,BANKER_PBP:345,TIE_PP:24,TIE_BP:25,TIE_PBP:245}),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTotalBanker=null,e.lbTotalPlayer=null,e.lbTotalTie=null,e.itemContainer=null,e.itemTemplate=null,e.markRecentMatch=null,e.sprResult=[],e.startPosItem=null,e.spacingY=18,e.spacingX=22,e.totalBanker=0,e.totalPlayer=0,e.totalTie=0,e}return a(e,t),e.prototype.onLoad=function(){this.startPosItem=cc.v2(98.26,28.12)},e.prototype.start=function(){},e.prototype.setInfo=function(t,e){void 0===e&&(e=!1),t.length>40&&(t=t.slice(0,40));for(var i=0,n=t.length;i<n;i++){var a=void 0,o=this.getPosItem(i);(a=cc.instantiate(this.itemTemplate)).parent=this.itemContainer,a.setPosition(o),a.active=!0,a.setSiblingIndex(i);var s=t[i],c=null;switch(this.getTypeGate(s)){case r.BANKER:this.totalBanker++,c=this.sprResult[2];break;case r.PLAYER:this.totalPlayer++,c=this.sprResult[0];break;case r.TIE:this.totalTie++,c=this.sprResult[1]}null==c&&cc.log(" bi null:"+s+"---gate=="+this.getTypeGate(s)),a.getComponent(cc.Sprite).spriteFrame=c}this.lbTotalBanker.string=this.totalBanker+"",this.lbTotalPlayer.string=this.totalPlayer+"",this.lbTotalTie.string=this.totalTie+"",cc.tween(this.markRecentMatch).sequence(cc.tween().to(.5,{scale:1}),cc.tween().to(.5,{scale:.8})).repeatForever().start()},e.prototype.addItemHistory=function(t){var e=this;this.markRecentMatch.active=!1,t.length>40&&(t=t.slice(0,40));var i,n=cc.instantiate(this.itemTemplate);switch(n.parent=this.itemContainer,n.setSiblingIndex(0),n.active=!0,n.setPosition(cc.v2(this.getPosItem(0).x+100,this.getPosItem(0).y)),this.getTypeGate(t[0])){case r.BANKER:this.totalBanker++,this.lbTotalBanker.string=this.totalBanker+"",i=this.sprResult[2];break;case r.PLAYER:this.totalPlayer++,i=this.sprResult[0],this.lbTotalPlayer.string=this.totalPlayer+"";break;case r.TIE:this.totalTie++,i=this.sprResult[1],this.lbTotalTie.string=this.totalTie+""}n.getComponent(cc.Sprite).spriteFrame=i;for(var a=function(t,i){var n=o.itemContainer.children[t],a=o.getPosItem(t);cc.tween(n).to(.3,{x:a.x,y:a.y}).call(function(){t==i-1&&(e.markRecentMatch.active=!0,cc.tween(e.markRecentMatch).sequence(cc.tween().to(.5,{scale:1}),cc.tween().to(.5,{scale:.8})).repeatForever().start())}).start()},o=this,s=0,c=t.length;s<c;s++)a(s,c);var l=this.itemContainer.children[this.itemContainer.childrenCount-1];cc.tween(l).to(.3,{x:l.x-100}).call(function(){l.destroy()}).start()},e.prototype.getPosItem=function(t){var e=cc.v2(0,0);if(t<4)e=cc.v2(this.startPosItem.x,this.startPosItem.y-t*this.spacingY);else{var i=Math.floor(t/4);e.x=this.startPosItem.x-i*this.spacingX,e.y=i%2==0?this.startPosItem.y-t%4*this.spacingY:this.startPosItem.y-(3-t%4)*this.spacingY}return e},e.prototype.getTypeGate=function(t){var e;switch(t){case r.BANKER:case r.BANKER_PP:case r.BANKER_BP:case r.BANKER_PBP:e=r.BANKER;break;case r.PLAYER:case r.PLAYER_PP:case r.PLAYER_BP:case r.PLAYER_PBP:e=r.PLAYER;break;case r.TIE:case r.TIE_PP:case r.TIE_BP:case r.TIE_PBP:e=r.TIE}return e},o([l(cc.Label)],e.prototype,"lbTotalBanker",void 0),o([l(cc.Label)],e.prototype,"lbTotalPlayer",void 0),o([l(cc.Label)],e.prototype,"lbTotalTie",void 0),o([l(cc.Node)],e.prototype,"itemContainer",void 0),o([l(cc.Node)],e.prototype,"itemTemplate",void 0),o([l(cc.Node)],e.prototype,"markRecentMatch",void 0),o([l([cc.SpriteFrame])],e.prototype,"sprResult",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],"Baccarat.MenuView":[function(t,e,i){"use strict";cc._RF.push(e,"6dda6oiz2lCWIhPjbSY5E8H","Baccarat.MenuView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(s){o=[6,s],n=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.container=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onshow=function(){cc.tween(this.container).set({x:-cc.winSize.width/2-this.container.width/2-50}).to(.3,{x:-cc.winSize.width/2+this.container.width/2},{easing:cc.easing.sineIn}).start()},e.prototype.onHide=function(){cc.tween(this.container).set({x:-cc.winSize.width/2+this.container.width/2}).to(.3,{x:-cc.winSize.width/2-this.container.width/2-50},{easing:cc.easing.sineOut}).start()},e.prototype.onClickBack=function(){c.Windown.BaccaratView.audio.playClick(),c.Windown.BaccaratController.onClickBackToLobby(),this.onHide()},e.prototype.onClickRule=function(){return r(this,void 0,void 0,function(){var t,e;return s(this,function(i){switch(i.label){case 0:return c.Windown.BaccaratView.audio.playEffect(c.Windown.BaccaratView.audio.openPopup),[4,c.Windown.BaccaratController.loadPrefabBundle("PopupRule")];case 1:return t=i.sent(),(e=cc.instantiate(t)).parent=c.Windown.BaccaratView.node,c.Windown.actionEffectOpen(e),cc.find("Container/btnClose",e).once("click",function(){c.Windown.actionEffectClose(e,function(){e.destroy()})}),this.onHide(),[2]}})})},e.prototype.onClickHistoryBet=function(){return r(this,void 0,void 0,function(){var t,e;return s(this,function(i){switch(i.label){case 0:return[4,c.Windown.BaccaratController.loadPrefabBundle("PopupHistory")];case 1:return t=i.sent(),(e=cc.instantiate(t)).parent=c.Windown.BaccaratView.node,c.Windown.actionEffectOpen(e),this.onHide(),[2]}})})},e.prototype.onClickSetting=function(){return r(this,void 0,void 0,function(){var t,e;return s(this,function(i){switch(i.label){case 0:return c.Windown.BaccaratView.audio.playEffect(c.Windown.BaccaratView.audio.openPopup),[4,c.Windown.BaccaratController.loadPrefabBundle("PopupSetting")];case 1:return t=i.sent(),(e=cc.instantiate(t)).parent=c.Windown.BaccaratView.node,c.Windown.actionEffectOpen(e),this.onHide(),[2]}})})},o([h(cc.Node)],e.prototype,"container",void 0),o([p],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.Player":[function(t,e,i){"use strict";cc._RF.push(e,"ad580J02flDJ5w8uubVmJFs","Baccarat.Player");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(s){o=[6,s],n=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/PathResource"),l=t("../../../Scritps/Obs/LbMoneyChange"),p=t("../../../Scritps/Util"),h=t("../../../Scritps/Windown"),u=cc._decorator,d=u.ccclass,f=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbNickName=null,e.lbChips=null,e.avatar=null,e.lbChipWin=null,e.posPayChip=[],e.spineEffectWin=null,e.dynamicIndex=0,e.nickname="Player",e.currentChips=0,e.id=0,e.isThisPlayer=!1,e.listChipBet=[],e.listChipPay=[],e.gateBetted=[],e.effecWin=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(t,e,i,n){this.setName(e),this.setId(t),this.setChip(i),this.setAvatar(n)},e.prototype.setName=function(t){this.lbNickName.string=t,this.nickname=t,t.length>10&&(this.lbNickName.string=t.slice(0,7)+"...")},e.prototype.setChip=function(t,e){void 0===e&&(e=!0),cc.log("player setChip:"+this.nickname+":"+t),this.isThisPlayer?this.lbChips.setMoney(t,!1):this.lbChips.setMoney(t,e),this.currentChips=t},e.prototype.setAvatar=function(t){return r(this,void 0,void 0,function(){var e,i;return s(this,function(n){switch(n.label){case 0:return e=c.PathResource.Avatar.replace("%d",t.toString()),[4,h.Windown.getSpFrameRes(e)];case 1:return i=n.sent(),this.avatar.spriteFrame=i,[2]}})})},e.prototype.setId=function(t){this.id=t},e.prototype.getChipBet=function(t){this.listChipBet.forEach(function(e){var i=t.parent.convertToWorldSpaceAR(t.position),n=e.parent.convertToNodeSpaceAR(i);cc.tween(e).to(1,{position:n},{easing:cc.easing.quintOut}).start(),cc.tween(e).to(1,{opacity:0},{easing:cc.easing.sineOut}).start()})},e.prototype.showWinEffect=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,function(){var i=this;return s(this,function(){return[2,new Promise(function(n){return r(i,void 0,void 0,function(){var i,a=this;return s(this,function(){try{null==this.effecWin?(this.effecWin=h.Windown.BaccaratView.assets.getEffectWin(t),this.effecWin.y=20):this.effecWin.getChildByName("lbChipWin").getComponent(cc.Label).string=h.Windown.formatMoney(t),(i=this.effecWin.getComponentInChildren(sp.Skeleton)).setCompleteListener(null),this.effecWin.parent=this.node,this.effecWin.active=!0,e||(i.setSkin("win"),i.setSlotsToSetupPose(),i.setAnimation(0,"appear",!1),i.setCompleteListener(function(){i.setAnimation(0,"idle",!1),i.setCompleteListener(function(){i.setCompleteListener(null)})}),this.scheduleOnce(function(){n(null),a.effecWin.active=!1},3))}catch(o){p.Util.ThrowErrProsime(o)}return[2]})})})]})})},e.prototype.showWinSpineEffect=function(t){var e=this;this.spineEffectWin.node.scale=1,this.spineEffectWin.node.active=!0,this.lbChipWin.string=h.Windown.formatMoney(t),this.lbChipWin.node.parent.active=!0,this.spineEffectWin.setSkin("win"),this.spineEffectWin.setSlotsToSetupPose(),this.spineEffectWin.setAnimation(0,"appear",!1),cc.tween(this.lbChipWin.node.parent).set({scaleX:0}).to(.3,{scaleX:.5},{easing:cc.easing.backOut}).start(),this.spineEffectWin.setCompleteListener(function(){e.spineEffectWin.setAnimation(0,"idle",!1),e.spineEffectWin.setCompleteListener(null)}),this.scheduleOnce(function(){e.hideSpineWin()},3)},e.prototype.hideSpineWin=function(){var t=this;cc.tween(this.spineEffectWin.node).to(.2,{scaleX:0},{easing:cc.easing.backIn}).call(function(){t.spineEffectWin.node.active=!1}).start()},e.prototype.showButtonBet=function(){this.node.getComponent(cc.Animation).play("EffectShowBtnBet"),h.Windown.BaccaratView.buttonBetController.setStatusBtnBet()},e.prototype.hideButtonBet=function(){this.node.getComponent(cc.Animation).play("EffectHideBtnBet")},e.prototype.resetPlayer=function(){this.listChipBet=[],this.listChipPay=[],this.gateBetted=[]},o([f(cc.Label)],e.prototype,"lbNickName",void 0),o([f(l.default)],e.prototype,"lbChips",void 0),o([f(cc.Sprite)],e.prototype,"avatar",void 0),o([f(cc.Label)],e.prototype,"lbChipWin",void 0),o([f([cc.Vec2])],e.prototype,"posPayChip",void 0),o([f(sp.Skeleton)],e.prototype,"spineEffectWin",void 0),o([f],e.prototype,"isThisPlayer",void 0),o([d],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/PathResource":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],"Baccarat.PopupHistory":[function(t,e,i){"use strict";cc._RF.push(e,"12b70F/6IlPrKo5cjLpFF6w","Baccarat.PopupHistory");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listCardPlayer=[],e.listCardBanker=[],e.sprGate=[],e.lbSession=null,e.lbScoreP=null,e.lbScoreB=null,e.lbPage=null,e.scrItemHis=null,e.itemHisTemp=null,e.currentIndexSession=0,e.historyData=[],e}return a(e,t),e.prototype.onLoad=function(){r.Windown.BaccaratView.popupHistoryBetView=this,r.Windown.BaccaratView.audio.playEffect(r.Windown.BaccaratView.audio.openPopup)},e.prototype.start=function(){r.Windown.BaccaratController.sendGetHistoryBet()},e.prototype.setInfo=function(t){this.historyData=JSON.parse(r.Windown.SFSObjToJson(t)).history,this.historyData.reverse(),cc.log("historyData===",this.historyData),this.setInfoSession(this.historyData[this.currentIndexSession]),this.lbPage.string="1/"+this.historyData.length},e.prototype.setInfoSession=function(t){var e=this,i=t.round,n=r.Windown.formatDate(new Date(t.time),"HH:mm:ss dd/MM/yyyy");this.lbSession.string=cc.js.formatStr("S\u1ed1 Phi\xean:#%s(%s)",i,n);var a=JSON.parse(t.vP),o=JSON.parse(t.vD);a.forEach(function(t,i){0!=t.I&&(e.listCardPlayer[i].node.active=!0,e.listCardPlayer[i].spriteFrame=r.Windown.BaccaratView.assets.getCardSprite(t.I))}),o.forEach(function(t,i){0!=t.I&&(e.listCardBanker[i].spriteFrame=r.Windown.BaccaratView.assets.getCardSprite(t.I),e.listCardBanker[i].node.active=!0)}),this.listCardBanker[2].node.active=3==o.length&&0!=o[2].I,this.listCardPlayer[2].node.active=3==a.length&&0!=a[2].I,this.lbScoreP.string=r.Windown.BaccaratView.getScore(a,a.length)+"",this.lbScoreB.string=r.Windown.BaccaratView.getScore(o,o.length)+"",this.lbPage.string=this.currentIndexSession+1+"/"+this.historyData.length;var s=t.bet;this.scrItemHis.content.children.forEach(function(t){t.active=!1});for(var c=0;c<s.length;c++){var l=s[c],p=this.scrItemHis.content.children[c];cc.isValid(p)||((p=cc.instantiate(this.itemHisTemp)).parent=this.scrItemHis.content),p.active=!0,p.getComponentInChildren(cc.Sprite).spriteFrame=this.sprGate[l.id-1],p.getChildByName("lbbetValue").getComponent(cc.Label).string=r.Windown.formatMoney(l.agBet,1,100),0==l.agWin?(p.getChildByName("lbWinValue").getComponent(cc.Label).string="-"+r.Windown.formatMoney(l.agBet,1,100),p.getChildByName("lbWinValue").color=cc.Color.RED):(p.getChildByName("lbWinValue").color=cc.Color.GREEN,p.getChildByName("lbWinValue").getComponent(cc.Label).string="+"+r.Windown.formatMoney(l.agWin,1,100))}},e.prototype.onClickClose=function(){var t=this;r.Windown.actionEffectClose(this.node,function(){t.node.destroy(),r.Windown.BaccaratView.popupHistoryBetView=null}),r.Windown.BaccaratView.audio.playClick()},e.prototype.onClickChangePage=function(t,e){"next"==e?this.currentIndexSession<=this.historyData.length-2&&this.currentIndexSession++:this.currentIndexSession>0&&this.currentIndexSession--,this.setInfoSession(this.historyData[this.currentIndexSession])},o([l([cc.Sprite])],e.prototype,"listCardPlayer",void 0),o([l([cc.Sprite])],e.prototype,"listCardBanker",void 0),o([l([cc.SpriteFrame])],e.prototype,"sprGate",void 0),o([l(cc.Label)],e.prototype,"lbSession",void 0),o([l(cc.Label)],e.prototype,"lbScoreP",void 0),o([l(cc.Label)],e.prototype,"lbScoreB",void 0),o([l(cc.Label)],e.prototype,"lbPage",void 0),o([l(cc.ScrollView)],e.prototype,"scrItemHis",void 0),o([l(cc.Node)],e.prototype,"itemHisTemp",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.ScoreBoard":[function(t,e,i){"use strict";cc._RF.push(e,"fcc79XVRDNDxZhD/f3VQlfC","Baccarat.ScoreBoard");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBgItem=[],e.template=null,e.container=null,e.topRightPos=null,e.dataHistory=[],e.deltaXCol=38.85,e.deltaYRow=39.12,e.currentIndex=0,e.currentCol=0,e.BacaratBetSite={PLAYER_PAIR:1,PLAYER:2,TIE:3,BANKER:4,BANKER_PAIR:5},e}return a(e,t),e.prototype.setInfo=function(t){for(var e=0,i=t.length;e<i-1;e++){var n=[],a=t[e];n.push(a);for(var o=a.BigGateIDWin,r=e+1;r<i;r++){var s=t[r],c=s.BigGateIDWin;if(o!=this.BacaratBetSite.TIE){if(o!=c&&c!=this.BacaratBetSite.TIE){0!=n.length&&(e+=n.length-1);break}n.push(s)}else n.push(s),o=s.BigGateIDWin}this.dataHistory.push(n)}for(this.dataHistory.forEach(function(t){t.forEach(function(t){cc.log(t.BigGateIDWin)})}),e=0,i=this.dataHistory.length;e<i;e++){var l=this.dataHistory[e].reverse(),p=0;for(r=0;r<l.length;r++){a=l[r];var h=cc.instantiate(this.template);h.parent=this.container,h.active=!0,h.getComponent(cc.Sprite).spriteFrame=this.getSpf(a.BigGateIDWin,a.IsBankerPair,a.IsPlayerPair),h.setPosition(cc.v2(this.topRightPos.x-this.deltaXCol*this.currentCol,this.topRightPos.y-this.deltaYRow*p)),this.currentIndex++,p++,a.BigGateIDWin==this.BacaratBetSite.BANKER||a.BigGateIDWin==this.BacaratBetSite.PLAYER?h.getChildByName("lbScoreUp").getComponent(cc.Label).string=a.HandValue:h.getChildByName("lbScoreDown").getComponent(cc.Label).string=a.HandValue,h.position.x<-272&&(h.active=!1)}this.currentCol++}},e.prototype.getSpf=function(t){var e=null;switch(t){case this.BacaratBetSite.BANKER:e=this.sprBgItem[0];break;case this.BacaratBetSite.PLAYER:e=this.sprBgItem[1];break;case this.BacaratBetSite.TIE:e=this.sprBgItem[2]}return e},o([c([cc.SpriteFrame])],e.prototype,"sprBgItem",void 0),o([c(cc.Node)],e.prototype,"template",void 0),o([c(cc.Node)],e.prototype,"container",void 0),o([c(cc.Vec2)],e.prototype,"topRightPos",void 0),o([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],"Baccarat.SettingView":[function(t,e,i){"use strict";cc._RF.push(e,"50329oJ33tAQaFdbELw/pGK","Baccarat.SettingView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tglSound=null,e.tglMusic=null,e}return a(e,t),e.prototype.start=function(){this.tglSound.isChecked=!r.Windown.BaccaratView.audio.isActiveSound,this.tglMusic.isChecked=!r.Windown.BaccaratView.audio.isActiveMusic},e.prototype.onClickTglSound=function(){r.Windown.BaccaratView.audio.isActiveSound=!this.tglSound.isChecked},e.prototype.onClickTglMusic=function(){r.Windown.BaccaratView.audio.isActiveMusic=!this.tglMusic.isChecked},e.prototype.onClickClose=function(){var t=this;r.Windown.actionEffectClose(this.node,function(){t.node.destroy()}),r.Windown.BaccaratView.audio.playClick()},o([l(cc.Toggle)],e.prototype,"tglSound",void 0),o([l(cc.Toggle)],e.prototype,"tglMusic",void 0),o([c],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],"Baccarat.SoiCauView":[function(t,e,i){"use strict";cc._RF.push(e,"724422/HvZHeoMg/O8YPLNr","Baccarat.SoiCauView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/Windown"),s=t("./Baccarat.BigRoad"),c=t("./Baccarat.DishRoadBoard"),l=t("./Baccarat.ScoreBoard"),p=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PP:14,PLAYER_BP:15,PLAYER_PBP:145,BANKER_PP:34,BANKER_BP:35,BANKER_PBP:345,TIE_PP:24,TIE_BP:25,TIE_PBP:245}),h=cc._decorator,u=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbBankerWin=null,e.lbPlayerWin=null,e.lbTie=null,e.lbBankerPair=null,e.lbPlayerPair=null,e.lbBankerPercent=null,e.lbPlayerPercent=null,e.lbTiePercent=null,e.lbBankerPairPercent=null,e.lbPlayerPairPercent=null,e.dishRoad=null,e.bigRoad=null,e.scoreBoard=null,e.animation=null,e.listDataBankerWin=[],e.listDataPlayerWin=[],e.listDataTie=[],e.listDataBankerPair=[],e.listDataPlayerPair=[],e.dataHistory=[],e}return a(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(){this.dataHistory=r.Windown.BaccaratView.historyTable.slice(0,72),this.listDataBankerWin=this.dataHistory.filter(function(t){return t==p.BANKER}),this.listDataPlayerWin=this.dataHistory.filter(function(t){return t==p.PLAYER}),this.listDataTie=this.dataHistory.filter(function(t){return t==p.TIE}),this.listDataBankerPair=this.dataHistory.filter(function(t){return t==p.PLAYER_BP||t==p.BANKER_BP||t==p.TIE_BP}),this.listDataPlayerPair=this.dataHistory.filter(function(t){return t==p.PLAYER_PP||t==p.BANKER_PP||t==p.TIE_PP}),this.lbBankerWin.string=this.listDataBankerWin.length+"",this.lbPlayerWin.string=this.listDataPlayerWin.length+"",this.lbBankerWin.string=this.listDataBankerWin.length+"",this.lbTie.string=this.listDataTie.length+"",this.lbBankerPair.string=this.listDataBankerPair.length+"",this.lbPlayerPair.string=this.listDataPlayerPair.length+"",this.lbBankerPercent.string=(this.listDataBankerWin.length/this.dataHistory.length*100).toFixed(2)+"%",this.lbPlayerPercent.string=(this.listDataPlayerWin.length/this.dataHistory.length*100).toFixed(2)+"%",this.lbTiePercent.string=(this.listDataTie.length/this.dataHistory.length*100).toFixed(2)+"%",this.lbBankerPairPercent.string=(this.listDataBankerPair.length/this.dataHistory.length*100).toFixed(2)+"%",this.lbPlayerPairPercent.string=(this.listDataPlayerPair.length/this.dataHistory.length*100).toFixed(2)+"%",this.dishRoad.setInfo(r.Windown.BaccaratView.historyTable.slice(0,72)),this.bigRoad.setInfo(r.Windown.BaccaratView.historyTable.slice(0,72)),cc.log("Windown.BaccaratView.historyTable size="+r.Windown.BaccaratView.historyTable.length)},e.prototype.onEnable=function(){this.setInfo()},e.prototype.show=function(){this.node.active=!0,r.Windown.actionEffectOpen(this.node)},e.prototype.hide=function(){var t=this;r.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},o([d(cc.Label)],e.prototype,"lbBankerWin",void 0),o([d(cc.Label)],e.prototype,"lbPlayerWin",void 0),o([d(cc.Label)],e.prototype,"lbTie",void 0),o([d(cc.Label)],e.prototype,"lbBankerPair",void 0),o([d(cc.Label)],e.prototype,"lbPlayerPair",void 0),o([d(cc.Label)],e.prototype,"lbBankerPercent",void 0),o([d(cc.Label)],e.prototype,"lbPlayerPercent",void 0),o([d(cc.Label)],e.prototype,"lbTiePercent",void 0),o([d(cc.Label)],e.prototype,"lbBankerPairPercent",void 0),o([d(cc.Label)],e.prototype,"lbPlayerPairPercent",void 0),o([d(c.default)],e.prototype,"dishRoad",void 0),o([d(s.default)],e.prototype,"bigRoad",void 0),o([d(l.default)],e.prototype,"scoreBoard",void 0),o([d(cc.Animation)],e.prototype,"animation",void 0),o([u],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./Baccarat.BigRoad":"Baccarat.BigRoad","./Baccarat.DishRoadBoard":"Baccarat.DishRoadBoard","./Baccarat.ScoreBoard":"Baccarat.ScoreBoard"}],BaccaratController:[function(t,e,i){"use strict";cc._RF.push(e,"d65e4chFb9JX5TYXArxHQ4s","BaccaratController");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(s){o=[6,s],n=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../../Scritps/DefineTs/EVENT_MANAGER"),r=t("../../../Scritps/DefineTs/REQUEST_CODE"),s=t("../../../Scritps/DefineTs/TextDefine"),c=t("../../../Scritps/Game/GAME_TYPE"),l=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Windown"),h=cc.Enum({BETTING:1,FINISHED:2,WAITTING:3}),u=function(){function t(){this.sfs=null,this.roomSFS=null,this.listTimeOut=[],this.objFinish=null,this.gameType=0,this.isCanSendData=!0,this.joinRoomData=null,this.infoRoom=null,this.startGameData=null,this.sfs=l.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),p.Windown.BaccaratController=this,cc.systemEvent.on(o.EVENT_MANAGER.onDisconnect,this.onDisconnect,this)}return t.prototype.onDisconnect=function(){this.clear(),this.baccaratView.node.destroy()},t.prototype.clear=function(){cc.systemEvent.targetOff(this),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),this.objFinish&&(this.objFinish.get("agWin"),p.Windown.MoneyUser.removeDelay(this.gameType)),p.Windown.MoneyUser.endGameMOney(this.gameType)},t.prototype.userExitRoom=function(t){if("Baccarat"==t.room.groupId&&t.user.isItMe)return this.onDestroy(),void cc.director.loadScene("main")},t.prototype.onCreateError=function(){cc.log("creat err"),p.Windown.UIManager.hideLoading(),this.onDestroy(),p.Windown.Dialog.showLog(s.TextDefine.ERR_JOIN_ROOM)},t.prototype.onDestroy=function(){p.Windown.UIManager.hideLoadingData(),p.Windown.UIManager.hideLoading(),cc.systemEvent.removeAll(this),this.clearAllTimeOut(),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),p.Windown.BaccaratController=null,this.roomSFS=null,p.Windown.MoneyUser.targetOff(this),p.Windown.MoneyUser.endGameMOney(c.default.Baccarat)},t.prototype.clearAllTimeOut=function(){this.listTimeOut.forEach(function(t){clearTimeout(t)})},t.prototype.onJoinRoom=function(t){return n(this,void 0,void 0,function(){return a(this,function(){return t.room,p.Windown.UIManager.hideLoadingData(),[2]})})},t.prototype.onJoinRoomErr=function(){p.Windown.UIManager.hideLoading(),p.Windown.Dialog.showLog(s.TextDefine.ERR_JOIN_ROOM),this.onDestroy()},t.prototype.extResponse=function(t){var e=t.cmd,i=t.params;switch(cc.log("Baccarat Code:"+e+"\n"+p.Windown.SFSObjToJson(i)),e){case r.REQUEST_CODE.BCRPlayerInfo:this.baccaratView.handlePlayerInfo(i);break;case r.REQUEST_CODE.BCRInfoRoom:this.baccaratView.handleRoomInfo(i);break;case r.REQUEST_CODE.BCRStartGame:null==this.baccaratView?this.startGameData=i:this.baccaratView.handleStartGame(i);break;case r.REQUEST_CODE.BCRBet:cc.log("handlePlayerbet"),this.baccaratView.handlePlayerBet(i);break;case r.REQUEST_CODE.BCREndGame:this.baccaratView.handleEndGame(i);break;case r.REQUEST_CODE.BCRHistoryBet:this.baccaratView.popupHistoryBetView.setInfo(i);break;case r.REQUEST_CODE.BCAutoExit:i.getBool("status")&&cc.director.loadScene("main")}},t.prototype.sendJoinRoom=function(){var t=this;p.Windown.UIManager.showLoading();var e=this.sfs.roomManager.getRoomListFromGroup("Baccarat").find(function(t){return cc.log("value"+t.getVariable("cj").value),t.containsVariable("cj")&&t.getVariable("cj").value});e?(this.roomSFS=e,e.isJoined?this.sendGetInfoRoom():(cc.log("nhay vao send join rom: "+e),this.sfs.send(new SFS2X.JoinRoomRequest(e,null,-1)))):setTimeout(function(){t.sendJoinRoom()},3e3)},t.prototype.sendGetInfoRoom=function(){this.sendRequest(r.REQUEST_CODE.BCRInfoRoom,l.ConectManager.getIns().getSFSObj())},t.prototype.sendRequest=function(t,e){l.ConectManager.getIns().sendRequest(t,e,this.roomSFS)},t.prototype.sendToServer=function(t,e){this.isCanSendData&&null!=this.roomSFS&&(this.isCanSendData=!1,l.ConectManager.getIns().sendRequest(t,e,this.roomSFS))},t.prototype.sendBet=function(t,e){var i=l.ConectManager.getIns().getSFSObj();i.putLong("bet",e),i.putInt("id",t),this.sendToServer("bet",i)},t.prototype.sendLeaveRoom=function(){cc.log("SendLeaveRoom");var t=l.ConectManager.getIns().getSFSObj();this.sendToServer("atS",t)},t.prototype.intiGame=function(){return n(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,p.Windown.loadBundle(c.default.Baccarat.toString())];case 1:return t=e.sent(),p.Windown.UIManager.showLoadingData(),t.preloadScene("Baccarat",{},function(t,e){p.Windown.UIManager.setPerData(t/e)},function(e){e?p.Windown.Dialog.showLog(s.TextDefine.Error):t.loadScene("Baccarat",function(t,e){if(t)return p.Windown.Dialog.showLog(s.TextDefine.Error),void p.Windown.UIManager.hideLoadingData();cc.director.runScene(e,null,function(){p.Windown.UIManager.hideLoadingData()})})}),[2]}})})},t.prototype.onClickBackToLobby=function(){this.roomSFS?this.baccaratView.isPlayerBetted?this.baccaratView.gameState==h.WAITTING?this.sendLeaveRoom():(this.baccaratView.isAutoExit=!this.baccaratView.isAutoExit,this.baccaratView.isAutoExit?p.Windown.UIManager.showAlertMini("\u0110\xe3 \u0111\u0103ng k\xfd r\u1eddi b\xe0n v\xe0o cu\u1ed1i v\xe1n"):p.Windown.UIManager.showAlertMini("\u0110\xe3 h\u1ee7y \u0111\u0103ng k\xfd r\u1eddi b\xe0n")):this.sendLeaveRoom():cc.log("Ko co ROOMSFS")},t.prototype.loadPrefabBundle=function(t){return n(this,void 0,void 0,function(){var e;return a(this,function(){return e=cc.assetManager.getBundle(c.default.Baccarat.toString()),[2,new Promise(function(i,n){e.load("Prefab/"+t,function(t,e){if(t)return n(t),null;i(e)})})]})})},t.prototype.sendGetHistoryBet=function(){var t=l.ConectManager.getIns().getSFSObj();this.sendToServer("historyBetBa",t),p.Windown.BaccaratController.isCanSendData=!0},t}();i.default=u,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],BaccaratView:[function(t,e,i){"use strict";cc._RF.push(e,"91133cyz0FNj4WIQhDdRhjP","BaccaratView");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var i,n,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(s){o=[6,s],n=0}finally{i=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/Obs/LbMoneyChange"),l=t("../../../Scritps/Other/MakeDelay"),p=t("../../../Scritps/Util"),h=t("../../../Scritps/Windown"),u=t("./Baccarat.Assets"),d=t("./Baccarat.Audio"),f=t("./Baccarat.ButtonBet"),y=t("./Baccarat.Card"),B=t("./Baccarat.HistoryBet"),P=t("./Baccarat.HistoryMini"),g=t("./Baccarat.MenuView"),v=t("./Baccarat.Player"),_=t("./Baccarat.PopupHistory"),b=t("./Baccarat.SoiCauView"),C=cc._decorator,m=C.ccclass,w=C.property,E=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PAIR:4,BANKER_PAIR:5}),S=cc.Enum({PLAYER:1,TIE:2,BANKER:3,PLAYER_PP:14,PLAYER_BP:15,PLAYER_PBP:145,BANKER_PP:34,BANKER_BP:35,BANKER_PBP:345,TIE_PP:24,TIE_BP:25,TIE_PBP:245}),R=cc.Enum({BETTING:1,FINISHED:2,WAITTING:3}),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.players=[],e.thisPlayer=null,e.assets=null,e.menu=null,e.buttonBetController=null,e.historyMini=null,e.popupHistoryBetView=null,e.audio=null,e.popupSoiCau=null,e.nodeGroupUser=null,e.nodeGateBet=[],e.listCardPlayer=[],e.listCardBanker=[],e.nodeGetChip=null,e.lbOtherPlayer=null,e.lbTimer=null,e.lbWaitting=null,e.lbSession=null,e.sprTimer=null,e.lbScoreP=null,e.lbScoreB=null,e.lbTotalBet=null,e.animDealer=null,e.animWinResult=null,e.posPayChipOther=[],e.lbTotalBetB=null,e.lbTotalBetP=null,e.lbTotalBetT=null,e.lbTotalBetBP=null,e.lbTotalBetPP=null,e.listPosChipOnTable=[],e.lbTotalGateBetUser=[],e.effectWinOther=null,e.currentTimer=60,e.totalBetB=0,e.totalBetP=0,e.totalBetBP=0,e.totalBetPP=0,e.totalBetT=0,e.totalBetAllGate=0,e.agUser=0,e.currentBetValue=1e3,e.listTotalBetValue=null,e.listTotalUserBetGate=null,e.listDataPlayerOther=[],e.listLbTotalBet=[],e.gateWin=null,e.gameState=R.BETTING,e.listValueChip=[.1,1,5,10,50,100,500,1e3,2e3,5e3,1e4,5e4,1e5,15e4,2e5],e.lastPlayerInfoData=null,e.makeDelay=null,e.infoCardOnTable_Player=[],e.infoCardOnTable_Banker=[],e.listChipBet=[],e.listChipbetOther=[],e.listBtnBet=[],e.isResetView=!1,e.isReconnect=!1,e.listGateWin=[],e.HistoryBet=null,e.historyTable=[],e.timeInBg=0,e.isAutoExit=!1,e.isPlayerBetted=!1,e}return a(e,t),e.prototype.onLoad=function(){var t=this;this.HistoryBet=new B.default,this.players.forEach(function(t,e){e>0&&(t.node.active=!1)}),this.nodeGateBet.forEach(function(e){t.listBtnBet.push(e.getComponent(cc.Button))});for(var e=0,i=this.listValueChip.length;e<i;e++)this.listValueChip[e]*=1e3;for(e=0;e<3;e++){var n=this.listCardPlayer[e],a={scaleX:n.node.scaleX,scaleY:n.node.scaleY,position:n.node.position};this.infoCardOnTable_Player.push(a);var o=this.listCardBanker[e],r={scaleX:o.node.scaleX,scaleY:o.node.scaleY,position:o.node.position};this.infoCardOnTable_Banker.push(r)}this.listTotalBetValue=[this.totalBetP,this.totalBetT,this.totalBetB,this.totalBetPP,this.totalBetBP],this.listTotalUserBetGate=[0,0,0,0,0],this.listLbTotalBet=[this.lbTotalBetP,this.lbTotalBetT,this.lbTotalBetB,this.lbTotalBetPP,this.lbTotalBetBP],h.Windown.BaccaratController.baccaratView=this,h.Windown.BaccaratView=this,this.makeDelay=new l.default(this),this.agUser=h.Windown.User.userAg},e.prototype.start=function(){h.Windown.BaccaratController.sendJoinRoom(),this.audio.playMusic(),null!=h.Windown.BaccaratController.startGameData&&(this.handleStartGame(h.Windown.BaccaratController.startGameData),h.Windown.BaccaratController.startGameData=null),this.setupTimeRunInBg()},e.prototype.onDestroy=function(){h.Windown.BaccaratView=null},e.prototype.getMakeDelay=function(t){return this.makeDelay.getDelay(t)},e.prototype.handlePlayerInfo=function(t){if(this.gameState!=R.FINISHED){this.listDataPlayerOther=[];var e=JSON.parse(h.Windown.SFSArrToJson(t.get("data"))),i=e.find(function(t){return t.id==h.Windown.User.userId});null!=i&&(cc.log("Co this player trong listPlayer, xoa no di"),e.splice(e.indexOf(i),1)),7==e.length&&(this.listDataPlayerOther.push(e.pop()),cc.log("Co 7 player trong listPlayer, xoa 1 thang  di:"+e.length)),this.thisPlayer.setAvatar(h.Windown.User.avatrId),this.thisPlayer.setName(h.Windown.User.nickName),this.thisPlayer.setChip(this.agUser,!1),this.thisPlayer.setId(h.Windown.User.userId);for(var n=1,a=0,o=e.length;a<o;a++){var r=e[a],s=this.players[n];cc.isValid(s)&&s!=this.thisPlayer?(s.node.active=!0,s.resetPlayer(),s.setInfo(r.id,r.nn,r.ag,r.iv),n++):cc.error(" ko du player de hien thi")}for(a=n;a<this.players.length;a++)this.players[a].node.active=!1,this.players[a].resetPlayer();this.lbOtherPlayer.string=t.getInt("so")+this.listDataPlayerOther.length+""}else this.lastPlayerInfoData=t},e.prototype.handleRoomInfo=function(t){return r(this,void 0,void 0,function(){var e,i,n,a,o,r,c,l,p=this;return s(this,function(s){switch(s.label){case 0:return h.Windown.UIManager.hideLoading(),this.currentTimer=t.getInt("time"),this.sprTimer.fillRange=this.currentTimer/30,this.lbSession.string="#"+t.getInt("sision"),e=t.getBool("isG"),i=JSON.parse(h.Windown.SFSArrToJson(t.get("cur"))),this.gameState=e?R.BETTING:R.FINISHED,this.historyTable=JSON.parse(t.get("his")).reverse(),n=this.historyTable[0],this.gameState==R.FINISHED&&this.currentTimer>15&&this.historyTable.splice(0,1),this.historyMini.setInfo(this.historyTable),this.setStateBtnGate(this.gameState==R.BETTING),this.gameState==R.BETTING?this.onCountTimeRemain():this.onCountWaitting(),this.gameState!=R.BETTING?[3,1]:(this.thisPlayer.showButtonBet(),this.setCurBetInfo(i),[3,9]);case 1:if(h.Windown.UIManager.showAlertMini("Vui l\xf2ng ch\u1edd  v\xe1n ch\u01a1i k\u1ebft th\xfac!"),!(this.currentTimer>15))return[3,9];for(a=JSON.parse(t.getUtfString("vP")),o=JSON.parse(t.getUtfString("vD")),cc.log(" Card  Player = ",a),cc.log(" Card  Banker = ",o),r=0;r<a.length;r++)(c=this.listCardPlayer[r]).node.active=!0,c.id=a[r].I,c.setCard(),c.node.opacity=255,c.node.position=this.infoCardOnTable_Player[r].position;for(r=0;r<o.length;r++)(c=this.listCardBanker[r]).node.active=!0,c.id=o[r].I,c.setCard(),c.node.opacity=255,c.node.position=this.infoCardOnTable_Banker[r].position;return l=JSON.parse(h.Windown.SFSArrToJson(t.get("cur"))),this.setCurBetInfo(l),[4,h.Windown.BaccaratView.getMakeDelay(.5).prosime];case 2:return s.sent(),this.listGateWin=[],l.forEach(function(t){t.w&&p.listGateWin.push(t.id)}),this.showScore(E.BANKER,o,2==o.length),this.showScore(E.PLAYER,a,2==a.length),[4,h.Windown.BaccaratView.getMakeDelay(1.5).prosime];case 3:return s.sent(),this.gateWin=parseInt(this.listGateWin.toString().split(",").join("")),[4,this.showWinResult()];case 4:return s.sent(),this.getAllChipOnTable(),[4,this.getMakeDelay(1.5).prosime];case 5:return s.sent(),this.payChipWinOnTalbe(),[4,this.getMakeDelay(1.5).prosime];case 6:return s.sent(),this.moveChipToPlayer(),[4,this.getMakeDelay(1.5).prosime];case 7:return s.sent(),[4,this.showResultAgWinReconnect(l)];case 8:s.sent(),this.historyTable.unshift(n),this.resetView(),s.label=9;case 9:return[2]}})})},e.prototype.setCurBetInfo=function(t){for(var e=0;e<t.length;e++){for(var i=t[e],n=i.id,a=i.b,o=0;o<a.length;o++)for(var r=a[o].bet,s=this.getPlayerWithId(a[o].idP),c=this.getListChipValue(r),l=0,p=c.length;l<p;l++){var u=this.assets.getChipBet(c[l]);cc.isValid(s)?(s.id==h.Windown.User.userId&&(this.totalBetAllGate+=r,this.listTotalUserBetGate[n-1]+=r,this.lbTotalBet.setMoney(this.totalBetAllGate,!0),this.lbTotalGateBetUser[n-1].string=h.Windown.formatMoney(this.listTotalUserBetGate[n-1]),this.lbTotalGateBetUser[n-1].node.parent.active=!0),s.listChipBet.push(u),u.playerID=s.id):(this.listChipbetOther.push(u),u.playerID=-1),this.listChipBet.push(u),u.parent=this.nodeGateBet[n-1],u.gate=n,u.value=c[l];var d=n>3?20:30;cc.log("listPosChipOnTable size="+this.listPosChipOnTable.length),cc.log("gatebet=="+n);var f=h.Windown.RandomNumber(this.listPosChipOnTable[n-1].x-d,this.listPosChipOnTable[n-1].x+d),y=h.Windown.RandomNumber(this.listPosChipOnTable[n-1].y-d,this.listPosChipOnTable[n-1].y+d);u.setPosition(cc.v2(f,y))}switch(n){case E.BANKER:this.totalBetB=i.t;break;case E.PLAYER:this.totalBetP=i.t;break;case E.BANKER_PAIR:this.totalBetBP=i.t;break;case E.PLAYER_PAIR:this.totalBetPP=i.t;break;case E.TIE:this.totalBetT=i.t}this.lbTotalBetB.setMoney(this.totalBetB,!0),this.lbTotalBetP.setMoney(this.totalBetP,!0),this.lbTotalBetBP.setMoney(this.totalBetBP,!0),this.lbTotalBetPP.setMoney(this.totalBetPP,!0),this.lbTotalBetT.setMoney(this.totalBetT,!0)}},e.prototype.handleStartGame=function(t){cc.log("handleStartGame"),this.audio.playEffect(this.audio.dealer_startBet),this.setStateBtnGate(!0),this.isResetView=!1,this.lbSession.string="#"+t.getInt("sision"),this.currentTimer=t.getInt("time"),this.lbTimer.string=this.currentTimer+"",this.sprTimer.fillRange=1,this.onCountTimeRemain(),this.setDealerAnim("Start_Bet",!1),this.thisPlayer.showButtonBet()},e.prototype.handlePlayerBet=function(t){var e=t.getInt("pid");this.audio.playEffect(this.audio.throwChip);var i=t.getInt("id"),n=this.getPlayerWithId(e),a=t.getLong("bet");if(null!=n&&n==this.thisPlayer){if(t.containsKey("errorMessage")&&""!=t.getUtfString("errorMessage"))return void h.Windown.UIManager.showAlertMini(t.getUtfString("errorMessage"));this.isPlayerBetted=!0,this.totalBetAllGate+=a,this.listTotalUserBetGate[i-1]+=a,this.lbTotalBet.setMoney(this.totalBetAllGate,!0),this.lbTotalGateBetUser[i-1].string=h.Windown.formatMoney(this.listTotalUserBetGate[i-1]),this.lbTotalGateBetUser[i-1].node.parent.active=!0}for(var o=this.getListChipValue(a),r=0,s=o.length;r<s;r++){var c=this.assets.getChipBet(o[r]);this.listChipBet.push(c);var l=this.nodeGateBet[i-1],p=null;null!=n?(p=l.convertToNodeSpaceAR(n.node.parent.convertToWorldSpaceAR(n.node.position)),n.setChip(t.getLong("ag")),n.listChipBet.push(c),c.playerID=n.id,n.gateBetted.includes(i)||n.gateBetted.push(i)):(p=l.convertToNodeSpaceAR(this.nodeGroupUser.parent.convertToWorldSpaceAR(this.nodeGroupUser.position)),this.listChipbetOther.push(c),c.playerID=-1),c.parent=l,c.gate=i,c.value=o[r],c.setPosition(p);var u=i>3?20:30,d=h.Windown.RandomNumber(this.listPosChipOnTable[i-1].x-u,this.listPosChipOnTable[i-1].x+u),f=h.Windown.RandomNumber(this.listPosChipOnTable[i-1].y-u,this.listPosChipOnTable[i-1].y+u),y=cc.v2(d,f);cc.tween(c).set({position:p}).delay(.05*r).to(.3,{x:y.x,y:y.y},{easing:cc.easing.sineOut}).start()}this.listTotalBetValue[i-1]=t.getLong("ttB"),this.listLbTotalBet[i-1].setMoney(this.listTotalBetValue[i-1],!0)},e.prototype.setStateBtnGate=function(t){this.listBtnBet.forEach(function(e){e.interactable=t})},e.prototype.handleEndGame=function(t){return r(this,void 0,void 0,function(){var e,i,n,a,o,c,l,p,u,d,f,y,B=this;return s(this,function(P){switch(P.label){case 0:return cc.log("handleEndGame"),this.setStateBtnGate(!1),this.onCountWaitting(),this.sprTimer.fillRange=0,this.gameState=R.FINISHED,this.thisPlayer.hideButtonBet(),this.setDealerAnim("Stop_Bet"),this.audio.playEffect(this.audio.dealer_endBet),e=JSON.parse(t.getUtfString("vP")),i=JSON.parse(t.getUtfString("vD")),this.historyTable=JSON.parse(t.get("his")).reverse(),n=JSON.parse(h.Windown.SFSArrToJson(t.get("d7"))),a=t.getLong("agW"),this.agUser=t.getLong("ag"),h.Windown.User.userAg=this.agUser,o=JSON.parse(h.Windown.SFSArrToJson(t.get("w"))),this.listGateWin=[],o.forEach(function(t){B.listGateWin.push(t.id)}),cc.log("vp====",e),cc.log("vD====",i),c=this.animDealer.findAnimation("Stop_Bet").duration,[4,h.Windown.BaccaratView.getMakeDelay(c+.5).prosime];case 1:return P.sent(),this.setDealerAnim("DealCard"),this.gateWin=parseInt(this.listGateWin.toString().split(",").join("")),l=this.infoCardOnTable_Player[0],cc.tween(this.listCardPlayer[0].node).set({x:9,y:145}).delay(.9).call(function(){B.audio.playEffect(B.audio.flipCard),B.listCardPlayer[0].node.active=!0,B.listCardPlayer[0].node.opacity=255,B.listCardPlayer[0].dealCard()}).start(),p=this.infoCardOnTable_Banker[0],cc.tween(this.listCardBanker[0].node).set({x:-2,y:145}).delay(2.25).call(function(){B.audio.playEffect(B.audio.flipCard),B.listCardBanker[0].node.active=!0,B.listCardBanker[0].node.opacity=255,B.listCardBanker[0].dealCard(),B.animDealer.node.setSiblingIndex(B.listCardBanker[0].node.parent.getSiblingIndex()-1)}).delay(.5).call(function(){B.listCardPlayer[0].node.setPosition(l.position),B.listCardPlayer[0].id=e[0].I,B.listCardPlayer[0].nanCard()}).delay(1).call(function(){B.listCardPlayer[0].openCard(),B.audio.playEffect(B.audio.openCard)}).start(),u=this.infoCardOnTable_Player[1],cc.tween(this.listCardPlayer[1].node).set({x:9,y:145}).delay(3.5).call(function(){B.audio.playEffect(B.audio.flipCard),B.listCardPlayer[1].node.active=!0,B.listCardPlayer[1].node.opacity=255,B.listCardPlayer[1].dealCard()}).delay(.5).call(function(){B.listCardBanker[0].node.setPosition(p.position),B.listCardBanker[0].id=i[0].I,B.listCardBanker[0].nanCard()}).delay(1).call(function(){B.listCardBanker[0].openCard(),B.audio.playEffect(B.audio.openCard),B.animDealer.node.setSiblingIndex(B.listCardBanker[0].node.getSiblingIndex()-1)}).start(),d=this.infoCardOnTable_Banker[1],cc.tween(this.listCardBanker[1].node).set({x:-2,y:145}).delay(4.85).call(function(){return r(B,void 0,void 0,function(){return s(this,function(){return this.audio.playEffect(this.audio.flipCard),this.listCardBanker[1].node.active=!0,this.listCardBanker[1].node.opacity=255,this.listCardBanker[1].dealCard(),this.animDealer.node.setSiblingIndex(this.listCardBanker[0].node.parent.getSiblingIndex()+1),[2]})})}).delay(.5).call(function(){return r(B,void 0,void 0,function(){return s(this,function(){return this.listCardPlayer[1].node.setPosition(u.position),this.listCardPlayer[1].id=e[1].I,this.listCardPlayer[1].nanCard(),[2]})})}).delay(1).call(function(){return r(B,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.listCardPlayer[1].openCard(),this.audio.playEffect(this.audio.openCard),[4,this.getMakeDelay(.75).prosime];case 1:return t.sent(),this.showScore(E.PLAYER,e,!0),[2]}})})}).delay(.75).call(function(){return r(B,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.listCardBanker[1].node.setPosition(d.position),this.listCardBanker[1].id=i[1].I,this.listCardBanker[1].nanCard(),[4,this.getMakeDelay(1).prosime];case 1:return t.sent(),this.animDealer.node.setSiblingIndex(this.listCardBanker[1].node.parent.getSiblingIndex()-1),this.listCardBanker[1].openCard(),this.audio.playEffect(this.audio.openCard),[4,this.getMakeDelay(.75).prosime];case 2:return t.sent(),[4,this.showScore(E.BANKER,i,!0)];case 3:return t.sent(),[2]}})})}).start(),[4,this.getMakeDelay(8.25).prosime];case 2:return P.sent(),2!=e.length||2!=i.length?[3,4]:[4,this.getMakeDelay(1.5).prosime];case 3:return P.sent(),[3,8];case 4:return 3!=e.length?[3,6]:(f=this.infoCardOnTable_Player[2],this.setDealerAnim("DealCard_Nan"),cc.tween(this.listCardPlayer[2].node).set({x:9,y:145}).delay(1.1).call(function(){B.audio.playEffect(B.audio.flipCard),B.listCardPlayer[2].node.active=!0,B.listCardPlayer[2].node.opacity=255,B.listCardPlayer[2].dealCard()}).delay(.5).call(function(){return r(B,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.listCardPlayer[2].node.setPosition(f.position),this.listCardPlayer[2].id=e[2].I,this.listCardPlayer[2].nanCard(),[4,this.getMakeDelay(1).prosime];case 1:return t.sent(),this.listCardPlayer[2].openCard(),this.audio.playEffect(this.audio.openCard),[4,this.getMakeDelay(.75).prosime];case 2:return t.sent(),this.showScore(E.PLAYER,e,!1),[2]}})})}).start(),[4,this.getMakeDelay(3.4).prosime]);case 5:P.sent(),P.label=6;case 6:return 3!=i.length?[3,8]:(y=this.infoCardOnTable_Banker[2],this.setDealerAnim("DealCard_Table_Right"),cc.tween(this.listCardBanker[2].node).set({x:-4.6,y:145}).delay(1.1).call(function(){B.audio.playEffect(B.audio.flipCard),B.listCardBanker[2].node.active=!0,B.listCardBanker[2].node.opacity=255,B.listCardBanker[2].dealCard()}).delay(.5).call(function(){return r(B,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.listCardBanker[2].node.setPosition(y.position),this.listCardBanker[2].id=i[2].I,this.listCardBanker[2].nanCard(),[4,this.getMakeDelay(1).prosime];case 1:return t.sent(),this.listCardBanker[2].openCard(),this.audio.playEffect(this.audio.openCard),[4,this.getMakeDelay(.75).prosime];case 2:return t.sent(),this.showScore(E.BANKER,i,!1),[2]}})})}).start(),[4,this.getMakeDelay(3.4).prosime]);case 7:P.sent(),P.label=8;case 8:return[4,this.showWinResult()];case 9:return P.sent(),this.getAllChipOnTable(),[4,this.getMakeDelay(1.5).prosime];case 10:return P.sent(),this.payChipWinOnTalbe(),[4,this.getMakeDelay(1.5).prosime];case 11:return P.sent(),this.moveChipToPlayer(),[4,this.getMakeDelay(1.5).prosime];case 12:return P.sent(),[4,this.showResultAgWin(n,a)];case 13:return P.sent(),this.resetView(),[2]}})})},e.prototype.getAllChipOnTable=function(){var t=this;cc.log("this.listGateWin="+this.listGateWin),this.audio.playEffect(this.audio.getChip),this.listChipBet.forEach(function(e){if(!t.listGateWin.includes(e.gate)){var i=t.nodeGetChip.parent.convertToWorldSpaceAR(t.nodeGetChip.position),n=e.parent.convertToNodeSpaceAR(i);cc.tween(e).delay(h.Windown.RandomNumber(0,3)/10).to(1.5,{position:n},{easing:cc.easing.quintOut}).to(.1,{opacity:0}).call(function(){t.assets.chipBetPool.put(e);var i=t.getPlayerWithId(e.playerID);null!=i&&i.listChipBet.splice(i.listChipBet.indexOf(e),1),t.listChipbetOther.includes(e)&&t.listChipbetOther.splice(t.listChipbetOther.indexOf(e),1)}).start()}})},e.prototype.payChipWinOnTalbe=function(){for(var t=this,e=!1,i=function(i){var a=n.listGateWin[i];n.players.forEach(function(i){i.listChipBet.forEach(function(n,o){if(n.gate==a){e=!0,n.value=t.getChipWinValueOnGate(n.value,a);for(var r=t.getListChipValue(n.value),s=0,c=r.length;s<c;s++)t.effectChipPay(r[s],a,.07*o,i.listChipPay)}})}),n.listChipbetOther.forEach(function(i,n){if(i.gate==a){e=!0,i.value=t.getChipWinValueOnGate(i.value,a);for(var o=t.getListChipValue(i.value),r=0,s=o.length;r<s;r++)t.effectChipPay(o[r],a,.07*n,t.listChipbetOther)}})},n=this,a=0;a<this.listGateWin.length;a++)i(a);e&&this.audio.playEffect(this.audio.chipMoveToPlayer_turn1)},e.prototype.getChipWinValueOnGate=function(t,e){return e!=E.PLAYER_PAIR&&e!=E.BANKER_PAIR||(t*=15),e==E.TIE&&(t*=9),t},e.prototype.moveChipToPlayer=function(){var t=this,e=cc.find("bg/playerContainer",this.node),i=!1;this.players.forEach(function(n){n.listChipBet.forEach(function(a,o){if(o<7){cc.isValid(a.parent)||(cc.log("Chip ko co cha:",a.playerID),a.parent=t.nodeGateBet[a.gate-1]);var r=h.Windown.convertNodeInOtherNode(a,e);a.parent=e,a.setPosition(r),i=!0,cc.tween(a).to(.6,{x:n.posPayChip[0].x,y:n.posPayChip[0].y+5*o,scale:.8*a.scale}).delay(1).to(.3,{position:n.node.position}).call(function(){t.assets.chipBetPool.put(a)}).start()}else cc.log("chip >7"),cc.tween(a).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.assets.chipBetPool.put(a),cc.log("player listchipo bet size="+n.listChipBet.length)}).start()}),n.listChipPay.forEach(function(a,o){if(o<7){var r=h.Windown.convertNodeInOtherNode(a,e);a.parent=e,a.setPosition(r),i=!0,cc.tween(a).to(.6,{x:n.posPayChip[1].x,y:n.posPayChip[1].y+5*o,scale:.8*a.scale}).delay(.75).to(.3,{position:n.node.position}).call(function(){t.assets.chipBetPool.put(a)}).start()}else cc.tween(a).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.assets.chipBetPool.put(a)}).start()})});var n=0;this.listChipbetOther.forEach(function(a,o){if(o<7){i=!0,n+=a.value,cc.log("Chip Parent="+a.parent.name);var r=h.Windown.convertNodeInOtherNode(a,e);a.parent=e,a.setPosition(r);var s=1==a.isChipPayOther?0:1;cc.tween(a).to(.6,{x:t.posPayChipOther[s].x,y:t.posPayChipOther[s].y+5*o,scale:.8*a.scale}).delay(.75).to(.3,{position:t.nodeGroupUser.position}).call(function(){t.assets.chipBetPool.put(a)}).start()}else n+=a.value,t.assets.chipBetPool.put(a)}),this.listChipbetOther.length>0&&cc.tween(this.node).delay(1.5).call(function(){t.showEffectWinOther(n)}).start(),this.listChipBet.forEach(function(e){cc.isValid(t.getPlayerWithId(e.playerID))||t.listChipbetOther.includes(e)||cc.tween(e).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.assets.chipBetPool.put(e)}).start()}),i&&this.audio.playEffect(this.audio.chipMoveToPlayer_turn1)},e.prototype.showEffectWinOther=function(t){var e=this;null==this.effectWinOther?(cc.log("show effectWinOther"),this.effectWinOther=this.assets.getEffectWin(t),this.effectWinOther.parent=this.node,this.effectWinOther.position=this.nodeGroupUser.position):this.effectWinOther.getChildByName("lbChipWin").getComponent(cc.Label).string=h.Windown.formatMoney(t),this.effectWinOther.active=!0;var i=this.effectWinOther.getComponentInChildren(sp.Skeleton);i.setSkin("win"),i.setSlotsToSetupPose(),i.setAnimation(0,"appear",!1),i.setCompleteListener(function(){i.setAnimation(0,"idle",!1),i.setCompleteListener(null)}),this.scheduleOnce(function(){cc.tween(e.effectWinOther).to(.2,{scaleX:0},{easing:cc.easing.backIn}).call(function(){e.effectWinOther.active=!1}).start()},3)},e.prototype.showResultAgWin=function(t,e){return void 0===t&&(t=[]),r(this,void 0,void 0,function(){var i,n,a=this;return s(this,function(o){switch(o.label){case 0:return i=[],n=!1,t.forEach(function(t){var e=t.id,o=a.getPlayerWithId(e);cc.isValid(o)&&t.agw>0&&o!=a.thisPlayer&&(n=!0,i.push(o.showWinEffect(t.agw)),o.setChip(t.ag))}),0!=e&&(i.push(this.thisPlayer.showWinSpineEffect(e)),this.thisPlayer.setChip(this.agUser),this.audio.playEffect(this.audio.youWin)),n&&this.audio.playEffect(this.audio.chipMoveToPlayer_turn2),[4,Promise.all(i)];case 1:return o.sent(),[4,this.getMakeDelay(.25).prosime];case 2:return o.sent(),[2]}})})},e.prototype.showResultAgWinReconnect=function(t){return void 0===t&&(t=[]),r(this,void 0,void 0,function(){var e,i,n,a,o,r=this;return s(this,function(s){switch(s.label){case 0:return e=[],i=!1,n=0,a=[],o=function(t){a.forEach(function(e){return e.idP==t?e:null})},t.forEach(function(t){t.w&&t.b.forEach(function(t){var e=t.idP,i=o(e);null==i?(a.push(t),e==r.thisPlayer.id&&(n=t.agWin)):(i.agWin+=t.agWin,e==r.thisPlayer.id&&(n=i.agWin))})}),cc.log(" Player info=",a),a.forEach(function(t){var n=t.idP,a=r.getPlayerWithId(n);cc.isValid(a)&&t.agWin>0&&a!=r.thisPlayer&&(i=!0,e.push(a.showWinEffect(t.agWin)))}),cc.log(" Player agWinUser=",n),0!=n&&(e.push(this.thisPlayer.showWinSpineEffect(n)),this.thisPlayer.setChip(this.agUser),this.audio.playEffect(this.audio.youWin)),i&&this.audio.playEffect(this.audio.chipMoveToPlayer_turn2),[4,Promise.all(e)];case 1:return s.sent(),[4,this.getMakeDelay(.25).prosime];case 2:return s.sent(),[2]}})})},e.prototype.endResultAgWin=function(){},e.prototype.resetView=function(){var t=this;if(!this.isResetView){this.isPlayerBetted=!1,this.isResetView=!0,this.totalBetAllGate=0,this.lbTotalBet.setMoney(0),this.listChipBet.forEach(function(e){t.assets.chipBetPool.put(e)}),this.listChipBet=[],this.listChipbetOther.forEach(function(e){t.assets.chipBetPool.put(e)}),this.listChipbetOther=[],this.totalBetB=this.totalBetP=this.totalBetPP=this.totalBetBP=0,this.listBtnBet.forEach(function(t){t.getComponentInChildren(cc.Animation).node.active=!1}),this.animWinResult.node.active=!1,this.setDealerAnim("DiscardCard");for(var e=function(e){var n=i.listCardPlayer[e],a=i.listCardBanker[e];n.node.parent.getChildByName("cardBgWin"+(e+1)).active=!1,a.node.parent.getChildByName("cardBgWin"+(e+1)).active=!1,cc.tween(n.node).delay(.1*e).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){cc.audioEngine.play(t.audio.flipCard,!1,1),n.getComponent(y.default).setCardBack(),n.node.active=!1}).start(),cc.tween(a.node).delay(.1*e).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.audio.playEffect(t.audio.flipCard),n.getComponent(y.default).setCardBack(),a.node.active=!1}).start()},i=this,n=0;n<3;n++)e(n);this.lbScoreP.node.active=!1,this.lbScoreB.node.active=!1,this.players.forEach(function(t){t.resetPlayer()}),this.gameState=R.WAITTING,null!=this.lastPlayerInfoData&&(this.handlePlayerInfo(this.lastPlayerInfoData),this.lastPlayerInfoData=null),this.listLbTotalBet.forEach(function(t){t.setMoneyNoTime(0)}),this.lbTotalGateBetUser.forEach(function(e,i){e.node.parent.active=!1,t.HistoryBet.ListGateBet[i]=t.listTotalUserBetGate[i],t.listTotalUserBetGate[i]=0}),this.historyMini.addItemHistory(this.historyTable),1==this.isAutoExit&&h.Windown.BaccaratController.onClickBackToLobby()}},e.prototype.effectChipPay=function(t,e,i,n,a){void 0===a&&(a=null);var o=this.assets.getChipBet(t);o.isChipPayOther=n==this.listChipbetOther,n.push(o);var r=this.nodeGateBet[e-1];o.parent=r;var s=e>3?20:30,c=h.Windown.RandomNumber(this.listPosChipOnTable[e-1].x-s,this.listPosChipOnTable[e-1].x+s),l=h.Windown.RandomNumber(this.listPosChipOnTable[e-1].y-s,this.listPosChipOnTable[e-1].y+s),p=cc.v2(c,l);i=i<.75?i:.75,o.opacity=0,cc.tween(o).set({x:p.x,y:p.y+50,opacity:0}).delay(i).to(.3,{x:p.x,y:p.y,opacity:255},{easing:cc.easing.sineIn}).call(function(){null!=a&&a()}).start()},e.prototype.showWinResult=function(){return r(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return r(t,void 0,void 0,function(){var t,i=this;return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.animWinResult.node.active=!0,this.audio.playEffect(this.audio.gateWinEffect),this.getGateWinNormal()==E.TIE?(this.animWinResult.node.x=0,this.animWinResult.setSkin("tie"),this.animWinResult.setSlotsToSetupPose()):(this.animWinResult.node.x=this.getGateWinNormal()==E.PLAYER?-170:170,this.animWinResult.setSkin("win"),this.animWinResult.setSlotsToSetupPose(),this.getGateWinNormal()==E.BANKER?this.listCardBanker.forEach(function(t,e){t.node.active&&(t.node.parent.getChildByName("cardBgWin"+(e+1)).active=!0)}):this.listCardPlayer.forEach(function(t,e){t.node.active&&(t.node.parent.getChildByName("cardBgWin"+(e+1)).active=!0)})),this.animWinResult.setAnimation(0,"appear",!1),this.animWinResult.setCompleteListener(function(){i.animWinResult.setAnimation(0,"idle",!0)}),this.setDealerAnim(this.getGateWinNormal()==E.TIE?"Win_Draw":this.getGateWinNormal()==E.PLAYER?"Win_Player":"Win_Banker"),this.listGateWin.forEach(function(t){i.listBtnBet[t-1].getComponentInChildren(cc.Animation).node.active=!0}),[4,this.getMakeDelay(1.5).prosime];case 1:return n.sent(),e(null),[3,3];case 2:return t=n.sent(),p.Util.ThrowErrProsime(t),[3,3];case 3:return[2]}})})})]})})},e.prototype.setDealerAnim=function(t,e,i){var n=this;void 0===e&&(e=!1),void 0===i&&(i=null),this.animDealer.setAnimation(0,t,e),this.animDealer.setCompleteListener(null),null!=i?(this.animDealer.setCompleteListener(i),this.animDealer.setCompleteListener(null)):this.animDealer.setCompleteListener(function(){n.animDealer.setAnimation(0,"Idle_Tap",!0)})},e.prototype.showScore=function(t,e,i){cc.log("arrCArd= ",e);var n=i?2:3,a=this.getScore(e,n),o=cc.tween().set({scale:0}).to(.3,{scale:1},{easing:cc.easing.backOut});t==E.PLAYER?(this.lbScoreP.node.active=!0,i?(this.lbScoreP.setMoneyNoTime(a),o.clone(this.lbScoreP.node).start()):this.lbScoreP.setMoney(a)):(this.lbScoreB.node.active=!0,i?(this.lbScoreB.setMoneyNoTime(a),o.clone(this.lbScoreB.node).start()):this.lbScoreB.setMoney(a))},e.prototype.getScore=function(t,e){void 0===e&&(e=2);for(var i=0,n=0;n<e;n++){var a=t[n];i+=a.N>=10?0:a.N}return i%10},e.prototype.openCard=function(t,e,i){var n=this,a=0;a=t.x>0?10:-10,t.x,t.getPosition(),cc.tween(t).to(.55,{scaleX:.01,angle:i.angle+10,skewX:i.skew.x+a},{easing:cc.easing.cubicInOut}).call(function(){t.getComponent(cc.Sprite).spriteFrame=n.assets.getCardSprite(e),n.audio.playEffect(n.audio.openCard)}).to(.2,{scaleX:i.scaleX,angle:i.angle,skewX:i.skew.x},{easing:cc.easing.cubicInOut}).start()},e.prototype.onCountTimeRemain=function(){var t=this;this.lbTimer.node.active=!0,this.lbWaitting.node.active=!1,cc.Tween.stopAllByTarget(this.lbWaitting),this.lbTimer.string=this.currentTimer+"",this.schedule(function(){t.currentTimer>0?(t.currentTimer--,t.lbTimer.string=t.currentTimer+"",t.currentTimer<6&&cc.tween(t.lbTimer.node).to(.3,{scale:1.5},{easing:cc.easing.sineOut}).to(.3,{scale:1},{easing:cc.easing.sineIn}).start()):t.lbTimer.string="0"},1,this.currentTimer),cc.tween(this.sprTimer).to(this.currentTimer,{fillRange:0}).start()},e.prototype.onCountWaitting=function(){this.lbTimer.node.active=!1,this.lbWaitting.node.active=!0,this.sprTimer.fillRange=0,cc.tween(this.lbWaitting).repeatForever(cc.tween().set({string:""}).delay(.5).set({string:"."}).delay(.5).set({string:".."}).delay(.5).set({string:"..."}).delay(.5)).start()},e.prototype.getPlayerWithId=function(t){return t==h.Windown.User.userId?this.thisPlayer:this.players.find(function(e){return e.id==t})},e.prototype.getListChipValue=function(t){var e=[];return this.getNameChip(t,e),e},e.prototype.getNameChip=function(t,e){for(var i,n,a=0,o=0;o<this.listValueChip.length;o++)if(this.listValueChip[o]>t){a=this.listValueChip[o-1];break}if(0==a)for(o=this.listValueChip.length-1;o>=0;o++)if(t>=this.listValueChip[o]){a=this.listValueChip[o];break}if(i=Math.floor(t/a),t=n=t%a,a>=1e3)for(o=0;o<i;o++)e.push(a);n>0&&this.getNameChip(t,e)},e.prototype.getGateWinNormal=function(){var t=0;switch(this.gateWin){case S.PLAYER:case S.PLAYER_BP:case S.PLAYER_PP:case S.PLAYER_PBP:t=S.PLAYER;break;case S.BANKER:case S.BANKER_BP:case S.BANKER_PP:case S.BANKER_PBP:t=S.BANKER;break;case S.TIE:case S.TIE_BP:case S.TIE_PP:case S.TIE_PBP:t=S.TIE}return t},e.prototype.onClickSendBet=function(t,e){h.Windown.BaccaratController.sendBet(parseInt(e),this.currentBetValue),setTimeout(function(){h.Windown.BaccaratController.isCanSendData=!0},500)},e.prototype.onClickShowMenu=function(){this.audio.playClick(),this.menu.node.active=!0,this.menu.onshow()},e.prototype.onClickShowPopupSoiCau=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return null!=this.popupSoiCau?[3,2]:(h.Windown.UIManager.showLoading(),[4,h.Windown.BaccaratController.loadPrefabBundle("PopupSoiCau")]);case 1:t=e.sent(),this.popupSoiCau=cc.instantiate(t).getComponent(b.default),this.popupSoiCau.node.parent=h.Windown.BaccaratView.node,h.Windown.UIManager.hideLoading(),e.label=2;case 2:return this.popupSoiCau.node.active=!0,this.popupSoiCau.show(),[2]}})})},e.prototype.setupTimeRunInBg=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){t.timeInBg=cc.sys.now()}),cc.game.on(cc.game.EVENT_SHOW,function(){var e=cc.sys.now(),i=t.timeInBg;cc.director.getActionManager().update((e-i)/1e3),cc.Tween.stopAllByTag(1),(e-i)/1e3>15&&null!=h.Windown.BaccaratController&&h.Windown.BaccaratController.onClickBackToLobby()})},o([w([v.default])],e.prototype,"players",void 0),o([w(v.default)],e.prototype,"thisPlayer",void 0),o([w(u.default)],e.prototype,"assets",void 0),o([w(g.default)],e.prototype,"menu",void 0),o([w(f.default)],e.prototype,"buttonBetController",void 0),o([w(P.default)],e.prototype,"historyMini",void 0),o([w(_.default)],e.prototype,"popupHistoryBetView",void 0),o([w(d.default)],e.prototype,"audio",void 0),o([w(b.default)],e.prototype,"popupSoiCau",void 0),o([w(cc.Node)],e.prototype,"nodeGroupUser",void 0),o([w([cc.Node])],e.prototype,"nodeGateBet",void 0),o([w([y.default])],e.prototype,"listCardPlayer",void 0),o([w([y.default])],e.prototype,"listCardBanker",void 0),o([w(cc.Node)],e.prototype,"nodeGetChip",void 0),o([w(cc.Label)],e.prototype,"lbOtherPlayer",void 0),o([w(cc.Label)],e.prototype,"lbTimer",void 0),o([w(cc.Label)],e.prototype,"lbWaitting",void 0),o([w(cc.Label)],e.prototype,"lbSession",void 0),o([w(cc.Sprite)],e.prototype,"sprTimer",void 0),o([w(c.default)],e.prototype,"lbScoreP",void 0),o([w(c.default)],e.prototype,"lbScoreB",void 0),o([w(c.default)],e.prototype,"lbTotalBet",void 0),o([w(sp.Skeleton)],e.prototype,"animDealer",void 0),o([w(sp.Skeleton)],e.prototype,"animWinResult",void 0),o([w([cc.Vec2])],e.prototype,"posPayChipOther",void 0),o([w(c.default)],e.prototype,"lbTotalBetB",void 0),o([w(c.default)],e.prototype,"lbTotalBetP",void 0),o([w(c.default)],e.prototype,"lbTotalBetT",void 0),o([w(c.default)],e.prototype,"lbTotalBetBP",void 0),o([w(c.default)],e.prototype,"lbTotalBetPP",void 0),o([w([cc.Vec2])],e.prototype,"listPosChipOnTable",void 0),o([w([cc.Label])],e.prototype,"lbTotalGateBetUser",void 0),o([m],e)}(cc.Component);i.default=T,cc._RF.pop()},{"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/MakeDelay":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./Baccarat.Assets":"Baccarat.Assets","./Baccarat.Audio":"Baccarat.Audio","./Baccarat.ButtonBet":"Baccarat.ButtonBet","./Baccarat.Card":"Baccarat.Card","./Baccarat.HistoryBet":"Baccarat.HistoryBet","./Baccarat.HistoryMini":"Baccarat.HistoryMini","./Baccarat.MenuView":"Baccarat.MenuView","./Baccarat.Player":"Baccarat.Player","./Baccarat.PopupHistory":"Baccarat.PopupHistory","./Baccarat.SoiCauView":"Baccarat.SoiCauView"}]},{},["Baccarat.Assets","Baccarat.Audio","Baccarat.BigRoad","Baccarat.ButtonBet","Baccarat.Card","Baccarat.ChipBet","Baccarat.DishRoadBoard","Baccarat.HistoryBet","Baccarat.HistoryMini","Baccarat.MenuView","Baccarat.Player","Baccarat.PopupHistory","Baccarat.ScoreBoard","Baccarat.SettingView","Baccarat.SoiCauView","BaccaratController","BaccaratView"]);