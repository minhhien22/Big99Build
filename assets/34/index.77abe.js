window.__require=function e(t,n,o){function i(r,u){if(!n[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var a="function"==typeof __require&&__require;if(!u&&a)return a(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){return i(t[r][1][e]||e)},l,l.exports,e,t,n,o)}return n[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AssetDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"1d419F3ytxPxpU6nhk4DeNG","AssetDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,u=r.ccclass,s=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listSpItemBlur=[],t.listSpItem=[],t.listSFItem=[],t.itemIconEf=null,t.itemEffNearWin=null,t.itemCanhHoa=null,t.itemXu=null,t.itemScaterShow=null,t.itemScaterIdle=null,t.itemNoLuBo=null,t.itemNoDieuThuyen=null,t.itemWildDieuThuyen=null,t.itemParticleLuBo=null,t.poolIconEf=new cc.NodePool,t.poolEffNearWin=new cc.NodePool,t.poolCanhHoa=new cc.NodePool,t.poolXu=new cc.NodePool,t.poolScaterShow=new cc.NodePool,t.poolScaterIdle=new cc.NodePool,t.poolNoLuBo=new cc.NodePool,t.poolNoDieuThuyen=new cc.NodePool,t.poolWildDieuThuyen=new cc.NodePool,t.poolParticleLuBo=new cc.NodePool,t}return i(t,e),t.prototype.getIconEf=function(){var e=null;return(e=this.poolIconEf.size()>0?this.poolIconEf.get():cc.instantiate(this.itemIconEf)).active=!0,e},t.prototype.putIconEf=function(e){this.poolIconEf.put(e)},t.prototype.getNearWin=function(){var e=null;return(e=this.poolEffNearWin.size()>0?this.poolEffNearWin.get():cc.instantiate(this.itemEffNearWin)).active=!0,e},t.prototype.putNearWin=function(e){this.poolEffNearWin.put(e)},t.prototype.getCanhHoa=function(){var e=null;return(e=this.poolCanhHoa.size()>0?this.poolCanhHoa.get():cc.instantiate(this.itemCanhHoa)).active=!0,e},t.prototype.putCanhHoa=function(e){this.poolCanhHoa.put(e)},t.prototype.getXu=function(){var e=null;return this.poolXu.size()>0?e=this.poolXu.get():(e=cc.instantiate(this.itemXu)).name="Xu",e.active=!0,e},t.prototype.putXu=function(e){this.poolXu.put(e)},t.prototype.getScaterShow=function(){var e=null;return this.poolScaterShow.size()>0?e=this.poolScaterShow.get():(e=cc.instantiate(this.itemScaterShow)).name="ScaterShow",e.active=!0,e},t.prototype.putScaterShow=function(e){this.poolScaterShow.put(e)},t.prototype.getScaterIdle=function(){var e=null;return this.poolScaterIdle.size()>0?e=this.poolScaterIdle.get():(e=cc.instantiate(this.itemScaterIdle)).name="ScaterIdle",e.active=!0,e},t.prototype.putScaterIdle=function(e){this.poolScaterIdle.put(e)},t.prototype.getNoLuBo=function(){var e=null;return this.poolNoLuBo.size()>0?e=this.poolNoLuBo.get():(e=cc.instantiate(this.itemNoLuBo)).name="NoLuBo",e.active=!0,e},t.prototype.putNoLuBo=function(e){this.poolNoLuBo.put(e)},t.prototype.getNoDieuThuyen=function(){var e=null;return this.poolNoDieuThuyen.size()>0?e=this.poolNoDieuThuyen.get():(e=cc.instantiate(this.itemNoDieuThuyen)).name="NoDieuThuyen",e.active=!0,e},t.prototype.putNoDieuThuyen=function(e){this.poolNoDieuThuyen.put(e)},t.prototype.getWildDieuThuyen=function(){var e=null;return this.poolWildDieuThuyen.size()>0?e=this.poolWildDieuThuyen.get():(e=cc.instantiate(this.itemWildDieuThuyen)).name="WildDieuThuyen",e.active=!0,e},t.prototype.putWildDieuThuyen=function(e){this.poolWildDieuThuyen.put(e)},t.prototype.getParticleLuBo=function(){var e=null;return this.poolParticleLuBo.size()>0?e=this.poolParticleLuBo.get():(e=cc.instantiate(this.itemParticleLuBo)).name="ParticleLuBo",e.active=!0,e},t.prototype.putParticleLuBo=function(e){this.poolParticleLuBo.put(e)},t.prototype.onDestroy=function(){this.poolIconEf.clear(),this.poolEffNearWin.clear(),this.poolCanhHoa.clear(),this.poolXu.clear(),this.poolScaterShow.clear(),this.poolScaterIdle.clear(),this.poolNoLuBo.clear(),this.poolNoDieuThuyen.clear(),this.poolWildDieuThuyen.clear(),this.poolParticleLuBo.clear()},c([s([cc.SpriteFrame])],t.prototype,"listSpItemBlur",void 0),c([s([sp.SkeletonData])],t.prototype,"listSpItem",void 0),c([s([cc.SpriteFrame])],t.prototype,"listSFItem",void 0),c([s(cc.Node)],t.prototype,"itemIconEf",void 0),c([s(cc.Node)],t.prototype,"itemEffNearWin",void 0),c([s(cc.Node)],t.prototype,"itemCanhHoa",void 0),c([s(cc.Node)],t.prototype,"itemXu",void 0),c([s(cc.Node)],t.prototype,"itemScaterShow",void 0),c([s(cc.Node)],t.prototype,"itemScaterIdle",void 0),c([s(cc.Node)],t.prototype,"itemNoLuBo",void 0),c([s(cc.Node)],t.prototype,"itemNoDieuThuyen",void 0),c([s(cc.Node)],t.prototype,"itemWildDieuThuyen",void 0),c([s(cc.Node)],t.prototype,"itemParticleLuBo",void 0),c([u],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],AudioDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"393e5qTtCZB2oxSav0+xPXb","AudioDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/Parent/AudioManager"),u=cc._decorator,s=u.ccclass,a=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.click=null,t.big_win_start=null,t.bonus_multiple_hide=null,t.diao_chan_bg=null,t.diao_chan_expand=null,t.dong_zhuo_bg=null,t.dong_zhuo_four_times=null,t.dong_zhuo_laughing=null,t.dong_zhuo_money_fall=null,t.feature_exchange=null,t.five_kind=null,t.infobar_uplifter=null,t.infobar_uplifter_highlight=null,t.list_item_click=null,t.load_coins=null,t.lv_bu_attacked=null,t.lv_bu_bg=null,t.lv_bu_horse_neigh=null,t.lv_bu_slash_four=null,t.lv_bu_slash_one=null,t.lv_bu_slash_three=null,t.lv_bu_slash_two=null,t.lv_bu_symbol_start=null,t.medium_win=null,t.medium_win_coins=null,t.mega_win_end=null,t.mega_win_start=null,t.menu_icon_press=null,t.multiple_free_spin_effect=null,t.result_count_end=null,t.result_counting=null,t.scatter_explosion=null,t.scatter_scrolling_long=null,t.scatter_scrolling_short=null,t.selector_bgm=null,t.slider_effect=null,t.slot_end_scroll=null,t.slot_scrolling=null,t.slot_scrolling_two=null,t.small_win=null,t.small_win_coins=null,t.spin_click=null,t.wallet_counting_above=null,t.win_rolling=null,t.luboChemGio=null,t}return i(t,e),t.prototype.playClick=function(){this.playEffect(this.click)},t.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.3))},t.prototype.playChooseFreeType=function(){this.stopMusic(),this.playEffectNoStop(this.selector_bgm,1,!0)},t.prototype.offChooseFree=function(){this.stopEffect(this.selector_bgm)},t.prototype.offFree=function(){this.stopEffect(this.lv_bu_bg),this.stopEffect(this.dong_zhuo_bg),this.stopEffect(this.diao_chan_bg)},c([a(cc.AudioClip)],t.prototype,"click",void 0),c([a(cc.AudioClip)],t.prototype,"big_win_start",void 0),c([a(cc.AudioClip)],t.prototype,"bonus_multiple_hide",void 0),c([a(cc.AudioClip)],t.prototype,"diao_chan_bg",void 0),c([a(cc.AudioClip)],t.prototype,"diao_chan_expand",void 0),c([a(cc.AudioClip)],t.prototype,"dong_zhuo_bg",void 0),c([a(cc.AudioClip)],t.prototype,"dong_zhuo_four_times",void 0),c([a(cc.AudioClip)],t.prototype,"dong_zhuo_laughing",void 0),c([a(cc.AudioClip)],t.prototype,"dong_zhuo_money_fall",void 0),c([a(cc.AudioClip)],t.prototype,"feature_exchange",void 0),c([a(cc.AudioClip)],t.prototype,"five_kind",void 0),c([a(cc.AudioClip)],t.prototype,"infobar_uplifter",void 0),c([a(cc.AudioClip)],t.prototype,"infobar_uplifter_highlight",void 0),c([a(cc.AudioClip)],t.prototype,"list_item_click",void 0),c([a(cc.AudioClip)],t.prototype,"load_coins",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_attacked",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_bg",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_horse_neigh",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_slash_four",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_slash_one",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_slash_three",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_slash_two",void 0),c([a(cc.AudioClip)],t.prototype,"lv_bu_symbol_start",void 0),c([a(cc.AudioClip)],t.prototype,"medium_win",void 0),c([a(cc.AudioClip)],t.prototype,"medium_win_coins",void 0),c([a(cc.AudioClip)],t.prototype,"mega_win_end",void 0),c([a(cc.AudioClip)],t.prototype,"mega_win_start",void 0),c([a(cc.AudioClip)],t.prototype,"menu_icon_press",void 0),c([a(cc.AudioClip)],t.prototype,"multiple_free_spin_effect",void 0),c([a(cc.AudioClip)],t.prototype,"result_count_end",void 0),c([a(cc.AudioClip)],t.prototype,"result_counting",void 0),c([a(cc.AudioClip)],t.prototype,"scatter_explosion",void 0),c([a(cc.AudioClip)],t.prototype,"scatter_scrolling_long",void 0),c([a(cc.AudioClip)],t.prototype,"scatter_scrolling_short",void 0),c([a(cc.AudioClip)],t.prototype,"selector_bgm",void 0),c([a(cc.AudioClip)],t.prototype,"slider_effect",void 0),c([a(cc.AudioClip)],t.prototype,"slot_end_scroll",void 0),c([a(cc.AudioClip)],t.prototype,"slot_scrolling",void 0),c([a(cc.AudioClip)],t.prototype,"slot_scrolling_two",void 0),c([a(cc.AudioClip)],t.prototype,"small_win",void 0),c([a(cc.AudioClip)],t.prototype,"small_win_coins",void 0),c([a(cc.AudioClip)],t.prototype,"spin_click",void 0),c([a(cc.AudioClip)],t.prototype,"wallet_counting_above",void 0),c([a(cc.AudioClip)],t.prototype,"win_rolling",void 0),c([a(cc.AudioClip)],t.prototype,"luboChemGio",void 0),c([s],t)}(r.default);n.default=l,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],DetailHistoryDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"ef1ab1A745CcIxS9KEtTBIH","DetailHistoryDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/DefineTs/TextDefine"),u=e("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentItem=null,t.lbTitle=null,t.lbTime=null,t.lbBet=null,t.lbWin=null,t.lbMNUser=null,t.parentMutil=null,t.spAtlas=null,t.parentItemLine=null,t.colorOf=null,t.isFreeSpin=!1,t}return i(t,e),t.prototype.show=function(e){this.node.active=!0,this.node.x=721.812,this.node.stopAllActions(),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,0,0),cc.fadeIn(.3).easing(cc.easeElasticIn(3))));var t=e.get("date"),n=e.get("infolog"),o=null;try{o=JSON.parse(n)}catch(s){return void u.Windown.Dialog.showLog(r.TextDefine.Error)}this.isFreeSpin=o.freeSpin;var i=JSON.parse(o.views2);this.setResult(i),this.setLineAn(o.listLineWin),o.isTakeJP?this.lbTitle.string="N\u1ed5 H\u0169":o.freeSpin?this.lbTitle.string="Quay mi\u1ec5n ph\xed":this.lbTitle.string="Quay th\u01b0\u1eddng",this.lbTime.string=u.Windown.formatDate(new Date(t),"dd/MM HH:mm:ss"),this.lbBet.string=u.Windown.formatNumber(30*o.agBet),this.lbWin.string=u.Windown.formatNumber(o.agWin),this.lbMNUser.string=u.Windown.formatNumber(o.agUser);var c=o.freeNow;this.parentMutil.active=!0,this.parentMutil.children.forEach(function(e){return e.active=!1}),2==c?this.parentMutil.children[0].active=!0:4==c?this.parentMutil.children[1].active=!0:this.parentMutil.active=!1},t.prototype.setResult=function(e){for(var t=this.parentItem.children,n=0;n<e.length;n++)for(var o=e[n],i=0;i<o.length;i++){var c=o[i];t[n].children[i].getComponent(cc.Sprite).spriteFrame=u.Windown.DieuThuyen.asset.listSFItem[c],t[n].children[i].color=this.colorOf}},t.prototype.setLineAn=function(e){for(var t=this.parentItem.children,n=this.parentItemLine,o=n.children,i=o[0],c=0,r=e.length;c<r;c++){var s=e[c],a=s.id,l=s.agWinLine,p=JSON.parse(s.lineIndex),h=a;h<10&&(h="0"+h);for(var d=l,f=0;f<p.length;f++)t[f].children[p[f]].color=cc.Color.WHITE;var y=o[c];null==y&&((y=cc.instantiate(i)).parent=n),y.active=!0,y.children[0].getComponent(cc.Sprite).spriteFrame=this.spAtlas.getSpriteFrame(h.toString()),y.children[1].getComponent(cc.Label).string="W:"+u.Windown.formatMoney(d,1)}for(c=e.length;c<o.length;c++)o[c].active=!1},t.prototype.onClickClose=function(){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,721.812,0),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){e.node.active=!1})))},c([l(cc.Node)],t.prototype,"parentItem",void 0),c([l(cc.Label)],t.prototype,"lbTitle",void 0),c([l(cc.Label)],t.prototype,"lbTime",void 0),c([l(cc.Label)],t.prototype,"lbBet",void 0),c([l(cc.Label)],t.prototype,"lbWin",void 0),c([l(cc.Label)],t.prototype,"lbMNUser",void 0),c([l(cc.Node)],t.prototype,"parentMutil",void 0),c([l(cc.SpriteAtlas)],t.prototype,"spAtlas",void 0),c([l(cc.Node)],t.prototype,"parentItemLine",void 0),c([l(cc.Color)],t.prototype,"colorOf",void 0),c([a],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Windown":void 0}],DieuThuyenView:[function(e,t,n){"use strict";cc._RF.push(t,"4d531ADUAlKnJwp03UHWXVZ","DieuThuyenView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../Scritps/DefineTs/EVENT_MANAGER"),a=e("../../../Scritps/DefineTs/PlayerPP"),l=e("../../../Scritps/DefineTs/REQUEST_CODE"),p=e("../../../Scritps/DefineTs/StateReelSlot"),h=e("../../../Scritps/DefineTs/TextDefine"),d=e("../../../Scritps/Game/GAME_TYPE"),f=e("../../../Scritps/Network/ConectManager"),y=e("../../../Scritps/Obs/LbMoneyChange"),v=e("../../../Scritps/Util"),m=e("../../../Scritps/Windown"),w=e("./AssetDieuThuyen"),g=e("./AudioDieuThuyen"),T=e("./EffectDieuThuyen"),S=e("./InfoBarController"),b=e("./ItemReel/ItemSlotDieuThuyen"),_=e("./LichSuDieuThuyen"),D=e("./SetingSpinDieuThuyen"),W=e("./StateSpin/SpinNormal"),C=cc._decorator,A=C.ccclass,F=C.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bkgSprite=null,t.asset=null,t.parentItem=null,t.parentLine=null,t.lb_Mn_Per_Line=null,t.effect=null,t.nodeBtnPlay=null,t.nodeBtnSeting=null,t.bangThuong=null,t.cachChoi=null,t.labelChipReviceInBox=null,t.lb_totalBet=null,t.lb_FSLeft=null,t.lb_CountAuto=null,t.audio=null,t.btnSpin=null,t.nodeFireLuBo=null,t.infoBar=null,t.parentMutil=null,t.toggleMusic=null,t.parentItemBet=null,t.setingSpin=null,t.listNodeDeactive=[],t.popupLichSu=null,t.currentMutil=1,t.stateSpin=null,t.listColum=[],t.listConfigBet=[],t.listResult=[],t.listResult2=[],t.listIdLineAn=[],t.dataFinish=null,t.sfs=null,t.roomSFS=null,t.sfsObjTest=null,t.gameType=null,t.stateReel=0,t.totalLineBet=30,t.curRoomBet=50,t.funEnd=null,t.isShowBtnPlay=!0,t.listConfigLine=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[0,1,1,1,0],[2,1,1,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,2,2,2,0],[2,0,0,0,2],[1,0,1,0,1],[1,2,1,2,1],[0,2,0,2,0],[2,0,2,0,2],[0,1,0,1,0],[2,1,2,1,2],[0,2,1,2,0],[2,0,1,0,2],[1,0,2,0,1],[1,2,0,2,1],[0,0,2,0,0],[2,2,0,2,2],[0,0,0,0,1],[2,2,2,2,1],[1,1,1,1,0]],t}return i(t,e),t.prototype.onLoad=function(){m.Windown.DieuThuyen=this,this.initItem(),cc.log("start dieu thuyen"),this.gameType=d.default.DieuThuyen,this.sfs=f.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(s.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.setupView(),this.stateReel=p.default.WAITING,this.stateSpin=new W.default,this.sendJoinRoom()},t.prototype.start=function(){m.Windown.AudioManager.isActiveSound&&m.Windown.AudioManager.isActiveMusic?(this.toggleMusic.isChecked=!0,this.toggleMusic.checkMark.node.active=!0,this.toggleMusic.node.children[0].active=!1):(this.toggleMusic.isChecked=!1,this.toggleMusic.checkMark.node.active=!1,this.toggleMusic.node.children[0].active=!0)},t.prototype.sendJoinRoom=function(){cc.log("send creat room");try{var e=f.ConectManager.getIns().getValibleRoomName(),t=new SFS2X.RoomSettings(e),n=new SFS2X.RoomExtension("DieuThuyenExtension","ext.Room.SlotDieuThuyen.SlotGameView");t.extension=n,t.isGame=!0,t.maxUsers=1,t.groupId="DieuThuyen",this.sfs.send(new SFS2X.CreateRoomRequest(t,!0))}catch(o){cc.error(o),this.onDisconnect()}},t.prototype.onDisconnect=function(){cc.log("disconnect"),m.Windown.UIManager.hideLoading(),m.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},t.prototype.userExitRoom=function(e){cc.log("user exit room"),"DieuThuyen"==e.room.groupId&&e.user.isItMe&&cc.director.loadScene("main")},t.prototype.onCreateError=function(){cc.log("creat errr"),m.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),m.Windown.Dialog.showLog(h.TextDefine.ERR_JOIN_ROOM)},t.prototype.onJoinRoom=function(e){var t=e.room;if("DieuThuyen"==t.groupId){this.roomSFS=t,m.Windown.UIManager.hideLoadingData();var n=t.getVariable("cf").value;cc.log(n);var o=[],i=JSON.parse(n);for(var c in i){var r=Object.create(null);r.bet=parseInt(c),r.perJp=i[c].percentPot/100,o.push(r)}o.sort(function(e,t){return e.bet-t.bet}),this.listConfigBet=o,this.infoBar.showRdContent();for(var u=this.parentItemBet.children[0],s=0,a=o.length;s<a;s++){var l=this.parentItemBet.children[s];null==l&&((l=cc.instantiate(u)).parent=this.parentItemBet),l.active=!0,l.getComponent(cc.Button).clickEvents[0].customEventData=s.toString(),l.getComponentInChildren(cc.Label).string=m.Windown.formatNumber(o[s].bet*this.totalLineBet)}this.onClickChooseBet(null,0),cc.log(JSON.stringify(o))}},t.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),m.Windown.UIManager.hideLoading(),m.Windown.UIManager.hideLoadingData(),m.Windown.Dialog.showLog(h.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},t.prototype.extResponse=function(e){var t=e.cmd,n=e.params;switch(t){case l.REQUEST_CODE.SpinDieuThuyen:cc.log(m.Windown.SFSObjToJson(n)),this.handleFinish(n);break;case l.REQUEST_CODE.HistoryDieuThuyen:this.popupLichSu.responseServer(n)}},t.prototype.handleFinish=function(e){var t=this;if(e.containsKey(a.PlayerPP.ERR_MESSAGE))return this.stateSpin.onEnd(),m.Windown.Dialog.showLog(e.get(a.PlayerPP.ERR_MESSAGE)),void this.activeAllBtn();if(!(e.containsKey("agUser")&&e.containsKey("agBet")&&e.containsKey("views")&&e.containsKey("views2")&&e.containsKey("agWin")))return this.stateSpin.onEnd(),m.Windown.Dialog.showLog(h.TextDefine.Error),void this.activeAllBtn();this.dataFinish=e,m.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.get("agUser"),this.dataFinish.getLong("agWin")),this.truTienBet(this.dataFinish.get("agBet")*this.totalLineBet,this.dataFinish.get("agUser")),this.listResult=JSON.parse(e.get("views")),this.listResult2=JSON.parse(e.get("views2")),this.setResult(),this.getAllLineItem();var n=this.stateSpin.isMaxSpeed?2.5:1;this.scheduleOnce(function(){t.stateReel=p.default.CAN_STOP;var e=t.stateSpin.isMaxSpeed?.2:.5;t.scheduleOnce(t.funEnd=function(){t.stateSpin.onEnd()},e)},.4/n)},t.prototype.onDestroy=function(){m.Windown.DieuThuyen=null,this.dataFinish&&(m.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),m.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),m.Windown.UIManager.changeRotation()},t.prototype.setupView=function(){var e=cc.find("Game",this.node);if(cc.sys.isMobile)e.angle=90;else{var t=cc.winSize.height/1280;e.angle=0,e.scale=t}m.Windown.UIManager.changeRotation(!0),this.bkgSprite.setContentSize(cc.winSize.height,cc.winSize.width)},t.prototype.initItem=function(){for(var e=this.parentItem.children[0],t=0;t<5;t++){var n=this.parentItem.children[t];null!=n&&"fire"!=n.name||((n=cc.instantiate(e)).parent=this.parentItem);var o=n.getComponent(b.default);this.listColum.push(o),o.index=t,o.randomFirtGame(),o.node.x=o.node.width*t+o.node.width/2+2*t+7,o.node.y=0}this.nodeFireLuBo.parent=this.parentItem,this.nodeFireLuBo.setPosition(293.488,-309.26)},t.prototype.setResult=function(){var e=this,t=0;this.listResult.forEach(function(n){e.listColum[t].setResult(n),t++})},t.prototype.getBo5=function(){for(var e=!1,t=0,n=this.listIdLineAn;t<n.length;t++)if(n[t].listItem.length>4){e=!0;break}return e},t.prototype.getLitsChangLuBo=function(){for(var e=[[-1,-1,-1],[-1,-1,-1],[-1,-1,-1],[-1,-1,-1],[-1,-1,-1]],t=JSON.parse(this.dataFinish.get("views2")),n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)0==n&&1==o||t[n][o]!=this.listResult[n][o]&&(e[n][o]=o);return e},t.prototype.getAllLineItem=function(){this.listIdLineAn=[];var e=this.dataFinish.getSFSArray("listLineWin");if(!(e.size()<1)){for(var t=0,n=e.size();t<n;t++){var o=e.getSFSObject(t),i=o.get("id"),c=o.get("agWinLine"),r=Object.create(null);r.id=i,r.money=c,r.listItem=JSON.parse(o.get("lineIndex")),this.listIdLineAn.push(r)}cc.log(JSON.stringify(this.listIdLineAn))}},t.prototype.getListActiveByIdLine=function(e,t){for(var n=[],o=this.getIdItemByIdLine(e,t),i=this.listConfigLine[e-1].slice(),c=0;c<5;c++){var r=t[c][i[c]];if(9!=r&&r!=o)break;n.push(i[c])}return n},t.prototype.getIdItemByIdLine=function(e,t){for(var n=this.listConfigLine[e-1].slice(),o=0,i=n.length;o<i;o++){var c=t[o][n[o]];if(9!=c)return c}return cc.error("loi get id Line"),-1},t.prototype.getListActiveScaster=function(){for(var e=[],t=this.listResult,n=0,o=0;o<t.length;o++)n>=2?e.push(!0):e.push(!1),t[o].includes(10)&&n++;return e},t.prototype.showEffectMoneyPerLine=function(e){this.lb_Mn_Per_Line.string=m.Windown.formatNumber(e),this.lb_Mn_Per_Line.node.active=!0,this.lb_Mn_Per_Line.node.stopAllActions(),this.lb_Mn_Per_Line.node.opacity=255,this.lb_Mn_Per_Line.node.runAction(cc.fadeOut(1.4).easing(cc.easeSineIn()))},t.prototype.setMutilMoney=function(){this.currentMutil=this.dataFinish.get("freeBonus")},t.prototype.getMutilMoney=function(){return this.currentMutil},t.prototype.showMoneyAllWin=function(e){this.labelChipReviceInBox.setMoney(e),m.Windown.MoneyUser.removeDelay(this.gameType)},t.prototype.makeDelay=function(e){var t=this;return new Promise(function(n){t.scheduleOnce(n,e)})},t.prototype.onClickBtnSpin=function(){return r(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.stateReel!=p.default.WAITING?[3,2]:(this.stateReel=p.default.RUN,this.setStateEffBtnSpin(),this.offAllBtn(),[4,this.stateSpin.onStart()]);case 1:return t.sent(),cc.log("chay xuogn duoi nay"),this.sendClickSpin(),[3,3];case 2:this.stateReel==p.default.CAN_STOP?(this.unschedule(this.funEnd),this.stateReel=p.default.STOP,this.stateSpin.onForceEnd()):this.stateReel==p.default.STOP||this.stateReel==p.default.SHOW_EFFECT&&(this.audio.playClick(),this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),t.label=3;case 3:return[3,5];case 4:return e=t.sent(),v.Util.ThrowErrProsime(e),[3,5];case 5:return[2]}})})},t.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return f.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),void(this.sfsObjTest=null);var e=f.ConectManager.getIns().getSFSObj();e.putInt("bet",this.curRoomBet),f.ConectManager.getIns().sendRequest(l.REQUEST_CODE.SpinDieuThuyen,e,this.roomSFS)},t.prototype.setStateEffBtnSpin=function(){var e=this.btnSpin.children[2].getComponent(cc.Animation),t=this.btnSpin.children[3];if(this.stateReel!=p.default.STOP){var n=cc.Material.getBuiltinMaterial("2d-sprite");t.getComponent(cc.Sprite).setMaterial(0,n)}if(this.stateReel==p.default.WAITING||this.stateReel==p.default.SHOW_EFFECT)t.children[0].active=!1,t.runAction(cc.repeatForever(cc.rotateBy(3,-360)));else if(this.stateReel==p.default.RUN)this.audio.playEffect(this.audio.spin_click),e.play("BtnSpinTab"),t.stopAllActions(),t.runAction(cc.repeatForever(cc.rotateBy(.3,-360))),t.children[0].active=!0;else if(this.stateReel==p.default.STOP){t.stopAllActions(),t.children[0].active=!1;var o=cc.Material.getBuiltinMaterial("2d-gray-sprite");t.getComponent(cc.Sprite).setMaterial(0,o)}},t.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(e){e.interactable=!1,e.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")})},t.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(e){e.interactable=!0,e.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#FFA300")})},t.prototype.activeLbFree=function(){this.lb_FSLeft.node.parent.active=!0},t.prototype.offLbFree=function(){this.lb_FSLeft.node.parent.active=!1},t.prototype.activeNodeMutil=function(){var e=this.getMutilMoney();1!=e&&(cc.log("mutil la: "+e),this.parentMutil.active=!0,this.parentMutil.children.forEach(function(e){e.active=!1}),2==e?this.parentMutil.children[0].active=!0:this.parentMutil.children[1].active=!0)},t.prototype.offNodeMutil=function(){this.parentMutil.active=!1},t.prototype.getNodeActionMutil=function(){var e=this.getMutilMoney();return 2==e?this.parentMutil.children[0]:4==e?this.parentMutil.children[1]:void 0},t.prototype.setLbFreeSpinLeft=function(e){var t=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=e,e<1?(cc.find("last_spin",t).active=!0,cc.find("remaining_spin",t).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last_spin",t).active=!1,cc.find("remaining_spin",t).active=!0,this.lb_FSLeft.node.active=!0)},t.prototype.setCountAuto=function(e){this.lb_CountAuto.node.parent.active=!(e<1),this.lb_CountAuto.string=e.toString()},t.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1},t.prototype.onClickSeting=function(){if(this.audio.playClick(),cc.log("click onClickSeting"),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)e=cc.v2(0,-732.036),this.nodeBtnPlay.runAction(cc.fadeIn(.25)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.2),cc.moveTo(.2,e)));else{this.nodeBtnPlay.stopAllActions(),this.nodeBtnSeting.stopAllActions();var e=cc.v2(0,-525.727);this.nodeBtnPlay.runAction(cc.fadeOut(.2)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.25),cc.moveTo(.2,e)))}},t.prototype.resetForNewGame=function(){this.stateReel=p.default.WAITING,this.setStateEffBtnSpin(),this.parentLine.children.forEach(function(e){return e.active=!1}),this.labelChipReviceInBox.setMoney(this.dataFinish.getLong("agWin"))},t.prototype.actionHideBtnSpin=function(){var e=this;this.btnSpin.stopAllActions(),this.btnSpin.runAction(cc.sequence(cc.spawn(cc.fadeOut(.32),cc.moveTo(.32,cc.v2(0,-712))),cc.callFunc(function(){e.btnSpin.active=!1})))},t.prototype.actionShowBtnSpin=function(){this.btnSpin.active=!0,this.btnSpin.runAction(cc.spawn(cc.fadeIn(.32),cc.moveTo(.32,cc.v2(0,-533.092))))},t.prototype.showContentTip=function(){},t.prototype.offAllLineWin=function(){this.lb_Mn_Per_Line.node.active=!1,this.parentLine.children.forEach(function(e){return e.active=!1})},t.prototype.onClickOpenChooseBet=function(){this.audio.playClick();var e=this.parentItemBet.parent.parent.parent;e.active?(e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(.3,1,0).easing(cc.easeBackIn()),cc.callFunc(function(){e.active=!1})))):(e.active=!0,e.stopAllActions(),e.runAction(cc.scaleTo(.3,1,1).easing(cc.easeBackOut())))},t.prototype.onClickOpenChooseTypeSpin=function(){this.audio.playClick(),this.setingSpin.show()},t.prototype.onClickChooseBet=function(e,t){if(this.audio.playClick(),this.listConfigBet.length<1&&m.Windown.Dialog.showLog(h.TextDefine.Error),this.stateSpin.lastFreeSpinLeft>0)m.Windown.Dialog.showLog(h.TextDefine.ERR_CHANGE_BET_FS);else{var n=JSON.parse(t);this.curRoomBet=this.listConfigBet[n].bet,this.lb_totalBet.string=m.Windown.formatNumber(this.totalLineBet*this.curRoomBet),"string"==typeof t&&this.onClickOpenChooseBet()}},t.prototype.onClickMusic=function(){var e=this.toggleMusic.isChecked;this.toggleMusic.node.children[0].active=!e,m.Windown.AudioManager?(m.Windown.AudioManager.isActiveSound=e,m.Windown.AudioManager.isActiveMusic=e):e?(m.Windown.setLocalStorage("sound","on"),m.Windown.setLocalStorage("music","on")):(m.Windown.setLocalStorage("sound","off"),m.Windown.setLocalStorage("music","off"))},t.prototype.onClickBackToLobby=function(){this.roomSFS?f.ConectManager.getIns().sendLeaveRoom(this.roomSFS):cc.director.loadScene("main")},t.prototype.onClickCachChoi=function(){this.cachChoi.active=!0,this.cachChoi.y=-1280,this.cachChoi.stopAllActions(),this.cachChoi.runAction(cc.moveTo(.3,0,0))},t.prototype.onCloseCachChoi=function(){var e=this;this.cachChoi.stopAllActions(),this.cachChoi.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){e.cachChoi.active=!1})))},t.prototype.closeBangThuong=function(){var e=this;this.bangThuong.stopAllActions(),this.bangThuong.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){e.bangThuong.active=!1})))},t.prototype.onClickBangThuong=function(){this.bangThuong.active=!0,this.bangThuong.y=-1280,this.bangThuong.stopAllActions(),this.bangThuong.runAction(cc.moveTo(.3,0,0))},t.prototype.onClickLichSu=function(){this.popupLichSu.show()},t.prototype.onClickTest=function(e,t){return r(this,void 0,void 0,function(){var e;return u(this,function(){return(e=f.ConectManager.getIns().getSFSObj()).putInt("bet",this.curRoomBet),"2 scater"==t?e.putUtfString("arr","[[10,8,2],[10,8,0],[3,8,0],[2,8,0],[1,8,5]]"):"3 scater"==t?e.putUtfString("arr","[[0,8,2],[10,8,0],[10,8,0],[2,8,0],[10,8,5]]"):"4 scater"==t?e.putUtfString("arr","[[10,8,2],[10,8,0],[10,8,0],[10,8,0],[1,8,5]]"):"5 scater"==t&&e.putUtfString("arr","[[10,8,2],[10,8,0],[10,8,0],[10,8,0],[10,8,5]]"),this.sfsObjTest=e,this.onClickBtnSpin(),[2]})})},t.prototype.truTienBet=function(e,t){0!=e&&m.Windown.MoneyUser.subMoney(e,t)},t.prototype.playerEffect1=function(e,t,n){var o=e.parent.convertToWorldSpaceAR(e.getPosition()),i=t.convertToNodeSpaceAR(o),c=cc.instantiate(e);c.parent=t,c.opacity=100,c.setPosition(i),n&&(c.x+=n.x,c.y+=n.y),c.runAction(cc.sequence(cc.spawn(cc.scaleBy(.17,1.6*c.scale),cc.fadeOut(.17)),cc.callFunc(function(){c.destroy()})))},t.prototype.playerEffect2=function(e,t){var n=e.scale;e.stopAllActions(),e.runAction(cc.sequence(cc.scaleTo(.1,.6*n),cc.callFunc(function(){var n=e.parent.convertToWorldSpaceAR(e.getPosition()),o=t.convertToNodeSpaceAR(n),i=cc.instantiate(e);i.setPosition(o),i.parent=t,i.opacity=120,i.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,1.3*i.scale),cc.fadeOut(.2).easing(cc.easeIn(3))),cc.callFunc(function(){i.destroy()})))}),cc.scaleTo(.05,n)))},c([F(cc.Node)],t.prototype,"bkgSprite",void 0),c([F(w.default)],t.prototype,"asset",void 0),c([F(cc.Node)],t.prototype,"parentItem",void 0),c([F(cc.Node)],t.prototype,"parentLine",void 0),c([F(cc.Label)],t.prototype,"lb_Mn_Per_Line",void 0),c([F(T.default)],t.prototype,"effect",void 0),c([F(cc.Node)],t.prototype,"nodeBtnPlay",void 0),c([F(cc.Node)],t.prototype,"nodeBtnSeting",void 0),c([F(cc.Node)],t.prototype,"bangThuong",void 0),c([F(cc.Node)],t.prototype,"cachChoi",void 0),c([F(y.default)],t.prototype,"labelChipReviceInBox",void 0),c([F(cc.Label)],t.prototype,"lb_totalBet",void 0),c([F(cc.Label)],t.prototype,"lb_FSLeft",void 0),c([F(cc.Label)],t.prototype,"lb_CountAuto",void 0),c([F(g.default)],t.prototype,"audio",void 0),c([F(cc.Node)],t.prototype,"btnSpin",void 0),c([F(cc.Node)],t.prototype,"nodeFireLuBo",void 0),c([F(S.default)],t.prototype,"infoBar",void 0),c([F(cc.Node)],t.prototype,"parentMutil",void 0),c([F(cc.Toggle)],t.prototype,"toggleMusic",void 0),c([F(cc.Node)],t.prototype,"parentItemBet",void 0),c([F(D.default)],t.prototype,"setingSpin",void 0),c([F([cc.Button])],t.prototype,"listNodeDeactive",void 0),c([F(_.default)],t.prototype,"popupLichSu",void 0),c([A],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetDieuThuyen":"AssetDieuThuyen","./AudioDieuThuyen":"AudioDieuThuyen","./EffectDieuThuyen":"EffectDieuThuyen","./InfoBarController":"InfoBarController","./ItemReel/ItemSlotDieuThuyen":"ItemSlotDieuThuyen","./LichSuDieuThuyen":"LichSuDieuThuyen","./SetingSpinDieuThuyen":"SetingSpinDieuThuyen","./StateSpin/SpinNormal":"SpinNormal"}],EffectDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"ebb7dwcqsFDl7UkV/U/9pNo","EffectDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../Scritps/DefineTs/REQUEST_CODE"),a=e("../../../Scritps/Game/GAME_TYPE"),l=e("../../../Scritps/Network/ConectManager"),p=e("../../../Scritps/Obs/LbMoneyChange"),h=e("../../../Scritps/Util"),d=e("../../../Scritps/Windown"),f=e("./FS/FreeController"),y=e("./NodeChooseFS"),v=e("./ParticerDieuThuyen"),m=cc._decorator,w=m.ccclass,g=m.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeMask=null,t.lb_Money=null,t.bkgSpinFree=null,t.bkgSpinFree2=null,t.nodeFree2=null,t.aniBo5=null,t.clBkgDT=null,t.clBkgDTR=null,t.clBkgLB=null,t.parentTotalFS=null,t.nodeBigWin=null,t.nodeMiniBigWin=null,t.colorBigWin=[],t.sfSBigWin=null,t.iconLuBo=null,t.particel=null,t.freeConTrl=null,t.funNext=null,t.funDelayOff=null,t.mapColor=new Map,t}return i(t,e),t.prototype.onLoad=function(){this.funNext=null,this.mapColor.set("freeDieuThuyen",this.clBkgDT),this.mapColor.set("freeLuBo",this.clBkgLB),this.mapColor.set("freeDongTrac",this.clBkgDTR)},t.prototype.onEnable=function(){var e=this;this.scheduleOnce(this.funDelayOff=function(){e.node.on(cc.Node.EventType.TOUCH_END,e.onClose,e)},.7)},t.prototype.onDisable=function(){this.unschedule(this.funDelayOff),this.node.off(cc.Node.EventType.TOUCH_END,this.onClose,this)},t.prototype.initPosMask=function(e){cc.find("mask",this.node).y=e},t.prototype.showJackpot=function(){return new Promise(function(e){e(null)})},t.prototype.showBigWin=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c,r,p;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),e=d.Windown.DieuThuyen.dataFinish.get("agWin")/d.Windown.DieuThuyen.getMutilMoney(),n=d.Windown.DieuThuyen.curRoomBet*d.Windown.DieuThuyen.totalLineBet,o=d.Windown.DieuThuyen.stateSpin.isMaxSpeed?2:1,e<1?(t(null),[2]):e<4*n?[4,d.Windown.DieuThuyen.stateSpin.showMoneyRevice()]:[3,2];case 1:return u.sent(),t(null),[2];case 2:return e<8*n?[4,this.showMiniBigWin(e)]:[3,5];case 3:return u.sent(),[4,d.Windown.DieuThuyen.stateSpin.showMoneyRevice()];case 4:return u.sent(),t(null),[2];case 5:return[4,d.Windown.DieuThuyen.makeDelay(1/o)];case 6:return u.sent(),d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.win_rolling,1,!0),i=cc.find("title",this.nodeBigWin),cc.find("bkg",this.nodeBigWin),i.getComponent(cc.Sprite).spriteFrame=this.sfSBigWin.getSpriteFrame("win_big"),this.particel.node.active=!0,this.particel.setColor(this.colorBigWin[0]),c=3/o,this.node.active=!0,this.node.runAction(cc.fadeIn(.5)),this.nodeBigWin.active=!0,this.nodeMask.active=!0,e>12*n?c=6/o:e>20*n&&(c=9/o),this.lb_Money.node.active=!0,this.lb_Money.time=c,this.lb_Money.node.setPosition(0,6.236),this.lb_Money.setMoney(e),d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.big_win_start),[4,d.Windown.DieuThuyen.makeDelay(3)];case 7:return u.sent(),e>12*n?(d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.mega_win_start),i.getComponent(cc.Sprite).spriteFrame=this.sfSBigWin.getSpriteFrame("win_mega"),i.runAction(cc.sequence(cc.scaleTo(.2,1),cc.scaleTo(.2,.8))),this.particel.setColor(this.colorBigWin[1]),[4,d.Windown.DieuThuyen.makeDelay(3/o)]):[3,9];case 8:u.sent(),u.label=9;case 9:return e>20*n?(d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.mega_win_end),i.getComponent(cc.Sprite).spriteFrame=this.sfSBigWin.getSpriteFrame("win_super_mega"),i.runAction(cc.sequence(cc.scaleTo(.2,1),cc.scaleTo(.2,.8))),this.particel.setColor(this.colorBigWin[2]),[4,d.Windown.DieuThuyen.makeDelay(3/o)]):[3,11];case 10:u.sent(),u.label=11;case 11:return[4,d.Windown.DieuThuyen.makeDelay(1/o)];case 12:return u.sent(),d.Windown.DieuThuyen.audio.stopEffect(d.Windown.DieuThuyen.audio.win_rolling),[4,d.Windown.DieuThuyen.stateSpin.showMoneyRevice()];case 13:return u.sent(),d.Windown.DieuThuyen.dataFinish.get("agWin")>1e4&&((r=l.ConectManager.getIns().getSFSObj()).putInt("gt",a.default.DieuThuyen),r.putInt("mt",d.Windown.DieuThuyen.dataFinish.get("agWin")),r.putUtfString("nn",d.Windown.User.nickName),r.putUtfString("dt","bw"),l.ConectManager.getIns().sendRequest(s.REQUEST_CODE.AddBigWin,r)),this.funNext=t,this.onClose(),[3,15];case 14:return p=u.sent(),h.Util.ThrowErrProsime(p),[3,15];case 15:return[2]}})})})},t.prototype.showMiniBigWin=function(e){var t=this;return new Promise(function(n){return r(t,void 0,void 0,function(){var t,o,i=this;return u(this,function(){try{t=d.Windown.DieuThuyen.stateSpin.isMaxSpeed?2:1,d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.medium_win),d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.medium_win_coins),d.Windown.DieuThuyen.infoBar.tungXu2(),o=this.nodeMiniBigWin.getComponentInChildren(p.default),this.nodeMiniBigWin.active=!0,o.resetLb(),o.time=2/t,o.setMoney(e),o.node.scale=1,this.nodeMiniBigWin.scale=.5,this.nodeMiniBigWin.runAction(cc.sequence(cc.scaleTo(2/t,1),cc.delayTime(.5/t),cc.callFunc(function(){o.node.stopAllActions(),o.node.runAction(cc.sequence(cc.scaleTo(.25,1.3).easing(cc.easeSineOut()),cc.scaleBy(.2,.5).easing(cc.easeSineIn())))}),cc.delayTime(.35),cc.scaleTo(.15,.5),cc.callFunc(function(){i.nodeMiniBigWin.active=!1,d.Windown.DieuThuyen.infoBar.resetXu(),n(null)})))}catch(c){h.Util.ThrowErrProsime(c)}return[2]})})})},t.prototype.showFreeSpin3=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c,r,s;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,8,,9]),d.Windown.DieuThuyen.infoBar.setContentLb("Th\u1eafng v\xf2ng quay mi\u1ec5n ph\xed"),d.Windown.DieuThuyen.infoBar.scale(),d.Windown.DieuThuyen.infoBar.offContenRd(),[4,d.Windown.DieuThuyen.makeDelay(1)];case 1:return u.sent(),d.Windown.UIManager.showLoading(),[4,Promise.all([d.Windown.loadRes(a.default.DieuThuyen.toString(),"Prefabs/NodeChooseFS",cc.Prefab),d.Windown.loadRes(a.default.DieuThuyen.toString(),"Prefabs/ChacterFS",cc.Prefab)])];case 2:return e=u.sent(),n=e[0],o=e[1],d.Windown.UIManager.hideLoading(),(i=cc.instantiate(n)).parent=this.node.parent,[4,(c=i.getComponent(y.default)).waitHandle()];case 3:return u.sent(),(r=cc.instantiate(o)).parent=cc.find("Game/Top",d.Windown.DieuThuyen.node),this.freeConTrl=r.getComponent(f.default),this.freeConTrl.show(),this.activeBkgFree(c.typeFree),"freeLuBo"!=c.typeFree?[3,5]:[4,this.showEffectFsLuBo()];case 4:return u.sent(),[3,7];case 5:return[4,d.Windown.DieuThuyen.makeDelay(1.5)];case 6:u.sent(),u.label=7;case 7:return t(null),[3,9];case 8:return s=u.sent(),h.Util.ThrowErrProsime(s),[3,9];case 9:return[2]}})})})},t.prototype.activeBkgFree=function(e){this.bkgSpinFree.active=!0,this.bkgSpinFree.opacity=0,this.bkgSpinFree.runAction(cc.fadeIn(.3)),this.bkgSpinFree.color=this.mapColor.get(e),this.bkgSpinFree2.color=this.mapColor.get(e)},t.prototype.showFreeSpin2=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c;return u(this,function(r){switch(r.label){case 0:return r.trys.push([0,7,,8]),e=d.Windown.DieuThuyen.dataFinish.get("typeFreeSpin"),d.Windown.DieuThuyen.infoBar.offContenRd(),d.Windown.DieuThuyen.infoBar.setContentLb("V\xf2ng quay mi\u1ec5n ph\xed \u0111\u01a1n"),d.Windown.DieuThuyen.infoBar.scale(),d.Windown.DieuThuyen.actionHideBtnSpin(),[4,d.Windown.DieuThuyen.makeDelay(1)];case 1:return r.sent(),[4,d.Windown.DieuThuyen.infoBar.randomEffect(e)];case 2:return r.sent(),this.activeBkgFree(e),this.nodeFree2.active=!0,this.nodeFree2.opacity=0,this.nodeFree2.runAction(cc.fadeIn(.3)),(n=cc.find(e,this.nodeFree2)).active=!0,o=n.children[1].getComponent(cc.Sprite),i=n.children[2].getComponent(cc.Sprite),"freeDongTrac"==e&&n.getComponentInChildren(sp.Skeleton).setAnimation(0,"Animation",!0),o.fillRange=0,i.fillRange=0,[4,d.Windown.DieuThuyen.makeDelay(.3)];case 3:return r.sent(),cc.tween(o).to(.3,{fillRange:-1}).start(),[4,d.Windown.DieuThuyen.makeDelay(.3)];case 4:return r.sent(),cc.tween(i).to(.3,{fillRange:-1}).start(),"freeLuBo"!=e?[3,6]:[4,this.showEffectFsLuBo()];case 5:r.sent(),r.label=6;case 6:return t(null),[3,8];case 7:return c=r.sent(),h.Util.ThrowErrProsime(c),[3,8];case 8:return[2]}})})})},t.prototype.showEffectFsLuBo=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.iconLuBo.active=!0,this.iconLuBo.scale=0,this.iconLuBo.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut())),d.Windown.DieuThuyen.nodeFireLuBo.active=!0,d.Windown.DieuThuyen.nodeFireLuBo.opacity=0,d.Windown.DieuThuyen.nodeFireLuBo.runAction(cc.fadeTo(.3,255)),[4,d.Windown.DieuThuyen.makeDelay(.5)];case 1:return n.sent(),t(null),[3,3];case 2:return e=n.sent(),h.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.showEffBo5=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n=this;return u(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.five_kind),this.aniBo5.node.active=!0,d.Windown.DieuThuyen.scheduleOnce(function(){d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.load_coins)},1.5),this.aniBo5.once(cc.Animation.EventType.FINISHED,function(){n.aniBo5.node.active=!1}),this.aniBo5.play("Bo5"),[4,d.Windown.DieuThuyen.makeDelay(1.2)];case 1:return o.sent(),t(null),[3,3];case 2:return e=o.sent(),h.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.showBonus=function(){},t.prototype.showTtMnFs=function(e){var t=this;return new Promise(function(n){return r(t,void 0,void 0,function(){var t,o,i;return u(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),d.Windown.DieuThuyen.audio.offFree(),e<1?(n(null),[2]):(d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.result_counting),(t=cc.find(d.Windown.DieuThuyen.stateSpin.lastTypeFree,this.parentTotalFS)).active=!0,this.lb_Money.time=2,this.lb_Money.node.setPosition(0,-206.191),this.lb_Money.node.active=!0,this.lb_Money.resetLb(),this.lb_Money.setMoney(e),[4,d.Windown.DieuThuyen.makeDelay(2)]);case 1:return c.sent(),d.Windown.DieuThuyen.audio.stopEffect(d.Windown.DieuThuyen.audio.result_counting),d.Windown.DieuThuyen.audio.playEffect(d.Windown.DieuThuyen.audio.result_count_end),[4,d.Windown.DieuThuyen.makeDelay(3.5)];case 2:return c.sent(),e>1e4&&((o=l.ConectManager.getIns().getSFSObj()).putInt("gt",a.default.DieuThuyen),o.putInt("mt",e),o.putUtfString("nn",d.Windown.User.nickName),o.putUtfString("dt","fs"),l.ConectManager.getIns().sendRequest(s.REQUEST_CODE.AddBigWin,o)),this.funNext=n,t.active=!1,this.onClose(),[3,4];case 3:return i=c.sent(),h.Util.ThrowErrProsime(i),[3,4];case 4:return[2]}})})})},t.prototype.resetView=function(){this.lb_Money.node.getComponent(p.default).resetLb(),this.lb_Money.node.active=!1,this.nodeMask.active=!1,this.nodeMask.opacity=200,this.node.opacity=255,this.particel.node.active=!1,this.nodeBigWin.active=!1},t.prototype.onClose=function(){var e=this;this.unschedule(this.funDelayOff),this.unschedule(this.onClose),this.funNext&&this.funNext(),this.funNext=null,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.resetView()})))},t.prototype.tungXu=function(e,t){for(var n=d.Windown.RandomNumber(10,15),o=function(){var n=d.Windown.DieuThuyen.asset.getXu();n.parent=t,n.setPosition(cc.v2(e.x+d.Windown.RandomNumber(-20,20),e.y+d.Windown.RandomNumber(-20,20)));var o=cc.v2(e.x-212+d.Windown.RandomNumber(-100,100),e.y-156+d.Windown.RandomNumber(-100,100));n.getComponent(cc.Animation).play("DongXu"),n.angle=-d.Windown.RandomNumber(0,360);var i=d.Windown.RandomNumber(10,20)/10;n.runAction(cc.sequence(cc.jumpTo(i,o,d.Windown.RandomNumber(150,350),1),cc.callFunc(function(){d.Windown.DieuThuyen.asset.putXu(n)})))},i=0;i<n;i++)o()},t.prototype.tungXu2=function(e,t){for(var n=d.Windown.RandomNumber(5,10),o=function(){var n=d.Windown.DieuThuyen.asset.getXu();n.parent=t,n.scale=.3,n.setPosition(cc.v2(e.x+d.Windown.RandomNumber(-20,20),e.y+d.Windown.RandomNumber(-20,20)));var o=cc.v2(e.x-400+d.Windown.RandomNumber(-100,100),e.y+100+d.Windown.RandomNumber(-100,100));n.getComponent(cc.Animation).play("DongXu"),n.angle=-d.Windown.RandomNumber(0,360);var i=d.Windown.RandomNumber(10,20)/10;n.runAction(cc.sequence(cc.jumpTo(i,o,d.Windown.RandomNumber(150,350),1),cc.callFunc(function(){d.Windown.DieuThuyen.asset.putXu(n)})))},i=0;i<n;i++)o()},t.prototype.roiXu=function(e){for(var t=d.Windown.RandomNumber(20,30),n=function(t){var n=t%3+d.Windown.RandomNumber(0,5)/10,o=d.Windown.DieuThuyen.asset.getXu();o.parent=e,o.scale=.3,o.setPosition(cc.v2(d.Windown.RandomNumber(-333,333),680));var i=cc.v2(0,-700);o.getComponent(cc.Animation).play("DongXu"),o.angle=-d.Windown.RandomNumber(0,360);var c=d.Windown.RandomNumber(14,30)/10;o.runAction(cc.sequence(cc.delayTime(n),cc.moveBy(c,i),cc.callFunc(function(){d.Windown.DieuThuyen.asset.putXu(o)})))},o=0;o<t;o++)n(o)},t.prototype.NoXu=function(e,t){for(var n=d.Windown.RandomNumber(30,50),o=function(e){var n=e*(d.Windown.RandomNumber(0,5)/10),o=d.Windown.DieuThuyen.asset.getXu();o.parent=t,o.scale=.3,o.setPosition(cc.v2(d.Windown.RandomNumber(-333,333),680));var i=cc.v2(0,-700);o.getComponent(cc.Animation).play("DongXu"),o.angle=-d.Windown.RandomNumber(0,360);var c=d.Windown.RandomNumber(14,30)/10;o.runAction(cc.sequence(cc.delayTime(n),cc.moveBy(c,i),cc.callFunc(function(){d.Windown.DieuThuyen.asset.putXu(o)})))},i=0;i<n;i++)o(i)},t.prototype.checkAndShowEffectItemFree2=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c,r,s,a,l,p,f,y,v,m,w;return u(this,function(u){switch(u.label){case 0:if(u.trys.push([0,15,,16]),e=d.Windown.DieuThuyen.stateSpin.lastTypeFree,n=d.Windown.DieuThuyen.stateSpin.listColum,"freeDieuThuyen"!=e)return[3,3];for(c=!1,o=0,i=n;o<i.length;o++)i[o].checkShowDieuThuyen()&&(c=!0);return c?[4,d.Windown.DieuThuyen.makeDelay(1.5)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[3,14];case 3:if(!("freeDongTrac"==e&&d.Windown.DieuThuyen.listIdLineAn.length>0))return[3,6];for(c=!1,r=0,s=n;r<s.length;r++)s[r].checkShowDongTrac()&&(c=!0);return c?(a=cc.find(e,this.nodeFree2),(l=a.getComponentInChildren(sp.Skeleton)).setAnimation(0,"Celebrate",!1),l.addAnimation(0,"Animation",!0),d.Windown.DieuThuyen.effect.tungXu2(cc.v2(32,69),a),[4,d.Windown.DieuThuyen.makeDelay(1.5)]):[3,5];case 4:u.sent(),u.label=5;case 5:return[3,14];case 6:if("freeLuBo"!=e)return[3,14];p=d.Windown.DieuThuyen.getLitsChangLuBo(),f=.2,y=0,d.Windown.DieuThuyen.listColum[0].activeIconLubBoNoEf(),v=0,u.label=7;case 7:if(!(v<p.length))return[3,12];m=0,u.label=8;case 8:return m<p[v].length?-1==p[v][m]?[3,10]:(y++,n[v].activeIconLuBo(p[v][m]),y>3&&(f=0),[4,d.Windown.DieuThuyen.makeDelay(f)]):[3,11];case 9:u.sent(),u.label=10;case 10:return m++,[3,8];case 11:return v++,[3,7];case 12:return y>0?[4,d.Windown.DieuThuyen.makeDelay(.5)]:[3,14];case 13:u.sent(),u.label=14;case 14:return t(null),[3,16];case 15:return w=u.sent(),h.Util.ThrowErrProsime(w),[3,16];case 16:return[2]}})})})},t.prototype.checkAndShowEffectItemFree3=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.freeConTrl.showTakeMoney()];case 1:return n.sent(),t(null),[3,3];case 2:return e=n.sent(),h.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.offFree2=function(){for(var e=this,t=1;t<this.nodeFree2.children.length;t++){var n=this.nodeFree2.children[t];n.active&&(n.active=!1,"freeLuBo"==n.name&&(this.iconLuBo.active=!1,d.Windown.DieuThuyen.nodeFireLuBo.active=!1))}this.bkgSpinFree.stopAllActions(),this.bkgSpinFree.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.bkgSpinFree.active=!1}))),this.nodeFree2.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.nodeFree2.active=!1})))},t.prototype.offFree3=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n=this;return u(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.freeConTrl.onClose()];case 1:return o.sent(),this.bkgSpinFree.stopAllActions(),this.bkgSpinFree.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){n.bkgSpinFree.active=!1}))),this.freeConTrl=null,this.iconLuBo.active=!1,d.Windown.DieuThuyen.nodeFireLuBo.active=!1,d.Windown.DieuThuyen.setMutilMoney(),d.Windown.DieuThuyen.offNodeMutil(),d.Windown.DieuThuyen.audio.offFree(),t(null),[3,3];case 2:return e=o.sent(),h.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.resetFree3NewTurn=function(){this.freeConTrl&&this.freeConTrl.resetForNewTurn()},t.prototype.test=function(){},c([g(cc.Node)],t.prototype,"nodeMask",void 0),c([g(p.default)],t.prototype,"lb_Money",void 0),c([g(cc.Node)],t.prototype,"bkgSpinFree",void 0),c([g(cc.Node)],t.prototype,"bkgSpinFree2",void 0),c([g(cc.Node)],t.prototype,"nodeFree2",void 0),c([g(cc.Animation)],t.prototype,"aniBo5",void 0),c([g(cc.Color)],t.prototype,"clBkgDT",void 0),c([g(cc.Color)],t.prototype,"clBkgDTR",void 0),c([g(cc.Color)],t.prototype,"clBkgLB",void 0),c([g(cc.Node)],t.prototype,"parentTotalFS",void 0),c([g(cc.Node)],t.prototype,"nodeBigWin",void 0),c([g(cc.Node)],t.prototype,"nodeMiniBigWin",void 0),c([g([cc.Color])],t.prototype,"colorBigWin",void 0),c([g(cc.SpriteAtlas)],t.prototype,"sfSBigWin",void 0),c([g(cc.Node)],t.prototype,"iconLuBo",void 0),c([g(v.default)],t.prototype,"particel",void 0),c([w],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./FS/FreeController":"FreeController","./NodeChooseFS":"NodeChooseFS","./ParticerDieuThuyen":"ParticerDieuThuyen"}],FreeController:[function(e,t,n){"use strict";cc._RF.push(t,"b43c8Ge2kpAY6P9uL9btyxr","FreeController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../../Scritps/Util"),a=e("../../../../Scritps/Windown"),l=e("./FreeDT"),p=e("./FreeDTR"),h=e("./FreeLuBo"),d=cc._decorator,f=d.ccclass,y=d.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.freeDieuThuyen=null,t.freeDongTrac=null,t.freeLuBo=null,t}return i(t,e),t.prototype.show=function(){var e=a.Windown.DieuThuyen.stateSpin.lastTypeFree;this[e].node.active=!0,this[e].reset()},t.prototype.showTakeMoney=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this[a.Windown.DieuThuyen.stateSpin.lastTypeFree].showTakeMoney()];case 1:return n.sent(),t(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.resetForNewTurn=function(){this[a.Windown.DieuThuyen.stateSpin.lastTypeFree].resetForNewTurn()},t.prototype.onClose=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this[a.Windown.DieuThuyen.stateSpin.lastTypeFree].onClose()];case 1:return n.sent(),this.node.destroy(),t(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},c([y(l.default)],t.prototype,"freeDieuThuyen",void 0),c([y(p.default)],t.prototype,"freeDongTrac",void 0),c([y(h.default)],t.prototype,"freeLuBo",void 0),c([f],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../../Scritps/Util":void 0,"../../../../Scritps/Windown":void 0,"./FreeDT":"FreeDT","./FreeDTR":"FreeDTR","./FreeLuBo":"FreeLuBo"}],FreeDTR:[function(e,t,n){"use strict";cc._RF.push(t,"487e7Crw/lC4bx2gahU1CcN","FreeDTR");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../../Scritps/Util"),a=e("../../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aniMain=null,t.soHeadMoney=null,t.nodeTakeX4=null,t.parentXu=null,t}return i(t,e),t.prototype.showTakeMoney=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c,r,l=this;return u(this,function(u){switch(u.label){case 0:for(u.trys.push([0,3,,4]),e=a.Windown.DieuThuyen.stateSpin.listColum,n=!1,o=0,i=e;o<i.length;o++)i[o].checkShowDongTrac()&&(n=!0);return a.Windown.DieuThuyen.listIdLineAn.length>0&&(a.Windown.RandomNumber(0,10)<5?this.aniMain.setAnimation(0,"Idle_2",!1):this.aniMain.setAnimation(0,"Celebreate_1",!1),this.aniMain.addAnimation(0,"Idle_1",!0)),n&&0!=a.Windown.DieuThuyen.listIdLineAn.length?(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.dong_zhuo_four_times),this.nodeTakeX4.active=!0,cc.find("animation",this.nodeTakeX4).getComponent(cc.Animation).play("TakeX4"),(c=cc.find("x4",this.nodeTakeX4)).stopAllActions(),c.opacity=0,c.runAction(cc.sequence(cc.delayTime(1),cc.fadeIn(1))),[4,a.Windown.DieuThuyen.makeDelay(2.5)]):(t(null),[2]);case 1:return u.sent(),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.dong_zhuo_laughing),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.dong_zhuo_money_fall),this.nodeTakeX4.active=!1,this.soHeadMoney.node.parent.active=!0,this.soHeadMoney.node.opacity=255,this.soHeadMoney.setAnimation(0,"animation5",!1),this.soHeadMoney.setCompleteListener(function(){l.soHeadMoney.setCompleteListener(null),l.soHeadMoney.node.stopAllActions(),l.soHeadMoney.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){l.soHeadMoney.node.parent.active=!1})))}),a.Windown.DieuThuyen.effect.tungXu(cc.v2(-16.099,201.239),this.parentXu),[4,a.Windown.DieuThuyen.makeDelay(1)];case 2:return u.sent(),a.Windown.DieuThuyen.effect.roiXu(this.parentXu),t(null),[3,4];case 3:return r=u.sent(),s.Util.ThrowErrProsime(r),[3,4];case 4:return[2]}})})})},t.prototype.reset=function(){for(this.soHeadMoney.node.parent.active=!1;this.parentXu.childrenCount>0;){var e=this.parentXu.children[0];e.stopAllActions(),a.Windown.DieuThuyen.asset.putXu(e)}this.aniMain.setAnimation(0,"Idle_2",!1),this.aniMain.addAnimation(0,"Idle_1",!0),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.dong_zhuo_laughing),a.Windown.DieuThuyen.scheduleOnce(function(){a.Windown.DieuThuyen.audio.stopEffect(a.Windown.DieuThuyen.audio.dong_zhuo_laughing)},2.5)},t.prototype.resetForNewTurn=function(){},t.prototype.onClose=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.Windown.DieuThuyen.makeDelay(1)];case 1:return n.sent(),this.node.active=!1,t(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},c([h(sp.Skeleton)],t.prototype,"aniMain",void 0),c([h(sp.Skeleton)],t.prototype,"soHeadMoney",void 0),c([h(cc.Node)],t.prototype,"nodeTakeX4",void 0),c([h(cc.Node)],t.prototype,"parentXu",void 0),c([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../../Scritps/Util":void 0,"../../../../Scritps/Windown":void 0}],FreeDT:[function(e,t,n){"use strict";cc._RF.push(t,"a5ff1kJXVpM466ZF/wHFUaG","FreeDT");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../../Scritps/Util"),a=e("../../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){this.canhHoaBkgEff()},t.prototype.canhHoaBkgEff=function(){for(var e=0;e<15;e++){var t=a.Windown.DieuThuyen.asset.getCanhHoa();t.parent=this.node,this.startCanhHoa(t,e)}},t.prototype.startCanhHoa=function(e,t){var n=this;e.stopAllActions();var o=cc.v2(a.Windown.RandomNumber(-360,100),700),i=cc.v2(a.Windown.RandomNumber(100,670),0),c=a.Windown.RandomNumber(5,10);t+=a.Windown.RandomNumber(0,5),e.setPosition(o);var r=cc.moveTo(c,i);e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e.getComponent(cc.Animation).play("CanhHoa")}),r,cc.callFunc(function(){n.startCanhHoa(e,0)})))},t.prototype.showTakeMoney=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n,o,i,c,r,l,p,h,d=this;return u(this,function(u){switch(u.label){case 0:for(u.trys.push([0,4,,5]),e=a.Windown.DieuThuyen.stateSpin.listColum,n=!1,o=0,i=e;o<i.length;o++)i[o].checkShowDieuThuyen()&&(n=!0);return n&&0!=a.Windown.DieuThuyen.listIdLineAn.length?[3,2]:[4,a.Windown.DieuThuyen.makeDelay(.5)];case 1:return u.sent(),t(null),[2];case 2:return c=cc.find("TakeDT",this.node),r=a.Windown.RandomNumber(0,c.children.length),(l=c.children[r]).active=!0,(p=l.getComponent(sp.Skeleton)).setAnimation(0,"Idle_1",!1),p.setCompleteListener(function(){p.setCompleteListener(null),d.offTakeWild()}),[4,a.Windown.DieuThuyen.makeDelay(1.5)];case 3:return u.sent(),t(null),[3,5];case 4:return h=u.sent(),s.Util.ThrowErrProsime(h),[3,5];case 5:return[2]}})})})},t.prototype.resetForNewTurn=function(){cc.find("TakeDT",this.node).getComponentsInChildren(sp.Skeleton).forEach(function(e){e.setCompleteListener(null),e.node.stopAllActions(),e.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.node.active=!1})))})},t.prototype.offTakeWild=function(){cc.find("TakeDT",this.node).children.forEach(function(e){e.active=!1})},t.prototype.reset=function(){this.offTakeWild()},t.prototype.onClose=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.Windown.DieuThuyen.makeDelay(1)];case 1:return n.sent(),this.node.active=!1,t(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},c([p],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../../Scritps/Util":void 0,"../../../../Scritps/Windown":void 0}],FreeLuBo:[function(e,t,n){"use strict";cc._RF.push(t,"9a4deBEOQxMoLw8Ol+UUiU8","FreeLuBo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../../Scritps/Util"),a=e("../../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listSpSolider=[],t.nodeLubuChay=null,t.nodeMutil=null,t.lbHit=null,t.currentCount=1,t.poolEffectHitIcon=new cc.NodePool,t.listFunHitIcon=[],t}return i(t,e),t.prototype.start=function(){var e=cc.find("line",this.nodeLubuChay);e.x=460,e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1,-600,337),cc.delayTime(a.Windown.RandomNumber(1,4)),cc.callFunc(function(){e.x=460}))));var t=cc.find("bkg",this.nodeLubuChay);t.x=276,t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.8,-276,362.246),cc.callFunc(function(){t.x=276})))),this.startBinhLinh()},t.prototype.zoomLubu=function(){var e=cc.v2(-263.592,-1690);this.nodeLubuChay.stopAllActions(),this.nodeLubuChay.runAction(cc.spawn(cc.scaleTo(1,4.5).easing(cc.easeSineOut()),cc.moveTo(1,e).easing(cc.easeSineOut())))},t.prototype.offZoomLubu=function(e){void 0===e&&(e=0),this.nodeLubuChay.stopAllActions(),this.nodeLubuChay.runAction(cc.spawn(cc.scaleTo(e,1).easing(cc.easeSineIn()),cc.moveTo(e,cc.v2(0,0)).easing(cc.easeSineIn())))},t.prototype.startBinhLinh=function(){var e=this,t=cc.find("binhlinh",this.nodeLubuChay);t.active=!0,t.x=600,t.stopAllActions(),t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(a.Windown.RandomNumber(2,4)),cc.moveTo(.7,-600,153),cc.callFunc(function(){t.x=600,t.getComponent(cc.Sprite).spriteFrame=e.listSpSolider[a.Windown.RandomNumber(0,e.listSpSolider.length)]}))))},t.prototype.offBinhLinh=function(){cc.find("binhlinh",this.nodeLubuChay).active=!1},t.prototype.showTakeMoney=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e,n;return u(this,function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),a.Windown.DieuThuyen.listColum[0].activeIconLubBoNoEf(),e=0,a.Windown.DieuThuyen.getLitsChangLuBo().forEach(function(t){t.forEach(function(t){-1!=t&&e++})}),0==e?(t(null),[2]):1!=e?[3,1]:(this.showChem1(),[3,6]);case 1:return 2!=e?[3,2]:(this.showChem2(),[3,6]);case 2:return 3!=e?[3,4]:(this.showChem3(),[4,a.Windown.DieuThuyen.makeDelay(5)]);case 3:return o.sent(),[3,6];case 4:return this.showChem4(),[4,a.Windown.DieuThuyen.makeDelay(5)];case 5:o.sent(),o.label=6;case 6:return this.setupActiveIconLubo(),[4,this.showMutil(e)];case 7:return o.sent(),t(null),[3,9];case 8:return n=o.sent(),s.Util.ThrowErrProsime(n),[3,9];case 9:return[2]}})})})},t.prototype.setupActiveIconLubo=function(){var e=this;this.listFunHitIcon=[];for(var t=a.Windown.DieuThuyen.stateSpin.listColum,n=a.Windown.DieuThuyen.getLitsChangLuBo(),o=function(o){for(var c=function(c){-1!=n[o][c]&&i.listFunHitIcon.push(function(){var i=n[o][c],r=e.getEfHitIcon();r.parent=a.Windown.DieuThuyen.parentItem;var u=t[o].getPointItem(i,r.parent);r.setPosition(u),r.getComponent(cc.Animation).play("mulltikill"),r.once(cc.Animation.EventType.FINISHED,function(){e.putEfHitIcon(r)}),t[o].activeIconLuBo2(i)})},r=0;r<n[o].length;r++)c(r)},i=this,c=0;c<n.length;c++)o(c)},t.prototype.showChem3=function(){return r(this,void 0,void 0,function(){var e,t,n,o,i=this;return u(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),this.zoomLubu(),[4,a.Windown.DieuThuyen.makeDelay(2)];case 1:return c.sent(),this.nodeMutil.active=!0,e=cc.find("LbMutil/animShow",this.node).getComponent(sp.Skeleton),t=cc.find("LbMutil/aniChem",this.node).getComponent(sp.Skeleton),n=cc.find("LBAttackAnimation_00",this.node).getComponent(cc.Animation),e.node.active=!0,e.setAnimation(0,"animation2",!1),[4,a.Windown.DieuThuyen.makeDelay(3)];case 2:return c.sent(),e.node.active=!1,n.node.active=!0,n.play("LuBuChem"),[4,a.Windown.DieuThuyen.makeDelay(1.2)];case 3:return c.sent(),n.node.active=!1,t.node.active=!0,t.setAnimation(0,"animation1",!1),t.setCompleteListener(function(){t.setCompleteListener(null),i.offChem(),i.offZoomLubu(1)}),[3,5];case 4:return o=c.sent(),s.Util.ThrowErrProsime(o),[3,5];case 5:return[2]}})})},t.prototype.showChem4=function(){return r(this,void 0,void 0,function(){var e,t,n,o,i=this;return u(this,function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),this.zoomLubu(),[4,a.Windown.DieuThuyen.makeDelay(2)];case 1:return c.sent(),this.nodeMutil.active=!0,e=cc.find("LbMutil/animShow",this.node).getComponent(sp.Skeleton),t=cc.find("LbMutil/aniChem2",this.node).getComponent(sp.Skeleton),n=cc.find("LBAttackAnimation_00",this.node).getComponent(cc.Animation),e.node.active=!0,e.setAnimation(0,"animation2",!1),[4,a.Windown.DieuThuyen.makeDelay(3)];case 2:return c.sent(),e.node.active=!1,n.node.active=!0,n.play("LuBuChem"),[4,a.Windown.DieuThuyen.makeDelay(1.8)];case 3:return c.sent(),n.node.active=!1,t.node.active=!0,t.setAnimation(0,"animation5",!1),t.setCompleteListener(function(){t.setCompleteListener(null),i.offChem(),i.offZoomLubu(1)}),[3,5];case 4:return o=c.sent(),s.Util.ThrowErrProsime(o),[3,5];case 5:return[2]}})})},t.prototype.showChem1=function(){return r(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(e=cc.find("LBAttackAnimation_00",this.node).getComponent(cc.Animation)).node.active=!0,e.play("LuBuChem"),[4,a.Windown.DieuThuyen.makeDelay(.3)];case 1:return n.sent(),e.node.active=!1,[3,3];case 2:return t=n.sent(),s.Util.ThrowErrProsime(t),[3,3];case 3:return[2]}})})},t.prototype.showChem2=function(){return r(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(e=cc.find("LBAttackAnimation_00",this.node).getComponent(cc.Animation)).node.active=!0,e.play("LuBuChem"),[4,a.Windown.DieuThuyen.makeDelay(1.2)];case 1:return n.sent(),e.node.active=!1,[3,3];case 2:return t=n.sent(),s.Util.ThrowErrProsime(t),[3,3];case 3:return[2]}})})},t.prototype.onClose=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_horse_neigh),cc.find("dc_portrait",this.nodeLubuChay).getComponent(sp.Skeleton).setAnimation(0,"Rearing",!1),[4,a.Windown.DieuThuyen.makeDelay(3)];case 1:return n.sent(),this.node.active=!1,t(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.showMutil=function(e){var t=this;return new Promise(function(n){return r(t,void 0,void 0,function(){var t,o;return u(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=1,a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_slash_one),this.upMutil(t),[4,a.Windown.DieuThuyen.makeDelay(.5)];case 1:return i.sent(),++t>e?(n(null),[2]):(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_slash_two),this.upMutil(t),[4,a.Windown.DieuThuyen.makeDelay(.7)]);case 2:return i.sent(),++t>e?(n(null),[2]):(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_slash_three),this.upMutil(t),[4,a.Windown.DieuThuyen.makeDelay(.6)]);case 3:return i.sent(),++t>e?(n(null),[2]):(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_slash_four),this.upMutil(t),[4,a.Windown.DieuThuyen.makeDelay(.5)]);case 4:return i.sent(),n(null),[3,6];case 5:return o=i.sent(),s.Util.ThrowErrProsime(o),[3,6];case 6:return[2]}})})})},t.prototype.resetForNewTurn=function(){},t.prototype.upMutil=function(e){var t=this.lbHit.node.parent;cc.find("multikill_00",t).getComponent(cc.Animation).play("mulltikill"),this.lbHit.node.active=!1;var n=cc.find("lv_bu_hit",t),o=cc.find("combo",t);n.active=!1,o.active=!1,e<4?(this.lbHit.node.active=!0,n.active=!0,t.active=!0,this.lbHit.string=e.toString(),this.listFunHitIcon.shift()()):(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.lv_bu_attacked),o.active=!0,this.listFunHitIcon.forEach(function(e){e()}),this.listFunHitIcon=[]),t.stopAllActions(),t.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){t.active=!1})))},t.prototype.offChem=function(){for(var e=1;e<this.nodeMutil.children.length;e++)this.nodeMutil.children[e].active=!1;this.nodeMutil.active=!1},t.prototype.reset=function(){this.nodeLubuChay.active=!0,this.nodeMutil.active=!1,this.lbHit.node.parent.active=!1,cc.find("LBAttackAnimation_00",this.node).active=!1,this.nodeLubuChay.scale=1,this.nodeLubuChay.setPosition(0,0)},t.prototype.onClickTest=function(){this.offChem(),this.showTakeMoney()},t.prototype.getEfHitIcon=function(){var e=null;if(this.poolEffectHitIcon.size()>0)e=this.poolEffectHitIcon.get();else{var t=this.lbHit.node.parent,n=cc.find("multikill_00",t);(e=cc.instantiate(n)).name="EfHitIcon",e.scale=1.4}return e.active=!0,e},t.prototype.putEfHitIcon=function(e){this.poolEffectHitIcon.put(e)},t.prototype.onDestroy=function(){this.poolEffectHitIcon.clear()},c([h([cc.SpriteFrame])],t.prototype,"listSpSolider",void 0),c([h(cc.Node)],t.prototype,"nodeLubuChay",void 0),c([h(cc.Node)],t.prototype,"nodeMutil",void 0),c([h(cc.Label)],t.prototype,"lbHit",void 0),c([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../../Scritps/Util":void 0,"../../../../Scritps/Windown":void 0}],InfoBarController:[function(e,t,n){"use strict";cc._RF.push(t,"f6cf3vlTsJEh7eO7Rb7JDJb","InfoBarController");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../Scritps/Util"),a=e("../../../Scritps/Windown"),l=cc._decorator,p=l.ccclass,h=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbContent=null,t.lbContentRd=null,t.bkgRed=null,t.parentItemFake=null,t.listDefined=["T\xednh n\u0103ng \u0110\u1ed5ng Tr\xe1c","T\xednh n\u0103ng \u0110i\xeau Thuy\u1ec1n","T\xednh n\u0103ng L\u1eef B\u1ed1"],t.bkgCoin=null,t.listContent=["2 bi\u1ec3u t\u01b0\u1ee3ng Scatter k\xedch ho\u1ea1t V\xf2ng quay mi\u1ec5n ph\xed \u0111\u01a1n","3 bi\u1ec3u t\u01b0\u1ee3ng Scatter k\xedch ho\u1ea1t V\xf2ng quay mi\u1ec5n ph\xed","4 bi\u1ec3u t\u01b0\u1ee3ng Scatter k\xedch ho\u1ea1t x2 trong V\xf2ng quay mi\u1ec5n ph\xed","5 bi\u1ec3u t\u01b0\u1ee3ng Scatter k\xedch ho\u1ea1t x4 trong V\xf2ng quay mi\u1ec5n ph\xed"],t.isShowContentRd=!1,t}return i(t,e),t.prototype.showRdContent=function(){var e=this;this.isShowContentRd||(this.isShowContentRd=!0,this.lbContent.node.active=!1,this.lbContentRd.string=this.listContent[a.Windown.RandomNumber(0,this.listContent.length)],this.lbContentRd.node.active=!0,this.lbContentRd.node.x=-255.766,this.lbContentRd.node.stopAllActions(),this.lbContentRd.node.runAction(cc.sequence(cc.delayTime(2),cc.moveBy(7,-this.lbContentRd.node.width-100,0),cc.callFunc(function(){e.isShowContentRd=!1,e.showRdContent()}))))},t.prototype.setContentLb=function(e){this.lbContent.string=e},t.prototype.scale=function(){var e=this;a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.infobar_uplifter_highlight),this.bkgRed.active=!0,this.bkgRed.opacity=0,this.bkgRed.runAction(cc.sequence(cc.fadeIn(.2),cc.fadeOut(.2),cc.callFunc(function(){e.bkgRed.active=!1}))),this.node.runAction(cc.sequence(cc.scaleTo(.2,.8),cc.scaleTo(.2,.6)))},t.prototype.randomEffect=function(e){var t=this;return new Promise(function(n){a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.infobar_uplifter),t.offContenRd(),t.bkgRed.active=!0;var o=t.parentItemFake.getComponentsInChildren(cc.Label);"freeDieuThuyen"==e?o[0].string=t.listDefined[1]:"freeLuBo"==e?o[0].string=t.listDefined[2]:"freeDongTrac"==e&&(o[0].string=t.listDefined[0]);for(var i=a.Windown.RandomNumber(0,3),c=1;c<o.length;c++)o[c].string=t.listDefined[i%3],i++;t.parentItemFake.setPosition(0,345),t.lbContent.node.runAction(cc.sequence(cc.delayTime(.25),cc.moveTo(.4,0,-64))),t.parentItemFake.active=!0,t.parentItemFake.runAction(cc.sequence(cc.moveTo(2,0,-262).easing(cc.easeCubicActionInOut()),cc.callFunc(function(){t.lbContent.string=o[0].string,t.lbContent.node.setPosition(0,5),a.Windown.DieuThuyen.playerEffect1(t.lbContent.node,t.node.parent,cc.v2(0,10)),t.bkgRed.active=!1,t.scale()}),cc.delayTime(1),cc.callFunc(function(){t.parentItemFake.active=!1,n(null)})))})},t.prototype.offContenRd=function(){this.isShowContentRd=!1,this.lbContentRd.node.active=!1,this.lbContent.node.active=!0},t.prototype.showTakeMoney=function(e){var t=this;return new Promise(function(n){return r(t,void 0,void 0,function(){var t,o,i,c,r=this;return u(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),0==e?(n(null),[2]):(a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.small_win),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.small_win_coins),t=a.Windown.DieuThuyen.getMutilMoney(),this.resetXu(),this.offContenRd(),this.lbContent.node.active=!0,this.lbContentRd.node.stopAllActions(),this.bkgCoin.active=!0,(o=this.bkgCoin.children[0]).stopAllActions(),o.opacity=0,o.runAction(cc.spawn(cc.rotateBy(5,2e3),cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5),cc.callFunc(function(){r.bkgCoin.active=!1})))),this.tungXu1(),this.lbContent.string="Th\u1eafng "+a.Windown.formatNumber(e/t),this.bkgRed.active=!0,this.bkgRed.opacity=0,this.node.runAction(cc.sequence(cc.callFunc(function(){r.bkgRed.runAction(cc.fadeIn(.3)),a.Windown.DieuThuyen.playerEffect1(r.lbContent.node,r.node.parent,cc.v2(0,10))}),cc.scaleTo(.2,.7),cc.callFunc(function(){r.bkgRed.runAction(cc.fadeOut(.3))}),cc.scaleTo(.2,.6),cc.callFunc(function(){r.bkgRed.active=!1}))),1==t?[3,3]:[4,a.Windown.DieuThuyen.makeDelay(.5)]);case 1:return u.sent(),a.Windown.DieuThuyen.audio.playEffect(a.Windown.DieuThuyen.audio.bonus_multiple_hide),(i=a.Windown.DieuThuyen.getNodeActionMutil()).stopAllActions(),i.runAction(cc.sequence(cc.scaleTo(.2,1.3),cc.scaleTo(.2,1),cc.callFunc(function(){r.lbContent.string="Th\u1eafng "+a.Windown.formatNumber(e)}))),[4,a.Windown.DieuThuyen.makeDelay(.5)];case 2:u.sent(),u.label=3;case 3:return[4,a.Windown.DieuThuyen.makeDelay(1.5)];case 4:return u.sent(),n(null),[3,6];case 5:return c=u.sent(),s.Util.ThrowErrProsime(c),[3,6];case 6:return[2]}})})})},t.prototype.tungXu1=function(){for(var e=function(){var e=a.Windown.DieuThuyen.asset.getXu();e.scale=a.Windown.RandomNumber(12,18)/100,e.parent=t.bkgCoin,e.setPosition(a.Windown.RandomNumber(-100,100),17);var n=cc.v2(a.Windown.RandomNumber(-100,100),17),o=a.Windown.RandomNumber(5,10)/10;e.getComponent(cc.Animation).play("DongXu"),e.angle=-a.Windown.RandomNumber(0,360),e.runAction(cc.sequence(cc.jumpTo(o,n,a.Windown.RandomNumber(50,130),1),cc.callFunc(function(){a.Windown.DieuThuyen.asset.putXu(e)})))},t=this,n=0,o=a.Windown.RandomNumber(5,10);n<o;n++)e()},t.prototype.tungXu2=function(){var e=this;this.bkgCoin.active=!0;var t=this.bkgCoin.children[0];t.stopAllActions(),t.opacity=0,t.runAction(cc.spawn(cc.rotateBy(5,2e3),cc.sequence(cc.fadeIn(.5),cc.delayTime(3),cc.fadeOut(.5),cc.callFunc(function(){e.bkgCoin.active=!1}))));for(var n=0,o=a.Windown.RandomNumber(10,15);n<o;n++){var i=a.Windown.DieuThuyen.asset.getXu();i.scale=a.Windown.RandomNumber(12,18)/100,i.parent=this.bkgCoin,this.tungXuLoop(i,n%5/10)}},t.prototype.tungXuLoop=function(e,t){var n=this,o=cc.v2(a.Windown.RandomNumber(-220,220),17);e.stopAllActions(),e.setPosition(o);var i=cc.v2(o.x+a.Windown.RandomNumber(-10,10),17),c=a.Windown.RandomNumber(5,10)/10;e.getComponent(cc.Animation).play("DongXu"),e.angle=-a.Windown.RandomNumber(0,360),e.runAction(cc.sequence(cc.delayTime(t),cc.jumpTo(c,i,a.Windown.RandomNumber(30,150),1),cc.callFunc(function(){n.tungXuLoop(e,0)})))},t.prototype.resetXu=function(){for(var e=0;e<this.bkgCoin.childrenCount;e++){var t=this.bkgCoin.children[e];"Xu"==t.name&&(a.Windown.DieuThuyen.asset.putXu(t),e--)}},c([h(cc.Label)],t.prototype,"lbContent",void 0),c([h(cc.Label)],t.prototype,"lbContentRd",void 0),c([h(cc.Node)],t.prototype,"bkgRed",void 0),c([h(cc.Node)],t.prototype,"parentItemFake",void 0),c([h(cc.Node)],t.prototype,"bkgCoin",void 0),c([p],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],ItemLichSuDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"a0d64XSx+hNUK+CwVJ+Zcfj","ItemLichSuDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),u=cc._decorator,s=u.ccclass,a=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbTime=null,t.lbBet=null,t.lbWin=null,t.data=null,t}return i(t,e),t.prototype.initItem=function(e){try{this.data=e;var t=this.data.get("date");this.lbTime.string=r.Windown.formatDate(new Date(t),"dd/MM\nHH:mm:ss");var n=this.data.get("infolog"),o=JSON.parse(n);this.lbBet.string=r.Windown.formatNumber(o.agBet*r.Windown.DieuThuyen.totalLineBet),this.lbWin.string=r.Windown.formatNumber(o.agWin)}catch(i){console.error(i)}},t.prototype.onClick=function(){r.Windown.DieuThuyen.audio.playClick(),r.Windown.DieuThuyen.popupLichSu.showDetail(this.data)},c([a(cc.Label)],t.prototype,"lbTime",void 0),c([a(cc.Label)],t.prototype,"lbBet",void 0),c([a(cc.Label)],t.prototype,"lbWin",void 0),c([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemLine:[function(e,t,n){"use strict";cc._RF.push(t,"c2ad8n8ce5Oqa94Myfu9ojJ","ItemLine");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,u=r.ccclass,s=r.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return i(t,e),t.prototype.start=function(){},c([s(cc.Label)],t.prototype,"label",void 0),c([s],t.prototype,"text",void 0),c([u],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],ItemSlotDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"0b0485vbvNGx7NO8J/prCVl","ItemSlotDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../Scritps/Windown"),u=cc._decorator,s=u.ccclass,a=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentBlur=null,t.aniBlur=null,t.parentItem=null,t.listSpItem=null,t.stateSpin=0,t.funReject=null,t.stateWhel=0,t.result=[],t.listIconEff=[],t.listScaterIdle=[],t.nodeEffNearWin=null,t.nodeWildDT=null,t.nodeWildShowDT=null,t.index=-1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.randomFirtGame=function(){for(var e=[],t=0;t<3;t++)e.push(r.Windown.RandomNumber(0,10));this.setResult(e)},t.prototype.setIsResult=function(){var e=this.parentItem.children;e[3].active=!1,e[4].active=!1},t.prototype.activeNodeNearWin=function(){null==this.nodeEffNearWin&&(this.nodeEffNearWin=r.Windown.DieuThuyen.asset.getNearWin(),this.nodeEffNearWin.parent=r.Windown.DieuThuyen.parentItem,this.nodeEffNearWin.setPosition(this.node.x,-263.751)),this.nodeEffNearWin.active=!0,this.nodeEffNearWin.getComponent(cc.Animation).play("Main1");for(var e=r.Windown.DieuThuyen.listColum,t=0;t<e.length-1;t++)e[t].offAllItemNoScater();r.Windown.DieuThuyen.audio.playEffect(r.Windown.DieuThuyen.audio.scatter_scrolling_short)},t.prototype.offNearWin=function(){this.nodeEffNearWin&&(this.nodeEffNearWin.active=!1);for(var e=r.Windown.DieuThuyen.listColum,t=0;t<e.length-1;t++)e[t].activeAllItemNoScater();r.Windown.DieuThuyen.audio.stopEffect(r.Windown.DieuThuyen.audio.scatter_scrolling_short)},t.prototype.activeWildDT=function(){var e=this;null==this.nodeWildDT&&(this.nodeWildDT=r.Windown.DieuThuyen.asset.getWildDieuThuyen(),this.nodeWildDT.parent=this.node,this.nodeWildDT.setPosition(7,-274)),r.Windown.DieuThuyen.audio.playEffectNoStop(r.Windown.DieuThuyen.audio.diao_chan_expand);var t=this.result.indexOf(9);this.nodeWildDT.active=!0,this.nodeWildDT.opacity=0,this.nodeWildDT.anchorY=1,this.nodeWildDT.scaleY=0,this.nodeWildDT.runAction(cc.spawn(cc.fadeIn(.4).easing(cc.easeCubicActionIn()),cc.scaleTo(.4,1))),null==this.nodeWildShowDT&&(this.nodeWildShowDT=r.Windown.DieuThuyen.asset.getNoDieuThuyen(),this.nodeWildShowDT.parent=this.node),this.nodeWildShowDT.setPosition(this.getPointItem(t,this.node)),this.nodeWildShowDT.active=!0,this.nodeWildShowDT.runAction(cc.sequence(cc.delayTime(.1),cc.moveTo(.2,cc.v2(0,-280)),cc.callFunc(function(){e.getListItemSp()[2].active=!1}))),this.nodeWildShowDT.getComponent(cc.Animation).play("DTEffectWild")},t.prototype.deActiveWildDT=function(){this.nodeWildDT&&(this.nodeWildDT.active=!1),this.nodeWildShowDT&&(this.nodeWildShowDT.active=!1),this.getListItemSp()[2].active=!0},t.prototype.activeIconLuBo=function(e){var t=this;r.Windown.DieuThuyen.audio.playEffectNoStop(r.Windown.DieuThuyen.audio.luboChemGio);var n=r.Windown.DieuThuyen.asset.getParticleLuBo();n.parent=this.node.parent,n.setPosition(80.776,-284.74),n.getComponent(cc.ParticleSystem).resetSystem(),n.stopAllActions();var o=this.getPointItem(e,this.node.parent),i=this.getListItemSp()[e],c=i.getComponentInChildren(sp.Skeleton),u=i.getComponentInChildren(cc.Sprite);n.runAction(cc.sequence(cc.moveTo(.3,o),cc.callFunc(function(){r.Windown.DieuThuyen.asset.putParticleLuBo(n),u.node.active=!1,c.node.active=!0,c.node.opacity=0,c.skeletonData=r.Windown.DieuThuyen.asset.listSpItem[8],c.clearTracks(),c.setAnimation(0,"idle",!0),c.node.runAction(cc.sequence(cc.delayTime(.2),cc.fadeIn(.2)));var e=r.Windown.DieuThuyen.asset.getNoLuBo();e.parent=t.node.parent,e.setPosition(o),e.getComponent(cc.Animation).play("NoLuBo"),e.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){r.Windown.DieuThuyen.asset.putNoLuBo(e)})))})))},t.prototype.activeIconLuBo2=function(e){var t=this.getPointItem(e,this.node.parent),n=this.getListItemSp()[e],o=n.getComponentInChildren(sp.Skeleton);n.getComponentInChildren(cc.Sprite).node.active=!1,o.node.active=!0,o.node.opacity=0,o.skeletonData=r.Windown.DieuThuyen.asset.listSpItem[8],o.clearTracks(),o.setAnimation(0,"idle",!0),o.node.runAction(cc.sequence(cc.delayTime(.2),cc.fadeIn(.2)));var i=r.Windown.DieuThuyen.asset.getNoLuBo();i.parent=this.node.parent,i.setPosition(t),i.getComponent(cc.Animation).play("NoLuBo"),i.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){r.Windown.DieuThuyen.asset.putNoLuBo(i)})))},t.prototype.activeIconLubBoNoEf=function(){var e=this.getListItemSp()[1],t=e.getComponentInChildren(cc.Sprite),n=e.getComponentInChildren(sp.Skeleton);n.node.active=!0,t.node.active=!1,t.spriteFrame=r.Windown.DieuThuyen.asset.listSFItem[8],n.skeletonData=r.Windown.DieuThuyen.asset.listSpItem[8],n.setAnimation(0,"idle",!0),this.result[1]=8},t.prototype.setResult=function(e){this.result=e;var t=this.getListItemSp();this.listScaterIdle.forEach(function(e){r.Windown.DieuThuyen.asset.putScaterIdle(e)}),this.listScaterIdle=[];for(var n=0,o=t.length;n<o;n++){var i=t[n].getComponentInChildren(sp.Skeleton),c=t[n].getComponentInChildren(cc.Sprite),u=e[n];if(i.node.active=!1,c.node.active=!0,i.node.y=6==u?-63:-76,c.spriteFrame=r.Windown.DieuThuyen.asset.listSFItem[u],u<6||10==u){if(10==u){var s=r.Windown.DieuThuyen.asset.getScaterIdle();s.parent=c.node,s.setPosition(-3,18),this.listScaterIdle.push(s)}}else i.skeletonData=r.Windown.DieuThuyen.asset.listSpItem[u],i.setAnimation(0,"idle",!0)}},t.prototype.activeItem=function(e,t){var n=this;void 0===t&&(t=!1);var o=this.getListItemSp();e.forEach(function(e){var i=o[e];if(i.children[0].color=cc.Color.WHITE,i.children[1].color=cc.Color.WHITE,n.result[e]<6||10==n.result[e])r.Windown.DieuThuyen.playerEffect2(i.children[0],r.Windown.DieuThuyen.parentItem);else{var c=i.getComponentInChildren(sp.Skeleton);c.setAnimation(0,"win",!1),c.addAnimation(0,"idle",!0)}n.playAniActive(e,t)})},t.prototype.checkActiveItemWhenStop=function(){for(var e=this.getListItemSp(),t=function(t){if(10==n.result[t]){r.Windown.DieuThuyen.audio.playEffectNoStop(r.Windown.DieuThuyen.audio.scatter_explosion);var o=r.Windown.DieuThuyen.asset.getScaterShow();o.parent=r.Windown.DieuThuyen.parentItem,o.setPosition(n.getPointItem(t,r.Windown.DieuThuyen.parentItem));var i=o.getComponent(cc.Animation);i.play("ScaterShow"),i.once("finished",function(){r.Windown.DieuThuyen.asset.putScaterShow(o)},n)}var c=e[t].getComponentInChildren(sp.Skeleton),u=e[t].getComponentInChildren(cc.Sprite),s=n.result[t];s<6||10==s?(c.node.active=!1,u.node.active=!0):(c.node.active=!0,u.node.active=!1)},n=this,o=0;o<this.result.length;o++)t(o)},t.prototype.offAllItem=function(){this.getListItemSp().forEach(function(e){e.children[0].color=cc.Color.GRAY,e.children[1].color=cc.Color.GRAY}),this.listIconEff.forEach(function(e){r.Windown.DieuThuyen.asset.putIconEf(e)}),this.listIconEff=[]},t.prototype.showFLyScaster=function(){},t.prototype.offAllItemNoScater=function(){for(var e=this.getListItemSp(),t=0;t<e.length;t++)if(10!=this.result[t]){var n=e[t];n.children[0].color=cc.Color.GRAY,n.children[1].color=cc.Color.GRAY}},t.prototype.activeAllItemNoScater=function(){for(var e=this.getListItemSp(),t=0;t<e.length;t++)if(10!=this.result[t]){var n=e[t];n.children[0].color=cc.Color.WHITE,n.children[1].color=cc.Color.WHITE}},t.prototype.reset=function(){for(var e=this.result,t=this.getListItemSp(),n=0,o=t.length;n<o;n++){var i=t[n].getComponentInChildren(sp.Skeleton),c=t[n].getComponentInChildren(cc.Sprite);c.node.color=cc.Color.WHITE,i.node.color=cc.Color.WHITE;var u=e[n];u<6||10==u?(i.node.active=!1,c.node.active=!0):(i.node.active=!0,c.node.active=!1,"idle"!=i.animation&&i.setAnimation(0,"idle",!0))}this.listIconEff.forEach(function(e){r.Windown.DieuThuyen.asset.putIconEf(e)}),this.listIconEff=[]},t.prototype.playAniActive=function(e,t){void 0===t&&(t=!1);var n=r.Windown.DieuThuyen.asset.getIconEf();n.parent=r.Windown.DieuThuyen.parentItem,n.setPosition(this.getPointItem(e,r.Windown.DieuThuyen.parentItem)),this.listIconEff.push(n),n.getComponent(cc.Animation).play("ActiveIcon")},t.prototype.getPointItem=function(e,t){var n=this.getListItemSp()[e],o=n.parent.convertToWorldSpaceAR(n.getPosition());return t.convertToNodeSpaceAR(o)},t.prototype.getListItemSp=function(){if(null!=this.listSpItem)return this.listSpItem;this.listSpItem=[];for(var e=this.parentItem.children,t=0;t<3;t++)this.listSpItem.push(e[t]);return this.listSpItem},t.prototype.runSpin=function(){var e=this;this.randomBlur();var t=cc.moveBy(.08,0,40).easing(cc.easeSineOut()),n=cc.moveBy(.1,0,-180),o=cc.callFunc(function(){e.parentBlur.active=!0,e.aniBlur.play("ItemBlur"),e.parentBlur.y=815,e.node.y=0,e.parentItem.active=!1,e.deActiveWildDT()});this.node.stopAllActions(),this.node.runAction(cc.sequence(t,n,o)),this.stateWhel=1},t.prototype.stopEndGame=function(){this.stateWhel=4,this.node.y=0,this.parentItem.active=!0,this.parentBlur.active=!1,this.node.stopAllActions(),this.funReject&&this.funReject()},t.prototype.stopSpin=function(e){var t=this;return new Promise(function(n,o){t.funReject=o;var i=cc.callFunc(function(){t.stateWhel=4,t.node.y=0,t.parentItem.active=!0,t.parentBlur.active=!1,r.Windown.DieuThuyen.audio.playEffectNoStop(r.Windown.DieuThuyen.audio.slot_end_scroll)}),c=cc.moveBy(.08,0,-15).easing(cc.easeSineOut()),u=cc.moveBy(.08,0,15).easing(cc.easeSineIn()),s=cc.callFunc(function(){t.funReject=null,n(null),t.checkActiveItemWhenStop()});if(t.node.stopAllActions(),e&&!r.Windown.DieuThuyen.stateSpin.isMaxSpeed){t.activeNodeNearWin();var a=.7;3==t.index?a=1.2:4==t.index&&(a=3),t.node.runAction(cc.sequence(cc.delayTime(a),i,c,cc.callFunc(t.offNearWin,t),u,s))}else t.node.runAction(cc.sequence(i,c,u,s))})},t.prototype.forceStopSpin=function(){var e=this;if(this.funReject&&(this.funReject(null),this.funReject=null,cc.log("reject roi")),1==this.stateWhel){var t=cc.callFunc(function(){e.stateWhel=4,e.node.y=0,e.parentItem.active=!0,e.parentBlur.active=!1,r.Windown.DieuThuyen.audio.playEffectNoStop(r.Windown.DieuThuyen.audio.slot_end_scroll)}),n=cc.moveBy(.08,0,-15).easing(cc.easeSineOut()),o=cc.moveBy(.08,0,15).easing(cc.easeSineIn()),i=cc.callFunc(function(){e.funReject=null,e.checkActiveItemWhenStop()});this.offNearWin(),this.node.stopAllActions(),this.node.runAction(cc.sequence(t,n,o,i))}},t.prototype.randomBlur=function(){var e=this.parentItem.children,t=e[3],n=e[4],o=r.Windown.RandomNumber(0,10),i=r.Windown.RandomNumber(0,10);t.getComponentInChildren(cc.Sprite).spriteFrame=r.Windown.DieuThuyen.asset.listSFItem[o],n.getComponentInChildren(cc.Sprite).spriteFrame=r.Windown.DieuThuyen.asset.listSFItem[i];var c=this.parentBlur.getComponentsInChildren(cc.Sprite),u=c.length;c[6].spriteFrame=r.Windown.DieuThuyen.asset.listSpItemBlur[o],c[7].spriteFrame=r.Windown.DieuThuyen.asset.listSpItemBlur[this.result[0]],c[8].spriteFrame=r.Windown.DieuThuyen.asset.listSpItemBlur[this.result[1]];for(var s=0;s<u-3;s++){var a=r.Windown.RandomNumber(0,11);c[s].spriteFrame=r.Windown.DieuThuyen.asset.listSpItemBlur[a]}},t.prototype.loopBlur=function(){for(var e=this.parentBlur.getComponentsInChildren(cc.Sprite),t=e.length,n=t-3;n<t;n++)e[n].spriteFrame=e[n-t+3].spriteFrame;for(n=0;n<t-3;n++){var o=r.Windown.RandomNumber(0,11);e[n].spriteFrame=r.Windown.DieuThuyen.asset.listSpItemBlur[o]}},t.prototype.checkShowDieuThuyen=function(){return!!this.result.includes(9)&&(this.activeWildDT(),!0)},t.prototype.checkShowDongTrac=function(){return!!this.result.includes(9)},c([a(cc.Node)],t.prototype,"parentBlur",void 0),c([a(cc.Animation)],t.prototype,"aniBlur",void 0),c([a(cc.Node)],t.prototype,"parentItem",void 0),c([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../../Scritps/Windown":void 0}],LichSuDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"a92a0rYkZ5EAodQWLuozm6z","LichSuDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/DefineTs/REQUEST_CODE"),u=e("../../../Scritps/Network/ConectManager"),s=e("../../../Scritps/Popup/PageData/PageData"),a=e("../../../Scritps/Windown"),l=e("./DetailHistoryDieuThuyen"),p=e("./ItemLichSuDieuThuyen"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageDate=null,t.detail=null,t.listData=null,t.maxRow=11,t}return i(t,e),t.prototype.show=function(){this.node.active=!0,this.reset(),this.node.y=-1280,this.node.stopAllActions(),this.node.runAction(cc.moveTo(.3,0,0)),u.ConectManager.getIns().sendRequest(r.REQUEST_CODE.HistoryDieuThuyen,null,a.Windown.DieuThuyen.roomSFS),a.Windown.UIManager.showLoading()},t.prototype.responseServer=function(e){a.Windown.UIManager.hideLoading();var t=e.getSFSArray("history");this.initWithListData(t)},t.prototype.initWithListData=function(e){cc.log(e),this.pageDate.content.children;var t=e.size(),n=parseInt(t/this.maxRow);t%this.maxRow>0&&n++,0==n&&(n=1),this.pageDate.setTotalPage(n),this.listData=e,this.onChangePage(1)},t.prototype.onChangePage=function(e){for(var t=this.pageDate.content,n=t.children,o=n[0],i=(e-1)*this.maxRow,c=0,r=this.maxRow;c<r;c++){var u=n[c];if(i<this.listData.size()){null==u&&(u=cc.instantiate(o),t.addChild(u),u.y=-(c+1)*u.height+u.height/2);var s=this.listData.getSFSObject(i);u.getComponent(p.default).initItem(s),u.active=!0,i++}else{if(!u)break;u.active=!1}}},t.prototype.showDetail=function(e){this.detail.show(e)},t.prototype.resetContent=function(){for(var e=this.pageDate.content.children,t=0,n=e.length;t<n;t++)e[t].active=!1},t.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},t.prototype.onClickClose=function(){var e=this;a.Windown.DieuThuyen.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){e.node.active=!1})))},c([f(s.default)],t.prototype,"pageDate",void 0),c([f(l.default)],t.prototype,"detail",void 0),c([d],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryDieuThuyen":"DetailHistoryDieuThuyen","./ItemLichSuDieuThuyen":"ItemLichSuDieuThuyen"}],NodeChooseFS:[function(e,t,n){"use strict";cc._RF.push(t,"55ec3TfL61FqqQKp96p7GmN","NodeChooseFS");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../Scritps/DefineTs/REQUEST_CODE"),a=e("../../../Scritps/Network/ConectManager"),l=e("../../../Scritps/Util"),p=e("../../../Scritps/Windown"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentItem=null,t.funNext=null,t.typeFree=null,t}return i(t,e),t.prototype.start=function(){var e=this;cc.systemEvent.on(s.REQUEST_CODE.SelectTypeFree,this.responseServer,this);var t=cc.find("BtnNext",this.node),n=cc.find("BtnPre",this.node),o=cc.find("BtnSpine",this.node),i=this.parentItem.children[0],c=this.parentItem.children[1],r=this.parentItem.children[2];i.runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,0)).easing(cc.easeSineOut()),cc.callFunc(function(){e.activeAc(i)}))),this.scheduleOnce(function(){c.runAction(cc.sequence(cc.moveTo(.6,cc.v2(-280,0)).easing(cc.easeSineOut()),cc.delayTime(.6),cc.spawn(cc.scaleTo(.4,.8),cc.bezierTo(.8,[cc.v2(-600,0),cc.v2(-700,0),cc.v2(-323)]).easing(cc.easeSineOut())))),r.runAction(cc.sequence(cc.moveTo(.6,cc.v2(280,0)).easing(cc.easeSineOut()),cc.delayTime(.6),cc.spawn(cc.scaleTo(.4,.8),cc.bezierTo(.8,[cc.v2(600,0),cc.v2(700,0),cc.v2(323)]).easing(cc.easeSineOut())))),e.scheduleOnce(function(){c.zIndex=0,r.zIndex=1,i.zIndex=2,e.parentItem.sortAllChildren(),e.onMask(i),t.active=!0,n.active=!0,o.active=!0,t.runAction(cc.fadeIn(.3)),n.runAction(cc.fadeIn(.3)),o.runAction(cc.fadeIn(.3))},1.6)},1),p.Windown.DieuThuyen.audio.playChooseFreeType(),p.Windown.DieuThuyen.stateSpin.countAutoSpin>0&&this.scheduleOnce(this.autoChoose,5)},t.prototype.autoChoose=function(){return r(this,void 0,void 0,function(){var e,t,n;return u(this,function(o){switch(o.label){case 0:o.trys.push([0,5,,6]),e=p.Windown.RandomNumber(1,5),t=0,o.label=1;case 1:return t<e?(this.onClickNext(),[4,p.Windown.DieuThuyen.makeDelay(.35)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return this.onClickXacNhan(),[3,6];case 5:return n=o.sent(),l.Util.ThrowErrProsime(n),[3,6];case 6:return[2]}})})},t.prototype.responseServer=function(e){var t=this;this.unschedule(this.autoChoose),p.Windown.Dialog.checkAndShowLog(e),cc.log(p.Windown.SFSObjToJson(e)),this.typeFree=e.get("type");var n=e.get("numFree");p.Windown.DieuThuyen.stateSpin.lastTypeFree=this.typeFree,p.Windown.DieuThuyen.stateSpin.lastFreeSpinLeft=n,p.Windown.DieuThuyen.stateSpin.freeSpinLeft=n,p.Windown.DieuThuyen.setLbFreeSpinLeft(n),p.Windown.DieuThuyen.setMutilMoney(),p.Windown.DieuThuyen.activeLbFree(),p.Windown.DieuThuyen.activeNodeMutil(),p.Windown.DieuThuyen.audio.offChooseFree(),"freeLuBo"==this.typeFree?p.Windown.DieuThuyen.audio.playEffect(p.Windown.DieuThuyen.audio.lv_bu_bg,1,!0):"freeDieuThuyen"==this.typeFree?p.Windown.DieuThuyen.audio.playEffect(p.Windown.DieuThuyen.audio.diao_chan_bg,1,!0):p.Windown.DieuThuyen.audio.playEffect(p.Windown.DieuThuyen.audio.dong_zhuo_bg,.7),this.funNext&&this.funNext(),this.node.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,-1e3)),cc.callFunc(function(){t.node.destroy()})))},t.prototype.waitHandle=function(){var e=this;return new Promise(function(t){e.funNext=t})},t.prototype.onClickPre=function(){var e=this,t=this.parentItem.children;t.forEach(function(e){e.stopAllActions()}),t[2].runAction(cc.spawn(cc.scaleTo(.25,.8),cc.moveTo(.25,cc.v2(323)).easing(cc.easeSineOut()))),t[1].runAction(cc.spawn(cc.scaleTo(.25,.8),cc.moveTo(.25,cc.v2(-323)).easing(cc.easeSineOut()))),t[0].runAction(cc.spawn(cc.scaleTo(.25,1),cc.moveTo(.25,cc.v2(0)).easing(cc.easeSineOut()))),this.scheduleOnce(function(){t[2].zIndex=1,t[1].zIndex=0,t[0].zIndex=2,e.parentItem.sortAllChildren()},.1),this.scheduleOnce(function(){e.offAc(t[1]),e.offAc(t[0]),e.activeAc(t[2])},.25),this.offMask(t[2]),this.offMask(t[1]),this.onMask(t[0])},t.prototype.onClickNext=function(){var e=this,t=this.parentItem.children;t.forEach(function(e){e.stopAllActions()}),t[2].runAction(cc.spawn(cc.scaleTo(.25,.8),cc.moveTo(.25,cc.v2(-323)).easing(cc.easeSineOut()))),t[1].runAction(cc.spawn(cc.scaleTo(.25,1),cc.moveTo(.25,cc.v2(0)).easing(cc.easeSineOut()))),t[0].runAction(cc.spawn(cc.scaleTo(.25,.8),cc.moveTo(.25,cc.v2(323)).easing(cc.easeSineOut()))),this.scheduleOnce(function(){t[2].zIndex=0,t[1].zIndex=2,t[0].zIndex=1,e.parentItem.sortAllChildren()},.1),this.scheduleOnce(function(){e.offAc(t[1]),e.offAc(t[0]),e.activeAc(t[2])},.25),this.offMask(t[2]),this.offMask(t[0]),this.onMask(t[1])},t.prototype.offAc=function(e){for(var t=e.children[0],n=2;n<6;n++)t.children[n].stopAllActions();t.children[2].runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeOut(.2),cc.moveTo(.2,cc.v2(0,-784)).easing(cc.easeSineIn())))),t.children[3].runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeOut(.2),cc.moveTo(.2,cc.v2(0,-650)).easing(cc.easeSineIn())))),t.children[4].runAction(cc.sequence(cc.delayTime(.1),cc.spawn(cc.fadeOut(.2),cc.moveTo(.2,cc.v2(0,-766)).easing(cc.easeSineIn())))),t.children[5].runAction(cc.spawn(cc.fadeOut(.2),cc.moveTo(.2,cc.v2(0,-852)).easing(cc.easeSineIn())))},t.prototype.activeAc=function(e){var t=e.children[0],n=t.children[1].getComponent(sp.Skeleton);n.setAnimation(0,"Idle_2",!1),n.addAnimation(0,"Idle_1",!0);for(var o=2;o<6;o++)t.children[o].stopAllActions();t.children[2].runAction(cc.spawn(cc.fadeIn(.2),cc.moveTo(.2,cc.v2(0,-284)).easing(cc.easeSineOut()))),t.children[3].runAction(cc.spawn(cc.fadeIn(.2),cc.moveTo(.2,cc.v2(0,-150)).easing(cc.easeSineOut()))),t.children[4].runAction(cc.sequence(cc.delayTime(.1),cc.spawn(cc.fadeIn(.2),cc.moveTo(.2,cc.v2(0,-266)).easing(cc.easeSineOut())))),t.children[5].runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(.2),cc.moveTo(.2,cc.v2(0,-352)).easing(cc.easeSineOut()))))},t.prototype.onClickXacNhan=function(){p.Windown.UIManager.showLoading();var e=a.ConectManager.getIns().getSFSObj();e.putUtfString("type",this.parentItem.children[2].name),a.ConectManager.getIns().sendRequest(s.REQUEST_CODE.SelectTypeFree,e,p.Windown.DieuThuyen.roomSFS),this.unschedule(this.autoChoose)},t.prototype.offMask=function(e){var t=e.children[1],n=e.children[2];t.runAction(cc.fadeOut(.2)),n.runAction(cc.fadeOut(.2))},t.prototype.onMask=function(e){var t=e.children[1],n=e.children[2];t.runAction(cc.fadeTo(.2,150)),n.runAction(cc.fadeTo(.2,150))},t.prototype.onDestroy=function(){this.unschedule(this.autoChoose),cc.systemEvent.removeAll(this)},c([f(cc.Node)],t.prototype,"parentItem",void 0),c([d],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],ParticerDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"bfa89x9ZKVMups0NCSFYhLV","ParticerDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),u=cc._decorator,s=u.ccclass,a=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xoc=null,t.set=null,t.listSfSet=[],t.poolXoc=new cc.NodePool,t.poolSet=new cc.NodePool,t}return i(t,e),t.prototype.onEnable=function(){for(var e=this.node.children,t=0,n=e.length;t<n;t++){var o=e[0];"xoc"==o.name?this.putXoc(o):"set"==o.name?this.putSet(o):r.Windown.DieuThuyen.asset.putXu(o)}for(t=0;t<100;t++)(i=r.Windown.DieuThuyen.asset.getXu()).parent=this.node,i.zIndex=10,this.startXu(i,t%3);for(t=0;t<80;t++)(i=this.getXoc()).parent=this.node,i.zIndex=0,this.startXoc(i,t%3);for(t=0;t<5;t++){var i;(i=this.getSet()).parent=this.node,i.zIndex=15,this.startSet(i,t%3)}},t.prototype.startXu=function(e,t){var n=this;e.opacity=0,e.stopAllActions();var o=cc.v2(0,0),i=r.Windown.RandomNumber(200,400)/1e3,c=r.Windown.RandomNumber(200,500)/1e3;e.scale=i;var u=this.pointsOnCircle({radius:1e3,angle:r.Windown.RandomNumber(0,360),cx:0,cy:0}),s=u[0],a=u[1],l=cc.v2(s,a),p=r.Windown.RandomNumber(1.5,2.5);t+=r.Windown.RandomNumber(0,10)/10,e.angle=r.Windown.RandomNumber(0,360),e.setPosition(o);var h=cc.spawn(cc.scaleTo(.3,c),cc.moveTo(p,l));e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e.opacity=255,e.getComponent(cc.Animation).play("DongXu")}),h,cc.callFunc(function(){n.startXu(e,0)})))},t.prototype.startXoc=function(e,t){var n=this;e.opacity=0,e.stopAllActions();var o=cc.v2(0,0),i=r.Windown.RandomNumber(0,360),c=this.pointsOnCircle({radius:1e3,angle:i,cx:0,cy:0}),u=c[0],s=c[1],a=cc.v2(u,s),l=r.Windown.RandomNumber(2,3.5);t+=r.Windown.RandomNumber(0,10)/10,e.angle=-i-90,e.setPosition(o);var p=cc.moveTo(l,a);e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e.opacity=150}),p,cc.callFunc(function(){n.startXoc(e,0)})))},t.prototype.startSet=function(e,t){var n=this;e.opacity=0,e.stopAllActions(),e.getComponent(cc.Sprite).spriteFrame=this.listSfSet[r.Windown.RandomNumber(0,this.listSfSet.length)];var o=r.Windown.RandomNumber(0,360);t+=r.Windown.RandomNumber(0,10)/10,e.angle=o;var i=cc.delayTime(.2);e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e.opacity=255}),i,cc.callFunc(function(){n.startSet(e,0)})))},t.prototype.setColor=function(e){this.node.children.forEach(function(t){"set"==t.name&&(t.color=e)})},t.prototype.pointsOnCircle=function(e){var t=e.radius,n=e.angle,o=e.cx,i=e.cy;return n*=Math.PI/180,[o+t*Math.sin(n),i+t*Math.cos(n)]},t.prototype.getXoc=function(){var e=null;return this.poolXoc.size()>0?e=this.poolXoc.get():(e=cc.instantiate(this.xoc)).name="xoc",e.active=!0,e},t.prototype.putXoc=function(e){this.poolXoc.put(e)},t.prototype.getSet=function(){var e=null;return this.poolSet.size()>0?e=this.poolSet.get():(e=cc.instantiate(this.set)).name="set",e.active=!0,e},t.prototype.putSet=function(e){this.poolSet.put(e)},t.prototype.onDestroy=function(){this.poolXoc.clear(),this.poolSet.clear()},c([a(cc.Node)],t.prototype,"xoc",void 0),c([a(cc.Node)],t.prototype,"set",void 0),c([a([cc.SpriteFrame])],t.prototype,"listSfSet",void 0),c([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],SetingSpinDieuThuyen:[function(e,t,n){"use strict";cc._RF.push(t,"ac009iU6wdM/INsv+aR5c+R","SetingSpinDieuThuyen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__decorate||function(e,t,n,o){var i,c=arguments.length,r=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(r=(c<3?i(r):c>3?i(t,n,r):i(t,n))||r);return c>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Scritps/Windown"),u=cc._decorator,s=u.ccclass,a=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mask=null,t.toggleAuto=null,t.btnStart=null,t}return i(t,e),t.prototype.show=function(){var e=this;this.node.active=!0,this.reset(),this.mask.opacity=0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,-340)),cc.callFunc(function(){e.mask.runAction(cc.fadeTo(.3,150))})))},t.prototype.onToggleTypeSpin=function(e){cc.log(e.node);var t=e.node.name;r.Windown.DieuThuyen.stateSpin.isMaxSpeed="normal"!=t},t.prototype.onToggleAutoSpin=function(e){cc.log("toggle auto spin: ");var t=e.node.name,n=Number(t);r.Windown.DieuThuyen.stateSpin.countAutoSpin=n,this.btnStart.interactable=!0,this.btnStart.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#FF8E26")},t.prototype.onClickStartSpin=function(){r.Windown.DieuThuyen.onClickBtnSpin(),r.Windown.DieuThuyen.stateSpin.countAutoSpin>0&&r.Windown.DieuThuyen.setCountAuto(r.Windown.DieuThuyen.stateSpin.countAutoSpin),this.onClickClose()},t.prototype.reset=function(){this.toggleAuto.allowSwitchOff=!0,this.toggleAuto.getComponentsInChildren(cc.Toggle).forEach(function(e){e.isChecked&&e.uncheck()}),this.btnStart.interactable=!1,this.btnStart.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")},t.prototype.onClickClose=function(){var e=this;this.mask.opacity=0,this.node.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,-958)),cc.callFunc(function(){e.node.active=!1})))},c([a(cc.Node)],t.prototype,"mask",void 0),c([a(cc.ToggleContainer)],t.prototype,"toggleAuto",void 0),c([a(cc.Button)],t.prototype,"btnStart",void 0),c([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],SpinNormal:[function(e,t,n){"use strict";cc._RF.push(t,"04dba57PO1Mw6XX1o4+kZ6r","SpinNormal");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,c){function r(e){try{s(o.next(e))}catch(t){c(t)}}function u(e){try{s(o.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,u)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,i,c,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(t){return s([e,t])}}function s(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(6===c[0]&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../../Scritps/DefineTs/StateReelSlot"),r=e("../../../../Scritps/Util"),u=e("../../../../Scritps/Windown"),s=function(){function e(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.lastTypeFree="BASSIC",this.lastFree3=!1,this.lastFree2=!1,this.freeSpinLeft=0,this.moneyTotalFs=0,this.listColum=u.Windown.DieuThuyen.listColum,this.effect=u.Windown.DieuThuyen.effect}return e.prototype.onStart=function(){var e=this;return new Promise(function(t){return o(e,void 0,void 0,function(){var e,n;return i(this,function(o){switch(o.label){case 0:o.trys.push([0,7,,8]),this.lastFree2?u.Windown.DieuThuyen.audio.playEffect(u.Windown.DieuThuyen.audio.slot_scrolling_two):u.Windown.DieuThuyen.audio.playEffect(u.Windown.DieuThuyen.audio.slot_scrolling),e=0,o.label=1;case 1:return e<this.listColum.length?(this.listColum[e].runSpin(),this.isMaxSpeed?[3,3]:[4,this.makeDelay(.05)]):[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return this.isMaxSpeed?[4,this.makeDelay(.1)]:[3,6];case 5:o.sent(),o.label=6;case 6:return t(null),[3,8];case 7:return n=o.sent(),r.Util.ThrowErrProsime(n),[3,8];case 8:return[2]}})})})},e.prototype.onEnd=function(){return o(this,void 0,void 0,function(){var e,t,n,o,s,a;return i(this,function(i){switch(i.label){case 0:i.trys.push([0,9,,10]),u.Windown.DieuThuyen.stateReel=c.default.STOP,e=u.Windown.DieuThuyen.getListActiveScaster(),t=0,n=0,o=this.listColum,i.label=1;case 1:return n<o.length?(s=o[n],this.isMaxSpeed?[3,3]:[4,s.stopSpin(e[t])]):[3,6];case 2:return i.sent(),[3,4];case 3:s.stopSpin(e[t]),i.label=4;case 4:t++,i.label=5;case 5:return n++,[3,1];case 6:return this.isMaxSpeed?[4,this.makeDelay(.25)]:[3,8];case 7:i.sent(),i.label=8;case 8:return u.Windown.DieuThuyen.audio.stopEffect(u.Windown.DieuThuyen.audio.slot_scrolling),u.Windown.DieuThuyen.audio.stopEffect(u.Windown.DieuThuyen.audio.slot_scrolling_two),this.handleStopAllColum(),[3,10];case 9:return a=i.sent(),r.Util.ThrowErrProsime(a),[3,10];case 10:return[2]}})})},e.prototype.onForceEnd=function(){return o(this,void 0,void 0,function(){var e,t,n;return i(this,function(o){switch(o.label){case 0:for(o.trys.push([0,2,,3]),e=0,t=this.listColum;e<t.length;e++)t[e].forceStopSpin();return u.Windown.DieuThuyen.audio.stopEffect(u.Windown.DieuThuyen.audio.slot_scrolling),u.Windown.DieuThuyen.audio.stopEffect(u.Windown.DieuThuyen.audio.slot_scrolling_two),[4,this.makeDelay(.25)];case 1:return o.sent(),this.handleStopAllColum(),[3,3];case 2:return n=o.sent(),r.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})},e.prototype.onShowAllLine=function(){var e=this;return new Promise(function(t){return o(e,void 0,void 0,function(){var e,n,o,c,s;return i(this,function(){try{if((e=u.Windown.DieuThuyen.listIdLineAn).length<1)return t(null),[2];for(n=[],o=function(t){var o=n[t];null==o&&(o=[],n[t]=o),e.forEach(function(e){var n=e.listItem[t];null==n||o.includes(n)||o.push(n)})},c=0;c<5;c++)o(c);s=0,e.forEach(function(e){u.Windown.DieuThuyen.parentLine.children[e.id-1].active=!0}),this.listColum.forEach(function(e){e.activeItem(n[s],!0),s++}),t(null)}catch(i){r.Util.ThrowErrProsime(i)}return[2]})})})},e.prototype.handleStopAllColum=function(){u.Windown.DieuThuyen.stateReel=c.default.STOP,this.checkAndShowEffect(),u.Windown.DieuThuyen.setStateEffBtnSpin()},e.prototype.makeDelay=function(e){return u.Windown.DieuThuyen.makeDelay(e)},e.prototype.setUpShowOnceLine=function(){var e=this,t=u.Windown.DieuThuyen.listIdLineAn;u.Windown.DieuThuyen.stateReel=c.default.SHOW_EFFECT,u.Windown.DieuThuyen.setStateEffBtnSpin(),u.Windown.DieuThuyen.activeAllBtn(),this.listFunShowOceLine=[],t.forEach(function(t){var n=t.listItem;e.listFunShowOceLine.push(function(){u.Windown.DieuThuyen.offAllLineWin(),e.listColum.forEach(function(e){e.offAllItem()}),u.Windown.DieuThuyen.showEffectMoneyPerLine(t.money);for(var o=0,i=n.length;o<i;o++)e.listColum[o].activeItem([n[o]]),u.Windown.DieuThuyen.parentLine.children[t.id-1].active=!0})});var n=0;u.Windown.DieuThuyen.schedule(this.funShowOceLine=function(){var t=e.listFunShowOceLine[n%e.listFunShowOceLine.length];t&&t(),n++},1.5,cc.macro.REPEAT_FOREVER,0)},e.prototype.resetForNextNextSpin=function(){var e=this;cc.log("reset nor nex"),this.listFunShowOceLine=[],u.Windown.DieuThuyen.showContentTip(),u.Windown.DieuThuyen.unschedule(this.funShowOceLine),u.Windown.DieuThuyen.lb_Mn_Per_Line.node.active=!1,this.listColum.forEach(function(e){e.reset()}),u.Windown.DieuThuyen.resetForNewGame(),this.effect.resetFree3NewTurn(),u.Windown.DieuThuyen.infoBar.showRdContent(),this.freeSpinLeft>0?u.Windown.DieuThuyen.scheduleOnce(function(){u.Windown.DieuThuyen.setLbFreeSpinLeft(e.freeSpinLeft-1),u.Windown.DieuThuyen.onClickBtnSpin()},.5):this.countAutoSpin>0?u.Windown.DieuThuyen.scheduleOnce(function(){e.countAutoSpin--,u.Windown.DieuThuyen.setCountAuto(e.countAutoSpin),u.Windown.DieuThuyen.onClickBtnSpin()},.5):u.Windown.DieuThuyen.activeAllBtn()},e.prototype.checkAndShowEffect=function(){return o(this,void 0,void 0,function(){var e,t,n,o;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,16,,17]),null==u.Windown.DieuThuyen.dataFinish?[2]:(e=u.Windown.DieuThuyen.dataFinish.getBool("Scarter2"),t=u.Windown.DieuThuyen.dataFinish.getBool("Scarter3"),this.freeSpinLeft=u.Windown.DieuThuyen.dataFinish.get("numFreeSpin"),n=u.Windown.DieuThuyen.dataFinish.get("typeFreeSpin"),this.lastFree3&&(this.moneyTotalFs+=u.Windown.DieuThuyen.dataFinish.getLong("agWin")),this.lastFree2?[4,this.effect.checkAndShowEffectItemFree2()]:[3,2]);case 1:return i.sent(),[3,4];case 2:return this.lastFree3?[4,this.effect.checkAndShowEffectItemFree3()]:[3,4];case 3:i.sent(),i.label=4;case 4:return t&&(this.lastFree3=t),[4,this.onShowAllLine()];case 5:return i.sent(),u.Windown.DieuThuyen.getBo5()?[4,this.effect.showEffBo5()]:[3,7];case 6:i.sent(),i.label=7;case 7:return[4,this.effect.showBigWin()];case 8:return i.sent(),1==this.lastFreeSpinLeft&&this.freeSpinLeft<1&&this.lastFree3?[4,this.effect.offFree3()]:[3,11];case 9:return i.sent(),cc.log("money total free la: "+this.moneyTotalFs),[4,this.effect.showTtMnFs(this.moneyTotalFs)];case 10:i.sent(),u.Windown.DieuThuyen.audio.playMusic(),u.Windown.DieuThuyen.offLbFree(),this.moneyTotalFs=0,i.label=11;case 11:return this.lastTypeFree=n,this.lastFreeSpinLeft=this.freeSpinLeft,this.lastFree2&&(u.Windown.DieuThuyen.actionShowBtnSpin(),u.Windown.DieuThuyen.effect.offFree2()),this.lastFree2=e,0==this.lastFreeSpinLeft&&(this.lastFree3=t),t?[4,this.effect.showFreeSpin3()]:[3,13];case 12:return i.sent(),[3,15];case 13:return e?[4,this.effect.showFreeSpin2()]:[3,15];case 14:i.sent(),i.label=15;case 15:return u.Windown.DieuThuyen.listIdLineAn.length>0&&this.freeSpinLeft<1&&this.countAutoSpin<1?this.setUpShowOnceLine():this.resetForNextNextSpin(),[3,17];case 16:return o=i.sent(),r.Util.ThrowErrProsime(o),[3,17];case 17:return[2]}})})},e.prototype.showMoneyRevice=function(){var e=this;return new Promise(function(t){return o(e,void 0,void 0,function(){var e,n;return i(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=u.Windown.DieuThuyen.dataFinish.get("agWin"),u.Windown.DieuThuyen.showMoneyAllWin(e),[4,u.Windown.DieuThuyen.infoBar.showTakeMoney(e)];case 1:return o.sent(),t(null),[3,3];case 2:return n=o.sent(),r.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})})},e.prototype.checkCointainLuBo=function(){},e.prototype.checkContainDongChac=function(){},e}();n.default=s,cc._RF.pop()},{"../../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../../Scritps/Util":void 0,"../../../../Scritps/Windown":void 0}]},{},["AssetDieuThuyen","AudioDieuThuyen","DetailHistoryDieuThuyen","DieuThuyenView","EffectDieuThuyen","FreeController","FreeDT","FreeDTR","FreeLuBo","InfoBarController","ItemLichSuDieuThuyen","ItemLine","ItemSlotDieuThuyen","LichSuDieuThuyen","NodeChooseFS","ParticerDieuThuyen","SetingSpinDieuThuyen","SpinNormal"]);