window.__require=function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({AssetMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"00bc5lPecpBq4qS2VwC9EjS","AssetMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./ItemMuitlMatTroi"),a=t("./SymbolMatTroi"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlasSymbol=null,e.atlasSpecial=null,e.listSkeDataSymbol=[],e.itemSymbolNeko=null,e.itemEffNearWin=null,e.effectWinSymbol=[],e.effectBkgShuffSymbol=null,e.itemNearWinNoSap=null,e.backgroundScatter=null,e.effScater=null,e.itemLightingSun=null,e.itemLightingMoon=null,e.poolSymbol=new cc.NodePool(a.default),e.poolAddScater=new cc.NodePool(a.default),e.poolEffNearWin=new cc.NodePool,e.poolBkgShuffSymbol=new cc.NodePool,e.poolWinSymbol1=new cc.NodePool,e.poolWinSymbol0=new cc.NodePool,e.poolNearWinNoSap=new cc.NodePool,e.poolBgScatter=new cc.NodePool,e.poolXu=new cc.NodePool,e.poolSymbolMutil=new cc.NodePool(s.default),e.poolShuffToWild=new cc.NodePool,e.poolShuffToNormal=new cc.NodePool,e.poolLightingSun=new cc.NodePool,e.poolLightingMoon=new cc.NodePool,e}return o(e,t),e.prototype.getSymbol=function(){var t=null;return(t=this.poolSymbol.size()>0?this.poolSymbol.get():cc.instantiate(this.itemSymbolNeko)).active=!0,t},e.prototype.putSymbol=function(t){this.poolSymbol.put(t)},e.prototype.getNearWin=function(){var t=null;return(t=this.poolEffNearWin.size()>0?this.poolEffNearWin.get():cc.instantiate(this.itemEffNearWin)).active=!0,t},e.prototype.putNearWin=function(t){t.destroy()},e.prototype.getBkgShuffSymbol=function(){var t=null;return(t=this.poolBkgShuffSymbol.size()>0?this.poolBkgShuffSymbol.get():cc.instantiate(this.effectBkgShuffSymbol)).active=!0,t},e.prototype.putBkgShuffSymbol=function(t){t.destroy()},e.prototype.getWinSymbol=function(t){var e=null,i=0==t?this.poolWinSymbol0:this.poolWinSymbol1;return(e=i.size()>0?i.get():cc.instantiate(this.effectWinSymbol[t])).active=!0,e},e.prototype.putWinSymbol=function(t){t.destroy()},e.prototype.getNearWinNoSap=function(){var t=null;return(t=this.poolNearWinNoSap.size()>0?this.poolNearWinNoSap.get():cc.instantiate(this.itemNearWinNoSap)).active=!0,t},e.prototype.putNearWinNoSap=function(t){t.destroy()},e.prototype.getBgScatter=function(){var t=null;return(t=this.poolBgScatter.size()>0?this.poolBgScatter.get():cc.instantiate(this.backgroundScatter)).active=!0,t},e.prototype.putBgScatter=function(t){t.destroy()},e.prototype.getItemLighting=function(t){var e=null;return(e=9==t?this.poolLightingMoon.size()>0?this.poolLightingMoon.get():cc.instantiate(this.itemLightingMoon):this.poolLightingSun.size()>0?this.poolLightingSun.get():cc.instantiate(this.itemLightingSun)).active=!0,e},e.prototype.putItemLighting=function(t){t.destroy()},e.prototype.getEffScater=function(){var t=cc.instantiate(this.effScater);return t.active=!0,t},e.prototype.onDestroy=function(){this.poolSymbol.clear(),this.poolEffNearWin.clear(),this.poolBkgShuffSymbol.clear(),this.poolNearWinNoSap.clear(),this.poolXu.clear(),this.poolSymbolMutil.clear(),this.poolWinSymbol0.clear(),this.poolWinSymbol1.clear(),this.poolAddScater.clear(),this.poolShuffToWild.clear(),this.poolShuffToNormal.clear()},r([u(cc.SpriteAtlas)],e.prototype,"atlasSymbol",void 0),r([u(cc.SpriteAtlas)],e.prototype,"atlasSpecial",void 0),r([u([sp.SkeletonData])],e.prototype,"listSkeDataSymbol",void 0),r([u(cc.Node)],e.prototype,"itemSymbolNeko",void 0),r([u(cc.Node)],e.prototype,"itemEffNearWin",void 0),r([u([cc.Node])],e.prototype,"effectWinSymbol",void 0),r([u(cc.Node)],e.prototype,"effectBkgShuffSymbol",void 0),r([u(cc.Node)],e.prototype,"itemNearWinNoSap",void 0),r([u(cc.Node)],e.prototype,"backgroundScatter",void 0),r([u(cc.Node)],e.prototype,"effScater",void 0),r([u(cc.Node)],e.prototype,"itemLightingSun",void 0),r([u(cc.Node)],e.prototype,"itemLightingMoon",void 0),r([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./ItemMuitlMatTroi":"ItemMuitlMatTroi","./SymbolMatTroi":"SymbolMatTroi"}],AudioMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"89c77NtWgJEKbrWZBjE9f19","AudioMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Parent/AudioManager"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.click=null,e.bgm_bigwin_end=null,e.bgm_bigwin_end_coin=null,e.bgm_bigwin_main=null,e.bgm_fs=null,e.bgm_mg=null,e.bgm_totalwin_end=null,e.bgm_totalwin_main=null,e.fastspinEnd=null,e.fastspinStart=null,e.featureBuyBtn=null,e.featureBuyCancel=null,e.featureBuyHover=null,e.featureBuyStart=null,e.fsIntro=null,e.fsSpin=null,e.heartbeat=null,e.heartbeatNoise=null,e.heartbeatSlowdrop=null,e.list_item_click=null,e.menu_icon_press=null,e.prizeInfobarTotalwin=null,e.spinActiveLoop=null,e.prizePayoutHighlight=null,e.prizePayoutHighlightStart=null,e.prizeSmallwin=null,e.prizeWinMultiplied=null,e.scatterWinHighlight=null,e.spinBtn=null,e.spinStop=null,e.spinStopQuick=null,e.symCollapse=null,e.symScatter=null,e.symShrink=null,e.symWild=null,e.uiCollect=null,e.takeSymTop=null,e.uiInfo=null,e.uiStart=null,e.wallet_counting_above=null,e.spinActivated=null,e.multiLightning=null,e.prizeInfobarSmallwin=null,e.prizeInfobarMultiwin=null,e.multiIncreaseLeft=null,e.multiIncreaseRight=null,e.multiFly=null,e.prizeInfobarCountingMain=null,e.prizeInfobarCountingEnd=null,e.multiIncreaseCenterClose=null,e.multiIncreaseCenter=null,e}return o(e,t),e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.6))},e.prototype.playIndexTakeLine=function(){},e.prototype.playSmalWin=function(){},e.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.fsSpin),this.playEffect(this.bgm_fs,.6,!0)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},e.prototype.playStopAudio=function(){var t=this.spinStop;this.playEffect(t,.7)},r([l(cc.AudioClip)],e.prototype,"click",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_bigwin_end",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_bigwin_end_coin",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_bigwin_main",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_fs",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_mg",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_totalwin_end",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_totalwin_main",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinStart",void 0),r([l(cc.AudioClip)],e.prototype,"featureBuyBtn",void 0),r([l(cc.AudioClip)],e.prototype,"featureBuyCancel",void 0),r([l(cc.AudioClip)],e.prototype,"featureBuyHover",void 0),r([l(cc.AudioClip)],e.prototype,"featureBuyStart",void 0),r([l(cc.AudioClip)],e.prototype,"fsIntro",void 0),r([l(cc.AudioClip)],e.prototype,"fsSpin",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeat",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatNoise",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatSlowdrop",void 0),r([l(cc.AudioClip)],e.prototype,"list_item_click",void 0),r([l(cc.AudioClip)],e.prototype,"menu_icon_press",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwin",void 0),r([l(cc.AudioClip)],e.prototype,"spinActiveLoop",void 0),r([l(cc.AudioClip)],e.prototype,"prizePayoutHighlight",void 0),r([l(cc.AudioClip)],e.prototype,"prizePayoutHighlightStart",void 0),r([l(cc.AudioClip)],e.prototype,"prizeSmallwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeWinMultiplied",void 0),r([l(cc.AudioClip)],e.prototype,"scatterWinHighlight",void 0),r([l(cc.AudioClip)],e.prototype,"spinBtn",void 0),r([l(cc.AudioClip)],e.prototype,"spinStop",void 0),r([l(cc.AudioClip)],e.prototype,"spinStopQuick",void 0),r([l(cc.AudioClip)],e.prototype,"symCollapse",void 0),r([l(cc.AudioClip)],e.prototype,"symScatter",void 0),r([l(cc.AudioClip)],e.prototype,"symShrink",void 0),r([l(cc.AudioClip)],e.prototype,"symWild",void 0),r([l(cc.AudioClip)],e.prototype,"uiCollect",void 0),r([l(cc.AudioClip)],e.prototype,"takeSymTop",void 0),r([l(cc.AudioClip)],e.prototype,"uiInfo",void 0),r([l(cc.AudioClip)],e.prototype,"uiStart",void 0),r([l(cc.AudioClip)],e.prototype,"wallet_counting_above",void 0),r([l(cc.AudioClip)],e.prototype,"spinActivated",void 0),r([l(cc.AudioClip)],e.prototype,"multiLightning",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarSmallwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarMultiwin",void 0),r([l(cc.AudioClip)],e.prototype,"multiIncreaseLeft",void 0),r([l(cc.AudioClip)],e.prototype,"multiIncreaseRight",void 0),r([l(cc.AudioClip)],e.prototype,"multiFly",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarCountingMain",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarCountingEnd",void 0),r([l(cc.AudioClip)],e.prototype,"multiIncreaseCenterClose",void 0),r([l(cc.AudioClip)],e.prototype,"multiIncreaseCenter",void 0),r([c],e)}(s.default);i.default=u,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],CachChoiMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"9f436FbBvtKwqNcsP6rvDqW","CachChoiMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onClickClose=function(){var t=this;s.Windown.MatTroiView.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.node.destroy()})))},r([c],e)}(cc.Component));i.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],DetailHistoryMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"dc92cFkWI5E5Lc0yzLbtnRn","DetailHistoryMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Network/ConectManager"),a=t("../../../Scritps/Other/LbMonoSpace"),c=t("../../../Scritps/Windown"),l=t("./ItemSlotMatTroi"),u=t("./ItemWinDetailHistory"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.itemTemplate=null,e.lbTitle=null,e.lbTime=null,e.lbBet=null,e.lbWin=null,e.lbMNUser=null,e.lbCuocCoSo=null,e.listColum=[],e.scrItemWin=null,e.itemWinTemplate=null,e.btnNextView=null,e.btnBackView=null,e.lbBonusSun=null,e.lbBonusMoon=null,e.lbNoWin=null,e.viewDetail=null,e.CApem=null,e.totalViews=[],e.currentView=0,e.dataHistory=null,e.isFreeSpin=!1,e}return o(e,t),e.prototype.onEnable=function(){this.totalViews=[],this.currentView=0,this.dataHistory=null},e.prototype.show=function(t){this.node.active=!0,this.node.x=721.812,this.node.stopAllActions(),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,0,0),cc.fadeIn(.3).easing(cc.easeElasticIn(3))));var e=t.get("date"),i=t.get("infolog"),n=JSON.parse(i);this.dataHistory=n,cc.log("Detail:",i),this.initItem(),this.isFreeSpin=n.numFreeSpin>0,0==n.agBet?this.lbTitle.string="Quay Mi\u1ec5n Ph\xed":this.lbTitle.string="Quay Th\u01b0\u1eddng",this.lbTime.string=c.Windown.formatDate(new Date(e),"dd/MM HH:mm:ss"),this.lbBet.string=c.Windown.formatNumber(20*n.agBet),this.lbWin.string=c.Windown.formatNumber(n.agWin),this.lbMNUser.string=c.Windown.formatNumber(n.agUser),this.lbCuocCoSo.string=c.Windown.formatNumber(n.agBet),this.totalViews=n.views,this.totalViews.length>1?this.btnNextView.node.active=!0:this.btnNextView.node.active=!1,this.setViewHistory()},e.prototype.setViewHistory=function(){var t=this;this.scrItemWin.content.destroyAllChildren();var e=this.totalViews[this.currentView];e.forEach(function(e,i){for(var n=[],o=0;o<e.length;o++)n.push(t.createSFSObjResult(e[o]));n.reverse(),t.listColum[i].setResultIcon(n)});var i=[],n=[],o=[],r=[],s=[],a=this.dataHistory.bonusSpinR,c=this.dataHistory.bonusSpinL;if(this.lbBonusMoon.string="x"+a,c.length>0&&c[this.currentView]>1?(this.lbBonusSun.string="x"+c[this.currentView],this.lbBonusSun.node.opacity=255,this.lbBonusSun.node.scale=.6):(this.lbBonusSun.node.opacity=133,this.lbBonusSun.string="x1",this.lbBonusSun.node.scale=.5),a.length>0&&a[this.currentView]>1?(this.lbBonusMoon.string="x"+a[this.currentView],this.lbBonusMoon.node.opacity=255,this.lbBonusMoon.node.scale=.6):(this.lbBonusMoon.node.opacity=133,this.lbBonusMoon.string="x1",this.lbBonusMoon.node.scale=.5),this.dataHistory.listItemWinL.length>0&&null!=this.dataHistory.listItemWinL[this.currentView]){i=this.dataHistory.listItemWinL[this.currentView],o=JSON.parse(i.lsIdItem),r=JSON.parse(i.lsAgWin),s=JSON.parse(i.lsstack);for(var l=function(t){for(var i=[],n=0,a=e.length;n<a;n++){var c=e[n].filter(function(e){return e.idItem!=o[t]&&10!=e.idItem||10==e.idItem&&(e.isWinLeft=!0),e.idItem==o[t]||10==e.idItem}).length;if(0==c)break;i.push(c)}u.addItemWinPayline(o[t]+1,s[t],r[t],0,i)},u=this,p=0;p<o.length;p++)l(p)}if(this.dataHistory.listItemWinR.length>0&&null!=this.dataHistory.listItemWinR[this.currentView]){n=this.dataHistory.listItemWinR[this.currentView],o=JSON.parse(n.lsIdItem),r=JSON.parse(n.lsAgWin),s=JSON.parse(n.lsstack);var d=function(t){for(var i=[],n=e.length-1;n>0;n--){var a=e[n].filter(function(e){return(e.idItem==o[t]||10==e.idItem)&&(!e.hasOwnProperty("isWinLeft")||e.hasOwnProperty("isWinLeft")&&0==e.isWinLeft)}).length;if(0==a)break;i.push(a)}h.addItemWinPayline(o[t]+1,s[t],r[t],1,i)},h=this;for(p=0;p<o.length;p++)d(p)}null==this.dataHistory.listItemWinR[this.currentView]&&null==this.dataHistory.listItemWinL[this.currentView]?this.lbNoWin.active=!0:this.lbNoWin.active=!1},e.prototype.addItemWinPayline=function(t,e,i,n,o){var r=cc.instantiate(this.itemWinTemplate).getComponent(u.default);this.scrItemWin.content.addChild(r.node),r.setInfo(t,e,i,n,o),r.node.active=!0},e.prototype.createSFSObjResult=function(t){var e=null;return(e=s.ConectManager.getIns().getSFSObj()).putInt("size",t.size),e.putInt("idItem",t.idItem),e.putInt("typeItem",t.typeItem),e},e.prototype.initItem=function(){for(var t=cc.instantiate(this.parentItem.children[0]),e=(t.width,0);e<6;e++){var i=this.parentItem.children[e];null==i&&((i=cc.instantiate(t)).parent=this.parentItem);var n=i.getComponent(l.default);this.listColum.push(n),n.index=e,n.setResultFirtGame(),n.node.y=0}},e.prototype.onClickClose=function(){var t=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,721.812,0),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){t.node.active=!1})))},e.prototype.onClickNextView=function(){var t=this;this.currentView<this.totalViews.length-1&&this.currentView++,cc.tween(this.viewDetail).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.setViewHistory(),t.currentView==t.totalViews.length-1?(t.btnNextView.node.active=!1,t.btnBackView.node.active=!0):(t.btnNextView.node.active=!0,t.btnBackView.node.active=!0)}).to(.3,{opacity:255},{easing:cc.easing.sineIn}).start()},e.prototype.onClickBackView=function(){var t=this;this.currentView>0&&this.currentView--,cc.tween(this.viewDetail).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){t.setViewHistory(),0==t.currentView?(t.btnNextView.node.active=!0,t.btnBackView.node.active=!1):(t.btnNextView.node.active=!0,t.btnBackView.node.active=!0)}).to(.3,{opacity:255},{easing:cc.easing.sineIn}).start()},r([h(cc.Node)],e.prototype,"parentItem",void 0),r([h(cc.Node)],e.prototype,"itemTemplate",void 0),r([h(cc.Label)],e.prototype,"lbTitle",void 0),r([h(cc.Label)],e.prototype,"lbTime",void 0),r([h(cc.Label)],e.prototype,"lbBet",void 0),r([h(cc.Label)],e.prototype,"lbWin",void 0),r([h(cc.Label)],e.prototype,"lbMNUser",void 0),r([h(cc.Label)],e.prototype,"lbCuocCoSo",void 0),r([h(l.default)],e.prototype,"listColum",void 0),r([h(cc.ScrollView)],e.prototype,"scrItemWin",void 0),r([h(cc.Node)],e.prototype,"itemWinTemplate",void 0),r([h(cc.Button)],e.prototype,"btnNextView",void 0),r([h(cc.Button)],e.prototype,"btnBackView",void 0),r([h(a.default)],e.prototype,"lbBonusSun",void 0),r([h(a.default)],e.prototype,"lbBonusMoon",void 0),r([h(cc.Node)],e.prototype,"lbNoWin",void 0),r([h(cc.Node)],e.prototype,"viewDetail",void 0),r([h(cc.Asset)],e.prototype,"CApem",void 0),r([d],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Windown":void 0,"./ItemSlotMatTroi":"ItemSlotMatTroi","./ItemWinDetailHistory":"ItemWinDetailHistory"}],EffectControlMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"18893ioByZGe6DFmxHIWQh8","EffectControlMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./InfoBarControllerMatTroi"),d=cc.tween,h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bottomParent=null,e.parentEffect=null,e.parentEffectLighting=null,e.nodeBonusSun=null,e.nodeBonusMoon=null,e.listLightingMoon=[],e.listLightingSun=[],e.animSunAdd=null,e.animMoonAdd=null,e.animSunTotalBonusSpin=null,e.animMoonTotalBonusSpin=null,e.animGateBonus=null,e.animSunController=null,e.animMoonController=null,e.lbBonusSpinSun=null,e.lbBonusSpinMoon=null,e.lbBonusTotalLR=null,e.infoBarController=null,e._mutilLeft=1,e._mutilRight=1,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i.instance=this},e.prototype.effectLightingBonus=function(t,e){var i=cc.v2(0,0),n=9==e?this.nodeBonusMoon:this.nodeBonusSun;i=u.Windown.convertNodeInOtherNode(n,this.parentEffectLighting);var o=cc.misc.radiansToDegrees(Math.atan(Math.abs(t.x-i.x)/Math.abs(t.y-i.y)));o=t.x>i.x?-o:o;var r=cc.Vec2.distance(t,i),s=cc.v2(1,1),a=cc.v2(s.x*r/665,s.y*r/665),c=u.Windown.MatTroiView.asset.getItemLighting(e);c.parent=this.parentEffectLighting,c.scaleY=a.y,c.position=t,c.angle=o,c.runAction(cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),9==e?this.listLightingMoon.push(c):this.listLightingSun.push(c)},e.prototype.addMutil=function(t,e){var i=this;return new Promise(function(n){return s(i,void 0,void 0,function(){var i,o,r,s;return a(this,function(a){switch(a.label){case 0:i=0==u.Windown.MatTroiView.stateSpin.lastFreeSpinLeft?1:2,a.label=1;case 1:if(a.trys.push([1,15,,16]),9!=t)return[3,8];o=this._mutilRight+i,r=0,a.label=2;case 2:return r<e-this._mutilRight?(this.lbBonusSpinMoon.string="x"+o,this.animMoonAdd.node.active=!0,this.animMoonAdd.play("Effect_moon_add"),this.animMoonController.play("LabelMoonAdd"),u.Windown.MatTroiView.audio.playEffectNoStop(u.Windown.MatTroiView.audio.multiIncreaseRight),o++,[4,u.Windown.MatTroiView.getMakeDelay(.1/u.Windown.MatTroiView.getDelta()).prosime]):[3,5];case 3:a.sent(),a.label=4;case 4:return r+=i,[3,2];case 5:return this._mutilRight=e,this.lbBonusSpinMoon.string="x"+e,o>0?[4,u.Windown.MatTroiView.getMakeDelay(.5).prosime]:[3,7];case 6:a.sent(),a.label=7;case 7:return[3,14];case 8:o=this._mutilLeft+i,r=0,a.label=9;case 9:return r<e-this._mutilLeft?(this.lbBonusSpinSun.string="x"+o,this.animSunAdd.node.active=!0,this.animSunAdd.play("Effect_Sun_add"),this.animSunController.play("LabelSunAdd"),u.Windown.MatTroiView.audio.playEffectNoStop(u.Windown.MatTroiView.audio.multiIncreaseLeft),[4,u.Windown.MatTroiView.getMakeDelay(.1/u.Windown.MatTroiView.getDelta()).prosime]):[3,12];case 10:a.sent(),a.label=11;case 11:return r+=i,[3,9];case 12:return this._mutilLeft=e,this.lbBonusSpinSun.string="x"+e,o>0?[4,u.Windown.MatTroiView.getMakeDelay(.5).prosime]:[3,14];case 13:a.sent(),a.label=14;case 14:return n(null),[3,16];case 15:return s=a.sent(),l.Util.ThrowErrProsime(s),[3,16];case 16:return[2]}})})})},e.prototype.removeEffectLighting=function(t){9==t?(this.listLightingMoon.forEach(function(e){e.stopAllActions(),e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){u.Windown.MatTroiView.asset.putItemLighting(e,t)})))}),this.listLightingMoon=[]):(this.listLightingSun.forEach(function(e){e.stopAllActions(),e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){u.Windown.MatTroiView.asset.putItemLighting(e,t)})))}),this.listLightingSun=[]),u.Windown.MatTroiView.listColum.forEach(function(e){e.getListSymbolResult().forEach(function(e){e.result==t&&e.removeBkgBonusSpin()})})},e.prototype.addMultiBonus=function(t){var e=this;return new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s,c,p;return a(this,function(){try{o=null,r=cc.v2(0,0),s="",9==t?((e=cc.instantiate(this.lbBonusSpinMoon.node.parent)).parent=this.bottomParent,o=this.animMoonAdd,s="Effect_moon_add",r=u.Windown.convertNodeInOtherNode(this.infoBarController.nodePosMulti,this.bottomParent),e.setPosition(u.Windown.convertNodeInOtherNode(this.lbBonusSpinMoon.node.parent,this.bottomParent))):((e=cc.instantiate(this.lbBonusSpinSun.node.parent)).parent=this.bottomParent,o=this.animSunAdd,s="Effect_Sun_add",r=u.Windown.convertNodeInOtherNode(this.infoBarController.nodePosMulti,this.bottomParent),e.setPosition(u.Windown.convertNodeInOtherNode(this.lbBonusSpinSun.node.parent,this.bottomParent))),n=e.scale,r=cc.v2(r.x,r.y),o.node.active=!0,o.play(s),c=cc.v2(e.x,e.y+50),p=cc.v2(e.x+(9==t?-150:150),e.y+200),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.multiFly),cc.tween(e).to(.3/u.Windown.MatTroiView.getDelta(),{scale:n+1,opacity:133},{easing:cc.easing.sineOut}).parallel(d().bezierTo(.5/u.Windown.MatTroiView.getDelta(),c,p,r),d().to(.5/u.Windown.MatTroiView.getDelta(),{scale:n+.3})).call(function(){i(null),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.prizeInfobarMultiwin)}).to(.2/u.Windown.MatTroiView.getDelta(),{scale:n+1.5,opacity:0},{easing:cc.easing.sineInOut}).call(function(){e.destroy()}).start()}catch(a){l.Util.ThrowErrProsime(a)}return[2]})})})},e.prototype.addMultiBonusTotal=function(t){var e=this;return new Promise(function(i){var n=u.Windown.MatTroiView.stateSpin.isMaxSpeed?.15:.3,o=function(o){var r,s,a=null,c=cc.v2(0,0);9==o?((r=cc.instantiate(e.lbBonusSpinMoon.node.parent)).parent=e.bottomParent,255!=e.lbBonusSpinMoon.node.opacity&&(r.scale=r.scale+.5),a=e.animMoonAdd,c=u.Windown.convertNodeInOtherNode(e.animGateBonus.node,e.bottomParent),r.setPosition(u.Windown.convertNodeInOtherNode(e.lbBonusSpinMoon.node,e.bottomParent))):((r=cc.instantiate(e.lbBonusSpinSun.node.parent)).parent=e.bottomParent,255!=e.lbBonusSpinSun.node.opacity&&(r.scale=r.scale+.5),a=e.animSunAdd,c=u.Windown.convertNodeInOtherNode(e.animGateBonus.node,e.bottomParent),r.setPosition(u.Windown.convertNodeInOtherNode(e.lbBonusSpinSun.node,e.bottomParent))),s=r.scale,a.node.active=!0;var l=cc.v2(r.x,r.y-30),p=cc.v2(r.x+(9==o?-100:100),r.y-70);e.lbBonusTotalLR.string="x"+t,cc.tween(r).to(n,{scale:s+.7,opacity:133},{easing:cc.easing.sineOut}).parallel(d().bezierTo(n,l,p,c),d().to(n,{scale:s+.2},{easing:cc.easing.sineOut}),d().delay(.1).call(function(){e.animGateBonus.play("mf_podium_open"),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.multiIncreaseCenter),e.hideAnimLightingSunMoonTotal(o),cc.tween(e.animGateBonus.node).delay(.1).call(function(){e.animGateBonus.node.getChildByName("mf_vfx_d_screen_01").active=!0,e.lbBonusTotalLR.node.active=!0,e.lbBonusTotalLR.node.opacity=150,e.lbBonusTotalLR.node.scale=.3,cc.tween(e.lbBonusTotalLR.node).to(n,{scale:.65,opacity:255},{easing:cc.easing.bounceOut}).delay(.5/u.Windown.MatTroiView.getDelta()).call(function(){var t=u.Windown.convertNodeInOtherNode(e.infoBarController.nodePosMulti,e.lbBonusTotalLR.node.parent),n=cc.instantiate(e.lbBonusTotalLR.node);n.parent=e.lbBonusTotalLR.node.parent,e.lbBonusTotalLR.node.opacity=100,cc.tween(n).to(.35/u.Windown.MatTroiView.getDelta(),{scale:.35,opacity:100,y:e.lbBonusTotalLR.node.y-80},{easing:cc.easing.sineIn}).call(function(){i(null)}).set({x:t.x,y:t.y,opacity:0}).to(.35/u.Windown.MatTroiView.getDelta(),{opacity:133,scale:.9},{easing:cc.easing.sineOut}).call(function(){n.y=1e3}).delay(1/u.Windown.MatTroiView.getDelta()).call(function(){"mf_podium_open"==e.animGateBonus.currentClip.name&&(e.animGateBonus.node.getChildByName("mf_vfx_d_screen_01").active=!1,e.animGateBonus.play("mf_podium_close"),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.multiIncreaseCenterClose),cc.tween(e.lbBonusTotalLR.node).to(.65,{opacity:0}).call(function(){e.lbBonusTotalLR.node.active=!1}).start(),n.destroy())}).start()}).start()}).start()})).call(function(){r.destroy()}).start()};o(10),o(9)})},e.prototype.resetForNewSpin=function(){(null!=u.Windown.MatTroiView.dataFinish&&0==u.Windown.MatTroiView.dataFinish.get("numFreeSpin")||null==u.Windown.MatTroiView.dataFinish)&&(this._mutilLeft=1,this._mutilRight=1,null!=this.animMoonController.currentClip&&"LabelMoonAdd"==this.animMoonController.currentClip.name?(cc.log("nhay me no vao day roi====================="),this.lbBonusSpinMoon.string="x1",this.animMoonController.play("LabelMoonReset"),this.animMoonAdd.node.active=!1):this.animMoonAdd.node.active=!1,null!=this.animSunController.currentClip&&"LabelSunAdd"==this.animSunController.currentClip.name?(this.lbBonusSpinSun.string="x1",this.animSunController.play("LabelSunReset"),this.animSunAdd.node.active=!1):this.animSunAdd.node.active=!1)},e.prototype.showAnimLightingSunMoonTotal=function(t){u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.multiLightning);var e=10==t?this.animSunTotalBonusSpin:this.animMoonTotalBonusSpin;e.node.active=!0,cc.tween(e.node).set({opacity:0}).to(.2,{opacity:255}).start()},e.prototype.hideAnimLightingSunMoonTotal=function(t){var e=10==t?this.animSunTotalBonusSpin:this.animMoonTotalBonusSpin;cc.tween(e.node).to(.5/u.Windown.MatTroiView.getDelta(),{opacity:0}).call(function(){e.node.active=!1}).start()},e.prototype.openGateBonusSpin=function(){this.animGateBonus.play("mf_podium_open")},e.prototype.showInitBonusFreeSpin=function(t,e){this._mutilLeft=t||2,this._mutilRight=e||2,cc.log("bonus no la============================="),cc.log(this._mutilLeft),cc.log(this._mutilRight),this.lbBonusSpinMoon.string="x"+this._mutilRight,this.animMoonController.play("LabelMoonAdd"),this.lbBonusSpinSun.string="x"+this._mutilLeft,this.animSunController.play("LabelSunAdd"),this.animMoonAdd.node.active=!0,this.animSunAdd.node.active=!0},e.prototype.showWinScatter=function(){return new Promise(function(){})},e.instance=null,r([y(cc.Node)],e.prototype,"bottomParent",void 0),r([y(cc.Node)],e.prototype,"parentEffect",void 0),r([y(cc.Node)],e.prototype,"parentEffectLighting",void 0),r([y(cc.Node)],e.prototype,"nodeBonusSun",void 0),r([y(cc.Node)],e.prototype,"nodeBonusMoon",void 0),r([y(cc.Animation)],e.prototype,"animSunAdd",void 0),r([y(cc.Animation)],e.prototype,"animMoonAdd",void 0),r([y(cc.Animation)],e.prototype,"animSunTotalBonusSpin",void 0),r([y(cc.Animation)],e.prototype,"animMoonTotalBonusSpin",void 0),r([y(cc.Animation)],e.prototype,"animGateBonus",void 0),r([y(cc.Animation)],e.prototype,"animSunController",void 0),r([y(cc.Animation)],e.prototype,"animMoonController",void 0),r([y(c.default)],e.prototype,"lbBonusSpinSun",void 0),r([y(c.default)],e.prototype,"lbBonusSpinMoon",void 0),r([y(c.default)],e.prototype,"lbBonusTotalLR",void 0),r([y(p.default)],e.prototype,"infoBarController",void 0),i=r([f],e)}(cc.Component);i.default=m,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./InfoBarControllerMatTroi":"InfoBarControllerMatTroi"}],EffectMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"d61bcwBv1pNgKYUhq7OCyL2","EffectMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/REQUEST_CODE"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Other/LbMonoSpace"),d=t("../../../Scritps/Util"),h=t("../../../Scritps/Windown"),f=t("./EffectControlMatTroi"),y=cc._decorator,m=y.ccclass,S=y.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e.lb_Money=null,e.nodeBigWin=null,e.listNodeBoxMoney=[],e.btnFast=null,e.aniBigWin=null,e.listPromiseIgro=[],e.isClickBtnFast=!1,e.funNext=null,e.funDelayOff=null,e.mapColor=new Map,e}return o(e,t),e.prototype.onLoad=function(){this.funNext=null,this.aniBigWin=this.nodeBigWin.getComponent(cc.Animation)},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.unschedule(this.funDelayOff)},e.prototype.initPosMask=function(t){cc.find("mask",this.node).y=t},e.prototype.onClickBtnShowFast=function(){for(this.btnFast.interactable=!1,this.isClickBtnFast=!0;this.listPromiseIgro.length>0;)this.listPromiseIgro.shift().cancle(!0)},e.prototype.showBigWin=function(t,e){var i=this;return new Promise(function(n){return s(i,void 0,void 0,function(){var i,o,r,s,p,f,y,m,S,g,w=this;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,7,,8]),this.scheduleOnce(function(){w.btnFast.interactable=!0},.5),this.lb_Money.node.active=!0,this.nodeBigWin.active=!0,this.nodeBigWin.opacity=255,this.lb_Money.resetLb(),4,i=e<30?4:e<50?8:12,o=this.nodeBigWin.getChildByName("NodeBigWin"),r=this.nodeBigWin.getChildByName("NodeMegaWin"),s=this.nodeBigWin.getChildByName("NodeSuperWin"),this.lb_Money.time=i,this.lb_Money.setMoney(t),o.active=!0,r.active=!1,s.active=!1,this.aniBigWin.off(cc.Animation.EventType.FINISHED),this.aniBigWin.once(cc.Animation.EventType.FINISHED,function(){w.aniBigWin.play("Effect_BigWinLoop")}),this.aniBigWin.play("Effect_BigWin"),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_bigwin_main,.7),p=h.Windown.MatTroiView.getMakeDelay(4),this.listPromiseIgro.push(p),[4,p.prosime];case 1:return a.sent(),e>=30?(h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_bigwin_end),r.active=!0,cc.tween(o).to(.3,{opacity:0}).call(function(){o.active=!1}).start(),this.aniBigWin.off(cc.Animation.EventType.FINISHED),this.aniBigWin.once(cc.Animation.EventType.FINISHED,function(){w.aniBigWin.play("Effect_MegaWinLoop")}),this.aniBigWin.play("Effect_MegaWin"),this.isClickBtnFast?[3,3]:(f=h.Windown.MatTroiView.getMakeDelay(4),this.listPromiseIgro.push(f),[4,f.prosime])):[3,3];case 2:a.sent(),a.label=3;case 3:return e>=50?(h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_bigwin_end),s.active=!0,cc.tween(r).to(.3,{opacity:0}).call(function(){o.active=!1}).start(),this.aniBigWin.off(cc.Animation.EventType.FINISHED),this.aniBigWin.once(cc.Animation.EventType.FINISHED,function(){w.aniBigWin.play("Effect_SuperWinLoop")}),this.aniBigWin.play("Effect_SuperWin"),this.isClickBtnFast?[3,5]:(f=h.Windown.MatTroiView.getMakeDelay(4),this.listPromiseIgro.push(f),[4,f.prosime])):[3,5];case 4:a.sent(),a.label=5;case 5:return h.Windown.MatTroiView.audio.stopEffect(h.Windown.MatTroiView.audio.bgm_bigwin_main),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_bigwin_end),h.Windown.MatTroiView.dataFinish&&h.Windown.MatTroiView.dataFinish.get("agWin")>1e3&&((y=u.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.MatTroi),y.putInt("mt",h.Windown.MatTroiView.dataFinish.get("agWin")),y.putUtfString("nn",h.Windown.User.nickName),y.putUtfString("dt","bw"),u.ConectManager.getIns().sendRequest(c.REQUEST_CODE.AddBigWin,y)),this.lb_Money.setMoneyNoTime(t),(m=this.lb_Money.node).stopAllActions(),m.runAction(cc.sequence(cc.scaleTo(.3,1.15),cc.scaleTo(.3,.8))),S=h.Windown.MatTroiView.getMakeDelay(4),this.listPromiseIgro.push(S),this.btnFast.interactable=!0,[4,S.prosime];case 6:return a.sent(),this.nodeBigWin.stopAllActions(),this.nodeBigWin.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){w.nodeBigWin.active=!1,w.funNext=n,w.onClose()}))),[3,8];case 7:return g=a.sent(),d.Util.ThrowErrProsime(g),[3,8];case 8:return[2]}})})})},e.prototype.showTakeFreeSpin=function(t){var e=this;return new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s,c;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),h.Windown.MatTroiView.stateSpin.freeSpinCache=t,h.Windown.MatTroiView.stateSpin.activeAllSymbol(),h.Windown.MatTroiView.listColum.forEach(function(t){t.getListSymbolResult().forEach(function(t){t.effectScaterShowFS()})}),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.scatterWinHighlight),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.heartbeatNoise),[4,h.Windown.MatTroiView.getMakeDelay(1.5).prosime];case 1:return a.sent(),[4,h.Windown.loadRes(l.default.MatTroi.toString(),"Prefabs/ShowFreeSpin",cc.Prefab)];case 2:return e=a.sent(),(n=cc.instantiate(e)).parent=this.node,n.zIndex=1,h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.fsIntro),o=cc.find("GetFreeSpin",n),cc.find("lbFreeSpinNum",o).getComponent(p.default).string=t+"",o.active=!0,this.swidthFS(!0),r=function(){o.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){o.destroy()}))),i(null)},(s=cc.find("btnStart",o).getComponent(cc.Button)).node.opacity=0,s.node.runAction(cc.sequence(cc.fadeIn(1),cc.callFunc(function(){s.node.once("click",r)}),cc.delayTime(5),cc.callFunc(r))),[3,4];case 3:return c=a.sent(),d.Util.ThrowErrProsime(c),[3,4];case 4:return[2]}})})})},e.prototype.showEndFree=function(t){var e=this;return new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s,f,y,m,S,g,w;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),t<1?(h.Windown.MatTroiView.audio.stopBkgFs(),this.swidthFS(!1),i(null),[2]):(e=[],[4,h.Windown.loadRes(l.default.MatTroi.toString(),"Prefabs/EndFreeSpin",cc.Prefab)]);case 1:return n=a.sent(),this.swidthFS(!1),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_totalwin_main),(o=cc.instantiate(n)).parent=this.node,o.zIndex=999,(r=o.getComponent(cc.Animation)).play("Effect_Total_Win"),r.on(cc.Animation.EventType.FINISHED,function(){r.play("Effect_Total_Win_Loop")}),(s=o.getComponentInChildren(p.default)).resetLb(),s.time=4.3,s.setMoney(t),t>1e4&&((f=u.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.MatTroi),f.putInt("mt",t),f.putUtfString("nn",h.Windown.User.nickName),f.putUtfString("dt","fs"),u.ConectManager.getIns().sendRequest(c.REQUEST_CODE.AddBigWin,f)),(y=cc.find("btnStart",o)).active=!1,y.opacity=0,m=function(){o.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){o.destroy(),i(null),h.Windown.MatTroiView.audio.stopBkgFs()})))},this.scheduleOnce(function(){o.once(cc.Node.EventType.TOUCH_END,function(){for(;e.length>0;)e.shift().cancle(!0)})},.5),S=h.Windown.MatTroiView.getMakeDelay(4.25),e.push(S),[4,S.prosime];case 2:return a.sent(),s.setMoneyNoTime(t),s.node.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,.8))),cc.find("tw",o).runAction(cc.sequence(cc.scaleTo(.3,1.3),cc.scaleTo(.3,1))),y.active=!0,y.runAction(cc.fadeIn(.5)),y.once("click",m),h.Windown.MatTroiView.audio.stopEffect(h.Windown.MatTroiView.audio.bgm_totalwin_main),h.Windown.MatTroiView.audio.playEffect(h.Windown.MatTroiView.audio.bgm_totalwin_end),g=h.Windown.MatTroiView.getMakeDelay(6),e.push(g),[4,g.prosime];case 3:return a.sent(),m(),[3,5];case 4:return w=a.sent(),d.Util.ThrowErrProsime(w),[3,5];case 5:return[2]}})})})},e.prototype.swidthFS=function(t,e,i){t?(this.listNodeBoxMoney.forEach(function(t){t.y=-613}),h.Windown.MatTroiView.switchBkgGame(!0),h.Windown.MatTroiView.audio.playBkgfs(),f.default.instance.showInitBonusFreeSpin(e,i)):(this.listNodeBoxMoney.forEach(function(t){t.y=-391.26}),h.Windown.MatTroiView.switchBkgGame(!1))},e.prototype.startXu=function(t,e){var i=this;t.opacity=0,t.stopAllActions(),t.scale=h.Windown.RandomNumber(30,80)/100;var n=cc.v2(0,0),o=(h.Windown.RandomNumber(600,1e3),h.Windown.RandomNumber(800,1300),this.pointsOnCircle({radius:1e3,angle:h.Windown.RandomNumber(0,360),cx:0,cy:0})),r=o[0],s=o[1],a=cc.v2(r,s),c=h.Windown.RandomNumber(1.5,2.5);e+=h.Windown.RandomNumber(0,10)/10,t.angle=h.Windown.RandomNumber(0,360),t.setPosition(n);var l=cc.moveTo(c,a);t.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){t.opacity=255,t.getComponent(cc.Animation).play("Xu")}),l,cc.callFunc(function(){i.startXu(t,0)})))},e.prototype.pointsOnCircle=function(t){var e=t.radius,i=t.angle,n=t.cx,o=t.cy;return i*=Math.PI/180,[n+e*Math.sin(i),o+e*Math.cos(i)]},e.prototype.resetView=function(){this.lb_Money.node.getComponent(p.default).resetLb(),this.lb_Money.node.active=!1,this.node.opacity=255,this.nodeBigWin.active=!1},e.prototype.onClose=function(){var t=this;this.btnFast.interactable=!1,this.unschedule(this.funDelayOff),this.unschedule(this.onClose),this.funNext&&this.funNext(),this.funNext=null,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.resetView()}))),this.isClickBtnFast=!1},r([S(cc.Node)],e.prototype,"nodeMask",void 0),r([S(p.default)],e.prototype,"lb_Money",void 0),r([S(cc.Node)],e.prototype,"nodeBigWin",void 0),r([S([cc.Node])],e.prototype,"listNodeBoxMoney",void 0),r([S(cc.Button)],e.prototype,"btnFast",void 0),r([m],e)}(cc.Component);i.default=g,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./EffectControlMatTroi":"EffectControlMatTroi"}],EffectScaterMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"bd824NpxjBI46xHEpA74dos","EffectScaterMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.haoQuang2=null,e.haoQuang3=null,e.ani=null,e.ske=null,e}return o(e,t),e.prototype.showFs=function(){this.ani.play(),this.ske.setAnimation(0,"spawn",!1),this.ske.addAnimation(0,"fastspin_idle",!0)},e.prototype.start=function(){var t=this,e=s.Windown.MatTroiView.asset.getBgScatter();e.parent=s.Windown.MatTroiView.parentBackgroundEffect,e.setPosition(s.Windown.convertNodeInOtherNode(this.node,e.parent)),this.bkg=e,this.bkg.opacity=0,this.bkg.runAction(cc.fadeIn(.3)),this.haoQuang3.runAction(cc.repeatForever(cc.rotateBy(1,80))),this.haoQuang2.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){t.haoQuang2.scale=.4,t.haoQuang2.opacity=255}),cc.spawn(cc.scaleTo(1,1).easing(cc.easeQuarticActionOut()),cc.fadeOut(1.2).easing(cc.easeQuinticActionIn()))))),this.ske.setAnimation(0,"fastspin_idle",!0)},e.prototype.onDestroy=function(){this.bkg&&this.bkg.destroy()},e.prototype.update=function(){this.bkg&&this.bkg.setPosition(s.Windown.convertNodeInOtherNode(this.node,this.bkg.parent))},r([l(cc.Node)],e.prototype,"haoQuang2",void 0),r([l(cc.Node)],e.prototype,"haoQuang3",void 0),r([l(cc.Animation)],e.prototype,"ani",void 0),r([l(sp.Skeleton)],e.prototype,"ske",void 0),r([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],InfoBarControllerMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"effc5kPMrFBMa0MD51Hb9zk","InfoBarControllerMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=cc._decorator,d=p.ccclass,h=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbMoney=null,e.spTotalWin=null,e.spWin=null,e.spInfoBar=null,e.listInfoBar=[],e.spMaskInfoBar=[],e.listMaskInfoBar=[],e.listBgInfoBar=[],e.parentOneMore=null,e.parentContent=null,e.parentMoney=null,e.listAnimAdd=[],e.animTotalAdd=null,e.nodePosMulti=null,e.ani=null,e.bgInfo=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.parentContent.x=360,this.parentContent.runAction(cc.repeatForever(cc.sequence(cc.moveTo(80,-5723.291,4.555),cc.callFunc(function(){t.parentContent.x=272})))),this.showRdContent(),this.bgInfo=this.listBgInfoBar[0]},e.prototype.showRdContent=function(){this.parentContent.active=!0,this.parentOneMore.active=!1,this.parentMoney.active=!1},e.prototype.showOneMoreScater=function(){this.parentOneMore.active||(this.parentContent.active=!1,this.parentOneMore.active=!0,this.parentMoney.active=!1,this.parentOneMore.getComponent(cc.Animation).play("Effect_Oms"))},e.prototype.hideOneMoreScatter=function(){this.parentContent.active=!0,this.parentOneMore.active=!1},e.prototype.showTakeMoney=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){return s(e,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.prizeInfobarSmallwin),cc.find("ParrentMoney/info_win",this.node).active=!1,this.ani=this.listAnimAdd[0],this.ani.node.active=!0,this.ani.node.opacity=255,this.ani.off(cc.Animation.EventType.FINISHED),this.ani.play("Effect_normal_add"),this.parentMoney.active=!0,this.parentMoney.stopAllActions(),this.parentMoney.scale=0,this.parentMoney.runAction(cc.sequence(cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.callFunc(i))),this.parentContent.active=!1,this.parentOneMore.active=!1,this.lbMoney.setMoneyNoTime(t),[4,u.Windown.MatTroiView.getMakeDelay(3/u.Windown.MatTroiView.getDelta()).prosime];case 1:return n.sent(),i(null),[3,3];case 2:return e=n.sent(),l.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})]})})},e.prototype.showTakeMoneyTurn=function(t){return s(this,void 0,void 0,function(){var e=this;return a(this,function(){return cc.log("showTakeMoneyTurn"),[2,new Promise(function(i){cc.find("ParrentMoney/info_win",e.node).active=!0,cc.find("ParrentMoney/info_win",e.node).getComponent(cc.Sprite).spriteFrame=e.spWin,e.parentContent.active=!1,e.parentOneMore.active=!1,e.parentMoney.active=!0,e.parentMoney.scale=0,e.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeElasticOut(.3))),e.lbMoney.setMoneyNoTime(t);var n=u.Windown.MatTroiView.curRoomBet*u.Windown.MatTroiView.totalLineBet,o=t/n;e.ani.off(cc.Animation.EventType.FINISHED),o<5?(e.bgInfo=e.listBgInfoBar[0],e.bgInfo.active=!0,e.ani=e.listAnimAdd[0],e.ani.play("Effect_normal_add")):o<15?(e.bgInfo=e.listBgInfoBar[1],e.bgInfo.active=!0,e.ani=e.listAnimAdd[1],e.ani.play("Effect_Small_add"),e.ani.on(cc.Animation.EventType.FINISHED,function(){e.ani.play("Effect_Small_add_loop")})):(e.bgInfo=e.listBgInfoBar[2],e.bgInfo.active=!0,e.ani=e.listAnimAdd[0],e.ani.play("Effect_Super_add")),e.ani.node.active=!0,e.ani.node.opacity=255,255!=e.bgInfo.opacity&&cc.tween(e.bgInfo).set({opacity:0}).to(.2,{opacity:255}).start(),i(null)})]})})},e.prototype.reset=function(){var t=this;if(this.spInfoBar.spriteFrame=this.listInfoBar[0],this.spMaskInfoBar.forEach(function(e){e.spriteFrame=t.listMaskInfoBar[0]}),this.listAnimAdd.forEach(function(t){t.node.parent.active=!1,t.node.active=!1}),this.bgInfo!=this.listBgInfoBar[0]){var e=this.bgInfo;cc.tween(e).to(.3,{opacity:0}).call(function(){e.active=!1}).start()}this.bgInfo=this.listBgInfoBar[0],this.bgInfo.active=!0},e.prototype.showTotalMoney=function(t){var e=this;return cc.log("showTotalMoney"),new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s=this;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,11,,12]),0==t?(i(null),[2]):(e=u.Windown.MatTroiView.curRoomBet*u.Windown.MatTroiView.totalLineBet,n=t/e,cc.find("ParrentMoney/info_win",this.node).active=!0,this.ani.off(cc.Animation.EventType.FINISHED),n<7?(u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.prizeInfobarTotalwin),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.parentMoney.scale=0,cc.find("ParrentMoney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeElasticOut(.3))),this.ani=this.listAnimAdd[0],this.ani.play("Effect_normal_add"),this.bgInfo.active=!0,this.lbMoney.setMoneyNoTime(t),this.ani.node.active=!0,this.ani.node.opacity=255,255!=this.bgInfo.opacity&&cc.tween(this.bgInfo).set({opacity:0}).to(.2,{opacity:255}).start(),[4,u.Windown.MatTroiView.getMakeDelay(1).prosime]):[3,2]);case 1:return a.sent(),[3,10];case 2:return n<15?(u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.prizeInfobarCountingMain),u.Windown.MatTroiView.audio.playSmalWin(),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMoney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.ani=this.listAnimAdd[1],this.ani.play("Effect_Small_add"),this.ani.on(cc.Animation.EventType.FINISHED,function(){s.ani.play("Effect_Small_add_loop")}),this.bgInfo=this.listBgInfoBar[1],this.lbMoney.resetLb(),this.bgInfo.active=!0,this.lbMoney.time=2.5,this.lbMoney.setMoney(t),this.ani.node.active=!0,this.ani.node.opacity=255,255!=this.bgInfo.opacity&&cc.tween(this.bgInfo).set({opacity:0}).to(.2,{opacity:255}).start(),[4,u.Windown.MatTroiView.getMakeDelay(2.5).prosime]):[3,5];case 3:return a.sent(),u.Windown.MatTroiView.audio.playEffect(u.Windown.MatTroiView.audio.prizeInfobarCountingEnd),this.parentMoney.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),[4,u.Windown.MatTroiView.getMakeDelay(.3).prosime];case 4:return a.sent(),[3,10];case 5:return a.trys.push([5,7,,8]),[4,u.Windown.MatTroiView.effect.showBigWin(t,n)];case 6:return a.sent(),[3,8];case 7:return o=a.sent(),l.Util.ThrowErrProsime(o),[3,8];case 8:return this.parentMoney.scale=1,this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMoney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.ani=this.listAnimAdd[2],this.ani.play("Effect_Super_add"),this.bgInfo=this.listBgInfoBar[2],this.bgInfo.active=!0,this.lbMoney.setMoneyNoTime(t),cc.find("ParrentMoney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.ani.node.active=!0,this.ani.node.opacity=255,255!=this.bgInfo.opacity&&cc.tween(this.bgInfo).set({opacity:0}).to(.2,{opacity:255}).start(),[4,u.Windown.MatTroiView.getMakeDelay(.3).prosime];case 9:a.sent(),a.label=10;case 10:return i(null),[3,12];case 11:return r=a.sent(),l.Util.ThrowErrProsime(r),[3,12];case 12:return[2]}})})})},r([h(c.default)],e.prototype,"lbMoney",void 0),r([h(cc.SpriteFrame)],e.prototype,"spTotalWin",void 0),r([h(cc.SpriteFrame)],e.prototype,"spWin",void 0),r([h(cc.Sprite)],e.prototype,"spInfoBar",void 0),r([h([cc.SpriteFrame])],e.prototype,"listInfoBar",void 0),r([h([cc.Sprite])],e.prototype,"spMaskInfoBar",void 0),r([h([cc.SpriteFrame])],e.prototype,"listMaskInfoBar",void 0),r([h([cc.Node])],e.prototype,"listBgInfoBar",void 0),r([h(cc.Node)],e.prototype,"parentOneMore",void 0),r([h(cc.Node)],e.prototype,"parentContent",void 0),r([h(cc.Node)],e.prototype,"parentMoney",void 0),r([h([cc.Animation])],e.prototype,"listAnimAdd",void 0),r([h(cc.Animation)],e.prototype,"animTotalAdd",void 0),r([h(cc.Node)],e.prototype,"nodePosMulti",void 0),r([d],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],ItemLichSuMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"fb3dbe9NfhGiordrMAHSLIp","ItemLichSuMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/DefineTs/REQUEST_CODE"),a=t("../../../Scritps/Network/ConectManager"),c=t("../../../Scritps/Windown"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTime=null,e.lbBet=null,e.lbWin=null,e.data=null,e}return o(e,t),e.prototype.initItem=function(t){try{this.data=t;var e=this.data.get("date"),i=this.data.get("bet"),n=this.data.get("agWin");this.lbTime.string=c.Windown.formatDate(new Date(e),"dd/MM\nHH:mm:ss"),this.lbBet.string=c.Windown.formatNumber(i*c.Windown.MatTroiView.totalLineBet),this.lbWin.string=c.Windown.formatNumber(n)}catch(o){console.error(o)}},e.prototype.onClick=function(){var t=a.ConectManager.getIns().getSFSObj();t.putInt("id",this.data.get("id")),a.ConectManager.getIns().sendRequest(s.REQUEST_CODE.HistoryChiTietMatTroi,t,c.Windown.MatTroiView.roomSFS),c.Windown.MatTroiView.audio.playClick(),c.Windown.UIManager.showLoading()},r([p(cc.Label)],e.prototype,"lbTime",void 0),r([p(cc.Label)],e.prototype,"lbBet",void 0),r([p(cc.Label)],e.prototype,"lbWin",void 0),r([u],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],ItemMuitlMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"29eebAWT6pPcosdQdbQrnrj","ItemMuitlMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onOffEffectMutil=function(t){this.node.children[0].active=t,this.node.children[1].stopAllActions(),this.node.children[0].stopAllActions(),this.node.children[1].angle=0,this.node.children[1].scale=1,this.getComponent(cc.ParticleSystem).stopSystem(),t&&(this.node.children[0].runAction(cc.repeatForever(cc.rotateBy(1,50))),this.node.children[1].runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.1,-20),cc.rotateTo(1.5,0).easing(cc.easeElasticOut(.2))))))},e.prototype.moveToMultilLabel=function(t,e,i,n,o){var r=this;return new Promise(function(a){r.startRun();var c=cc.Vec2.lerp(cc.Vec2.ONE,r.node.getPosition(),e,.5);c.x>0?c.addSelf(cc.v2(100,100)):c.subSelf(cc.v2(100,100));var l=cc.bezierTo(.8,[c,c,e]).easing(cc.easeSineIn());r.node.active=!0,r.node.stopAllActions(),r.node.runAction(cc.sequence(cc.delayTime(.3+.2*t),cc.callFunc(function(){s.Windown.Neko.audio.playEffectNoStop(s.Windown.Neko.audio.symMultiFly)}),l,cc.callFunc(function(){i.call(n,a,o)}),cc.callFunc(function(){s.Windown.Neko.audio.playEffectNoStop(s.Windown.Neko.audio.symRouletteEnd),s.Windown.Neko.audio.playEffectNoStop(s.Windown.Neko.audio.symMultiReach,2),r.getComponent(cc.ParticleSystem).stopSystem(),r.getComponent(cc.ParticleSystem).enabled=!1,s.Windown.Neko.asset.putSymbolMutil(r.node)})))})},e.prototype.startRun=function(){var t=this;this.getComponent(cc.ParticleSystem).enabled=!0,this.getComponent(cc.ParticleSystem).stopSystem(),this.node.children[1].stopAllActions(),this.node.children[1].runAction(cc.sequence(cc.scaleTo(.4,0).easing(cc.easeBackIn()),cc.callFunc(function(){t.getComponent(cc.ParticleSystem).resetSystem()})))},r([c],e)}(cc.Component));i.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemResultDetaiMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"80d1bpT5j9JhK4x1bjta7Ie","ItemResultDetaiMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbX=null,e.lbTitleToHopWin=null,e.parentItemResult=null,e.parentItemWin=null,e.colorOf=null,e.playTable=[[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,4,4,6,6,8,10,20,30,0,0],[2,2,2,6,6,10,10,15,25,25,40,0,0],[3,3,3,8,8,12,12,20,30,30,50,0,0],[4,4,4,10,10,15,15,30,40,50,80,0,0]],e}return o(e,t),e.prototype.init=function(t,e,i,n){var o=this;if(e){this.lbTitleToHopWin.string="T\u1ed5 h\u1ee3p win",this.parentItemWin.active=!0;for(var r=this.parentItemWin.children[0],a=0,c=e.lsIdItem.length;a<c;a++){var l=e.lsIdItem[a];e.lsAgWin[a],null==(I=this.parentItemWin.children[a])&&((I=cc.instantiate(r)).parent=this.parentItemWin),I.active=!0;var u=this.getArrSf(l+1,1,0);I.children[0].children[0].getComponent(cc.Sprite).spriteFrame=u[0],I.children[0].children[1].getComponent(cc.Sprite).spriteFrame=u[2]}for(a=e.lsIdItem.length;a<this.parentItemWin.childrenCount;a++)this.parentItemWin.children[a].active=!1;this.lbX.node.active=!0}else this.lbTitleToHopWin.string="-------------",this.parentItemWin.active=!1,this.lbX.node.active=!1;var p=this.parentItemResult.children,d=p[0].children[0];if(t.forEach(function(t,e){var i=p[e],n=null;t.forEach(function(t,e){var r=i.children[e],s=t.idItem,a=t.typeItem,c=t.size;null==r&&((r=cc.instantiate(d)).parent=i);var l=o.getArrSf(s+1,c,a);r.children[0].getComponent(cc.Sprite).spriteFrame=l[0],r.children[1].getComponent(cc.Sprite).spriteFrame=l[1],r.children[2].getComponent(cc.Sprite).spriteFrame=l[2],r.children[0].color=o.colorOf,r.children[1].color=o.colorOf,r.children[2].color=o.colorOf,r.children[0].height=105*c,r.children[1].height=105*c,r.height=103*c;var u=n?n.y+n.height/2*.75:-230;r.y=u+r.height/2*.75,n=r})}),e){var h=e.lsIdItem,f=e.lsstack,y=e.lsAgWin;for(a=0,c=h.length;a<c;a++){for(var m="",S=0;S<f[a]+1;S++){for(var g=p[S],w=0,v=0,b=g.childrenCount;v<b;v++)if(t[S][v].idItem==h[a]||11==t[S][v].idItem){var M=g.children[v];M.children[0].color=cc.Color.WHITE,M.children[1].color=cc.Color.WHITE,M.children[2].color=cc.Color.WHITE,w++}m+=w+"x"}var I;m+=this.playTable[f[a]][h[a]]+"x"+s.Windown.formatNumber(n),m+="\nx"+i,(I=this.parentItemWin.children[a]).children[1].getComponent(cc.Label).string=m+"=\n"+s.Windown.formatNumber(y[a]*i)}}this.lbX.string="x"+i,this.lbX.node.active=1!=i},e.prototype.getArrSf=function(t,e,i){var n=t<12?s.Windown.Neko.asset.atlasSymbol:s.Windown.Neko.asset.atlasSpecial,o=t<12?cc.misc.clampf(e,1,2):e;return[n.getSpriteFrame("bkg_"+t+"_"+e),0==i?null:n.getSpriteFrame("khung_"+i+"_"+e),n.getSpriteFrame("item_"+t+"_"+o)]},r([l(cc.Label)],e.prototype,"lbX",void 0),r([l(cc.Label)],e.prototype,"lbTitleToHopWin",void 0),r([l(cc.Node)],e.prototype,"parentItemResult",void 0),r([l(cc.Node)],e.prototype,"parentItemWin",void 0),r([l(cc.Color)],e.prototype,"colorOf",void 0),r([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemSlotMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"dcf7b9AUZ1CaamFp8o4SAhS","ItemSlotMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_MOVE=void 0;var c=t("../../../Scritps/DefineTs/StateReelSlot"),l=t("../../../Scritps/Network/ConectManager"),u=t("../../../Scritps/Util"),p=t("../../../Scritps/Windown"),d=t("./SymbolMatTroi");(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD_NEW=1]="ADD_NEW"})(i.TYPE_MOVE||(i.TYPE_MOVE={}));var h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.sizeSymbol=12,e.funReject=null,e.resolve=null,e.stateWhel=c.default.WAITING,e.result=[],e.resultTemp=[],e.listIconEff=[],e.nodeEffNearWin=null,e.nodeWildDT=null,e.nodeWildShowDT=null,e.isScater=!1,e.index=-1,e.indexNodeFirt=0,e.isMoveSlowDown=!1,e.deltaSlowDown=0,e.listNumMutilWild=[],e.indexMaxWild=0,e.nodeNearWinNoSap=null,e.listItemSymbol=[],e.listProSkip=[],e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.initParent=function(){this.parentItemFront=cc.instantiate(this.parentItem),this.parentItemFront.setPosition(p.Windown.convertNodeInOtherNode(this.parentItem,p.Windown.MatTroiView.parentItemFront)),this.parentItemFront.parent=p.Windown.MatTroiView.parentItemFront,this.parentItemActive=cc.instantiate(this.parentItem),this.parentItemActive.setPosition(p.Windown.convertNodeInOtherNode(this.parentItem,p.Windown.MatTroiView.parentItemActive)),this.parentItemActive.parent=p.Windown.MatTroiView.parentItemActive},e.prototype.initListSymbol=function(){for(var t=[],e=0,i=this.parentItem.children;e<i.length;e++){var n=i[e].getComponent(d.default);n&&t.push(n)}this.listItemSymbol=t},e.prototype.getListSymbol=function(){return this.listItemSymbol},e.prototype.getListSymbolResult=function(){var t=[],e=this.getListSymbol();return this.result.forEach(function(i,n){t.push(e[n+1])}),t},e.prototype.setResultFirtGame=function(){var t=this.getListRandomResult(),e=t.slice(1,t.length-1);this.setResult(e),this.initParent();for(var i=this.parentItem.children,n=0,o=this.sizeSymbol;n<o;n++){var r=i[n];null==r&&((r=this.getSymbol()).parent=this.parentItem),r.x=0,r.setSiblingIndex(n);var s=r.getComponent(d.default);s.isVectical=!0,s.setItemColum(this),s.setResult(t[n])}this.parentItem.sortAllChildren(),this.initListSymbol(),this.getListSymbol().forEach(function(t){return t.initPosStartGame()})},e.prototype.getListRandomResult=function(){var t=[];if(0==this.index||5==this.index)for(var e=0;e<this.sizeSymbol;e++)t.push(this.getRandomResult());else{t.push(this.getRandomResult());var i=this.getRandomResult();t.push(i);for(var n=i.getInt("size");n<5;)n+(i=this.getRandomResult(p.Windown.RandomNumber(1,6-n))).getInt("size")<=5&&(n+=i.getInt("size"),t.push(i));for(e=t.length;e<this.sizeSymbol;e++)t.push(this.getRandomResult())}return t},e.prototype.activeNodeNearWin=function(){p.Windown.MatTroiView.activeMask(!0),p.Windown.MatTroiView.activeMask(!1,this.index),null==this.nodeEffNearWin&&(this.nodeEffNearWin=p.Windown.MatTroiView.asset.getNearWin(),this.nodeEffNearWin.parent=p.Windown.MatTroiView.parentNearWin,this.nodeEffNearWin.setPosition(p.Windown.convertNodeInOtherNode(this.node,p.Windown.MatTroiView.parentNearWin))),this.nodeEffNearWin.opacity=255,this.nodeEffNearWin.active=!0,this.nodeEffNearWin.getComponent(cc.Animation).play("NearFreeSpin"),5==this.index?this.nodeEffNearWin.children[0].x=161:this.nodeEffNearWin.children[0].x=167,p.Windown.MatTroiView.audio.playEffect(p.Windown.MatTroiView.audio.fastspinStart)},e.prototype.offNearWin=function(){p.Windown.MatTroiView.activeMask(!0,this.index),this.nodeEffNearWin&&(this.nodeEffNearWin.stopAllActions(),this.nodeEffNearWin.active=!1),5==this.index&&(p.Windown.MatTroiView.activeMask(!1),p.Windown.MatTroiView.infoBar.hideOneMoreScatter(),p.Windown.MatTroiView.infoBar.showRdContent())},e.prototype.setResult=function(t){this.result=t,this.resultTemp=t.slice(),this.indexMaxWild=this.resultTemp.length},e.prototype.checkAndRemoveItem=function(t){for(var e=!1,i=this.getListSymbol().slice(1,this.result.length+1),n=0;n<i.length;n++)i[n].result-1!=t&&i[n].result-1!=10||(0==i[n].typeItem?(i[n].removeItem(),this.result[n]=null):i[n].isShuff=!0,e=!0);e&&(this.parentItem.sortAllChildren(),this.result=this.result.filter(function(t){return null!=t}))},e.prototype.checkItemWin=function(t,e){return s(this,void 0,void 0,function(){var i,n,o,r,s,c;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),this.getListSymbol(),i=0==e?.07*this.index:.07*(6-this.index),p.Windown.MatTroiView.stateSpin.isMaxSpeed?[3,2]:[4,p.Windown.MatTroiView.getMakeDelay(i).prosime];case 1:a.sent(),a.label=2;case 2:for(n=this.getListSymbol().slice(1,this.result.length+1),o=0,r=n;o<r.length;o++)((s=r[o]).result-1==t||s.result-1==10&&!s.isTakeItem)&&(s.typewin=e,s.takeItem());return[3,4];case 3:return c=a.sent(),u.Util.ThrowErrProsime(c),[3,4];case 4:return[2]}})})},e.prototype.addNewListSymbol=function(t){var e=this;return new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s,c,l,h,f,y,m;return a(this,function(a){switch(a.label){case 0:for(a.trys.push([0,4,,5]),p.Windown.MatTroiView.stateSpin.curentCountScater,(e=this.result.slice()).reverse(),this.setResult(t),n=this.result.length-e.length,e.length=this.result.length,e.reverse(),o=this.getListSymbol(),r=o[0],s=0;s<n;s++)c=p.Windown.MatTroiView.asset.getSymbol(),this.parentItem.addChild(c,0),c.setSiblingIndex(0),(y=c.getComponent(d.default)).setItemColum(this),this.getListSymbol().unshift(y);for(this.parentItem.sortAllChildren(),l=this.getListSymbol(),h=[],l[0].setResult(this.getRandomResult()),this.result.forEach(function(t,e){var i=l[e+1];t.getInt("typeItem")!=i.typeItem&&i.isShuff||i.setResult(t)}),r.node.y=r.node.height/2,f=r.getIndexOf()-1;f>=0;)(y=l[f]).node.x=0,y.node.y=r.node.y+r.node.height/2+y.node.height/2,r=y,f--;return[4,Promise.all(h)];case 1:return a.sent(),h.length<1?[4,p.Windown.MatTroiView.getMakeDelay(.9).prosime]:[3,3];case 2:a.sent(),a.label=3;case 3:return i(null),[3,5];case 4:return m=a.sent(),u.Util.ThrowErrProsime(m),[3,5];case 5:return[2]}})})})},e.prototype.getSymbol=function(){return p.Windown.MatTroiView.asset.getSymbol()},e.prototype.checkIsNorSap=function(){var t=this.getListSymbol().filter(function(t){return t.checkIsInView()}),e=0;return t.forEach(function(t){e+=t.sizeItem}),this.sizeSymbol-2-e>0},e.prototype.moveAllSymbol=function(t){var e=this;return new Promise(function(i){return s(e,void 0,void 0,function(){var e,n,o,r,s,c,l,d,h,f,y,m,S,g,w,v,b;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,10]),e=p.Windown.MatTroiView.getDelta(),n=p.Windown.MatTroiView.stateSpin.curentCountScater>1&&!p.Windown.MatTroiView.stateSpin.isMaxSpeed,o=n||p.Windown.MatTroiView.stateSpin.isMaxSpeed?0:.05*p.Windown.RandomNumber(0,5),p.Windown.MatTroiView.stateSpin.isMaxSpeed?[3,2]:[4,p.Windown.MatTroiView.getMakeDelay(.2+o).prosime];case 1:a.sent(),a.label=2;case 2:if(r=this.getListSymbol(),(s=r.filter(function(t){return t.checkIsInView()})).reverse(),s[s.length-1],s.length>0)for(c=s[0],l=-c.size.height*(this.sizeSymbol-2)+c.node.height/2,d=function(t,i){var n=s[t],o=n.node;if(Math.abs(l-o.y)>2){var r=cc.moveTo(.25/e,o.x,l).easing(cc.easeSineIn()),a=cc.sequence(cc.moveBy(.059/e,0,18).easing(cc.easeSineOut()),cc.moveBy(.059/e,0,-18).easing(cc.easeSineIn()),cc.callFunc(function(){n.effectSpawnSymbol()}));o.runAction(cc.sequence(r,cc.callFunc(function(){}),a))}else n.isShuff&&n.effectSpawnSymbol();t<i-1&&(l=l+o.height/2+s[t+1].node.height/2)},h=0,f=s.length;h<f;h++)d(h,f);return y=0,s.forEach(function(t){y+=t.sizeItem}),m=this.sizeSymbol-2-y,n?[4,p.Windown.MatTroiView.getMakeDelay(.4).prosime]:[3,7];case 3:return a.sent(),p.Windown.MatTroiView.audio.playEffect(p.Windown.MatTroiView.audio.heartbeatNoise),p.Windown.MatTroiView.stateSpin.offAllSymbol(!1),s.forEach(function(t){t.effectNearWinScater()}),p.Windown.MatTroiView.infoBar.showOneMoreScater(),m>0?(p.Windown.MatTroiView.activeMask(!1),(S=p.Windown.MatTroiView.asset.getNearWinNoSap()).parent=this.parentItemActive,S.getComponent(cc.Animation).play(),S.setPosition(p.Windown.convertNodeInOtherNode(this.parentItem,S.parent)),[4,p.Windown.MatTroiView.getMakeDelay(4.5).prosime]):[3,6];case 4:return a.sent(),p.Windown.MatTroiView.stateSpin.activeAllSymbol(),S.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){p.Windown.MatTroiView.asset.putNearWinNoSap(S)}))),[4,p.Windown.MatTroiView.getMakeDelay(.3+.5*t).prosime];case 5:a.sent(),a.label=6;case 6:s.forEach(function(t){t.removeAddScater()}),a.label=7;case 7:return n&&m>0&&!p.Windown.MatTroiView.stateSpin.isMaxSpeed&&p.Windown.MatTroiView.audio.playEffectNoStop(p.Windown.MatTroiView.audio.heartbeatSlowdrop),g=[],w=r,v=r[0].node.height/2,w.forEach(function(t,i){var n=r[i],o=n.node;!s.includes(n)&&Math.abs(v-o.y)>1&&g.push(new Promise(function(t){var n=cc.moveTo(.25/e,o.x,v).easing(cc.easeSineIn()),s=cc.sequence(cc.moveBy(.059/e,0,18).easing(cc.easeSineOut()),cc.moveBy(.059/e,0,-18).easing(cc.easeSineIn()),cc.callFunc(function(){t(null),r[i].effectSpawnSymbol()}));o.runAction(cc.sequence(n,cc.callFunc(function(){p.Windown.MatTroiView.audio.playEffect(p.Windown.MatTroiView.audio.spinStop,.6)}),s))})),i<w.length-1&&(v=v-o.height/2-r[i+1].node.height/2)}),[4,Promise.all(g)];case 8:return a.sent(),this.reSetResultColum(),i(null),[3,10];case 9:return b=a.sent(),u.Util.ThrowErrProsime(b),[3,10];case 10:return[2]}})})})},e.prototype.runSpin=function(){this.funReject=null,this.resolve=null,this.stateWhel=c.default.RUN,this.getListSymbol().forEach(function(t){t.runSpin()})},e.prototype.stopSpin=function(t,e){var i=this;return new Promise(function(n,o){return s(i,void 0,void 0,function(){var i;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),this.listProSkip=[],this.setResult(e),this.funReject=o,this.isScater=t,this.resolve=n,this.stateWhel=c.default.CAN_STOP,t?[3,2]:(this.listProSkip.push(p.Windown.MatTroiView.getMakeDelay(.07)),[4,this.listProSkip[this.listProSkip.length-1].prosime]);case 1:r.sent(),n(null),r.label=2;case 2:return t?(this.activeNodeNearWin(),this.runSlowDownActicon(),p.Windown.MatTroiView.infoBar.showOneMoreScater(),this.listProSkip.push(p.Windown.MatTroiView.getMakeDelay(1.5)),[4,this.listProSkip[this.listProSkip.length-1].prosime]):[3,4];case 3:return r.sent(),this.stateWhel=c.default.SHOW_EFFECT,[3,5];case 4:this.stateWhel=c.default.STOP,this.recaculateSpeedSpin(!1),r.label=5;case 5:return[3,7];case 6:return i=r.sent(),u.Util.ThrowErrProsime(i),[3,7];case 7:return[2]}})})})},e.prototype.forceStopSpin=function(t,e){return this.listProSkip.forEach(function(t){t.cancle(!1)}),this.funReject&&this.funReject(),t&&(this.offNearWin(),p.Windown.MatTroiView.audio.stopEffect(p.Windown.MatTroiView.audio.fastspinStart),this.isMoveSlowDown=!1),this.stopSpinIsFastSpin(t,e)},e.prototype.stopSpinIsFastSpin=function(t,e){var i=this;return new Promise(function(t){i.stateWhel!=c.default.SHOW_EFFECT?(i.setResult(e),i.stateWhel=c.default.SHOW_EFFECT,i.parentItem.stopAllActions(),i.parentItem.y=i.node.height/2,i.reSetResultColum(),i.isMoveSlowDown=!1,i.parentItem.y+=20,i.parentItem.runAction(cc.sequence(cc.moveBy(.04,0,-20).easing(cc.easeSineOut()),cc.callFunc(function(){i.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),t(null)})))):t(null)})},e.prototype.setResultIcon=function(t){var e=this.result.slice();e.reverse(),this.setResult(t);var i=this.result.length-e.length;e.length=this.result.length,e.reverse(),this.getListSymbol()[0];for(var n=0;n<i;n++){var o=p.Windown.MatTroiView.asset.getSymbol();this.parentItem.addChild(o,0),o.setSiblingIndex(0),o.getComponent(d.default).setItemColum(this)}var r=this.getListSymbol();r[0].setResult(this.getRandomResult()),this.result.forEach(function(t,e){var i=r[e+1];t.getInt("typeItem")!=i.typeItem&&i.isShuff||i.setResult(t)})},e.prototype.recaculateSpeedSpin=function(t){var e=this.getListSymbol(),i=e[0].node.y,n=-this.node.height-e[0].node.height/2,o=Math.abs(n-i),r=.22;t&&(r=1.5),e.forEach(function(t){t.setImgResult(!1),t.stopSpin(cc.moveBy(r,0,-o))})},e.prototype.reSetResultColum=function(){var t=this.getListSymbol();if(t.length>this.sizeSymbol)for(;t.length>this.sizeSymbol;)p.Windown.MatTroiView.asset.putSymbol(t[t.length-1].node),(t=this.getListSymbol()).pop();else if(t.length<this.sizeSymbol)for(var e=t.length;e<this.sizeSymbol;e++){var i=this.getSymbol();this.parentItem.addChild(i);var n=i.getComponent(d.default);6==this.sizeSymbol?n.isVectical=!1:n.isVectical=!0,n.setItemColum(this),t.push(n)}this.result.forEach(function(e,i){t[i+1].setResult(e)}),e=this.result.length+1;for(var o=t.length;e<o;e++)t[e].setResult(t[e].objSFS);t.forEach(function(t){t.canRun=!1,t.node.stopAllActions(),t.initPosStartGame()})},e.prototype.effStopSpin=function(){var t=this;this.stateWhel!=c.default.SHOW_EFFECT&&(this.stateWhel=c.default.SHOW_EFFECT,this.parentItem.stopAllActions(),this.parentItem.y=this.node.height/2,this.reSetResultColum(),this.isMoveSlowDown=!1,0==p.Windown.MatTroiView.stateSpin.isMaxSpeed&&p.Windown.MatTroiView.audio.playEffect(p.Windown.MatTroiView.audio.spinStop,.6),this.funReject=null,this.isScater?this.parentItem.runAction(cc.sequence(cc.moveBy(.15,0,-30).easing(cc.easeSineOut()),cc.callFunc(this.offNearWin,this),cc.moveBy(.2,0,30).easing(cc.easeSineIn()),cc.callFunc(function(){t.resolve&&t.resolve(null),t.resolve=null,t.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),5==t.index&&p.Windown.MatTroiView.infoBar.hideOneMoreScatter()}))):this.parentItem.runAction(cc.sequence(cc.moveBy(.055,0,18).easing(cc.easeSineOut()),cc.moveBy(.055,0,-18).easing(cc.easeSineIn()),cc.callFunc(function(){t.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()})}))))},e.prototype.getIdSymbolResult=function(){return this.stateWhel==c.default.STOP&&this.resultTemp.pop()||this.getRandomResult()},e.prototype.checkLastSymbol=function(t){var e=this.getListSymbol();return e[e.length-1]==t},e.prototype.getRandomResult=function(){0!=this.index&&this.index;var t=null;return(t=l.ConectManager.getIns().getSFSObj()).putInt("size",1),t.putInt("idItem",p.Windown.RandomNumber(0,12)),t.putInt("typeItem",0),t},e.prototype.checkParentItem=function(){},e.prototype.runSlowDownActicon=function(){this.getListSymbol().forEach(function(t){t.node.stopAllActions()}),this.isMoveSlowDown=!0,this.deltaSlowDown=3500},e.prototype.update=function(t){var e=this;this.isMoveSlowDown&&(this.getListSymbol().forEach(function(i){i.node.y-=t*e.deltaSlowDown}),this.deltaSlowDown>500?this.deltaSlowDown-=1800*t:this.deltaSlowDown<1e3&&(this.stateWhel=c.default.STOP,this.isMoveSlowDown=!1,this.recaculateSpeedSpin(!0)))},r([y(cc.Node)],e.prototype,"parentItem",void 0),r([y(cc.Integer)],e.prototype,"sizeSymbol",void 0),r([f],e)}(cc.Component);i.default=m,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./SymbolMatTroi":"SymbolMatTroi"}],ItemWinDetailHistory:[function(t,e,i){"use strict";cc._RF.push(e,"c1a21Zm915LrL3n5xqwTL4U","ItemWinDetailHistory");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Windown"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.lbConsecutive=null,e.lbWin=null,e.lbDirectionWin=null,e.iconAtlas=[],e.payTable={0:{3:6,4:8,5:10,6:12},1:{3:6,4:8,5:10,6:12},2:{3:6,4:8,5:10,6:12},3:{3:6,4:10,5:12,6:15},4:{3:6,4:10,5:12,6:15},5:{3:6,4:10,5:12,6:15},6:{3:10,4:12,5:18,6:20},7:{3:10,4:12,5:18,6:20},8:{3:15,4:20,5:25,6:30},9:{3:15,4:20,5:25,6:30}},e}return o(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(t,e,i,n,o){this.sprIcon.spriteFrame=t<11?this.iconAtlas[0].getSpriteFrame(t.toString()):this.iconAtlas[1].getSpriteFrame(t.toString()),this.lbConsecutive.string=this.getLbConsecutive(e),this.lbDirectionWin.string=0==n?"T\u1eeb tr\xe1i qua ph\u1ea3i":"T\u1eeb ph\u1ea3i qua tr\xe1i",this.lbWin.string="x"+o.join("x")+"x"+this.getMultiplierItemWin(t,e)+"x"+s.Windown.MatTroiView.curRoomBet+"="+s.Windown.formatNumber(i)},e.prototype.getMultiplierItemWin=function(t,e){return t-=1,this.payTable[t.toString()][(e+1).toString()]},e.prototype.getLbConsecutive=function(t){var e="";switch(t){case 2:e="B\u1ed9 ba";break;case 3:e="B\u1ed9 b\u1ed1n";break;case 4:e="B\u1ed9 n\u0103m";break;case 5:e="B\u1ed9 s\xe1u"}return e},r([l(cc.Sprite)],e.prototype,"sprIcon",void 0),r([l(cc.Label)],e.prototype,"lbConsecutive",void 0),r([l(cc.Label)],e.prototype,"lbWin",void 0),r([l(cc.Label)],e.prototype,"lbDirectionWin",void 0),r([l([cc.SpriteAtlas])],e.prototype,"iconAtlas",void 0),r([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],LichSuMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"24686easvlN75Wa9mZi54Mo","LichSuMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/DefineTs/REQUEST_CODE"),a=t("../../../Scritps/Network/ConectManager"),c=t("../../../Scritps/Popup/PageData/PageData"),l=t("../../../Scritps/Windown"),u=t("./DetailHistoryMatTroi"),p=t("./ItemLichSuMatTroi"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageDate=null,e.detail=null,e.listData=null,e.maxRow=11,e}return o(e,t),e.prototype.show=function(){this.node.active=!0,this.reset(),this.node.y=-1280,this.node.stopAllActions(),this.node.runAction(cc.moveTo(.3,0,0)),a.ConectManager.getIns().sendRequest(s.REQUEST_CODE.HistoryMatTroi,null,l.Windown.MatTroiView.roomSFS),l.Windown.UIManager.showLoading()},e.prototype.responseServer=function(t){l.Windown.UIManager.hideLoading();var e=t.getSFSArray("history");this.initWithListData(e)},e.prototype.responseServerChiTiet=function(t){l.Windown.UIManager.hideLoading(),this.showDetail(t)},e.prototype.initWithListData=function(t){cc.log(l.Windown.SFSArrToJson(t)),this.pageDate.content.children;var e=t.size(),i=Math.floor(e/this.maxRow);e%this.maxRow>0&&i++,0==i&&(i=1),this.pageDate.setTotalPage(i),this.listData=t,this.onChangePage(1)},e.prototype.onChangePage=function(t){for(var e=this.pageDate.content,i=e.children,n=i[0],o=(t-1)*this.maxRow,r=0,s=this.maxRow;r<s;r++){var a=i[r];if(o<this.listData.size()){null==a&&(a=cc.instantiate(n),e.addChild(a),a.y=-(r+1)*a.height+a.height/2);var c=this.listData.getSFSObject(o);a.getComponent(p.default).initItem(c),a.active=!0,o++}else{if(!a)break;a.active=!1}}},e.prototype.showDetail=function(t){console.log(l.Windown.SFSObjToJson(t)),this.detail.show(t)},e.prototype.resetContent=function(){for(var t=this.pageDate.content.children,e=0,i=t.length;e<i;e++)t[e].active=!1},e.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},e.prototype.onClickClose=function(){var t=this;l.Windown.MatTroiView.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){t.node.active=!1})))},r([f(c.default)],e.prototype,"pageDate",void 0),r([f(u.default)],e.prototype,"detail",void 0),r([h],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryMatTroi":"DetailHistoryMatTroi","./ItemLichSuMatTroi":"ItemLichSuMatTroi"}],MatTroiView:[function(t,e,i){"use strict";cc._RF.push(e,"5101eaMqfxDCqoPAkoIzvRN","MatTroiView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/EVENT_MANAGER"),l=t("../../../Scritps/DefineTs/PlayerPP"),u=t("../../../Scritps/DefineTs/REQUEST_CODE"),p=t("../../../Scritps/DefineTs/StateReelSlot"),d=t("../../../Scritps/DefineTs/TextDefine"),h=t("../../../Scritps/Game/GAME_TYPE"),f=t("../../../Scritps/Network/ConectManager"),y=t("../../../Scritps/Obs/LbMoneyChange"),m=t("../../../Scritps/Other/LbMonoSpace"),S=t("../../../Scritps/Other/MakeDelay"),g=t("../../../Scritps/Util"),w=t("../../../Scritps/Windown"),v=t("./AssetMatTroi"),b=t("./AudioMatTroi"),M=t("./EffectControlMatTroi"),I=t("./EffectMatTroi"),T=t("./InfoBarControllerMatTroi"),W=t("./ItemSlotMatTroi"),_=t("./LichSuMatTroi"),C=t("./MultiControlMatTroi"),A=t("./SpinNormalMatTroi"),E=cc._decorator,O=E.ccclass,N=E.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.asset=null,e.bkgSprite=null,e.parentItem=null,e.parentEffect=null,e.parentBackgroundEffect=null,e.parentItemFront=null,e.parentItemActive=null,e.parentNearWin=null,e.nodeLine=null,e.effect=null,e.labelChipReviceInBox=null,e.lb_totalBet=null,e.toggleMusic=null,e.lb_FSLeft=null,e.lb_TotalLine=null,e.lb_CountAuto=null,e.infoBar=null,e.effectController=null,e.muitlCtr=null,e.btnSpin=null,e.parentMask=null,e.nodeChooseAuto=null,e.khungItem=null,e._popupLichSu=null,e.audio=null,e.listNodeDeactive=[],e.nodeBtnPlay=null,e.nodeBtnSeting=null,e.toggleTurbo=null,e.btnStartAuto=null,e.listColum=[],e.listResult=null,e.listResultConvert=[],e.listConfigBet=[],e.gameType=-1,e.sfs=null,e.roomSFS=null,e.stateReel=0,e.totalLineBet=20,e.curRoomBet=50,e.funEnd=null,e.isShowBtnPlay=!0,e.dataFinish=null,e.sfsObjTest=null,e.sfsObjTest2=null,e.stateSpin=null,e.makeDelay=null,e.currentTotalLine=1,e.isMouseEnterSpin=!1,e}return o(e,t),e.prototype.onLoad=function(){w.Windown.MatTroiView=this,this.makeDelay=new S.default(this),this.gameType=h.default.MatTroi,this.sfs=f.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(c.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),cc.systemEvent.on(c.EVENT_MANAGER.LOGIN,this.onLogin,this),this.setupView(),this.stateReel=p.default.WAITING,this.stateSpin=new A.default,this.sendJoinRoom(),this.activeMask(!1),this.registerBtnSpinEffect()},e.prototype.onLogin=function(){this.sendJoinRoom()},e.prototype.registerBtnSpinEffect=function(){var t=this;this.btnSpin.on(cc.Node.EventType.MOUSE_ENTER,function(){var e=t.btnSpin.getChildByName("cirle");if(t.isMouseEnterSpin=!0,1.2==e.scale&&t.stateReel==p.default.WAITING){var i=cc.tween(e).set({scale:.5,opacity:0}).to(.75,{scale:1.2,opacity:255},{easing:cc.easing.sineOut}).to(.1,{opacity:0}).delay(.5).call(function(){t.isMouseEnterSpin&&i.start()});i.start()}}),this.btnSpin.on(cc.Node.EventType.MOUSE_LEAVE,function(){t.isMouseEnterSpin=!1})},e.prototype.start=function(){var t=this;this.setupView(),this.initItem(),w.Windown.AudioManager.isActiveSound&&w.Windown.AudioManager.isActiveMusic?(this.toggleMusic.isChecked=!0,this.toggleMusic.checkMark.node.active=!0,this.toggleMusic.node.children[0].active=!1):(this.toggleMusic.isChecked=!1,this.toggleMusic.checkMark.node.active=!1,this.toggleMusic.node.children[0].active=!0),cc.sys.isNative||this.scheduleOnce(function(){return s(t,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,w.Windown.loadBundle(h.default.MatTroi.toString())];case 1:return t.sent().loadDir("Spine",function(){}),[2]}})})},3)},e.prototype.onDestroy=function(){w.Windown.MatTroiView=null,this.dataFinish&&(w.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),w.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),w.Windown.UIManager.changeRotation(),this.makeDelay.clear()},e.prototype.switchBkgGame=function(t){var e=cc.find("Game/BkgGround/FreeSpin",this.node);w.Windown.MatTroiView.lb_FSLeft.node.parent.active=!1,t?(e.active=!0,cc.find("Game/BkgGround/Normal",this.node).active=!1,w.Windown.MatTroiView.lb_FSLeft.node.parent.active=!0):(cc.find("Game/BkgGround/Normal",this.node).active=!0,e.active=!1)},e.prototype.initItem=function(){for(var t=cc.instantiate(this.parentItem.children[0]),e=(t.width,0);e<6;e++){var i=this.parentItem.children[e];null==i&&((i=cc.instantiate(t)).parent=this.parentItem);var n=i.getComponent(W.default);this.listColum.push(n),n.index=e,n.setResultFirtGame(),n.node.y=0}},e.prototype.activeMask=function(t,e,i){void 0===i&&(i=.3);var n=this.parentMask.children;t?e?(n[e].stopAllActions(),n[e].runAction(cc.fadeTo(i,180))):(n.forEach(function(t){t.stopAllActions(),t.runAction(cc.fadeTo(i,180))}),this.khungItem.stopAllActions(),cc.tween(this.khungItem).to(i,{color:cc.Color.GRAY}).start()):e?(n[e].stopAllActions(),n[e].runAction(cc.fadeOut(i))):(n.forEach(function(t){t.stopAllActions(),t.runAction(cc.fadeOut(i))}),this.khungItem.stopAllActions(),cc.tween(this.khungItem).to(i,{color:cc.Color.WHITE}).start())},e.prototype.getMakeDelay=function(t){return this.makeDelay.getDelay(t)},e.prototype.resetLbTotalLine=function(){this.currentTotalLine=1,this.lb_TotalLine.string=". . ."},e.prototype.onClickBtnSpin=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.stateReel!=p.default.WAITING?[3,2]:(this.audio.playEffect(this.audio.spinBtn),this.audio.playEffect(this.audio.spinActivated),this.stateReel=p.default.RUN,this.setStateEffBtnSpin(),this.offAllBtn(),this.infoBar.reset(),this.effectController.resetForNewSpin(),[4,this.stateSpin.onStart()]);case 1:return e.sent(),this.sendClickSpin(),[3,3];case 2:this.stateReel==p.default.CAN_STOP?this.stateSpin.isMaxSpeed||(this.unschedule(this.funEnd),this.stateSpin.onForceEnd(),this.stateReel=p.default.RUN):this.stateReel==p.default.STOP||this.stateReel==p.default.SHOW_EFFECT&&(this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),e.label=3;case 3:return[3,5];case 4:return t=e.sent(),g.Util.ThrowErrProsime(t),[3,5];case 5:return[2]}})})},e.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return f.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),this.sfsObjTest=null,void cc.log("send test ne");if(null!=this.sfsObjTest2)return f.ConectManager.getIns().sendRequest("testSpin2",this.sfsObjTest2,this.roomSFS),this.sfsObjTest2=null,void cc.log("send test2 ne");var t=f.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),f.ConectManager.getIns().sendRequest(u.REQUEST_CODE.SpinMatTroi,t,this.roomSFS)},e.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!1,t.node.children.forEach(function(t){t.color=cc.Color.fromHEX(new cc.Color,"#999999")})})},e.prototype.setStateEffBtnSpin=function(){var t=this.btnSpin.getComponent(cc.Animation),e=cc.find("sb_arrow",this.btnSpin),i=cc.find("sb_arrow_blur",this.btnSpin);if(this.stateReel!=p.default.STOP){var n=cc.Material.getBuiltinMaterial("2d-sprite");e.getComponentInChildren(cc.Sprite).setMaterial(0,n)}if(this.stateReel==p.default.WAITING||this.stateReel==p.default.SHOW_EFFECT)0==this.stateSpin.countAutoSpin?(i.active=!1,e.active=!0,t.play("btnSpin"),n=cc.Material.getBuiltinMaterial("2d-sprite"),e.getComponentInChildren(cc.Sprite).setMaterial(0,n),this.btnSpin.getChildByName("sb_base").active=!0):this.btnSpin.getChildByName("sb_base").active=!1,cc.find("mf_vfx_j_sun_add_00",this.btnSpin).getComponent(cc.Sprite).spriteFrame=null,cc.find("sb_vfx_b_screen",this.btnSpin).getComponent(cc.Sprite).spriteFrame=null;else if(this.stateReel==p.default.RUN)this.audio.playEffect(this.audio.spinBtn),this.audio.playEffect(this.audio.menu_icon_press),0==this.stateSpin.countAutoSpin?(t.play("btnSpin_Click"),i.active=!0,i.stopAllActions(),i.runAction(cc.repeatForever(cc.rotateBy(.3,-360))),e.active=!1,this.btnSpin.getChildByName("sb_base").active=!0):this.btnSpin.getChildByName("sb_base").active=!1,this.infoBar.showRdContent();else if(this.stateReel==p.default.STOP){e.active=!0,e.stopAllActions(),i.active=!1;var o=cc.Material.getBuiltinMaterial("2d-gray-sprite");e.getComponentInChildren(cc.Sprite).setMaterial(0,o)}},e.prototype.sendJoinRoom=function(){try{var t=f.ConectManager.getIns().getValibleRoomName(),e=new SFS2X.RoomSettings(t),i=new SFS2X.RoomExtension("MatTroiExtension","ext.Room.SlotMatTroiMatTrang.SlotGameView");e.extension=i,e.isGame=!0,e.maxUsers=1,e.groupId="SlotMatTroi",this.sfs.send(new SFS2X.CreateRoomRequest(e,!0))}catch(n){cc.error(n),this.onDisconnect()}},e.prototype.userExitRoom=function(t){cc.log("user exit room"),"SlotMatTroi"==t.room.groupId&&t.user.isItMe&&cc.director.loadScene("main")},e.prototype.onCreateError=function(){cc.log("creat errr"),w.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),w.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM)},e.prototype.onJoinRoom=function(t){var e=t.room;if("SlotMatTroi"==e.groupId){this.roomSFS=e,w.Windown.UIManager.hideLoadingData(),cc.log("hide loading data nay");var i=e.getVariable("cf").value;cc.log(i);var n=[],o=JSON.parse(i);for(var r in o){var s=Object.create(null);s.bet=parseInt(r),s.perJp=o[r].percentPot/100,n.push(s)}n.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=n,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=w.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),w.Windown.UIManager.hideLoading(),w.Windown.UIManager.hideLoadingData(),w.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.extResponse=function(t){var e=t.cmd,i=t.params;switch(e){case u.REQUEST_CODE.SpinMatTroi:cc.log(w.Windown.SFSObjToJson(i)),this.handleFinish(i);break;case u.REQUEST_CODE.HistoryMatTroi:this._popupLichSu&&this._popupLichSu.responseServer(i);break;case u.REQUEST_CODE.HistoryChiTietMatTroi:this._popupLichSu&&this._popupLichSu.responseServerChiTiet(i);break;case u.REQUEST_CODE.REQUEST_GET_LastSpin_SLOT:this.handleGetLastSpinSlot(i)}},e.prototype.handleGetLastSpinSlot=function(t){var e=t.get("t"),i=t.get("iF");if(e==h.default.MatTroi&&i&&null==this.dataFinish){var n=t.get("d"),o=n.get("numFreeSpin");this.stateSpin.lastFreeSpinLeft=o,this.stateSpin.freeSpinLeft=o-1,this.lb_FSLeft.string=this.stateSpin.freeSpinLeft.toString();var r=n.getIntArray("bonusSpinR"),s=n.getIntArray("bonusSpinL"),a=s[s.length-1],c=r[r.length-1];return this.effect.swidthFS(!0,a,c),this.dataFinish=n,void this.onClickBtnSpin()}e==h.default.MatTroi&&this.stateReel==p.default.RUN&&(!t.containsKey("d")||this.dataFinish&&w.Windown.SFSObjToJson(this.dataFinish)==w.Windown.SFSObjToJson(t.get("d"))?this.sendClickSpin():this.handleFinish(t.get("d")))},e.prototype.handleFinish=function(t){var e=this;if(t.containsKey(l.PlayerPP.ERR_MESSAGE))return this.stateSpin.handleErrSpin(),w.Windown.Dialog.showLog(t.get(l.PlayerPP.ERR_MESSAGE)),this.activeAllBtn(),void this.onClickResetCountAuto();this.dataFinish=t,w.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.get("agUser"),t.get("agWin")),this.truTienBet(this.dataFinish.get("agBet")*this.totalLineBet,this.dataFinish.get("agUser")),this.listResult=t.get("views");var i=t.getIntArray("bonusSpinR"),n=t.getIntArray("bonusSpinL");this.listResultConvert=this.convertResult(this.listResult,JSON.parse(w.Windown.SFSArrToJson(t.get("listItemWinL"))),JSON.parse(w.Windown.SFSArrToJson(t.get("listItemWinR"))),i,n),this.stateSpin.isMaxSpeed,this.stateReel=p.default.CAN_STOP;var o=this.stateSpin.isMaxSpeed?0:.5;this.scheduleOnce(this.funEnd=function(){e.stateSpin.onEnd()},o)},e.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1,w.Windown.MatTroiView.audio.playClick()},e.prototype.convertResult=function(t,e,i,n,o){var r=this,s=[];return w.Windown.foreachSFSArray(t,function(t,a){var c=Object.create(null);c.listSFSObj=[],c.agWin=0,c.bonusSpinR=a<n.length?n[a]:1,c.bonusSpinL=a<o.length?o[a]:1,w.Windown.foreachSFSArray(t,function(n,o){var r=[];if(w.Windown.foreachSFSArray(n,function(t){r.push(t)}),r.reverse(),c.listSFSObj.push(r),r.forEach(function(t){JSON.parse(w.Windown.SFSObjToJson(t))}),o==t.size()-1){var s=e.shift();s&&(s.lsIdItem=JSON.parse(s.lsIdItem),s.lsstack=JSON.parse(s.lsstack),s.lsAgWin=JSON.parse(s.lsAgWin),s.lsAgWin.length>0&&(c.listItemWinL=s,c.isNoSap=!0),s.lsAgWin.forEach(function(t){c.agWin+=t}));var a=i.shift();a&&(a.lsIdItem=JSON.parse(a.lsIdItem),a.lsstack=JSON.parse(a.lsstack),a.lsAgWin=JSON.parse(a.lsAgWin),a.lsAgWin.length>0&&(c.listItemWinR=a,c.isNoSap=!0),a.lsAgWin.forEach(function(t){c.agWin+=t}))}}),c.countScater=r.getCountScater(c.listSFSObj),s.push(c)}),s},e.prototype.getListActiveScaster=function(t){for(var e=[],i=0,n=0;n<t.length;n++)e.push(i>=2),t[n].forEach(function(t){11==t.getInt("idItem")&&i++});return e},e.prototype.clearAllMakeDelay=function(){this.makeDelay.clear()},e.prototype.resetForNewGame=function(){this.stateReel=p.default.WAITING,this.setStateEffBtnSpin()},e.prototype.setLbFreeSpinLeft=function(t){var e=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=t.toString(),t<1?(cc.find("last_spin",e).active=!0,cc.find("remaining_spin",e).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last_spin",e).active=!1,cc.find("remaining_spin",e).active=!0,this.lb_FSLeft.node.active=!0)},e.prototype.setCountAuto=function(t){this.lb_CountAuto.node.parent.active=!(t<1),this.lb_CountAuto.string=t.toString()},e.prototype.getCountScater=function(t){var e=0;return t.forEach(function(t){t.forEach(function(t){11==t.getInt("idItem")&&e++})}),e},e.prototype.truTienBet=function(t,e){0!=t&&w.Windown.MoneyUser.subMoney(t,e)},e.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!0,t.node.children.forEach(function(t){t.color=cc.Color.fromHEX(new cc.Color,"#FFD500")})})},e.prototype.getDelta=function(){return this.stateSpin.isMaxSpeed?2:1},e.prototype.updateNewTotalLine=function(t){this.currentTotalLine*=t,this.lb_TotalLine.string=this.currentTotalLine.toString()},e.prototype.onDisconnect=function(){cc.log("disconnect"),w.Windown.UIManager.hideLoading(),w.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.setupView=function(){var t=cc.find("Game",this.node);if(cc.sys.isMobile)t.angle=90,this.bkgSprite.angle=90,this.bkgSprite.scale=1280/720;else{var e=cc.winSize.height/1280;t.angle=0,t.scale=e,this.bkgSprite.angle=0;var i=this.bkgSprite.addComponent(cc.Widget);i.left=0,i.right=0,i.bottom=0,i.top=0}w.Windown.UIManager.changeRotation(!0)},e.prototype.onClickChangeBet=function(t,e){if(w.Windown.MatTroiView.audio.playClick(),this.listConfigBet.length<1)w.Windown.Dialog.showLog(d.TextDefine.Error);else{var i=-1;for(var n in this.listConfigBet)if(this.listConfigBet[n].bet==this.curRoomBet){i=parseInt(n);break}0==e?i--:i++,i<0&&(i=this.listConfigBet.length-1),i>this.listConfigBet.length-1&&(i=0),this.curRoomBet=this.listConfigBet[i].bet,this.lb_totalBet.string=w.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onClickSeting=function(){if(w.Windown.MatTroiView.audio.playClick(),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)t=cc.v2(0,-750),this.nodeBtnPlay.runAction(cc.fadeIn(.4)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.3),cc.moveTo(.3,t)));else{this.nodeBtnPlay.stopAllActions(),this.nodeBtnSeting.stopAllActions();var t=cc.v2(0,-525.279);this.nodeBtnPlay.runAction(cc.fadeOut(.3)),this.nodeBtnSeting.opacity=0,this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.4),cc.moveTo(.4,t)))}},e.prototype.onClickTurbo=function(){w.Windown.MatTroiView.audio.playClick();var t=this.toggleTurbo.isChecked;this.toggleTurbo.node.children[1].active=!t,this.stateSpin.isMaxSpeed=t,t?(w.Windown.UIManager.showAlertMini("\u0110\xe3 B\u1eacT quay nhanh"),this.toggleTurbo.node.getChildByName("ic_toast_turbo_off").active=!1,this.toggleTurbo.node.getChildByName("ic_toast_turbo_on").active=!0):(w.Windown.UIManager.showAlertMini("\u0110\xe3 T\u1eaeT quay nhanh"),this.toggleTurbo.node.getChildByName("ic_toast_turbo_off").active=!0,this.toggleTurbo.node.getChildByName("ic_toast_turbo_on").active=!1)},e.prototype.onClickBackToLobby=function(){w.Windown.MatTroiView.audio.playClick(),this.roomSFS?f.ConectManager.getIns().sendLeaveRoom(this.roomSFS):cc.director.loadScene("main")},e.prototype.onClickMusic=function(){w.Windown.MatTroiView.audio.playClick();var t=this.toggleMusic.isChecked;this.toggleMusic.node.children[0].active=!t,w.Windown.AudioManager?(w.Windown.AudioManager.isActiveSound=t,w.Windown.AudioManager.isActiveMusic=t):t?(w.Windown.setLocalStorage("sound","on"),w.Windown.setLocalStorage("music","on")):(w.Windown.setLocalStorage("sound","off"),w.Windown.setLocalStorage("music","off"))},e.prototype.onClickCachChoi=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return cc.log("onClickCachChoi1"),w.Windown.MatTroiView.audio.playClick(),cc.log("onClickCachChoi2"),w.Windown.UIManager.showLoading(),[4,w.Windown.loadRes(this.gameType.toString(),"Prefabs/CachChoi",cc.Prefab)];case 1:return t=e.sent(),cc.log("onClickCachChoi3"),cc.instantiate(t).parent=w.Windown.MatTroiView.node.getChildByName("Game"),cc.log("onClickCachChoi"),w.Windown.UIManager.hideLoading(),[2]}})})},e.prototype.onClickLichSu=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return w.Windown.MatTroiView.audio.playClick(),w.Windown.UIManager.showLoading(),[4,w.Windown.loadRes(this.gameType.toString(),"Prefabs/LichSu",cc.Prefab)];case 1:return t=e.sent(),this._popupLichSu=cc.instantiate(t).getComponent(_.default),this._popupLichSu.node.parent=w.Windown.MatTroiView.node.getChildByName("Game"),this._popupLichSu.show(),[2]}})})},e.prototype.showMoneyAllWin=function(t){this.labelChipReviceInBox.setMoney(t),w.Windown.MoneyUser.removeDelay(this.gameType)},e.prototype.onClickFakeAllData=function(){var t={data:'{"agWin":2100,"numFreeSpin":0,"bonusSpinR":[2,2],"agUser":147650,"listItemWinL":[{"2b":false,"lsIdItem":"[1]","lsstack":"[2]","lsAgWin":"[300]","win":300},{"2b":false,"lsIdItem":"[0]","lsstack":"[3]","lsAgWin":"[400]","win":400}],"bonusSpinL":[3,3],"agBet":50,"listItemWinR":[{"2b":false,"lsIdItem":"[]","lsstack":"[]","lsAgWin":"[]","win":0},{"2b":false,"lsIdItem":"[]","lsstack":"[]","lsAgWin":"[]","win":0}],"views":[[[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":11}]],[[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":2}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":3}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":11}]],[[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":5}],[{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":7}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":6},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":0}],[{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":5},{"size":1,"typeItem":0,"idItem":1}],[{"size":1,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":8}],[{"size":1,"typeItem":0,"idItem":4},{"size":1,"typeItem":0,"idItem":11}]]],"Scarter3":false}',bet:this.curRoomBet};this.sfsObjTest2=w.Windown.JsonToSFSObj(JSON.stringify(t)),this.onClickBtnSpin(),cc.log("onClickFakeAllData")},e.prototype.onClickSendObjTest=function(){var t=f.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),t.putUtfString("arr",'[[{"size":1,"typeItem":0,"idItem":0},{"size":1,"typeItem":0,"idItem":11}],\n            [{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":8},{"size":1,"typeItem":0,"idItem":8}],\n            [{"size":1,"typeItem":0,"idItem":11},{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":0}],\n            [{"size":1,"typeItem":0,"idItem":1},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3},{"size":1,"typeItem":0,"idItem":10}],\n            [{"size":1,"typeItem":0,"idItem":7},{"size":1,"typeItem":0,"idItem":2},{"size":1,"typeItem":0,"idItem":3}],\n            [{"size":9,"typeItem":0,"idItem":9},{"size":1,"typeItem":0,"idItem":3}]]'),this.sfsObjTest=t,this.onClickBtnSpin(),cc.log("onClickSendObjTest")},e.prototype.onClickItemAutoSpin=function(t){w.Windown.MatTroiView.audio.playClick(),this.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer).allowSwitchOff=!1;var e=t.node.name,i=Number(e);this.stateSpin.countAutoSpin=i,this.btnStartAuto.interactable=!0,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#FF8E26")},e.prototype.onClickStartAutoSpin=function(){this.onClickBtnSpin(),this.onClickCloseListAuto(),w.Windown.MatTroiView.stateSpin.countAutoSpin>0&&w.Windown.MatTroiView.setCountAuto(w.Windown.MatTroiView.stateSpin.countAutoSpin)},e.prototype.onClickShowListAuto=function(){w.Windown.MatTroiView.audio.playClick(),this.nodeChooseAuto.active=!0,this.nodeChooseAuto.opacity=0,this.nodeChooseAuto.runAction(cc.fadeIn(.3)),this.btnStartAuto.interactable=!1,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")},e.prototype.onClickCloseListAuto=function(){var t=this;w.Windown.MatTroiView.audio.playClick(),this.nodeChooseAuto.stopAllActions(),this.nodeChooseAuto.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){var e=t.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer);e.allowSwitchOff=!0,e.toggleItems.forEach(function(t){t.isChecked&&t.uncheck()}),t.nodeChooseAuto.active=!1,t.btnStartAuto.interactable=!1,t.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")})))},r([N(v.default)],e.prototype,"asset",void 0),r([N(cc.Node)],e.prototype,"bkgSprite",void 0),r([N(cc.Node)],e.prototype,"parentItem",void 0),r([N(cc.Node)],e.prototype,"parentEffect",void 0),r([N(cc.Node)],e.prototype,"parentBackgroundEffect",void 0),r([N(cc.Node)],e.prototype,"parentItemFront",void 0),r([N(cc.Node)],e.prototype,"parentItemActive",void 0),r([N(cc.Node)],e.prototype,"parentNearWin",void 0),r([N(cc.Node)],e.prototype,"nodeLine",void 0),r([N(I.default)],e.prototype,"effect",void 0),r([N(y.default)],e.prototype,"labelChipReviceInBox",void 0),r([N(cc.Label)],e.prototype,"lb_totalBet",void 0),r([N(cc.Toggle)],e.prototype,"toggleMusic",void 0),r([N(m.default)],e.prototype,"lb_FSLeft",void 0),r([N(cc.Label)],e.prototype,"lb_TotalLine",void 0),r([N(m.default)],e.prototype,"lb_CountAuto",void 0),r([N(T.default)],e.prototype,"infoBar",void 0),r([N(M.default)],e.prototype,"effectController",void 0),r([N(C.default)],e.prototype,"muitlCtr",void 0),r([N(cc.Node)],e.prototype,"btnSpin",void 0),r([N(cc.Node)],e.prototype,"parentMask",void 0),r([N(cc.Node)],e.prototype,"nodeChooseAuto",void 0),r([N(cc.Node)],e.prototype,"khungItem",void 0),r([N(b.default)],e.prototype,"audio",void 0),r([N([cc.Button])],e.prototype,"listNodeDeactive",void 0),r([N(cc.Node)],e.prototype,"nodeBtnPlay",void 0),r([N(cc.Node)],e.prototype,"nodeBtnSeting",void 0),r([N(cc.Toggle)],e.prototype,"toggleTurbo",void 0),r([N(cc.Button)],e.prototype,"btnStartAuto",void 0),r([O],e)}(cc.Component);i.default=B,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Other/MakeDelay":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetMatTroi":"AssetMatTroi","./AudioMatTroi":"AudioMatTroi","./EffectControlMatTroi":"EffectControlMatTroi","./EffectMatTroi":"EffectMatTroi","./InfoBarControllerMatTroi":"InfoBarControllerMatTroi","./ItemSlotMatTroi":"ItemSlotMatTroi","./LichSuMatTroi":"LichSuMatTroi","./MultiControlMatTroi":"MultiControlMatTroi","./SpinNormalMatTroi":"SpinNormalMatTroi"}],MultiControlMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"ed0dfBjo59Am5DM+R7ndcYX","MultiControlMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=t("../../../Scritps/Other/LbMonoSpace"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMultil=null,e.nodeMultilFade=null,e.curentMutil=0,e.resolve=null,e}return o(e,t),e.prototype.start=function(){this.nodeMultilFade.opacity=0},e.prototype.take=function(){this.nodeMultil.getComponentInChildren(s.default).string="x"+this.curentMutil.toString(),this.nodeMultilFade.getComponentInChildren(s.default).string="x"+this.curentMutil.toString()},e.prototype.startFreeSpin=function(){this.curentMutil=2,this.nodeMultil.getComponentInChildren(s.default).string="x"+this.curentMutil.toString(),this.nodeMultilFade.getComponentInChildren(s.default).string="x"+this.curentMutil.toString(),this.nodeMultil.opacity=255},e.prototype.endTakeMultil=function(){var t=this;return new Promise(function(e){t.curentMutil>0?(t.nodeMultil.stopAllActions(),t.nodeMultil.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,.8).easing(cc.easeQuinticActionIn()),cc.moveTo(.3,0,-138).easing(cc.easeQuinticActionIn())),cc.callFunc(function(){t.getComponent(cc.Animation).play("TakeMutilIB"),t.nodeMultilFade.opacity=0,t.nodeMultilFade.scale=.8,t.nodeMultilFade.stopAllActions(),t.nodeMultilFade.runAction(cc.spawn(cc.fadeTo(.1,120),cc.scaleTo(.5,2).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.4),cc.fadeOut(.1).easing(cc.easeQuinticActionOut())))),e(null),t.resolve=null}),cc.moveTo(.3,0,-280).easing(cc.easeQuinticActionOut())))):e(null)})},e.prototype.resetForNextSpin=function(){},r([l(cc.Node)],e.prototype,"nodeMultil",void 0),r([l(cc.Node)],e.prototype,"nodeMultilFade",void 0),r([c],e)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0}],SpinNormalMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"38d83AoChdIjJBpcxkrJ8A5","SpinNormalMatTroi");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=t("../../../Scritps/DefineTs/StateReelSlot"),s=t("../../../Scritps/Util"),a=t("../../../Scritps/Windown"),c=t("./EffectControlMatTroi"),l=function(){function t(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.freeSpinLeft=0,this.freeSpinCache=0,this.moneyTotalFs=0,this.curentCountScater=0,this.currentMutilFs=1,this.isShowNearWin=!1,this.listColum=a.Windown.MatTroiView.listColum,this.effect=a.Windown.MatTroiView.effect}return t.prototype.onStart=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,i;return o(this,function(n){switch(n.label){case 0:n.trys.push([0,7,,8]),this.removeAllMutilAdded(),t=0,n.label=1;case 1:return t<this.listColum.length?(this.listColum[t].runSpin(),this.isMaxSpeed?[3,3]:[4,a.Windown.MatTroiView.getMakeDelay(.025).prosime]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return this.isMaxSpeed?[4,a.Windown.MatTroiView.getMakeDelay(.1).prosime]:[3,6];case 5:n.sent(),n.label=6;case 6:return a.Windown.MatTroiView.audio.playEffect(a.Windown.MatTroiView.audio.spinActiveLoop,.5,!0),[3,8];case 7:return i=n.sent(),s.Util.ThrowErrProsime(i),[3,8];case 8:return e(null),[2]}})})})},t.prototype.onEnd=function(){return n(this,void 0,void 0,function(){var t,e,i,n,r,c,l,u,p,d;return o(this,function(o){switch(o.label){case 0:t=a.Windown.MatTroiView.listResultConvert,o.label=1;case 1:for(o.trys.push([1,13,,14]),e=a.Windown.MatTroiView.getListActiveScaster(t[0].listSFSObj),i=0,n=[],this.isShowNearWin=!1,r=0,c=e;r<c.length;r++)if(p=c[r]){this.isShowNearWin=!0;break}a.Windown.MatTroiView.audio.stopEffect(a.Windown.MatTroiView.audio.spinActiveLoop),l=0,u=this.listColum,o.label=2;case 2:return l<u.length?(p=u[l],this.isMaxSpeed?[3,4]:[4,p.stopSpin(e[i],t[0].listSFSObj[i])]):[3,7];case 3:return o.sent(),[3,5];case 4:n.push(p.stopSpinIsFastSpin(e[i],t[0].listSFSObj[i])),o.label=5;case 5:i++,o.label=6;case 6:return l++,[3,2];case 7:return this.isMaxSpeed?[4,Promise.all(n)]:[3,10];case 8:return o.sent(),a.Windown.MatTroiView.audio.playEffect(a.Windown.MatTroiView.audio.spinStopQuick),[4,a.Windown.MatTroiView.getMakeDelay(.25).prosime];case 9:return o.sent(),[3,12];case 10:return[4,a.Windown.MatTroiView.getMakeDelay(.5).prosime];case 11:o.sent(),o.label=12;case 12:return cc.log("stop all colum1"),this.handleStopAllColum(),[3,14];case 13:return d=o.sent(),s.Util.ThrowErrProsime(d),[3,14];case 14:return[2]}})})},t.prototype.handleErrSpin=function(){return n(this,void 0,void 0,function(){var t,e,i,n;return o(this,function(o){switch(o.label){case 0:a.Windown.MatTroiView.audio.stopEffect(a.Windown.MatTroiView.audio.spinActiveLoop),o.label=1;case 1:o.trys.push([1,7,,8]),t=0,e=this.listColum,o.label=2;case 2:return t<e.length?(i=e[t],this.isMaxSpeed?[3,4]:[4,i.stopSpin(!1,i.result)]):[3,6];case 3:return o.sent(),[3,5];case 4:i.stopSpin(!1,i.result),o.label=5;case 5:return t++,[3,2];case 6:return a.Windown.MatTroiView.resetForNewGame(),[3,8];case 7:return n=o.sent(),s.Util.ThrowErrProsime(n),[3,8];case 8:return[2]}})})},t.prototype.onForceEnd=function(){return n(this,void 0,void 0,function(){var t,e,i,n,r,c,l,u;return o(this,function(o){switch(o.label){case 0:for(o.trys.push([0,3,,4]),a.Windown.MatTroiView.clearAllMakeDelay(),t=a.Windown.MatTroiView.listResultConvert,e=a.Windown.MatTroiView.getListActiveScaster(t[0].listSFSObj),i=[],n=0,r=0,c=this.listColum;r<c.length;r++)l=c[r],i.push(l.forceStopSpin(e[n],t[0].listSFSObj[n])),n++;return a.Windown.MatTroiView.audio.playEffect(a.Windown.MatTroiView.audio.spinStopQuick),[4,Promise.all(i)];case 1:return o.sent(),[4,a.Windown.MatTroiView.getMakeDelay(.25).prosime];case 2:return o.sent(),cc.log("stop all colum2"),this.handleStopAllColum(),[3,4];case 3:return u=o.sent(),s.Util.ThrowErrProsime(u),[3,4];case 4:return[2]}})})},t.prototype.handleStopAllColum=function(){return n(this,void 0,void 0,function(){var t,e,i,n,l;return o(this,function(o){switch(o.label){case 0:if(o.trys.push([0,32,,33]),a.Windown.MatTroiView.stateReel==r.default.STOP)return[2];a.Windown.MatTroiView.stateReel=r.default.STOP,a.Windown.MatTroiView.setStateEffBtnSpin(),t=a.Windown.MatTroiView.listResultConvert,this.activeAllSymbol(),e=0,i=t.length,o.label=1;case 1:return e<i?(n=t[e],this.curentCountScater=n.countScater,n.listItemWinL&&n.listItemWinR?(c.default.instance.showAnimLightingSunMoonTotal(10),c.default.instance.showAnimLightingSunMoonTotal(9),[4,this.showItemBonusSpin(10,n.bonusSpinL)]):[3,11]):[3,29];case 2:return o.sent(),c.default.instance.removeEffectLighting(10),[4,this.showItemBonusSpin(9,n.bonusSpinR)];case 3:return o.sent(),c.default.instance.removeEffectLighting(9),[4,a.Windown.MatTroiView.getMakeDelay(.3/a.Windown.MatTroiView.getDelta()).prosime];case 4:return o.sent(),[4,this.checkAndShowLineAn(n.listItemWinL,n.listItemWinR,n.agWin)];case 5:return o.sent(),[4,this.showMultiBonusTotal(n.bonusSpinL+n.bonusSpinR)];case 6:return o.sent(),[4,this.caculateMutilMoney(n.agWin,n.bonusSpinL+n.bonusSpinR)];case 7:return o.sent(),this.checkAndRemoveSymbol(n.listItemWinL,n.listItemWinR),n.isNoSap?[4,this.addNewSymbol(t[e+1])]:[3,10];case 8:return o.sent(),[4,this.moveAllSymbol()];case 9:o.sent(),o.label=10;case 10:return[3,28];case 11:return n.listItemWinR||n.listItemWinL?[4,this.showItemBonusSpin(10,n.bonusSpinL)]:[3,25];case 12:return o.sent(),c.default.instance.removeEffectLighting(10),[4,this.showItemBonusSpin(9,n.bonusSpinR)];case 13:return o.sent(),c.default.instance.removeEffectLighting(9),[4,this.checkAndShowLineAn(n.listItemWinL,n.listItemWinR,n.agWin)];case 14:return o.sent(),[4,a.Windown.MatTroiView.getMakeDelay(.5/a.Windown.MatTroiView.getDelta()).prosime];case 15:return o.sent(),n.bonusSpinL>1&&n.listItemWinL&&n.listItemWinL.lsIdItem.length>0?[4,this.showMutliBonusReceive(10)]:[3,18];case 16:return o.sent(),[4,this.caculateMutilMoney(n.agWin,n.bonusSpinL)];case 17:o.sent(),o.label=18;case 18:return n.bonusSpinR>1&&n.listItemWinR&&n.listItemWinR.lsIdItem.length>0?[4,this.showMutliBonusReceive(9)]:[3,21];case 19:return o.sent(),[4,this.caculateMutilMoney(n.agWin,n.bonusSpinR)];case 20:o.sent(),o.label=21;case 21:return this.checkAndRemoveSymbol(n.listItemWinL,n.listItemWinR),n.isNoSap?[4,this.addNewSymbol(t[e+1])]:[3,24];case 22:return o.sent(),[4,this.moveAllSymbol()];case 23:o.sent(),o.label=24;case 24:return[3,28];case 25:return this.lastFreeSpinLeft>0?[4,this.showItemBonusSpin(10,n.bonusSpinL)]:[3,28];case 26:return o.sent(),c.default.instance.removeEffectLighting(10),[4,this.showItemBonusSpin(9,n.bonusSpinR)];case 27:o.sent(),c.default.instance.removeEffectLighting(9),o.label=28;case 28:return e++,[3,1];case 29:return[4,this.showMoneyTotalRevice()];case 30:return o.sent(),[4,this.checkAndShowEffect()];case 31:return o.sent(),this.resetForNextNextSpin(),[3,33];case 32:return l=o.sent(),s.Util.ThrowErrProsime(l),[3,33];case 33:return[2]}})})},t.prototype.removeAllMutilAdded=function(){var t=this;return new Promise(function(e){a.Windown.MatTroiView.muitlCtr.resetForNextSpin(),t.listColum.forEach(function(t){t.getListSymbol().forEach(function(t){t.removeMutilWhenSpin()})}),e(null)})},t.prototype.checkAndRemoveSymbol=function(t,e){this.activeAllSymbol();var i=[],n=[];if(t&&void 0!==t){i=t.lsIdItem,n=t.lsstack;for(var o=0,r=i.length;o<r;o++)for(var s=0;s<n[o]+1;s++)this.listColum[s].checkAndRemoveItem(i[o])}if(e&&void 0!==e)for(i=e.lsIdItem,n=e.lsstack,o=0,r=i.length;o<r;o++)for(s=this.listColum.length-1;s>=this.listColum.length-(n[o]+1);s--)this.listColum[s].checkAndRemoveItem(i[o])},t.prototype.addNewSymbol=function(t){var e=this;return new Promise(function(i){return n(e,void 0,void 0,function(){var e,n,r;return o(this,function(o){switch(o.label){case 0:for(n in o.trys.push([0,2,,3]),e=[],this.listColum)e.push(this.listColum[n].addNewListSymbol(t.listSFSObj[n]));return[4,Promise.all(e)];case 1:return o.sent(),i(null),[3,3];case 2:return r=o.sent(),s.Util.ThrowErrProsime(r),[3,3];case 3:return[2]}})})})},t.prototype.moveAllSymbol=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,i,n,r;return o(this,function(o){switch(o.label){case 0:for(n in o.trys.push([0,2,,3]),t=0,i=[],this.listColum)i.push(this.listColum[n].moveAllSymbol(t)),this.listColum[n].checkIsNorSap()&&t++;return[4,Promise.all(i)];case 1:return o.sent(),e(null),[3,3];case 2:return r=o.sent(),s.Util.ThrowErrProsime(r),[3,3];case 3:return[2]}})})})},t.prototype.caculateMutilMoney=function(t,e){var i=this;return new Promise(function(r){return n(i,void 0,void 0,function(){return o(this,function(){try{a.Windown.MatTroiView.infoBar.showTakeMoneyTurn(t*e),r(null)}catch(i){s.Util.ThrowErrProsime(i)}return[2]})})})},t.prototype.showItemBonusSpin=function(t,e){var i=this;return new Promise(function(r){return n(i,void 0,void 0,function(){var i,n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),i=!1,this.listColum.forEach(function(n){n.getListSymbolResult().forEach(function(n){n.result!=t||n.isShowEffectBonus||(i=!0,n.takeBonusSpinSunMoon(e))})}),i?[4,c.default.instance.addMutil(t,e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return r(null),[3,4];case 3:return n=o.sent(),s.Util.ThrowErrProsime(n),[3,4];case 4:return[2]}})})})},t.prototype.offAllSymbol=function(t){void 0===t&&(t=!0),a.Windown.MatTroiView.activeMask(!0)},t.prototype.activeAllSymbol=function(){a.Windown.MatTroiView.activeMask(!1)},t.prototype.checkAndShowLineAn=function(t,e,i){var r=this;return this.offAllSymbol(),new Promise(function(c){return n(r,void 0,void 0,function(){var n,r,l,u,p,d,h;return o(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),n=[],r=[],l=[],void 0!==t)for(n=t.lsIdItem,r=t.lsstack,l=t.lsAgWin,u=0,p=n.length;u<p;u++){for(d=0;d<r[u]+1;d++)this.listColum[d].checkItemWin(n[u],0);l[u]}if(void 0!==e)for(n=e.lsIdItem,r=e.lsstack,l=e.lsAgWin,u=0,p=n.length;u<p;u++){for(d=this.listColum.length-1;d>=this.listColum.length-(r[u]+1);d--)this.listColum[d].checkItemWin(n[u],1);l[u]}return[4,a.Windown.MatTroiView.infoBar.showTakeMoney(i)];case 1:return o.sent(),c(null),[3,3];case 2:return h=o.sent(),s.Util.ThrowErrProsime(h),[3,3];case 3:return[2]}})})})},t.prototype.resetForNextNextSpin=function(){var t=this;cc.log("resetForNextNextSpin:"+this.freeSpinLeft),a.Windown.MatTroiView.resetForNewGame(),this.freeSpinLeft>0?a.Windown.MatTroiView.scheduleOnce(function(){a.Windown.MatTroiView.setLbFreeSpinLeft(t.freeSpinLeft-1),a.Windown.MatTroiView.onClickBtnSpin()},.5):this.countAutoSpin>0?a.Windown.MatTroiView.scheduleOnce(function(){t.countAutoSpin--,a.Windown.MatTroiView.setCountAuto(t.countAutoSpin),a.Windown.MatTroiView.onClickBtnSpin()},.5):a.Windown.MatTroiView.activeAllBtn()},t.prototype.checkAndShowEffect=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,i,n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),t=a.Windown.MatTroiView.dataFinish.getBool("Scarter3"),i=a.Windown.MatTroiView.dataFinish.get("numFreeSpin"),this.freeSpinLeft=i,!t&&this.lastFreeSpinLeft<1?(e(null),[2]):t?[4,a.Windown.MatTroiView.effect.showTakeFreeSpin(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return 1==this.lastFreeSpinLeft&&this.freeSpinLeft<1?[4,this.effect.showEndFree(this.moneyTotalFs)]:[3,4];case 3:o.sent(),this.moneyTotalFs=0,this.currentMutilFs=1,o.label=4;case 4:return this.lastFreeSpinLeft=this.freeSpinLeft,e(null),[3,6];case 5:return n=o.sent(),s.Util.ThrowErrProsime(n),[3,6];case 6:return[2]}})})})},t.prototype.showMoneyTotalRevice=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,i;return o(this,function(n){switch(n.label){case 0:cc.log("chay vao show total money"),n.label=1;case 1:return n.trys.push([1,3,,4]),t=a.Windown.MatTroiView.dataFinish.get("agWin"),this.lastFreeSpinLeft>0&&(this.moneyTotalFs+=t),a.Windown.MatTroiView.activeMask(!1),t<1?(e(null),[2]):[4,a.Windown.MatTroiView.infoBar.showTotalMoney(t)];case 2:return n.sent(),a.Windown.MatTroiView.showMoneyAllWin(t),e(null),[3,4];case 3:return i=n.sent(),s.Util.ThrowErrProsime(i),[3,4];case 4:return[2]}})})})},t.prototype.showMutliBonusReceive=function(t){var e=this;return new Promise(function(i){return n(e,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.default.instance.addMultiBonus(t)];case 1:return n.sent(),i(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t.prototype.showMultiBonusTotal=function(t){var e=this;return new Promise(function(i){return n(e,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.default.instance.addMultiBonusTotal(t)];case 1:return n.sent(),i(null),[3,3];case 2:return e=n.sent(),s.Util.ThrowErrProsime(e),[3,3];case 3:return[2]}})})})},t}();i.default=l,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./EffectControlMatTroi":"EffectControlMatTroi"}],SymbolMatTroi:[function(t,e,i){"use strict";cc._RF.push(e,"d80dae+pyxLl79se67HbZpV","SymbolMatTroi");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_ITEM=void 0;var s,a=t("../../../Scritps/DefineTs/StateReelSlot"),c=t("../../../Scritps/Windown"),l=t("./EffectControlMatTroi"),u=t("./EffectScaterMatTroi"),p=t("./ItemSlotMatTroi"),d=cc._decorator,h=d.ccclass,f=d.property;(function(t){t[t.NONE=0]="NONE",t[t.BAC=1]="BAC",t[t.VANG=2]="VANG"})(s=i.TYPE_ITEM||(i.TYPE_ITEM={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.spriteBkg=null,e.spriteKhung=null,e.skeletonItem=null,e.isVectical=!0,e.nodeScater=null,e.sizeBkg=new cc.Size(122,105),e.size=new cc.Size(122,130),e.itemColum=null,e.result=-1,e.objSFS=null,e.typeItem=s.NONE,e.sizeItem=1,e.canRun=!1,e.efWin=null,e.lastPos=null,e.isShuff=!1,e.isShowEffectSpawn=!1,e.isShowEffectBonus=!1,e.isTakeItem=!1,e.typewin=-1,e}return o(e,t),e.prototype.setItemColum=function(t){this.itemColum=t,this.isVectical?(this.node.angle=0,this.size.height=130):(this.size.height=130,this.node.angle=90)},e.prototype.setResult=function(t){this.objSFS=t,this.result=t.getInt("idItem")+1,this.typeItem=t.getInt("typeItem"),this.setSize(),this.skeletonItem.node.active=!1,this.itemColum.stateWhel==a.default.RUN?this.setImgResult(!0):this.setImgResult(!1),this.isShuff=!1,this.isShowEffectSpawn=!1},e.prototype.setSize=function(){this.node.height=this.size.height*this.sizeItem},e.prototype.setImgResult=function(t){this.sprite.node.active=!0,this.sprite.spriteFrame=this.getSpItem(t),this.sprite.node.scale=t?1.3:.65},e.prototype.getSpKhung=function(t){return this.sizeItem==s.NONE?null:t?this.getAtlas().getSpriteFrame("khung_"+this.typeItem+"_"+this.sizeItem+"_blur"):this.getAtlas().getSpriteFrame("khung_"+this.typeItem+"_"+this.sizeItem)},e.prototype.getSpBkg=function(t){return t?this.getAtlas().getSpriteFrame("bkg_"+this.result+"_"+this.sizeItem+"_blur"):this.getAtlas().getSpriteFrame("bkg_"+this.result+"_"+this.sizeItem)},e.prototype.getSpBkgShuff=function(){return this.getAtlas().getSpriteFrame("bkg_"+this.result+"_"+this.sizeItem)},e.prototype.getSpItem=function(t){return this.sizeItem,this.result<12&&cc.misc.clampf(this.sizeItem,1,2),t?this.getAtlas().getSpriteFrame(this.result+"_blur"):this.getAtlas().getSpriteFrame(""+this.result)},e.prototype.checkItemFront=function(){!this.checkIsInView()||12!=this.result&&13!=this.result?this.node.parent=this.itemColum.parentItem:this.node.parent=this.itemColum.parentItemFront},e.prototype.getAtlas=function(){return this.result<11?c.Windown.MatTroiView.asset.atlasSymbol:c.Windown.MatTroiView.asset.atlasSpecial},e.prototype.getSpin=function(){return c.Windown.MatTroiView.asset.listSkeDataSymbol[this.result-1]},e.prototype.getIndexOf=function(){return this.itemColum.getListSymbol().indexOf(this)},e.prototype.convertNameSpineById=function(){switch(this.result){case 1:return"l_j";case 2:return"l_q";case 3:return"l_k";case 4:return"l_a";case 5:return"h_sundial";case 6:return"h_sextant";case 7:return"h_telescope";case 8:return"h_globe";case 9:return"h_moon";case 10:return"h_sun";case 11:return"s_wild";case 12:return"s_scatter"}},e.prototype.convertNameSize=function(){switch(this.sizeItem){case 1:return"_a_atlas_symbols";case 2:return"_b_atlas_symbols";case 3:return this.result<11||13==this.result?"_b_atlas_symbols":11==this.result?"_cd_atlas_symbols":"_c_atlas_symbols";case 4:return this.result<11||13==this.result?"_b_atlas_symbols":11==this.result?"_cd_atlas_symbols":"_d_atlas_symbols"}},e.prototype.convertNameSizeSpine=function(){return this.result<=10?"_atlas_symbols":"_atlas_specials"},e.prototype.removeAddScater=function(t){null!=this.nodeScater&&t&&(this.nodeScater&&this.nodeScater.destroy(),this.nodeScater=null)},e.prototype.effectAddScater=function(){c.Windown.MatTroiView.stateSpin.isShowNearWin&&this.activeItem(),this.nodeScater||(c.Windown.MatTroiView.audio.playEffectNoStop(c.Windown.MatTroiView.audio.symScatter),this.nodeScater=c.Windown.MatTroiView.asset.getEffScater(),this.nodeScater.parent=this.node,this.nodeScater.setPosition(0,0),this.nodeScater.getComponent(u.default).showFs())},e.prototype.effectScaterShowFS=function(){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.activeItem(),this.nodeScater.getComponent(u.default).showFs())},e.prototype.effectNearWinScater=function(){12==this.result&&this.nodeScater&&(this.activeItem(),this.nodeScater.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){c.Windown.MatTroiView.audio.playEffectNoStop(c.Windown.MatTroiView.audio.heartbeat)}),cc.repeat(cc.sequence(cc.scaleTo(.25,1.2),cc.scaleTo(.15,1)),2),cc.delayTime(.5)),3)))},e.prototype.checkIsInView=function(){return this.node.y<0&&this.node.y>-this.size.height*(this.itemColum.sizeSymbol-2)},e.prototype.offItem=function(){this.node.parent!=this.itemColum.parentItem&&this.checkItemFront()},e.prototype.offItemFront=function(){this.node.parent=this.itemColum.parentItem},e.prototype.activeItem=function(t){void 0===t&&(t=.3),this.node.parent=this.itemColum.parentItemActive},e.prototype.runSpin=function(){this.offItemFront(),this.removeAddScater(!0),this.isShowEffectBonus=!1;var t=cc.repeatForever(cc.moveBy(1,0,-2500));this.node.stopAllActions(),this.node.runAction(t),this.canRun=!0},e.prototype.stopSpin=function(t){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(t,cc.callFunc(function(){e.itemColum.effStopSpin()})))},e.prototype.initPosStartGame=function(){var t,e=this.getIndexOf(),i=this.itemColum.getListSymbol()[e-1],n=null==i?void 0:i.node.y;t=i?n-this.node.height/2-i.node.height/2:this.node.height/2,this.node.y=t},e.prototype.moveWhenListChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null);var n=this.getIndexOf(),o=this.itemColum.getListSymbol()[n+1],r=o.node.y,s=null;t==p.TYPE_MOVE.NORMAL&&(s=r+this.node.height/2+o.node.height/2,this.node.y=s)},e.prototype.takeItem=function(){var t=c.Windown.MatTroiView.stateSpin.isMaxSpeed?2:1,e=c.Windown.MatTroiView.asset.getWinSymbol(this.typewin);e.parent=this.itemColum.parentItemActive,e.setPosition(c.Windown.convertNodeInOtherNode(this.node,this.itemColum.parentItemActive)),e.zIndex=cc.macro.MIN_ZINDEX,this.node.parent=this.itemColum.parentItemActive,this.node.zIndex=cc.macro.MAX_ZINDEX,this.isTakeItem=!0,this.removeEfWin(),e.getComponent(cc.Animation).play("TakeItem1").speed=t,this.activeItem(0),this.efWin=e,this.skeletonItem.setAnimation(0,"win",!0)},e.prototype.takeBonusSpinSunMoon=function(t){this.isShowEffectBonus=!0,cc.tween(this.skeletonItem.node).set({scale:.65}).to(.3/c.Windown.MatTroiView.getDelta(),{scale:.75},{easing:cc.easing.sineOut}).to(.3/c.Windown.MatTroiView.getDelta(),{scale:.65},{easing:cc.easing.sineIn}).start(),(9==this.result?this.node.getChildByName("bgMoonAdd"):this.node.getChildByName("bgSunAdd")).active=!0;var e=c.Windown.convertNodeInOtherNode(this.node,c.Windown.MatTroiView.parentEffect);l.default.instance.effectLightingBonus(e,this.result,t)},e.prototype.removeBkgBonusSpin=function(){var t=null;9==this.result?t=this.node.getChildByName("bgMoonAdd"):10==this.result&&(t=this.node.getChildByName("bgSunAdd")),t&&(t.stopAllActions(),t.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.active=!1}))))},e.prototype.removeEfWin=function(){if(this.efWin){var t=this.efWin.getComponent(cc.Animation);t.targetOff(t),t.stop(),c.Windown.MatTroiView.asset.putWinSymbol(this.efWin,this.typewin)}this.efWin=null},e.prototype.removeItem=function(){var t=this,e=c.Windown.MatTroiView.stateSpin.isMaxSpeed?2:1,i=this.getIndexOf();if(i>-1&&this.itemColum.getListSymbol().splice(i,1),this.node.runAction(cc.sequence(cc.fadeOut(.3/c.Windown.MatTroiView.getDelta()),cc.callFunc(function(){c.Windown.MatTroiView.asset.putSymbol(t.node)}))),c.Windown.MatTroiView.audio.playEffect(c.Windown.MatTroiView.audio.symShrink),this.efWin){var n=this.efWin.getComponent(cc.Animation);n.play("TakeItem1End").speed=e,n.once(cc.Animation.EventType.FINISHED,function(){t.removeEfWin()})}},e.prototype.removeMutilWhenSpin=function(){this.removeEfWin()},e.prototype.effectSpawnSymbol=function(){if(!this.isShowEffectSpawn&&this.checkIsInView()){this.checkItemFront(),this.sprite.node.active=!1;var t=this.getSpin();this.skeletonItem.node.active=!0,this.skeletonItem.skeletonData=t,this.skeletonItem.setAnimation(0,"spawn",!1),this.skeletonItem.node.scale=.65,this.isShowEffectSpawn=!0,12==this.result?this.effectAddScater():11==this.result&&c.Windown.MatTroiView.audio.playEffectNoStop(c.Windown.MatTroiView.audio.symWild)}},e.prototype.unuse=function(){this.skeletonItem.node.active=!1,this.itemColum=null,this.isShowEffectSpawn=!1,this.isShowEffectBonus=!1,this.isTakeItem=!1,this.isShuff=!1,this.result=-1,this.node.opacity=255,this.sprite.node.scale=.65,this.sprite.node.y=1,this.node.scale=1,this.sprite.node.opacity=255,this.sprite.node.active=!0,this.skeletonItem.node.active=!1,this.node.stopAllActions(),this.removeAddScater(!0)},e.prototype.checkEndCot=function(){if(0==this.getIndexOf()){var t=-this.node.height/2;if(this.node.y<=t){var e=this.itemColum.getIdSymbolResult(),i=this.itemColum.getListSymbol(),n=i.pop();i.unshift(n),n.node.zIndex=0,n.setResult(e),n.moveWhenListChange(p.TYPE_MOVE.NORMAL)}}},e.prototype.update=function(){this.canRun&&this.checkEndCot()},r([f(cc.Sprite)],e.prototype,"sprite",void 0),r([f(cc.Sprite)],e.prototype,"spriteBkg",void 0),r([f(cc.Sprite)],e.prototype,"spriteKhung",void 0),r([f(sp.Skeleton)],e.prototype,"skeletonItem",void 0),r([h],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Windown":void 0,"./EffectControlMatTroi":"EffectControlMatTroi","./EffectScaterMatTroi":"EffectScaterMatTroi","./ItemSlotMatTroi":"ItemSlotMatTroi"}]},{},["AssetMatTroi","AudioMatTroi","CachChoiMatTroi","DetailHistoryMatTroi","EffectControlMatTroi","EffectMatTroi","EffectScaterMatTroi","InfoBarControllerMatTroi","ItemLichSuMatTroi","ItemMuitlMatTroi","ItemResultDetaiMatTroi","ItemSlotMatTroi","ItemWinDetailHistory","LichSuMatTroi","MatTroiView","MultiControlMatTroi","SpinNormalMatTroi","SymbolMatTroi"]);