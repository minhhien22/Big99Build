window.__require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AssetDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"02ac4SkJh1NNoTNbwBFieYp","AssetDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetDuaXe=void 0;var c=t("../../../Scritps/DefineTs/BUNDLE"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("./SymbolDuaXe"),p=t("./EffectTakeTotalMulti"),h=t("../../../Scritps/Windown"),f=cc._decorator,d=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeAddScater=null,e.itemSymbolDuaXe=null,e.atlasSymbol=null,e.atlasSpecial=null,e.atlasSymbolBlur=null,e.atlasSpecialBlur=null,e.atlasMultiNum=null,e.atlasMultiNumBlur=null,e.nearFS=null,e.nodeTakeTotalMulti=null,e.effRemoveItem=null,e.poolSymbol=new cc.NodePool,e.poolBottle=new cc.NodePool,e}return i(e,t),e.prototype.getSfItemSymbol=function(t,e,n,o){return void 0===n&&(n=1),o?11==t?this.getAtlasBlur(t).getSpriteFrame(this.getNameSymbolWithId(t)+this.getNameSizeItem(e,11)+"_blur"):this.getAtlasBlur(t).getSpriteFrame(this.getNameSymbolWithId(t)+(10!=t?"":n)+"_blur"):11==t?this.getAtlas(t).getSpriteFrame(this.getNameSymbolWithId(t)+this.getNameSizeItem(e,t)):this.getAtlas(t).getSpriteFrame(this.getNameSymbolWithId(t)+(10!=t?"":n))},e.prototype.getAtlasBlur=function(t,e){return void 0===e&&(e=!1),t<10?this.atlasSymbolBlur:t>10?this.atlasSpecialBlur:e?this.atlasSymbolBlur:this.atlasMultiNumBlur},e.prototype.getAtlas=function(t,e){return void 0===e&&(e=!1),t<10?this.atlasSymbol:t>10?this.atlasSpecial:e?this.atlasSymbol:this.atlasMultiNum},e.prototype.getSpine=function(t,e){return h.Windown.loadRes(c.BUNDLE.DuaXe,"spine/"+(t<10?"IconNormal/":"Special/")+this.getNameSpineWithID(t,e),sp.SkeletonData)},e.prototype.getNameSpineWithID=function(t,e){var n="";switch(t){case 0:n="l_10_atlas_symbols";break;case 1:n="l_j_atlas_symbols";break;case 2:n="l_q_atlas_symbols";break;case 3:n="l_k_atlas_symbols";break;case 4:n="l_a_atlas_symbols";break;case 5:n="h_tools_atlas_symbols";break;case 6:n="h_gloves_atlas_symbols";break;case 7:n="h_pump_atlas_symbols";break;case 8:n="h_wheel_atlas_symbols";break;case 9:n="h_car_atlas_symbols";case 10:break;case 11:n=cc.js.formatStr("s_wild%s_atlas_specials",this.getNameSizeItem(e,t));break;case 12:n="s_scatter_atlas_specials"}return n},e.prototype.getSfBkg=function(t,e,n,o){return o?this.getAtlasBlur(t,!0).getSpriteFrame(n==u.TYPE_ITEM.NONE?cc.js.formatStr(this.getNameBkgItem(t),this.getNameSizeItem(e,t,!0))+"_blur":cc.js.formatStr(this.getNameBkgItem(t),this.getNameSizeItem(e,t,!0)+"_blur")):this.getAtlas(t,!0).getSpriteFrame(cc.js.formatStr(this.getNameBkgItem(t),this.getNameSizeItem(e,t,!0)))},e.prototype.getEffectTakeSymbol=function(t){return h.Windown.loadRes(l.default.DuaXe+"","Prefabs/TakeSymbol"+t,cc.Prefab)},e.prototype.getEffRemoveItem=function(t){return h.Windown.loadRes(l.default.DuaXe+"","Prefabs/EffRemoveItem"+t,cc.Prefab)},e.prototype.getEffNearFS=function(){return h.Windown.loadRes(l.default.DuaXe+"","Prefabs/NearFS",cc.Prefab)},e.prototype.getSymbol=function(){var t=null;return(t=this.poolSymbol.size()>0?this.poolSymbol.get():cc.instantiate(this.itemSymbolDuaXe)).active=!0,t.getComponent(u.SymbolDuaXe).skeletonItem.node.setScale(cc.v3(1,1)),t.getComponent(u.SymbolDuaXe).spriteItem.node.setScale(cc.v3(1,1)),t.getComponent(u.SymbolDuaXe).bgScatter.active=!1,t},e.prototype.getNameSymbolWithId=function(t){var e="";switch(t){case 0:e="l_10";break;case 1:e="l_j";break;case 2:e="l_q";break;case 3:e="l_k";break;case 4:e="l_a";break;case 5:e="h_tools";break;case 6:e="h_gloves";break;case 7:e="h_pump";break;case 8:e="h_wheel";break;case 9:e="h_car";break;case 10:e="txt_x";break;case 11:e="s_wild";break;case 12:e="s_scatter"}return e},e.prototype.getNameSizeItem=function(t,e,n){void 0===n&&(n=!1);var o="";if(e<5&&!n)return o;switch(t){case 1:o="_a";break;case 2:o="_b";break;case 3:o="_c";break;case 4:o="_d"}return o},e.prototype.getNameBkgItem=function(t){var e="";switch(t){case 0:case 1:case 2:case 3:case 4:e="l_frame%s";break;case 5:e="h_tools_frame%s";break;case 6:e="h_gloves_frame%s";break;case 7:e="h_pump_frame%s";break;case 8:e="h_wheel_frame%s";break;case 9:e="h_car_frame%s";break;case 10:e="s_mult%s";break;case 11:e="";break;case 12:e="s_scatter%s"}return e},e.prototype.getMultiNum=function(t){return this.atlasMultiNum.getSpriteFrame("txt_x"+t)},e.prototype.putSymbol=function(t){this.poolSymbol.put(t)},e.prototype.getNodeTakeToltaMulti=function(){return cc.instantiate(this.nodeTakeTotalMulti).getComponent(p.EffectTakeTotalMulti)},e.prototype.getEffectTakeMulti=function(t){return a(this,void 0,Promise,function(){return s(this,function(){return[2,h.Windown.loadRes(l.default.DuaXe+"","Prefabs/EffectTakeMultiISymbol"+t,cc.Prefab)]})})},e.prototype.preloadTakeSymbol=function(){for(var t=cc.assetManager.getBundle(l.default.DuaXe+""),e=1;e<4;e++)t.preload("Prefabs/TakeSymbol"+e,function(t){t?cc.log("Err preload:"+t):cc.log("preload take Symbol success")}),t.preload("Prefabs/EffRemoveItem"+e,function(t){t?cc.log("Err preload:"+t):cc.log("preload take Symbol success")})},e.prototype.preloadBigWin=function(){cc.assetManager.getBundle(l.default.DuaXe+"").preload("Prefabs/BigWin",function(t){t?cc.log("Err preload:"+t):cc.log("preloadBigWin success")})},r([y(cc.Prefab)],e.prototype,"nodeAddScater",void 0),r([y(cc.Prefab)],e.prototype,"itemSymbolDuaXe",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasSymbol",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasSpecial",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasSymbolBlur",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasSpecialBlur",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasMultiNum",void 0),r([y(cc.SpriteAtlas)],e.prototype,"atlasMultiNumBlur",void 0),r([y(cc.Prefab)],e.prototype,"nearFS",void 0),r([y(cc.Prefab)],e.prototype,"nodeTakeTotalMulti",void 0),r([y(cc.Prefab)],e.prototype,"effRemoveItem",void 0),r([d],e)}(cc.Component);n.AssetDuaXe=m,cc._RF.pop()},{"../../../Scritps/DefineTs/BUNDLE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Windown":void 0,"./EffectTakeTotalMulti":"EffectTakeTotalMulti","./SymbolDuaXe":"SymbolDuaXe"}],AudioDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"9dc733fNAtO54wYzcm0Bzg4","AudioDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../Scritps/Parent/AudioManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.multiUpupup=null,e.reelQuickStop=null,e.reelStopSingle=null,e.fsMultiplyRefresh=null,e.click=null,e.bgm_fs=null,e.bgmBigwinEnd=null,e.bgmBigwinEndCoins=null,e.bgmBigwinMain=null,e.bgmTotalwinEnd=null,e.bgmTotalwinMain=null,e.fastspinEnd=null,e.fastspinStart=null,e.fsIntro=null,e.fsSpin=null,e.fsTrans=null,e.fsWonRemainingIncrease=null,e.fsWonTitle=null,e.heartbeat=null,e.heartbeatNoise=null,e.heartbeatSlowdrop=null,e.list_item_click=null,e.menu_icon_press=null,e.multiCombine=null,e.symbolBonus=null,e.symbolBonusMove=null,e.textBonusJump=null,e.prizeInfobarTotalwin=null,e.prizeInfobarTotalwinMedEnd=null,e.prizeInfobarTotalwinMedMain=null,e.prizeSmallwin=null,e.prizeInfoSmallwin=null,e.prizeInfobarTotalwinBonus=null,e.prizeSmallwinMultiplied=null,e.rouletteLoop=null,e.scatterWinHighligh=null,e.slider_effect=null,e.spinActiveLoop=null,e.spinBtn=null,e.spinStop=null,e.spinStopQuick=null,e.symCollapse=null,e.symScatter=null,e.symShrink=null,e.symWild=null,e.uiCollect=null,e.uiInfo=null,e.uiStart=null,e.shakerMove=null,e.shakerStop=null,e.objKey={},e}return i(e,t),e.prototype.onChangeMusic=function(e){t.prototype.onChangeMusic.call(this,e),this.isActiveSound=e},e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.5))},e.prototype.playIndexTakeLine=function(){},e.prototype.playSmalWin=function(){},e.prototype.playBkgfs=function(){this.stopMusic(),this.playEffect(this.bgm_fs,.6,!0)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},e.prototype.playSymCollapse=function(){this.playEffect(this.symCollapse)},e.prototype.playStopAudio=function(){var t=this.spinStop;this.playEffect(t)},r([l(cc.AudioClip)],e.prototype,"multiUpupup",void 0),r([l(cc.AudioClip)],e.prototype,"reelQuickStop",void 0),r([l(cc.AudioClip)],e.prototype,"reelStopSingle",void 0),r([l(cc.AudioClip)],e.prototype,"fsMultiplyRefresh",void 0),r([l(cc.AudioClip)],e.prototype,"click",void 0),r([l(cc.AudioClip)],e.prototype,"bgm_fs",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinEndCoins",void 0),r([l(cc.AudioClip)],e.prototype,"bgmBigwinMain",void 0),r([l(cc.AudioClip)],e.prototype,"bgmTotalwinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"bgmTotalwinMain",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinEnd",void 0),r([l(cc.AudioClip)],e.prototype,"fastspinStart",void 0),r([l(cc.AudioClip)],e.prototype,"fsIntro",void 0),r([l(cc.AudioClip)],e.prototype,"fsSpin",void 0),r([l(cc.AudioClip)],e.prototype,"fsTrans",void 0),r([l(cc.AudioClip)],e.prototype,"fsWonRemainingIncrease",void 0),r([l(cc.AudioClip)],e.prototype,"fsWonTitle",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeat",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatNoise",void 0),r([l(cc.AudioClip)],e.prototype,"heartbeatSlowdrop",void 0),r([l(cc.AudioClip)],e.prototype,"list_item_click",void 0),r([l(cc.AudioClip)],e.prototype,"menu_icon_press",void 0),r([l(cc.AudioClip)],e.prototype,"multiCombine",void 0),r([l(cc.AudioClip)],e.prototype,"symbolBonus",void 0),r([l(cc.AudioClip)],e.prototype,"symbolBonusMove",void 0),r([l(cc.AudioClip)],e.prototype,"textBonusJump",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedEnd",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedMain",void 0),r([l(cc.AudioClip)],e.prototype,"prizeSmallwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfoSmallwin",void 0),r([l(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinBonus",void 0),r([l(cc.AudioClip)],e.prototype,"prizeSmallwinMultiplied",void 0),r([l(cc.AudioClip)],e.prototype,"rouletteLoop",void 0),r([l(cc.AudioClip)],e.prototype,"scatterWinHighligh",void 0),r([l(cc.AudioClip)],e.prototype,"slider_effect",void 0),r([l(cc.AudioClip)],e.prototype,"spinActiveLoop",void 0),r([l(cc.AudioClip)],e.prototype,"spinBtn",void 0),r([l(cc.AudioClip)],e.prototype,"spinStop",void 0),r([l(cc.AudioClip)],e.prototype,"spinStopQuick",void 0),r([l(cc.AudioClip)],e.prototype,"symCollapse",void 0),r([l(cc.AudioClip)],e.prototype,"symScatter",void 0),r([l(cc.AudioClip)],e.prototype,"symShrink",void 0),r([l(cc.AudioClip)],e.prototype,"symWild",void 0),r([l(cc.AudioClip)],e.prototype,"uiCollect",void 0),r([l(cc.AudioClip)],e.prototype,"uiInfo",void 0),r([l(cc.AudioClip)],e.prototype,"uiStart",void 0),r([l(cc.AudioClip)],e.prototype,"shakerMove",void 0),r([l(cc.AudioClip)],e.prototype,"shakerStop",void 0),r([c],e)}(a.default);n.default=u,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0}],BigWinDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"0fe979xx7FEZbDjGfE4jDJD","BigWinDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BigWinDuaXe=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Windown"),u=t("../../../Scritps/Util"),p=t("../../../Scritps/Network/ConectManager"),h=t("../../../Scritps/Game/GAME_TYPE"),f=t("../../../Scritps/DefineTs/REQUEST_CODE"),d=cc._decorator,y=d.ccclass,m=d.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigWin=null,e.megaWin=null,e.superWin=null,e.lb_Money=null,e.btnFast=null,e.listPromiseIgro=[],e.isClickBtnFast=!1,e}return i(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e){var n=this;return new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a,c,d,y=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),this.node.opacity=0,this.node.runAction(cc.fadeIn(.2)),4,n=e<15?4:e<30?8:12,this.lb_Money.time=n+.5,this.lb_Money.setMoney(t,!1),this.bigWin.node.active=!0,this.megaWin.node.active=!1,this.superWin.node.active=!1,l.Windown.DuaXe.audio.playEffect(l.Windown.DuaXe.audio.bgmBigwinMain),this.bigWin.stop(),this.bigWin.play("BigWinStart"),[4,l.Windown.DuaXe.getMakeDelay(.25).prosime];case 1:return s.sent(),this.bigWin.once(cc.Animation.EventType.FINISHED,function(){y.bigWin.play("BigWinLoop")}),i=l.Windown.DuaXe.getMakeDelay(4),this.listPromiseIgro.push(i),[4,i.prosime];case 2:return s.sent(),e>=30?(this.bigWin.node.active=!1,this.megaWin.node.active=!0,this.megaWin.play("MegaWinStart"),this.megaWin.once(cc.Animation.EventType.FINISHED,function(){y.megaWin.play("MegaWinLoop")}),l.Windown.DuaXe.audio.playEffect(l.Windown.DuaXe.audio.bgmBigwinEnd),this.isClickBtnFast?[3,4]:(r=l.Windown.DuaXe.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,4];case 3:s.sent(),s.label=4;case 4:return e>=50?(this.megaWin.node.active=!1,this.superWin.node.active=!0,this.superWin.play("SuperWinShow"),this.superWin.once(cc.Animation.EventType.FINISHED,function(){y.superWin.play("SuperWinLoop")}),l.Windown.DuaXe.audio.playEffect(l.Windown.DuaXe.audio.bgmBigwinEnd),this.isClickBtnFast?[3,6]:(r=l.Windown.DuaXe.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,6];case 5:s.sent(),s.label=6;case 6:return l.Windown.DuaXe.audio.stopEffect(l.Windown.DuaXe.audio.bgmBigwinMain),l.Windown.DuaXe.audio.playEffect(l.Windown.DuaXe.audio.bgmBigwinEnd),this.lb_Money.setMoneyNoTime(t,!1),this.lb_Money.node.runAction(cc.sequence(cc.scaleTo(.2,1.05),cc.scaleTo(.2,.9))),a=l.Windown.DuaXe.getMakeDelay(4),this.listPromiseIgro.push(a),this.btnFast.interactable=!0,(c=p.ConectManager.getIns().getSFSObj()).putInt("gt",h.default.DuaXe),c.putInt("mt",t),c.putUtfString("nn",l.Windown.User.nickName),c.putUtfString("dt","bw"),p.ConectManager.getIns().sendRequest(f.REQUEST_CODE.AddBigWin,c),[4,a.prosime];case 7:return s.sent(),l.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){o(null),y.node.destroy()}))),[3,9];case 8:return d=s.sent(),o(null),this.node.destroy(),cc.log(d.stack),u.Util.ThrowErrProsime(d),[3,9];case 9:return[2]}})})})},e.prototype.onClickBtnShowFast=function(){for(this.btnFast.interactable=!1,this.isClickBtnFast=!0;this.listPromiseIgro.length>0;)this.listPromiseIgro.shift().cancle(!0)},r([m(cc.Animation)],e.prototype,"bigWin",void 0),r([m(cc.Animation)],e.prototype,"megaWin",void 0),r([m(cc.Animation)],e.prototype,"superWin",void 0),r([m(c.default)],e.prototype,"lb_Money",void 0),r([m(cc.Button)],e.prototype,"btnFast",void 0),r([y],e)}(cc.Component);n.BigWinDuaXe=S,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],CachChoiDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"9727cmyuFBEcIOrg0xJZAlM","CachChoiDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onClickClose=function(){var t=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).call(function(){cc.tween(t.node).to(.3,{opacity:0}).start()}).call(function(){t.node.destroy()}).start()},r([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],DetailHistoryDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"8459eXcsAdDTZE7Kja5nk1a","DetailHistoryDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../../../Scritps/Windown"),u=t("./ItemResultDetailDuaXe"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.itemTemplate=null,e.lbTitle=null,e.lbTime=null,e.lbBet=null,e.lbWin=null,e.lbMNUser=null,e.lbCuocCoSo=null,e.isFreeSpin=!1,e}return i(e,t),e.prototype.onLoad=function(){this.itemTemplate.active=!1},e.prototype.show=function(t){var e=this;this.node.active=!0,this.node.setPosition(721.812,this.node.position.y),l.Windown.stopAllActionByTarget(this.node),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,cc.v2(0,0)),cc.fadeIn(.3).easing(cc.easeElasticIn(.3))));var n=t.date,o=t.infolog,i=JSON.parse(o);cc.log(o),this.isFreeSpin=i.numFreeSpin>0,0==i.agBet?this.lbTitle.string="Free spin":this.lbTitle.string="Spin normal",this.lbTime.string=l.Windown.formatDate(new Date(n),"dd/MM HH:mm:ss"),this.lbBet.string=l.Windown.formatNumber(20*i.agBet),this.lbWin.string=l.Windown.formatNumber(i.agWin),this.lbMNUser.string=l.Windown.formatNumber(i.agUser),this.lbCuocCoSo.string=l.Windown.formatNumber(i.agBet);for(var r=JSON.parse(i.bonus);this.parentItem.children.length>0;){var a=this.parentItem.children[0];a.removeFromParent(),a.destroy()}var s=0;i.views.forEach(function(t,n){var o=e.parentItem.children[n];null==o&&((o=cc.instantiate(e.itemTemplate)).parent=e.parentItem,o.active=!0),o.active=!0;var a=o.getComponent(u.default);i.listItemWin[n]&&(i.listItemWin[n].lsIdItem=JSON.parse(i.listItemWin[n].lsIdItem),i.listItemWin[n].lsstack=JSON.parse(i.listItemWin[n].lsstack),i.listItemWin[n].lsAgWin=JSON.parse(i.listItemWin[n].lsAgWin),s+=i.listItemWin[n].lsAgWin.reduce(function(t,e){return t+e},0)),a.init(t,i.listItemWin[n],r,s,i.basebet,i.agWin)});for(var c=i.views.length;c<this.parentItem.children.length;c++)this.parentItem.children[c].active=!1},e.prototype.onClickClose=function(){var t=this;l.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,cc.v2(721.812,0)),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){t.node.active=!1})))},r([c(cc.Node)],e.prototype,"parentItem",void 0),r([c(cc.Node)],e.prototype,"itemTemplate",void 0),r([c(cc.Label)],e.prototype,"lbTitle",void 0),r([c(cc.Label)],e.prototype,"lbTime",void 0),r([c(cc.Label)],e.prototype,"lbBet",void 0),r([c(cc.Label)],e.prototype,"lbWin",void 0),r([c(cc.Label)],e.prototype,"lbMNUser",void 0),r([c(cc.Label)],e.prototype,"lbCuocCoSo",void 0),r([s],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemResultDetailDuaXe":"ItemResultDetailDuaXe"}],DuaXeEffect:[function(t,e,n){"use strict";cc._RF.push(e,"78708kWy7xAAqrNBsxJ9SBJ","DuaXeEffect");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DuaXeEffect=void 0;var c=t("../../../Scritps/Game/GAME_TYPE"),l=t("./BigWinDuaXe"),u=t("./NearFSDuaXe"),p=t("./StartFreeSpinDuaXe"),h=t("./EndFreeSpinDuaXe"),f=t("../../../Scritps/Windown"),d=t("../../../Scritps/Util"),y=cc._decorator,m=y.ccclass,S=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeEffNearWin=null,e.listNodeBoxMoney=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.showTakeFreeSpin=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),f.Windown.DuaXe.stateSpin.freeSpinCache=t,f.Windown.DuaXe.stateSpin.activeAllSymbol(),f.Windown.DuaXe.listColum.forEach(function(t){t.getListSymbolResult().forEach(function(t){t.effectScaterShowFS()})}),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.fsWonTitle),f.Windown.loadRes(c.default.DuaXe.toString(),"Prefabs/ShowFreeSpin",cc.Prefab),[4,f.Windown.DuaXe.getMakeDelay(1.3).prosime];case 1:return a.sent(),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.scatterWinHighligh),f.Windown.UIManager.showLoading(),[4,f.Windown.loadRes(c.default.DuaXe.toString(),"Prefabs/ShowFreeSpin",cc.Prefab)];case 2:return e=a.sent(),f.Windown.UIManager.hideLoading(),(o=cc.instantiate(e)).parent=this.node,i=o.getComponent(p.StartFreeSpinDuaXe),[4,f.Windown.DuaXe.getPromise(i.show(t))];case 3:return a.sent(),f.Windown.DuaXe.setLbFreeSpinLeft(t),f.Windown.DuaXe.effect.switchFS(!0),[4,f.Windown.DuaXe.getMakeDelay(1).prosime];case 4:return a.sent(),n(null),[3,6];case 5:return r=a.sent(),d.Util.ThrowErrProsime(r),[3,6];case 6:return[2]}})})})},e.prototype.showBigWin=function(t,e){var n=this;return new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r;return s(this,function(a){switch(a.label){case 0:return[4,f.Windown.loadRes(c.default.DuaXe.toString(),"Prefabs/BigWin",cc.Prefab)];case 1:return n=a.sent(),(i=cc.instantiate(n)).parent=this.node,r=i.getComponent(l.BigWinDuaXe),[4,f.Windown.DuaXe.getPromise(r.init(t,e))];case 2:return a.sent(),o(null),[2]}})})})},e.prototype.activeNodeNearWin=function(t){if(f.Windown.DuaXe.activeMask(!0),f.Windown.DuaXe.activeMask(!1,t-1),null==this.nodeEffNearWin){this.nodeEffNearWin=cc.instantiate(f.Windown.DuaXe.asset.nearFS),this.nodeEffNearWin.setParent(f.Windown.DuaXe.parentItemActive),f.Windown.DuaXe.infoBar.showOneMoreScater();for(var e=0;e<t;e++)f.Windown.DuaXe.listColum[e].getListSymbolResult().forEach(function(t){return t.effectScaterShowFS()})}this.nodeEffNearWin.getComponent(u.NearFSDuaXe).init(t)},e.prototype.offNearWin=function(){f.Windown.DuaXe.activeMask(!1),f.Windown.DuaXe.audio.stopEffect(f.Windown.DuaXe.audio.fastspinStart),this.nodeEffNearWin&&this.nodeEffNearWin.getComponent(u.NearFSDuaXe).effOff(),this.nodeEffNearWin=null;for(var t=0,e=f.Windown.DuaXe.listColum;t<e.length;t++)for(var n=0,o=e[t].getListSymbolResult();n<o.length;n++){var i=o[n];i.checkIsInView()&&i.effectScaterIdle()}},e.prototype.activeNearWinNoSap=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,l,u,p,h,y,m,S,v,b,g,w;return s(this,function(s){switch(s.label){case 0:if(s.trys.push([0,5,,6]),t=f.Windown.DuaXe.stateSpin.curentCountScater>2&&!f.Windown.DuaXe.stateSpin.isMaxSpeed,f.Windown.DuaXe.nearWinNoSap.active||!t)return e(null),[2];for(f.Windown.DuaXe.nearWinNoSap.opacity=255,f.Windown.DuaXe.nearWinNoSap.active=!0,f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.heartbeatNoise),n=!1,f.Windown.DuaXe.stateSpin.offAllSymbol(!1),o=0,i=f.Windown.DuaXe.listColum;o<i.length;o++){for(S=i[o],r=0,a=S.getListSymbolResult();r<a.length;r++)if(!(g=a[r]).checkIsInView()){n=!0;break}if(n)break}if(!n)return e(null),[2];for(c=0,l=f.Windown.DuaXe.listColum;c<l.length;c++)for(S=l[c],u=0,p=S.getListSymbolResult();u<p.length;u++)(g=p[u]).checkIsInView()&&g.effectNearWinScater(!0);f.Windown.DuaXe.infoBar.showOneMoreScater(),h=0,s.label=1;case 1:return h<4?(f.Windown.DuaXe.audio.playEffectNoStop(f.Windown.DuaXe.audio.heartbeat),[4,f.Windown.DuaXe.getMakeDelay(.7).prosime]):[3,4];case 2:s.sent(),s.label=3;case 3:return h++,[3,1];case 4:for(f.Windown.DuaXe.activeMask(!1),y=0,m=f.Windown.DuaXe.listColum;y<m.length;y++)for(S=m[y],v=0,b=S.getListSymbolResult();v<b.length;v++)(g=b[v]).checkIsInView()&&g.effectScaterIdle();return e(null),[3,6];case 5:return w=s.sent(),d.Util.ThrowErrProsime(w),[3,6];case 6:return[2]}})})})},e.prototype.offNearWinNoSap=function(){f.Windown.DuaXe.nearWinNoSap.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){f.Windown.DuaXe.nearWinNoSap.active=!1})))},e.prototype.switchFS=function(t,e){t?(this.listNodeBoxMoney.forEach(function(t){t.setPosition(t.position.x,-609)}),f.Windown.DuaXe.switchBkgGame(!0,e)):(f.Windown.DuaXe.switchBkgGame(!1),this.listNodeBoxMoney.forEach(function(t){t.setPosition(t.position.x,-381.5)}))},e.prototype.showEndFree=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),cc.log("showEndFree totalMoney="+t),t<1?(f.Windown.DuaXe.audio.stopBkgFs(),this.switchFS(!1),n(null),[2]):[4,f.Windown.loadRes(c.default.DuaXe.toString(),"Prefabs/EndFreeSpinDuaXe",cc.Prefab)];case 1:return e=a.sent(),this.switchFS(!1),(o=cc.instantiate(e)).parent=this.node,i=o.getComponent(h.EndFreeSpinDuaXe),[4,f.Windown.DuaXe.getPromise(i.show(t))];case 2:return a.sent(),n(null),[3,4];case 3:return r=a.sent(),d.Util.ThrowErrProsime(r),[3,4];case 4:return[2]}})})})},r([S([cc.Node])],e.prototype,"listNodeBoxMoney",void 0),r([m],e)}(cc.Component);n.DuaXeEffect=v,cc._RF.pop()},{"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./BigWinDuaXe":"BigWinDuaXe","./EndFreeSpinDuaXe":"EndFreeSpinDuaXe","./NearFSDuaXe":"NearFSDuaXe","./StartFreeSpinDuaXe":"StartFreeSpinDuaXe"}],DuaXeSpeedControl:[function(t,e,n){"use strict";cc._RF.push(e,"0445dANJI9NiqUZ+e3eFKFk","DuaXeSpeedControl");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.DuaXeSpeedControl=void 0;var a=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalSpeed=1,e.animation=null,e.spine=null,e.isSpine=!1,e}return i(e,t),e.prototype.onLoad=function(){this.isSpine?this.spine=this.node.getComponent(sp.Skeleton):this.animation=this.node.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.onPlay=function(){null!=this.animation&&(this.animation.getAnimationState(this.animation.currentClip.name).speed=a.Windown.DuaXe.stateSpin.isMaxSpeed?2:this.normalSpeed)},e.prototype.onEnable=function(){cc.isValid(this.spine)&&(this.spine.timeScale=a.Windown.DuaXe.stateSpin.isMaxSpeed?2:1)},r([l],e.prototype,"isSpine",void 0),r([c],e)}(cc.Component);n.DuaXeSpeedControl=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],DuaXeView:[function(t,e,n){"use strict";cc._RF.push(e,"f6146nQOLxMhKMOvEg6Z7xd","DuaXeView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DuaXeView=void 0;var c=t("./DuaXeEffect"),l=t("./EndFreeSpinDuaXe"),u=t("../../../Scritps/DefineTs/StateReelSlot"),p=t("./InfoBarControllerDuaXe"),h=t("./SpinNormalDuaXe"),f=t("../../../Scritps/Game/GAME_TYPE"),d=t("../../../Scritps/DefineTs/TextDefine"),y=t("../../../Scritps/DefineTs/EVENT_MANAGER"),m=t("./ItemSlotDuaXe"),S=t("./AssetDuaXe"),v=t("../../../Scritps/Other/LbMonoSpace"),b=t("./ItemSlotDuaXeNgang"),g=t("../../../Scritps/Obs/LbMoneyChange"),w=t("./MultiEffectDuaXe"),D=t("./LichSuDuaXe"),W=t("./AudioDuaXe"),_=t("../../../Scritps/Windown"),X=t("../../../Scritps/Network/ConectManager"),I=t("../../../Scritps/DefineTs/REQUEST_CODE"),C=t("../../../Scritps/Util"),E=cc._decorator,M=E.ccclass,A=E.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.effTest=null,e.bkgSprite=null,e.btnSpin=null,e.parentMask=null,e.parentItem=null,e.parentItemFront=null,e.parentItemActive=null,e.parentEffect=null,e.parentMultiEffect=null,e.nearWinNoSap=null,e.nodeBtnPlay=null,e.nodeChooseAuto=null,e.nodeBtnSeting=null,e.btnStartAuto=null,e.toggleTurbo=null,e.listNodeDeactive=[],e.lb_totalBet=null,e.lb_TotalLine=null,e.listColum=[],e.effect=null,e.multiController=null,e.infoBar=null,e.asset=null,e.itemSlotDuaXeNgang=null,e.lb_FSLeft=null,e.lb_CountAuto=null,e.labelChipReviceInBox=null,e._popupLichSu=null,e.audio=null,e.stateSpin=null,e.isDoneStartSpin=!1,e.isShowBtnPlay=!0,e.stateReel=0,e.curRoomBet=50,e.bonus=0,e.currentBonusFS=0,e.gameType=-1,e.totalLineBet=20,e.funEnd=null,e.currentTotalLine=1,e.dataFinish=null,e.listConfigBet=[],e.listResult=null,e.listResultConvert=[],e.sfsObjTest=null,e.roomSFS=null,e.sfs=null,e.indexFinish=0,e}return i(e,t),e.prototype.onLoad=function(){_.Windown.DuaXe=this,cc.log("start Duaxe"),this.gameType=f.default.DuaXe,this.gameType=f.default.DuaXe,this.sfs=X.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(y.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.stateReel=u.default.WAITING,this.stateSpin=new h.SpinNormalDuaXe,this.sendJoinRoom(),this.activeMask(!1),cc.game.setFrameRate(60)},e.prototype.start=function(){this.setupView(),this.setStateEffBtnSpin(),this.initItem(),this.asset.preloadTakeSymbol(),this.asset.preloadBigWin()},e.prototype.onDestroy=function(){_.Windown.DuaXe=null,this.dataFinish&&(_.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),_.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),_.Windown.UIManager.changeRotation(),this.clearAllMakeDelay()},e.prototype.extResponse=function(t){var e=t.cmd,n=t.params;switch(e){case I.REQUEST_CODE.SpinDuaXe:this.handleFinish(n);break;case I.REQUEST_CODE.HistoryDuaXe:this._popupLichSu&&this._popupLichSu.responseServer(n);break;case I.REQUEST_CODE.HistoryChiTietDuaXe:this._popupLichSu&&this._popupLichSu.responseServerChiTiet(n)}},e.prototype.onJoinRoom=function(t){cc.log("onJoinRoom "+t.room.groupId);var e=t.room;if("SlotDX"==e.groupId){this.roomSFS=e,_.Windown.UIManager.hideLoadingData();var n=e.getVariable("cf").value;cc.log(n);var o=[],i=JSON.parse(n);for(var r in i){var a=Object.create(null);a.bet=parseInt(r),a.perJp=i[r].percentPot/100,o.push(a)}o.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=o,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=_.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),_.Windown.UIManager.hideLoading(),_.Windown.UIManager.hideLoadingData(),_.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.onCreateError=function(){cc.log("creat errr"),_.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),_.Windown.Dialog.showLog(d.TextDefine.ERR_JOIN_ROOM)},e.prototype.userExitRoom=function(t){cc.log("user exit room"),"SlotDX"==t.room.groupId&&t.user.isItMe&&cc.director.loadScene("main")},e.prototype.switchBkgGame=function(t){var e=this,n=cc.find("Game/BkgGround/FreeSpin",this.node),o=cc.find("Game/BkgGround/Normal",this.node),i=cc.find("Game/BkgGround/freespin_bg",this.node);t?(n.active=!0,o.active=!1,this.lb_FSLeft.node.parent.active=!0,i.active=!0,this.nodeBtnPlay.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.nodeBtnPlay.active=!1})))):(n.active=!1,o.active=!0,i.active=!1,this.lb_FSLeft.node.parent.active=!1,this.nodeBtnPlay.active=!0,this.nodeBtnPlay.opacity=255,this.multiController.lbMultiTotalFS.node.parent.active=!1),this.lb_TotalLine._updateString()},e.prototype.initItem=function(){for(var t,e=this.getRdViewFirtGame(),n=this.getRdViewForLoop(0),o=cc.instantiate(this.parentItem.children[0]),i=2*o.width/3,r=(o.height,0);r<7;r++){var a=n[r].pop();e[r].unshift(a),e[r].push(a);var s=null;if(r>0){var c=this.parentItem.children[r-1];null==c&&((c=cc.instantiate(o)).parent=this.parentItem),(s=c.getComponent(m.ItemSlotDuaXe)).node.setPosition(cc.v3(i*(r-1)+i/2-6*i/2,0,0))}else s=this.itemSlotDuaXeNgang;s.index=r,this.listColum.push(s),n[r].length>0&&(t=s.listResultRandomCache).unshift.apply(t,n[r]),s.setResultFirtGame(e[r])}},e.prototype.getRdViewFirtGame=function(){for(var t,e,n,o=[],i=0,r=function(){var t=_.Windown.RandomNumber(0,100);return t<20?3:t<50?2:1},a=function(){var t=_.Windown.RandomNumber(0,100);return t<20?_.Windown.RandomNumber(8,11):t<50?_.Windown.RandomNumber(5,8):_.Windown.RandomNumber(2,5)},s=0;s<7;s++){for(var c=[],l=0;l<(0==s?4:5);l++)(p=Object.create(null)).i=(t=s,e=l,void 0,(n=_.Windown.RandomNumber(0,100))<3&&i<3?(i++,12):n<10&&e>0&&t>0?11:_.Windown.RandomNumber(0,11)),p.s=1,p.b=a(),(s<2||s>5)&&10==p.i&&(p.b=a()),c.push(p);o.push(c)}var u=function(t,e,n,o){if(!(n+o<=5))return!1;for(var i=n;i<o+n;i++){var r=t[e][i];if(1!=r.s||12==r.i)return!1}return!0};for(o.forEach(function(t,e){t.forEach(function(t,n){if(e>1&&e<6&&12!=t.i){var i=a(),s=r();if(u(o,e,n,s))for(var c=t.i,l=n;l<s+n;l++)o[e][l].i=c,o[e][l].s=s,o[e][l].b=i}})}),s=0;s<o.length;s++)for(c=o[s],l=0;l<c.length;l++){var p;if((p=c[l])&&1!=p.s)for(var h=l+1,f=l+1+p.s-1;h<f;h++)c[h]=null}for(var d in o)o[d]=o[d].filter(function(t){return null!=t});return o},e.prototype.getRdViewForLoop=function(t){for(var e,n=function(){var t=_.Windown.RandomNumber(0,100);return t<20?_.Windown.RandomNumber(8,11):t<50?_.Windown.RandomNumber(5,8):_.Windown.RandomNumber(2,5)},o=[],i=0,r=7-t;i<r;i++){var a=t>0&&6!=t&&_.Windown.RandomNumber(0,100)<20?_.Windown.RandomNumber(3,5):_.Windown.RandomNumber(1,3),s=(void 0,(e=_.Windown.RandomNumber(0,100))<5?12:e<10?11:_.Windown.RandomNumber(0,9));o.push([{i:s,s:a,b:10==s&&_.Windown.RandomNumber(0,100)<30?n():1}])}var c=0;return o.forEach(function(t){var e=t[0].s||1;e>c&&(c=e)}),o.forEach(function(t){for(var e=t[0].s||1,n=0,o=c-e;n<o;n++)t.unshift({i:_.Windown.RandomNumber(0,12),b:1,s:1})}),o},e.prototype.sendJoinRoom=function(){var t=X.ConectManager.getIns().getSFSObj();t.putInt("gameType",f.default.DuaXe),t.putInt("roomType",-1),t.putInt("mark",-1),X.ConectManager.getIns().sendRequest(I.REQUEST_CODE.GetIdJoinRoom,t)},e.prototype.handleHistoryInfoD=function(t){this._popupLichSu&&this._popupLichSu.responseServerChiTiet(t)},e.prototype.handleHistory=function(t){this._popupLichSu&&this._popupLichSu.responseServer(t)},e.prototype.handleResponse=function(t,e){console.log("handleResponse: "+JSON.stringify(t)),console.log("handleResponse: "+e)},e.prototype.onDisconnect=function(){cc.log("disconnect"),_.Windown.UIManager.hideLoading(),_.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.handleFinish=function(t){var e=this,n=JSON.parse(_.Windown.SFSObjToJson(t));if(this.isDoneStartSpin){if(cc.log(n),this.indexFinish++,n.errorMessage)return this.stateSpin.handleErrSpin(),_.Windown.Dialog.showLog(n.errorMessage),this.activeAllBtn(),void this.onClickResetCountAuto();this.dataFinish=n,this.bonus=n.bonus,_.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.agUser,n.agWin),this.truTienBet(this.dataFinish.agBet*this.totalLineBet,this.dataFinish.agUser),this.listResult=n.views,this.listResultConvert=this.convertResult(this.listResult,n.listItemWin),this.stateSpin.isMaxSpeed,this.stateReel=u.default.CAN_STOP;var o=this.stateSpin.isMaxSpeed?0:.5;this.scheduleOnce(this.funEnd=function(){e.stateSpin.onEnd()},o)}else this.scheduleOnce(function(){e.handleFinish(t)},.05)},e.prototype.setLbFreeSpinLeft=function(t){var e=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=t.toString(),t<1?(cc.find("last_spin",e).active=!0,cc.find("remaining_spin",e).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last_spin",e).active=!1,cc.find("remaining_spin",e).active=!0,this.lb_FSLeft.node.active=!0)},e.prototype.resetForNewGame=function(){this.stateReel=u.default.WAITING,this.setStateEffBtnSpin(),this.currentBonusFS=this.bonus},e.prototype.getListActiveScaster=function(t){for(var e=[],n=0,o=0;o<t.length;o++)n>=3?e.push(!0):e.push(!1),t[o].forEach(function(t){12==t.i&&n++});return e},e.prototype.effectShake=function(){var t=this;this.unschedule(this.shake);var e=_.Windown.randomInt(10,15),n=0;this.schedule(this.shake=function(){n!=e?t.camera.setPosition(_.Windown.randomInt(-3,3),_.Windown.randomInt(-3,3)):t.camera.setPosition(0,0),n++},0,e)},e.prototype.convertResult=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],r=e.slice();return t.forEach(function(n,a){var s=Object.create(null);s.listSFSObj=[],s.listSFSObj=[[]],r.length>0&&r[a]&&Math.max.apply(Math,JSON.parse(r[a].lsstack)),s.agWin=0,s.mutil=1,s.view=t[a],n.forEach(function(t,o){var i=[];if(t.forEach(function(e,n){n==t.length-1&&o>0&&o<5?s.listSFSObj[0].push(e):i.push(e)}),i.reverse(),s.listSFSObj.push(i),o==n.length-1){var r=e.shift();r&&(r.lsIdItem=JSON.parse(r.lsIdItem),r.lsstack=JSON.parse(r.lsstack),r.lsAgWin=JSON.parse(r.lsAgWin),r.lsAgWin.length>0&&(s.listItemWin=r,s.isNoSap=!0),r.lsAgWin.forEach(function(t){s.agWin+=t}))}}),s.countScater=o.getCountScater(s.listSFSObj),s.listSFSObj[0].reverse(),i.push(s)}),i},e.prototype.getCountScater=function(t){var e=0;return t.forEach(function(t){t.forEach(function(t){12==t.i&&e++})}),e},e.prototype.truTienBet=function(t,e){0!=t&&_.Windown.MoneyUser.subMoney(t,e)},e.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!0,t.node.children.forEach(function(t){t.getComponent(cc.Sprite)&&(t.getComponent(cc.Sprite).node.color=cc.Color.fromHEX(new cc.Color,"#E48731"))})})},e.prototype.offAllScatter=function(){return a(this,void 0,void 0,function(){var t,e,n,o=this;return s(this,function(i){switch(i.label){case 0:for(n in t=[],e=function(t){for(var e=o.listColum[t].getListSymbol(),n=0;n<e.length;n++)if(12==e[n].result||11==e[n].result)return!0;return!1},this.listColum)e(n)&&t.push(this.listColum[n].offAllScatterAndWild());return[4,_.Windown.DuaXe.getPromiseAll(t)];case 1:return i.sent(),[2]}})})},e.prototype.showMoneyAllWin=function(t){this.labelChipReviceInBox.setMoney(t),_.Windown.MoneyUser.removeDelay(this.gameType)},e.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1,this.btnSpin.getChildByName("sb_button").active=!0,_.Windown.DuaXe.audio.playClick()},e.prototype.setCountAuto=function(t){t<1?(this.lb_CountAuto.node.parent.active=!1,this.btnSpin.getChildByName("sb_button").active=!0):(this.lb_CountAuto.node.parent.active=!0,this.btnSpin.getChildByName("sb_button").active=!1),this.lb_CountAuto.string=t.toString()},e.prototype.onJoinGame=function(t){console.log("OnJoin Game: "+JSON.stringify(t));var e=[],n=t;for(var o in n){var i=Object.create(null);i.bet=parseInt(o),i.perJp=n[o].percentPot/100,e.push(i)}e.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=e,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=_.Windown.formatNumber(this.totalLineBet*this.curRoomBet)},e.prototype.setupView=function(){_.Windown.UIManager.hideLoadingData();var t=cc.find("Game",this.node);if(cc.sys.isMobile)t.angle=90,this.bkgSprite.angle=90,e=1280/720,this.bkgSprite.setScale(e,e,e);else{var e=cc.view.getDesignResolutionSize().height/1280;t.angle=0,t.setScale(e,e,e),this.bkgSprite.angle=0;var n=this.bkgSprite.addComponent(cc.Widget);n.left=0,n.right=0,n.bottom=0,n.top=0}_.Windown.UIManager.changeRotation(!0)},e.prototype.resetLbTotalLine=function(){this.currentTotalLine=1,this.lb_TotalLine.string="..."},e.prototype.activeMask=function(t,e){var n=this.parentMask.children;t?e?(_.Windown.stopAllActionByTarget(n[e]),n[e].runAction(cc.fadeTo(.3,150))):n.forEach(function(t){_.Windown.stopAllActionByTarget(t),t.runAction(cc.fadeTo(.3,150))}):e?(_.Windown.stopAllActionByTarget(n[e]),n[e].runAction(cc.fadeOut(.3))):n.forEach(function(t){_.Windown.stopAllActionByTarget(t),t.runAction(cc.fadeOut(.3))})},e.prototype.onClickBtnSpin=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:cc.log("stateReel="+this.stateReel),e.label=1;case 1:return e.trys.push([1,6,,7]),this.stateReel!=u.default.WAITING?[3,4]:(this.audio.playEffect(this.audio.spinBtn),this.stateReel=u.default.RUN,this.setStateEffBtnSpin(),[4,this.offAllScatter()]);case 2:return e.sent(),this.offAllBtn(),this.infoBar.reset(),this.isDoneStartSpin=!1,this.sendClickSpin(),[4,_.Windown.DuaXe.getPromise(this.stateSpin.onStart())];case 3:return e.sent(),this.isDoneStartSpin=!0,[3,5];case 4:this.stateReel==u.default.CAN_STOP?this.stateSpin.isMaxSpeed||(this.stateReel=u.default.RUN,this.unschedule(this.funEnd),this.stateSpin.onForceEnd()):this.stateReel==u.default.STOP||this.stateReel==u.default.SHOW_EFFECT&&(this.audio.playClick(),this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),e.label=5;case 5:return[3,7];case 6:return t=e.sent(),C.Util.ThrowErrProsime(t),[3,7];case 7:return[2]}})})},e.prototype.onClickSendFixData=function(){var t=Object.create(null);t.view=[[{i:9},{i:3},{i:7},{i:1},{i:7}],[{i:6,s:2},{i:2,s:2},{i:12},{i:2}],[{i:12},{i:2,s:2},{i:6,s:2},{i:12}],[{i:9},{i:6},{i:2,s:2},{i:6},{i:12}],[{i:1,s:3},{i:5},{i:4},{i:4}],[{i:9},{i:7},{i:6},{i:0},{i:7}]],t.bet=this.curRoomBet,this.sfsObjTest=t,this.onClickBtnSpin()},e.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return X.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),this.sfsObjTest=null,void cc.log("send test ne");var t=X.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),X.ConectManager.getIns().sendRequest(I.REQUEST_CODE.SpinDuaXe,t,this.roomSFS)},e.prototype.setStateEffBtnSpin=function(){var t=this.btnSpin.getComponent(cc.Animation),e=cc.find("sb_arrow",this.btnSpin.getChildByName("sb_button")),n=cc.find("sb_arrow_blur",this.btnSpin.getChildByName("sb_button"));if(this.stateReel!=u.default.STOP){e.getComponent(cc.Sprite).node.color=cc.Color.WHITE;var o=cc.Material.getBuiltinMaterial("2d-sprite");e.getComponent(cc.Sprite).setMaterial(0,o)}if(this.stateReel==u.default.WAITING||this.stateReel==u.default.SHOW_EFFECT)n.active=!1,e.active=!0,_.Windown.stopAllActionByTarget(e),e.runAction(cc.repeatForever(cc.rotateBy(3,360)));else if(this.stateReel==u.default.RUN)t.play("ButtonSpinClick"),n.active=!0,_.Windown.stopAllActionByTarget(n),n.runAction(cc.repeatForever(cc.rotateBy(.2,360))),e.active=!1,this.infoBar.showRdContent();else if(this.stateReel==u.default.STOP){e.active=!0,n.active=!1,_.Windown.stopAllActionByTarget(n),_.Windown.stopAllActionByTarget(e);var i=cc.Material.getBuiltinMaterial("2d-gray-sprite");e.getComponent(cc.Sprite).setMaterial(0,i)}},e.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!1,t.node.children.forEach(function(t){t.getComponent(cc.Sprite)&&(t.getComponent(cc.Sprite).node.color=cc.Color.fromHEX(new cc.Color,"#999999"))})})},e.prototype.updateNewTotalLine=function(t){this.currentTotalLine*=t,this.lb_TotalLine.string=this.currentTotalLine.toString()},e.prototype.onClickTest=function(){var t=cc.instantiate(this.effTest);t.setParent(cc.find("Game",this.node)),t.getComponent(l.EndFreeSpinDuaXe).show(59999)},e.prototype.getMakeDelay=function(t){return _.Windown.CpPromise.getDelay(t,this)},e.prototype.getPromise=function(t){return _.Windown.CpPromise.getDelayByPromise(t,this).prosime},e.prototype.getPromiseAll=function(t){return _.Windown.CpPromise.getDelayPromiseAll(t,this).prosime},e.prototype.clearAllMakeDelay=function(){_.Windown.CpPromise.targetOff(this)},e.prototype.onClickChangeBet=function(t,e){if(this.audio.playClick(),this.listConfigBet.length<1)_.Windown.Dialog.showLog(d.TextDefine.Error);else{var n=-1;for(var o in this.listConfigBet)if(this.listConfigBet[o].bet==this.curRoomBet){n=parseInt(o);break}0==e?n--:n++,n<0&&(n=this.listConfigBet.length-1),n>this.listConfigBet.length-1&&(n=0),this.curRoomBet=this.listConfigBet[n].bet,this.lb_totalBet.string=_.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onClickTurbo=function(){_.Windown.DuaXe.audio.playClick(),cc.log("clmm onClickTurbo");var t=this.toggleTurbo.isChecked;this.toggleTurbo.node.children[1].active=!t,this.stateSpin.isMaxSpeed=t,t?_.Windown.UIManager.showAlertMini("\u0110\xe3 b\u1eadt quay nhanh"):_.Windown.UIManager.showAlertMini("\u0110\xe3 t\u1eaft quay nhanh")},e.prototype.onClickCloseListAuto=function(){var t=this;cc.log("onClickCloseListAuto"),_.Windown.DuaXe.audio.playClick(),_.Windown.stopAllActionByTarget(this.nodeChooseAuto),this.nodeChooseAuto.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){var e=t.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer);e.allowSwitchOff=!0,e.toggleItems.forEach(function(t){t.isChecked&&(t.isChecked=!1)}),t.nodeChooseAuto.active=!1,t.btnStartAuto.interactable=!1,t.btnStartAuto.node.children[0].getComponent(cc.Sprite).node.color=cc.Color.fromHEX(new cc.Color,"#E48731")})))},e.prototype.onClickBackToLobby=function(){_.Windown.DuaXe.audio.playClick(),this.roomSFS?(cc.log("Vao day"),X.ConectManager.getIns().sendLeaveRoom(this.roomSFS)):cc.director.loadScene("main")},e.prototype.onClickStartAutoSpin=function(){this.onClickBtnSpin(),this.onClickCloseListAuto(),_.Windown.DuaXe.stateSpin.countAutoSpin>0&&_.Windown.DuaXe.setCountAuto(_.Windown.DuaXe.stateSpin.countAutoSpin)},e.prototype.onClickShowListAuto=function(){_.Windown.DuaXe.audio.playClick(),this.nodeChooseAuto.active=!0,this.nodeChooseAuto.opacity=0,this.nodeChooseAuto.runAction(cc.fadeIn(.3)),this.btnStartAuto.interactable=!1,this.btnStartAuto.node.children[0].getComponent(cc.Sprite).node.color=cc.Color.fromHEX(new cc.Color,"#E48731")},e.prototype.onClickSeting=function(){if(_.Windown.DuaXe.audio.playClick(),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)t=cc.v2(0,-750),this.nodeBtnPlay.runAction(cc.fadeIn(.4)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.3),cc.moveTo(.3,t)));else{_.Windown.stopAllActionByTarget(this.nodeBtnPlay),_.Windown.stopAllActionByTarget(this.nodeBtnSeting);var t=cc.v2(0,-485.279);this.nodeBtnPlay.runAction(cc.fadeOut(.3)),this.nodeBtnSeting.opacity=0,this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.4),cc.moveTo(.3,t)))}},e.prototype.onClickItemAutoSpin=function(t){_.Windown.DuaXe.audio.playClick(),this.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer).allowSwitchOff=!1;var e=t.node.name,n=Number(e);this.stateSpin.countAutoSpin=n,this.btnStartAuto.interactable=!0,this.btnStartAuto.node.children[0].getComponent(cc.Sprite).node.color=cc.Color.fromHEX(new cc.Color,"#00CCFF")},e.prototype.onClickCachChoi=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return _.Windown.DuaXe.audio.playClick(),_.Windown.UIManager.showLoading(),[4,_.Windown.loadRes(this.gameType.toString(),"Prefabs/CachChoi",cc.Prefab)];case 1:return t=e.sent(),cc.instantiate(t).parent=_.Windown.DuaXe.node.getChildByName("Game"),_.Windown.UIManager.hideLoading(),[2]}})})},e.prototype.onClickLichSu=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return _.Windown.DuaXe.audio.playClick(),_.Windown.UIManager.showLoading(),[4,_.Windown.loadRes(this.gameType.toString(),"Prefabs/LichSu",cc.Prefab)];case 1:return t=e.sent(),this._popupLichSu=cc.instantiate(t).getComponent(D.LichSuDuaXe),this._popupLichSu.node.parent=_.Windown.DuaXe.node.getChildByName("Game"),this._popupLichSu.show(),[2]}})})},r([A(cc.Node)],e.prototype,"camera",void 0),r([A(cc.Prefab)],e.prototype,"effTest",void 0),r([A(cc.Node)],e.prototype,"bkgSprite",void 0),r([A(cc.Node)],e.prototype,"btnSpin",void 0),r([A(cc.Node)],e.prototype,"parentMask",void 0),r([A(cc.Node)],e.prototype,"parentItem",void 0),r([A(cc.Node)],e.prototype,"parentItemFront",void 0),r([A(cc.Node)],e.prototype,"parentItemActive",void 0),r([A(cc.Node)],e.prototype,"parentEffect",void 0),r([A(cc.Node)],e.prototype,"parentMultiEffect",void 0),r([A(cc.Node)],e.prototype,"nearWinNoSap",void 0),r([A(cc.Node)],e.prototype,"nodeBtnPlay",void 0),r([A(cc.Node)],e.prototype,"nodeChooseAuto",void 0),r([A(cc.Node)],e.prototype,"nodeBtnSeting",void 0),r([A(cc.Button)],e.prototype,"btnStartAuto",void 0),r([A(cc.Toggle)],e.prototype,"toggleTurbo",void 0),r([A([cc.Button])],e.prototype,"listNodeDeactive",void 0),r([A(cc.Label)],e.prototype,"lb_totalBet",void 0),r([A(v.default)],e.prototype,"lb_TotalLine",void 0),r([A(c.DuaXeEffect)],e.prototype,"effect",void 0),r([A(w.MultiEffectDuaXe)],e.prototype,"multiController",void 0),r([A(p.InfoBarControllerDuaXe)],e.prototype,"infoBar",void 0),r([A(S.AssetDuaXe)],e.prototype,"asset",void 0),r([A(b.ItemSlotDuaXeNgang)],e.prototype,"itemSlotDuaXeNgang",void 0),r([A(v.default)],e.prototype,"lb_FSLeft",void 0),r([A(v.default)],e.prototype,"lb_CountAuto",void 0),r([A(g.default)],e.prototype,"labelChipReviceInBox",void 0),r([A(D.LichSuDuaXe)],e.prototype,"_popupLichSu",void 0),r([A(W.default)],e.prototype,"audio",void 0),r([M],e)}(cc.Component);n.DuaXeView=T,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetDuaXe":"AssetDuaXe","./AudioDuaXe":"AudioDuaXe","./DuaXeEffect":"DuaXeEffect","./EndFreeSpinDuaXe":"EndFreeSpinDuaXe","./InfoBarControllerDuaXe":"InfoBarControllerDuaXe","./ItemSlotDuaXe":"ItemSlotDuaXe","./ItemSlotDuaXeNgang":"ItemSlotDuaXeNgang","./LichSuDuaXe":"LichSuDuaXe","./MultiEffectDuaXe":"MultiEffectDuaXe","./SpinNormalDuaXe":"SpinNormalDuaXe"}],EffectSymbolDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"d1870rZGRBJ26kico+tuC5W","EffectSymbolDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectSymbolDuaXe=void 0;var c=t("../../../Scritps/Windown"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=null,e}return i(e,t),e.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation)},e.prototype.start=function(){},e.prototype.effTakeItem=function(t,e,n){return a(this,void 0,void 0,function(){var o,i,r;return s(this,function(a){switch(a.label){case 0:return this.node.opacity=0,this.node.runAction(cc.fadeIn(.2)),c.Windown.DuaXe.stateSpin.isMaxSpeed,(o=this.node.getChildByName("spine").getComponent(sp.Skeleton)).premultipliedAlpha=12!=t,(i=cc.find("item",this.node).getComponent(cc.Sprite)).spriteFrame=c.Windown.DuaXe.asset.getSfItemSymbol(t,e),r=o,[4,c.Windown.DuaXe.asset.getSpine(t,e)];case 1:return r.skeletonData=a.sent(),this.animation.play("TakeSymbolStart_"+e),n.node.active=!1,o.node.active=!0,i.node.active=!1,o.setAnimation(0,"win",!1),11==t&&3==e?o.node.setScale(cc.v3(.67777,.7)):o.node.setScale(cc.v3(.67777,.67777)),[2]}})})},e.prototype.effectRemoveTakeItem=function(){var t=this;c.Windown.DuaXe.stateSpin.isMaxSpeed,cc.tween(this.node.getChildByName("spine")).to(.1,{scale:1.2,opacity:0}).call(function(){t.node.destroy()}).start()},e.prototype.effRemoveItem=function(t){var e=this,n=c.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,o=this.getComponent(cc.Animation);o.once(cc.Animation.EventType.FINISHED,function(){e.node.destroy()});var i=cc.js.formatStr("EffectRemoveSymbol_%s",t);o.play(o.getClips()[0].name),null!=o.getAnimationState(i)&&(o.getAnimationState(i).speed=n)},r([u],e)}(cc.Component));n.EffectSymbolDuaXe=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],EffectTakeTotalMulti:[function(t,e,n){"use strict";cc._RF.push(e,"40f17HTi+ROM7E9zwdbXCGl","EffectTakeTotalMulti");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectTakeTotalMulti=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./DuaXeSpeedControl"),h=cc._decorator,f=h.ccclass,d=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particle=null,e.lbMulti=null,e.resolveEffEnd=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){},e.prototype.show=function(t,e){var n=this;return new Promise(function(o){return a(n,void 0,void 0,function(){var n,i=this;return s(this,function(){try{u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.multiCombine),this.node.active=!0,this.lbMulti.node.active=!0,this.lbMulti.string="x"+t,(n=cc.instantiate(this.particle.node)).setParent(this.node),n.setSiblingIndex(0),n.getComponent(cc.ParticleSystem).playOnLoad=!0,n.active=!0,n.getComponent(cc.ParticleSystem).resetSystem(),this.getComponent(cc.Animation).play(e?"EffectAddTotalMulti":"EffectTakeTotalMulti"),this.getComponent(p.DuaXeSpeedControl).onPlay(),this.getComponent(cc.Animation).once(cc.Animation.EventType.FINISHED,function(){i.node.active=!1}),this.resolveEffEnd=o}catch(r){l.Util.ThrowErrProsime(r)}return[2]})})})},e.prototype.effectEnd=function(){cc.log("effectEnd"),this.lbMulti.node.active=!1,this.resolveEffEnd()},r([d(cc.ParticleSystem)],e.prototype,"particle",void 0),r([d(c.default)],e.prototype,"lbMulti",void 0),r([f],e)}(cc.Component);n.EffectTakeTotalMulti=y,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./DuaXeSpeedControl":"DuaXeSpeedControl"}],EndFreeSpinDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"26ce5jN8xpMCoQtriGksOSt","EndFreeSpinDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EndFreeSpinDuaXe=void 0;var c=t("../../../Scritps/DefineTs/REQUEST_CODE"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Other/LbMonoSpace"),h=t("../../../Scritps/Util"),f=t("../../../Scritps/Windown"),d=cc._decorator,y=d.ccclass,m=d.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnThuThap=null,e.label=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.show=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,p,d=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.bgmTotalwinMain),this.getComponent(cc.Animation).play("EndFreeSpin"),e=[],o=f.Windown.DuaXe.getMakeDelay(1.7),e.push(o),this.btnThuThap.active=!1,this.label.resetLb(),this.label.time=1.7,this.label.setMoney(t,!1,""),i=function(){for(;e.length>0;)e.shift().cancle(!1);cc.tween(d.node).to(.3,{opacity:0}).call(function(){d.node.destroy(),n(null),f.Windown.DuaXe.audio.stopBkgFs()}).start(),cc.log("nhay vao end ne")},this.scheduleOnce(function(){d.node.once(cc.Node.EventType.TOUCH_END,function(){for(;e.length>0;)e.shift().cancle(!0)})},.5),[4,o.prosime];case 1:return s.sent(),this.node.targetOff(this),r=f.Windown.DuaXe.getMakeDelay(1.7),e.push(r),this.label.time=0,this.label.setMoney(t,!1,""),this.label.node.parent.runAction(cc.sequence(cc.scaleTo(.15,.8),cc.scaleTo(.15,1))),this.btnThuThap.active=!0,this.node.getChildByName("VongSang").active=!0,this.btnThuThap.getComponent(cc.Animation).play("ButtonCollect"),t>1e4&&((a=u.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.DuaXe),a.putInt("mt",t),a.putUtfString("nn",f.Windown.User.nickName),a.putUtfString("dt","fs"),u.ConectManager.getIns().sendRequest(c.REQUEST_CODE.AddBigWin,a)),this.btnThuThap.once("click",i),f.Windown.DuaXe.audio.stopEffect(f.Windown.DuaXe.audio.bgmTotalwinMain),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.bgmTotalwinEnd),[4,r.prosime];case 2:return s.sent(),i(),[3,4];case 3:return p=s.sent(),h.Util.ThrowErrProsime(p),[3,4];case 4:return[2]}})})})},r([m(cc.Node)],e.prototype,"btnThuThap",void 0),r([m(p.default)],e.prototype,"label",void 0),r([y("EndFreeSpinDuaXe")],e)}(cc.Component);n.EndFreeSpinDuaXe=S,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],InfoBarControllerDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"06acdVNq9VA3oGSfp5jxGWw","InfoBarControllerDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoBarControllerDuaXe=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("./DuaXeSpeedControl"),u=t("../../../Scritps/Windown"),p=t("../../../Scritps/Util"),h=cc._decorator,f=h.ccclass,d=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentContent=null,e.parentMoney=null,e.parentMoneyEff=null,e.parentOneMore=null,e.lbMoney=null,e.lbMoneyEff=null,e.takeBigWin=null,e.spWin=null,e.spTotalWin=null,e.smallWin=null,e.isShowOneMoreScater=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.showRdContent(),this.parentContent.setPosition(cc.v3(360,17.095)),this.parentContent.runAction(cc.repeatForever(cc.sequence(cc.moveTo(65,cc.v2(-4779.665,17.095)),cc.callFunc(function(){t.parentContent.setPosition(306.493,17.095)}))))},e.prototype.showRdContent=function(){this.parentContent.active=!0,this.parentOneMore.active=!1,this.parentMoney.active=!1,this.isShowOneMoreScater=!1},e.prototype.reset=function(){cc.log("reset Info bar"),this.smallWin.active=!1,this.getComponent(cc.Animation).play("NormalState")},e.prototype.showTakeMoneyTurn=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return[2,new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a,c=this;return s(this,function(){try{u.Windown.logColor("Infobar showTakeMoneyTurn: "+t+" : x "+e),cc.find("ParrentMOney/info_win",this.node).active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,n=u.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,i=u.Windown.DuaXe.curRoomBet*u.Windown.DuaXe.totalLineBet,r=t/i,1!=e&&u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeSmallwinMultiplied),r<7?(this.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay()):(this.takeBigWin.active=!0,this.takeBigWin.runAction(cc.fadeIn(.2)),this.takeBigWin.once(cc.Animation.EventType.FINISHED,function(){c.getComponent(cc.Animation).play("BigWin"),c.node.getComponent(l.DuaXeSpeedControl).onPlay()})),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(t),(a=this.lbMoney.node.parent).setScale(0,0,0),a.opacity=50,a.runAction(cc.sequence(cc.spawn(cc.fadeIn(.3/n),cc.scaleTo(.5/n,1).easing(cc.easeBackOut())),cc.callFunc(function(){}))),o(null)}catch(s){p.Util.ThrowErrProsime(s)}return[2]})})})]})})},e.prototype.showTakeMoney=function(t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,c=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),cc.find("ParrentMOney/info_win",this.node).active=!1,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(t),e=this.lbMoney.node.parent,o=u.Windown.DuaXe.curRoomBet*u.Windown.DuaXe.totalLineBet,i=t/o,this.lbMoneyEff.setMoneyNoTime(t),this.parentMoneyEff.active=!0,this.parentMoney.active=!1,this.parentMoneyEff.getChildByName("spriteFrame").opacity=255,this.lbMoneyEff.node.setScale(cc.v3(3,3)),this.lbMoneyEff.node.opacity=255,this.lbMoneyEff.node.setPosition(cc.v3(0,-20)),this.parentMoneyEff.getChildByName("spriteFrame").opacity=255,u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeSmallwin),r=u.Windown.DuaXe.stateSpin.isMaxSpeed?.5:1,cc.tween(this.parentMoneyEff).set({scale:0}).to(.3*r,{scale:1},{easing:"backOut"}).delay(.5*r).call(function(){cc.tween(c.lbMoneyEff.node).set({scale:3,opacity:255}).to(.1,{scale:1.7,position:cc.v3(0,-200)}).call(function(){u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeInfoSmallwin)}).to(.1,{opacity:0}).start(),c.parentMoneyEff.getChildByName("spriteFrame").runAction(cc.fadeOut(.1))}).start(),[4,u.Windown.DuaXe.getMakeDelay(.9*r).prosime];case 1:return s.sent(),i<10?(this.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay()):(this.getComponent(cc.Animation).play("BigWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay()),e.active=!0,e.setScale(0,0,0),e.opacity=50,e.runAction(cc.spawn(cc.fadeIn(.3*r),cc.scaleTo(.5*r,1).easing(cc.easeBackOut()))),u.Windown.DuaXe.stateSpin.isMaxSpeed?[3,3]:[4,u.Windown.DuaXe.getMakeDelay(.75).prosime];case 2:return s.sent(),[3,5];case 3:return cc.log("Doi 2 Giay"),[4,u.Windown.DuaXe.getMakeDelay(.4).prosime];case 4:s.sent(),s.label=5;case 5:return n(null),[3,7];case 6:return a=s.sent(),p.Util.ThrowErrProsime(a),[3,7];case 7:return[2]}})})})]})})},e.prototype.offOneMoreScater=function(){},e.prototype.showTotalMoney=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r;return s(this,function(a){switch(a.label){case 0:return a.trys.push([0,8,,9]),0==t?(n(null),[2]):(cc.find("ParrentMOney/info_win",this.node).active=!0,e=u.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,o=u.Windown.DuaXe.curRoomBet*u.Windown.DuaXe.totalLineBet,(i=t/o)<5?(this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.parentMoney.setScale(0,0,0),cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut())),this.lbMoney.resetLb(),this.lbMoney.setMoneyNoTime(t),this.node.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay(),u.Windown.DuaXe.audio.playEffect(0==u.Windown.DuaXe.bonus?u.Windown.DuaXe.audio.prizeInfobarTotalwin:u.Windown.DuaXe.audio.prizeInfobarTotalwinBonus),[4,u.Windown.DuaXe.getMakeDelay(1/e).prosime]):[3,2]);case 1:return a.sent(),[3,7];case 2:return i<=10?(u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeInfobarTotalwinMedMain),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.node.getComponent(cc.Animation).play("NormalWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay(),this.lbMoney.resetLb(),this.lbMoney.time=2,this.lbMoney.setMoney(t),[4,u.Windown.DuaXe.getMakeDelay(2).prosime]):[3,5];case 3:return a.sent(),this.node.getComponent(cc.Animation).play("BigWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay(),u.Windown.DuaXe.audio.stopEffect(u.Windown.DuaXe.audio.prizeInfobarTotalwinMedMain),u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeInfobarTotalwinMedEnd),this.parentMoney.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),[4,u.Windown.DuaXe.getMakeDelay(.3).prosime];case 4:return a.sent(),[3,7];case 5:return this.node.getComponent(cc.Animation).play("BigWin"),this.node.getComponent(l.DuaXeSpeedControl).onPlay(),this.parentMoney.setScale(0,0,0),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.parentMoney.runAction(cc.scaleTo(.5,1).easing(cc.easeElasticOut(.3))),this.lbMoney.resetLb(),this.lbMoney.setMoneyNoTime(t),u.Windown.DuaXe.audio.playEffect(u.Windown.DuaXe.audio.prizeInfobarTotalwin),[4,u.Windown.DuaXe.getPromise(u.Windown.DuaXe.effect.showBigWin(t,i))];case 6:a.sent(),a.label=7;case 7:return n(null),[3,9];case 8:return r=a.sent(),p.Util.ThrowErrProsime(r),[3,9];case 9:return[2]}})})})},e.prototype.showOneMoreScater=function(){this.isShowOneMoreScater||(this.isShowOneMoreScater=!0,this.parentContent.active=!1,this.parentOneMore.active=!0,this.parentMoney.active=!1,u.Windown.stopAllActionByTarget(this.parentOneMore),this.parentOneMore.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.15).easing(cc.easeSineInOut()),cc.scaleTo(.3,1).easing(cc.easeSineInOut())))))},r([d(cc.Node)],e.prototype,"parentContent",void 0),r([d(cc.Node)],e.prototype,"parentMoney",void 0),r([d(cc.Node)],e.prototype,"parentMoneyEff",void 0),r([d(cc.Node)],e.prototype,"parentOneMore",void 0),r([d(c.default)],e.prototype,"lbMoney",void 0),r([d(c.default)],e.prototype,"lbMoneyEff",void 0),r([d(cc.Node)],e.prototype,"takeBigWin",void 0),r([d(cc.SpriteFrame)],e.prototype,"spWin",void 0),r([d(cc.SpriteFrame)],e.prototype,"spTotalWin",void 0),r([d(cc.Node)],e.prototype,"smallWin",void 0),r([f],e)}(cc.Component);n.InfoBarControllerDuaXe=y,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./DuaXeSpeedControl":"DuaXeSpeedControl"}],ItemAddScatterDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"a9fe2ZYafhJs5FJxXeMt3Xf","ItemAddScatterDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemAddScatterDuaXe=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._symbol=null,e.bkg=null,e.ske=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.init=function(t){this._symbol=t,this._symbol.node.on(cc.Node.EventType.POSITION_CHANGED,this.changePos,this),this.changParent(),this.node.angle=this._symbol.node.angle,this.bkg.angle=this._symbol.node.angle,this.getComponentInChildren(cc.Animation).play("NodeAddScatter")},e.prototype.showFS=function(){cc.log("----------showFS"),this.ske.setAnimation(0,"spawn",!1),this.ske.addAnimation(0,"idle",!0),cc.tween(this.bkg).set({scale:0,opacity:0}).to(.1,{opacity:255,scale:1}).start()},e.prototype.idle=function(){this.ske.setAnimation(0,"idle",!0)},e.prototype.winFS=function(){cc.log("----------winFS"),this.node.getComponent(cc.Animation).play("FireWork"),this.ske.setAnimation(0,"win",!1),this.ske.addAnimation(0,"win_idle",!0)},e.prototype.changParent=function(){this.node.parent=this._symbol.node.parent,this.node.setSiblingIndex(1e3),this.changePos()},e.prototype.changePos=function(){this.node.setPosition(this._symbol.node.getPosition())},e.prototype.remove=function(t){var e=this;void 0===t&&(t=.2),this._symbol.node.targetOff(this),this.node.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.node.destroy()})))},e.prototype.effectNearWinNoSap=function(){this.ske.setAnimation(0,"idle",!0)},r([c(cc.Node)],e.prototype,"bkg",void 0),r([c(sp.Skeleton)],e.prototype,"ske",void 0),r([s],e)}(cc.Component);n.ItemAddScatterDuaXe=l,cc._RF.pop()},{}],ItemLichSuDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"1c846RoJrhKKIcASe41JsBn","ItemLichSuDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=t("../../../Scritps/DefineTs/REQUEST_CODE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Windown"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTime=null,e.lbBet=null,e.lbWin=null,e.data=null,e}return i(e,t),e.prototype.initItem=function(t){try{this.data=t;var e=this.data.date,n=this.data.bet,o=this.data.agWin;this.lbTime.string=p.Windown.formatDate(new Date(e),"dd/MM\nHH:mm:ss"),this.lbBet.string=p.Windown.formatNumber(n*p.Windown.DuaXe.totalLineBet),this.lbWin.string=p.Windown.formatNumber(0|o)}catch(i){console.error(i)}},e.prototype.onClick=function(){var t=u.ConectManager.getIns().getSFSObj();t.putInt("id",this.data.id),u.ConectManager.getIns().sendRequest(l.REQUEST_CODE.HistoryChiTietDuaXe,t,p.Windown.DuaXe.roomSFS),p.Windown.DuaXe.audio.playClick(),p.Windown.UIManager.showLoading()},r([c(cc.Label)],e.prototype,"lbTime",void 0),r([c(cc.Label)],e.prototype,"lbBet",void 0),r([c(cc.Label)],e.prototype,"lbWin",void 0),r([s],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Windown":void 0}],ItemResultDetailDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"10051C53F9APIQ5+1ZhsU2u","ItemResultDetailDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./SymbolDuaXe"),s=t("./ItemSlotDuaXe"),c=t("../../../Scritps/Windown"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentMul=null,e.lbTitleToHopWin=null,e.parentItemResult=null,e.parentItemWin=null,e.parentTotalWin=null,e.colorOf=null,e.playTable=[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,4,4,6,6,8,10,20,0,0],[2,2,2,6,6,10,10,15,20,25,0,0],[3,3,3,8,8,12,12,20,30,40,0,0],[4,4,4,10,10,15,15,30,40,50,0,0]],e}return i(e,t),e.prototype.init=function(t,e,n,o,i,r){if(void 0===r&&(r=0),e){this.lbTitleToHopWin.string="T\u1ed5 h\u1ee3p win",this.parentItemWin.active=!0;for(var l=this.parentItemWin.children[0],u=0,p=e.lsIdItem.length;u<p;u++){var h=e.lsIdItem[u];e.lsAgWin[u],null==(C=this.parentItemWin.children[u])&&((C=cc.instantiate(l)).parent=this.parentItemWin),C.active=!0;var f=C.children[0].getComponent(a.SymbolDuaXe);f.result=h,f.typeItem=a.TYPE_ITEM.NONE,f.setSprite()}for(u=e.lsIdItem.length;u<this.parentItemWin.children.length;u++)this.parentItemWin.children[u].active=!1}else this.lbTitleToHopWin.string="-------------",this.parentItemWin.active=!1;var d=this.parentItemResult.children,y=d[0].children[0];if(cc.log("listResult:",t),t.forEach(function(t,e){var n=d[e],o=null;t.forEach(function(t,i){var r=n.children[i],c=t.i,l=t.t||1,u=t.s||1,p=t.b||1;null==r&&((r=cc.instantiate(y)).parent=n),r.getComponent(a.SymbolDuaXe).itemColum=n.getComponent(s.ItemSlotDuaXe),r.getComponent(a.SymbolDuaXe).result=c,r.getComponent(a.SymbolDuaXe).typeItem=l,r.getComponent(a.SymbolDuaXe).sizeItem=u,r.getComponent(a.SymbolDuaXe).bonus=p,r.getComponent(a.SymbolDuaXe).setSprite(),r.height=183*u,0==e&&cc.log("item id:"+r.getComponent(a.SymbolDuaXe).result);var h=o?o.position.y+o.height/2*(2/3):-260;r.setPosition(0,h+r.height/2*(2/3)),o=r})}),e){this.parentTotalWin.active=!1;var m=e.lsIdItem,S=e.lsstack,v=e.lsAgWin;for(u=0,p=m.length;u<p;u++){for(var b="",g=1,w=0,D=0;D<S[u]+1;D++){for(var W=d[D],_=0,X=0,I=W.children.length;X<I;X++)t[D][X].i!=m[u]&&11!=t[D][X].i||(W.children[X].getComponent(a.SymbolDuaXe).setKhungWin(),_++);b+=_+"x",_>=1&&(g*=_)}var C;b+=this.playTable[S[u]][m[u]]+"x"+c.Windown.formatNumber(i),w=0==w?1:w,(C=this.parentItemWin.children[u]).children[1].getComponent(cc.Label).string="B\u1ed9 "+(S[u]+1),C.children[2].getComponent(cc.Label).string=g+" \u0111\u01b0\u1eddng",C.children[3].getComponent(cc.Label).string=b+"= "+c.Windown.formatNumber(v[u])}}else 0==n&&(n=1),this.parentTotalWin.active=!0,this.parentTotalWin.getChildByName("lbBonus").getComponent(cc.Label).string="x"+n,this.parentTotalWin.getChildByName("lbTotalWin").getComponent(cc.Label).string=c.Windown.formatNumber(o)+" x "+n+" = "+c.Windown.formatNumber(r)},e.prototype.getArrSf=function(t,e,n){return[c.Windown.DuaXe.asset.getSfBkg(t,e,n),c.Windown.DuaXe.asset.getSfItemSymbol(t,e)]},r([p(cc.Node)],e.prototype,"parentMul",void 0),r([p(cc.Label)],e.prototype,"lbTitleToHopWin",void 0),r([p(cc.Node)],e.prototype,"parentItemResult",void 0),r([p(cc.Node)],e.prototype,"parentItemWin",void 0),r([p(cc.Node)],e.prototype,"parentTotalWin",void 0),r([p(cc.Color)],e.prototype,"colorOf",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemSlotDuaXe":"ItemSlotDuaXe","./SymbolDuaXe":"SymbolDuaXe"}],ItemSlotDuaXeNgang:[function(t,e,n){"use strict";cc._RF.push(e,"a440cD633pJ6I7Ct5hyz49E","ItemSlotDuaXeNgang");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemSlotDuaXeNgang=void 0;var a=t("./ItemSlotDuaXe"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([c],e)}(a.ItemSlotDuaXe));n.ItemSlotDuaXeNgang=l,cc._RF.pop()},{"./ItemSlotDuaXe":"ItemSlotDuaXe"}],ItemSlotDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"16284Skah1EUosRvh+w/au6","ItemSlotDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemSlotDuaXe=n.TYPE_MOVE=void 0;var c=t("../../../Scritps/DefineTs/StateReelSlot"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./SymbolDuaXe"),h=cc._decorator,f=h.ccclass,d=h.property;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD_NEW=1]="ADD_NEW"})(n.TYPE_MOVE||(n.TYPE_MOVE={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.result=[],e.listItemSymbol=[],e.parentItemFront=null,e.parentItemActive=null,e.funReject=null,e.resolve=null,e.stateWhel=c.default.WAITING,e.resultTemp=[],e.listResultRandomCache=[],e.listIconEff=[],e.nodeWildDT=null,e.nodeWildShowDT=null,e.isScater=!1,e.index=-1,e.indexNodeFirt=0,e.isMoveSlowDown=!1,e.deltaSlowDown=0,e.listNumMutilWild=[],e.indexMaxWild=0,e.sizeSymbol=7,e.parentItem=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.getListSymbolResult=function(){var t=[],e=this.getListSymbol();return this.result.forEach(function(n,o){t.push(e[o+1])}),t},e.prototype.getListSymbol=function(){return this.listItemSymbol},e.prototype.initParent=function(){this.parentItemFront=cc.instantiate(this.parentItem),this.parentItemFront.setPosition(u.Windown.convertNodeInOtherNode(this.parentItem,u.Windown.DuaXe.parentItemFront)),this.parentItemFront.parent=u.Windown.DuaXe.parentItemFront,this.parentItemActive=cc.instantiate(this.parentItem),this.parentItemActive.setPosition(u.Windown.convertNodeInOtherNode(this.parentItem,u.Windown.DuaXe.parentItemActive)),this.parentItemActive.parent=u.Windown.DuaXe.parentItemActive,6==this.sizeSymbol&&(this.parentItemFront.angle=-90,this.parentItemActive.angle=-90,this.parentItemActive.getComponent(cc.Mask).enabled=!1,this.parentItemFront.getComponent(cc.Mask).enabled=!1,this.parentItemActive.setContentSize(cc.size(130,this.parentItemActive.height)),this.parentItemFront.setContentSize(cc.size(130,this.parentItemActive.height)))},e.prototype.forceStopSpin=function(t,e){return this.funReject&&this.funReject(),t&&(this.offNearWin(),u.Windown.DuaXe.audio.stopEffect(u.Windown.DuaXe.audio.fastspinEnd),this.isMoveSlowDown=!1),this.stopSpinIsFastSpin(t,e)},e.prototype.setResultFirtGame=function(t){var e=t.slice(1,t.length-1);this.setResult(e),this.initParent();for(var n=this.parentItem.children,o=0,i=this.sizeSymbol;o<i;o++){var r=n[o];null==r&&((r=this.getSymbol()).parent=this.parentItem),r.setSiblingIndex(o),r.setPosition(cc.v3(0,0,0));var a=r.getComponent(p.SymbolDuaXe);6==this.sizeSymbol?a.isVectical=!1:a.isVectical=!0,a.setItemColum(this),a.setResult(t[o]),null!=t[o]&&12==t[o].i&&(a.bgScatter.active=!0,a.bgScatter.opacity=255)}this.initListSymbol(),this.getListSymbol().forEach(function(t){t.initPosStartGame()})},e.prototype.initListSymbol=function(){for(var t=[],e=0,n=this.parentItem.children;e<n.length;e++){var o=n[e].getComponent(p.SymbolDuaXe);o&&t.push(o)}this.listItemSymbol=t},e.prototype.setResult=function(t){this.result=t,this.resultTemp=t.slice()},e.prototype.getSymbol=function(){return u.Windown.DuaXe.asset.getSymbol()},e.prototype.runSpin=function(){this.stateWhel=c.default.RUN,this.getListSymbol().forEach(function(t){t.runSpin()})},e.prototype.stopSpin=function(t,e){var n=this;return new Promise(function(o,i){return a(n,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,7,,8]),this.setResult(e),this.funReject=i,this.isScater=t,this.resolve=o,t?[3,2]:[4,u.Windown.DuaXe.getMakeDelay(.1-.01*this.index).prosime];case 1:r.sent(),o(null),r.label=2;case 2:return t?[4,u.Windown.DuaXe.getMakeDelay(.5).prosime]:[3,5];case 3:return r.sent(),this.activeNodeNearWin(),this.runSlowDownActicon(),[4,u.Windown.DuaXe.getMakeDelay(.5).prosime];case 4:return r.sent(),this.stateWhel=c.default.SHOW_EFFECT,[3,6];case 5:this.stateWhel=c.default.STOP,this.recaculateSpeedSpin(!1),r.label=6;case 6:return[3,8];case 7:return n=r.sent(),l.Util.ThrowErrProsime(n),[3,8];case 8:return[2]}})})})},e.prototype.getIdSymbolResult=function(){return this.stateWhel==c.default.STOP&&this.resultTemp.pop()||this.getRandomResult()},e.prototype.getRandomResult=function(t){(this.index<2||6==this.index)&&(t=1);var e=Object.create(null);return t?(e.s=t,e.i=u.Windown.RandomNumber(0,13)):(e.i=u.Windown.RandomNumber(0,13),e.i<11?e.s=u.Windown.RandomNumber(1,4):e.s=1),10==e.i&&(e.b=u.Windown.RandomNumber(2,11)),e},e.prototype.recaculateSpeedSpin=function(t){var e=this.getListSymbol(),n=e[0].node.getPosition().y,o=-this.node.height-e[0].node.height*(2/3)/2,i=Math.abs(o-n),r=.3;t&&(r=2),e.forEach(function(t){t.stopSpin(cc.moveBy(r,cc.v2(0,-i)))})},e.prototype.runSlowDownActicon=function(){this.getListSymbol().forEach(function(t){u.Windown.stopAllActionByTarget(t.node)}),this.isMoveSlowDown=!0,this.deltaSlowDown=3500},e.prototype.activeNodeNearWin=function(){u.Windown.DuaXe.effect.activeNodeNearWin(this.index)},e.prototype.offAllScatterAndWild=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r;return s(this,function(a){switch(a.label){case 0:for(a.trys.push([0,4,,5]),t=this.getListSymbol(),n=!1,o=0;o<t.length;o++)!(i=t[o]).checkIsInView()||12!=i.result&&11!=i.result||(i.offAllScatterAndWild(),n=!0);return n?[4,u.Windown.DuaXe.getMakeDelay(u.Windown.DuaXe.stateSpin.isMaxSpeed?.15:.3).prosime]:[3,2];case 1:return a.sent(),e(null),[3,3];case 2:e(null),a.label=3;case 3:return[3,5];case 4:return r=a.sent(),l.Util.ThrowErrProsime(r),[3,5];case 5:return[2]}})})})]})})},e.prototype.reSetResultColum=function(){var t=this.getListSymbol();if(t.length>this.sizeSymbol)for(;t.length>this.sizeSymbol;)u.Windown.DuaXe.asset.putSymbol(t[t.length-1].node),t.pop();else if(t.length<this.sizeSymbol)for(var e=t.length;e<this.sizeSymbol;e++){var n=this.getSymbol();this.parentItem.addChild(n);var o=n.getComponent(p.SymbolDuaXe);6==this.sizeSymbol?o.isVectical=!1:o.isVectical=!0,o.setItemColum(this),t.push(o)}this.result.forEach(function(e,n){t[n+1].setResult(e)}),e=this.result.length+1;for(var i=t.length;e<i;e++)t[e].setResult(t[e].objSFS);t.forEach(function(t){t.canRun=!1,u.Windown.stopAllActionByTarget(t.node),t.initPosStartGame()})},e.prototype.stopSpinIsFastSpin=function(t,e){var n=this;return new Promise(function(t){n.stateWhel!=c.default.END?(n.setResult(e),n.stateWhel=c.default.END,u.Windown.stopAllActionByTarget(n.parentItem),n.parentItem.setPosition(cc.v3(n.parentItem.getPosition().x,n.node.height/2,0)),n.reSetResultColum(),u.Windown.DuaXe.updateNewTotalLine(n.result.length),n.isMoveSlowDown=!1,n.parentItem.setPosition(cc.v3(n.parentItem.getPosition().x,n.parentItem.getPosition().y+20,0)),n.parentItem.runAction(cc.sequence(cc.moveBy(.04,cc.v2(0,-20)).easing(cc.easeSineIn()),cc.callFunc(function(){n.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),t(null)})))):t(null)})},e.prototype.offNearWin=function(){6==this.index&&u.Windown.DuaXe.effect.offNearWin()},e.prototype.effStopSpin=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){try{if(this.stateWhel==c.default.END)return[2];this.stateWhel=c.default.END,u.Windown.stopAllActionByTarget(this.parentItem),this.reSetResultColum(),this.sizeSymbol>6&&(u.Windown.DuaXe.audio.playStopAudio(),u.Windown.DuaXe.updateNewTotalLine(this.result.length)),this.funReject=null,this.isMoveSlowDown=!1,this.isScater?(this.offNearWin(),this.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()}),this.resolve&&this.resolve(null),this.resolve=null):this.parentItem.runAction(cc.sequence(cc.moveBy(.05,cc.v2(0,10)),cc.moveBy(.1,cc.v2(.05,-10)),cc.callFunc(function(){t.getListSymbolResult().forEach(function(t){t.effectSpawnSymbol()})})))}catch(e){l.Util.ThrowErrProsime(e)}return[2]})})},e.prototype.effectStartSpin=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2]})})},e.prototype.checkAndRemoveItem=function(t){for(var e=!1,n=this.getListSymbol().slice(1,this.result.length+1),o=0;o<n.length;o++)n[o].result!=t&&11!=n[o].result||(n[o].removeItem(),this.result[o]=null,e=!0);e&&(this.result=this.result.filter(function(t){return null!=t}))},e.prototype.checkItemWin=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return[2,new Promise(function(o){return a(n,void 0,void 0,function(){var n,i,r,a;return s(this,function(){try{for(n=this.getListSymbolResult(),u.Windown.DuaXe.stateSpin.isMaxSpeed,6==this.sizeSymbol&&(n.reverse(),n=n.slice(0,e+1)),6==this.sizeSymbol&&n.reverse(),i=0,r=n;i<r.length;i++)(a=r[i]).result==t||11==a.result&&!a.isHasTakeItem?(a.takeItem(),o(null)):o(null)}catch(s){l.Util.ThrowErrProsime(s)}return[2]})})})]})})},e.prototype.addNewListSymbol=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i,r,a,c,h,f,d,y,m,S;return s(this,function(s){switch(s.label){case 0:for(s.trys.push([0,6,,7]),u.Windown.DuaXe.stateSpin.curentCountScater,e=u.Windown.DuaXe.stateSpin.isMaxSpeed?3:1,(o=this.result.slice()).reverse(),this.setResult(t),i=this.result.length-o.length,o.length=this.result.length,o.reverse(),r=this.getListSymbol(),a=r[0],c=0;c<i;c++)(h=u.Windown.DuaXe.asset.getSymbol()).setPosition(cc.v2(0,h.position.y)),this.parentItem.addChild(h),h.setSiblingIndex(0),m=h.getComponent(p.SymbolDuaXe),6==this.sizeSymbol?m.isVectical=!1:m.isVectical=!0,m.setItemColum(this),this.getListSymbol().unshift(m);for(f=this.getListSymbol(),d=[],f[0].setResult(this.getRandomResult()),this.result.forEach(function(t,e){var n=f[e+1];t.t,n.typeItem,n.isShuff||n.setResult(t)}),a.node.setPosition(cc.v2(a.node.x,a.node.height*(2/3)/2)),y=a.getIndexOf()-1;y>=0;)(m=f[y]).node.setPosition(cc.v2(m.node.x,a.node.y+a.node.height*(2/3)/2+m.node.height*(2/3)/2)),a=m,y--;return d.length<1?1!=e?[3,2]:[4,u.Windown.DuaXe.getMakeDelay(.5).prosime]:[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return[4,u.Windown.DuaXe.getPromiseAll(d)];case 4:s.sent(),s.label=5;case 5:return n(null),[3,7];case 6:return S=s.sent(),l.Util.ThrowErrProsime(S),[3,7];case 7:return[2]}})})})},e.prototype.moveSymbolInView=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,p,h,f,d;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=u.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,[4,u.Windown.DuaXe.getMakeDelay(.5-.02*this.index).prosime];case 1:if(s.sent(),this.getListSymbol().forEach(function(t){t.offItem()}),(n=this.getListSymbol().filter(function(t){return t.checkIsInView()})).reverse(),o=this.getListYByListResult(),n.length>0)for(i=0,r=n.length;i<r;i++)a=n[i],c=a.getIndexOf()-1,p=o[c],Math.abs(p-a.node.position.y)>2&&(h=cc.moveTo(.25/t,cc.v2(a.node.position.x,p)).easing(cc.easeSineIn()),f=cc.sequence(cc.moveBy(.075/t,cc.v2(0,17)),cc.moveBy(.075/t,cc.v2(0,-17)),cc.callFunc(function(){})),a.node.runAction(cc.sequence(h,cc.callFunc(function(){u.Windown.DuaXe.audio.playSymCollapse()}),f)));return e(null),[3,3];case 2:return d=s.sent(),l.Util.ThrowErrProsime(d),[3,3];case 3:return[2]}})})})},e.prototype.getListYByListResult=function(){var t=[],e=this.getListSymbol()[0].size.height*(2/3);90==this.getListSymbol()[0].node.eulerAngles.z&&(e=this.getListSymbol()[0].size.width*(2/3));var n=this.getListSymbol().slice(1,this.result.length+1),o=-n[0].sizeItem*e/2;t.push(o);for(var i=1;i<n.length;i++)o-=n[i-1].sizeItem*e/2+n[i].sizeItem*e/2,t.push(o);return t},e.prototype.moveSymbolNew=function(){var t=this;return new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i,r,a,c,p;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t=this.getListSymbol().filter(function(t){return t.checkIsInView()}),n=u.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,o=this.getListSymbolResult(),i=[],r=o.reverse(),(a=this.getListYByListResult()).reverse(),c=0,r.forEach(function(e,o){var r=e.node,s=a[o];!t.includes(e)&&Math.abs(s-r.position.y)>2&&i.push(new Promise(function(t){var i=cc.moveTo(.25/n,cc.v2(r.position.x,s)).easing(cc.easeSineIn()),a=cc.sequence(cc.moveBy(.075,cc.v2(0,17)),cc.moveBy(.075,cc.v2(0,-17)),cc.callFunc(function(){e.effectSpawnSymbol(),t(null)}));r.runAction(cc.sequence(cc.delayTime(c),i,cc.callFunc(function(){}),a)),1==n&&(c+=u.Windown.RandomNumber(0,4)<2?0:.05*o)}))}),i.length>0&&1==n&&u.Windown.DuaXe.nearWinNoSap.active?(u.Windown.DuaXe.audio.playEffectNoStop(u.Windown.DuaXe.audio.heartbeatSlowdrop),[4,u.Windown.DuaXe.getMakeDelay(.5).prosime]):[3,2];case 1:s.sent(),s.label=2;case 2:return[4,u.Windown.DuaXe.getPromiseAll(i)];case 3:return s.sent(),t.forEach(function(t){t.offItem()}),this.reSetResultColum(),e(null),[3,5];case 4:return p=s.sent(),l.Util.ThrowErrProsime(p),[3,5];case 5:return[2]}})})})},e.prototype.update=function(t){var e=this;this.isMoveSlowDown&&(this.getListSymbol().forEach(function(n){n.node.setPosition(n.node.position.x,n.node.position.y-t*e.deltaSlowDown)}),this.deltaSlowDown>500?this.deltaSlowDown-=1800*t:this.deltaSlowDown<1e3&&(this.stateWhel=c.default.STOP,this.isMoveSlowDown=!1,this.recaculateSpeedSpin(!0)))},r([d(cc.Integer)],e.prototype,"sizeSymbol",void 0),r([d(cc.Node)],e.prototype,"parentItem",void 0),r([f],e)}(cc.Component);n.ItemSlotDuaXe=y,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./SymbolDuaXe":"SymbolDuaXe"}],LichSuDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"9fbf4oWAu1IgJnLYdZq0VzR","LichSuDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.LichSuDuaXe=void 0;var a=t("../../../Scritps/DefineTs/REQUEST_CODE"),s=t("../../../Scritps/Network/ConectManager"),c=t("../../../Scritps/Popup/PageData/PageData"),l=t("../../../Scritps/Windown"),u=t("./DetailHistoryDuaXe"),p=t("./ItemLichSuDuaXe"),h=cc._decorator,f=h.ccclass,d=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageDate=null,e.detail=null,e.listData=null,e.maxRow=11,e}return i(e,t),e.prototype.onLoad=function(){this.detail.node.active=!1},e.prototype.show=function(){this.node.active=!0,this.reset(),this.node.setPosition(this.node.getPosition().x,-1280,0),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:cc.v3(0,0,0)}).start(),s.ConectManager.getIns().sendRequest(a.REQUEST_CODE.HistoryDuaXe,null,l.Windown.DuaXe.roomSFS),l.Windown.UIManager.showLoading()},e.prototype.responseServer=function(t){l.Windown.UIManager.hideLoading(),console.log("Reponse History M: "+JSON.stringify(t));var e=JSON.parse(l.Windown.SFSObjToJson(t));if(e.errorMessage)l.Windown.Dialog.showLog(e.errorMessage);else{var n=e.history;this.initWithListData(n)}},e.prototype.responseServerChiTiet=function(t){var e=JSON.parse(l.Windown.SFSObjToJson(t));l.Windown.UIManager.hideLoading(),this.showDetail(e)},e.prototype.initWithListData=function(t){this.pageDate.content.children;var e=t.length,n=Math.floor(e/this.maxRow);e%this.maxRow>0&&n++,0==n&&(n=1),this.pageDate.setTotalPage(n),this.listData=t,this.onChangePage(1)},e.prototype.onChangePage=function(t){for(var e=this.pageDate.content,n=e.children,o=n[0],i=(t-1)*this.maxRow,r=0,a=this.maxRow;r<a;r++){var s=n[r];if(i<this.listData.length){null==s&&(s=cc.instantiate(o),e.addChild(s),s.setPosition(cc.v3(s.getPosition().x,-(r+1)*s.height+s.height/2,0)));var c=this.listData[i];s.getComponent(p.default).initItem(c),s.active=!0,i++}else{if(!s)break;s.active=!1}}},e.prototype.showDetail=function(t){this.detail.show(t)},e.prototype.resetContent=function(){for(var t=this.pageDate.content.children,e=0,n=t.length;e<n;e++)t[e].active=!1},e.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},e.prototype.onClickClose=function(){var t=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:cc.v3(0,-1280,0)}).call(function(){t.node.active=!1}).start()},r([d(c.default)],e.prototype,"pageDate",void 0),r([d(u.default)],e.prototype,"detail",void 0),r([f],e)}(cc.Component);n.LichSuDuaXe=y,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryDuaXe":"DetailHistoryDuaXe","./ItemLichSuDuaXe":"ItemLichSuDuaXe"}],MultiEffectDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"49095xplEFEf5/8eAlOdll1","MultiEffectDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MultiEffectDuaXe=void 0;var c=t("../../../Scritps/Other/LbMonoSpace"),l=t("../../../Scritps/Windown"),u=t("../../../Scritps/Util"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbMultiTotalFS=null,e.nodeTakeTotalMulti=null,e}return i(e,t),e.prototype.start=function(){this.lbMultiTotalFS.node.parent.active=!1},e.prototype.checkShowMultiSymbol=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o,i;return s(this,function(){try{e=l.Windown.DuaXe.stateSpin.isMaxSpeed?.75:1,o=cc.instantiate(t.spriteItem.node),t.showEffMulti(!0),o.getComponent(cc.Sprite).spriteFrame=t.spriteItem.spriteFrame,o.parent=this.node,i=l.Windown.convertWorldPointInOtherNode(t.node.convertToWorldSpaceAR(t.spriteItem.node.position),this.node),o.setPosition(i),o.setScale(cc.v3(2/3,2/3)),cc.tween(o).to(.3*e,{scale:1.4},{easing:"sineOut"}).to(.4*e,{position:cc.v3(0,100),scale:.3,opacity:200},{easing:"sineIn"}).to(.1,{opacity:0}).call(function(){o.destroy()}).start(),this.scheduleOnce(function(){n(null)},.5*e)}catch(r){u.Util.ThrowErrProsime(r)}return[2]})})})},e.prototype.mergeCurrentMultiTotal=function(){var t=cc.instantiate(this.lbMultiTotalFS.node.parent);t.parent=this.node,t.setPosition(l.Windown.convertNodeInOtherNode(this.lbMultiTotalFS.node.parent,this.node)),this.lbMultiTotalFS.node.parent.opacity=150;var e=l.Windown.DuaXe.stateSpin.isMaxSpeed?.75:1;cc.tween(t).to(.3*e,{scale:2.5},{easing:"backOut"}).to(.4*e,{position:cc.v3(0,100),scale:.3,opacity:200},{easing:"sineIn"}).to(.1*e,{opacity:0}).call(function(){t.destroy()}).start()},e.prototype.showEffectMergeMulti=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return null==this.nodeTakeTotalMulti&&(this.nodeTakeTotalMulti=l.Windown.DuaXe.asset.getNodeTakeToltaMulti(),this.nodeTakeTotalMulti.node.setParent(this.node),this.nodeTakeTotalMulti.node.setPosition(cc.v3(0,100))),[4,this.nodeTakeTotalMulti.show(t,!e)];case 1:return n.sent(),l.Windown.DuaXe.activeMask(!1),[2]}})})},e.prototype.showEffectPushUpMulti=function(){var t=l.Windown.DuaXe.stateSpin.isMaxSpeed?.75:1,e=this.lbMultiTotalFS.node.parent;e.active=!0,e.opacity=255,this.lbMultiTotalFS.string=l.Windown.DuaXe.bonus+"",cc.tween(e).set({position:cc.v3(e.position.x,-359.527)}).to(.5*t,{position:cc.v3(e.position.x,-247.069)},{easing:"backOut"}).start()},e.prototype.showEffectCurrentMultiWin=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return a(t,void 0,void 0,function(){var t,n;return s(this,function(){try{t=l.Windown.DuaXe.stateSpin.isMaxSpeed?.75:1,(n=cc.instantiate(this.lbMultiTotalFS.node.parent)).parent=this.lbMultiTotalFS.node.parent.parent,n.opacity=0,n.active=!0,l.Windown.DuaXe.audio.playEffect(l.Windown.DuaXe.audio.textBonusJump),cc.tween(n).to(.2*t,{scale:1.6,opacity:200},{easing:"sineOut"}).to(.2*t,{position:cc.v3(n.position.x,-335),scale:1.1},{easing:"sineIn"}).to(.2*t,{opacity:0}).call(function(){n.destroy(),e(null)}).start()}catch(o){u.Util.ThrowErrProsime(o)}return[2]})})})]})})},e.prototype.checkAndShowTotalMulti=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return l.Windown.DuaXe.stateSpin.freeSpinLeft>0?0!=l.Windown.DuaXe.currentBonusFS||0==l.Windown.DuaXe.bonus?[3,5]:l.Windown.DuaXe.dataFinish.agWin>0?[4,this.showEffectMergeMulti(l.Windown.DuaXe.bonus,!0)]:[3,2]:[3,13];case 1:return e.sent(),this.showEffectPushUpMulti(),[3,4];case 2:return[4,this.showEffectMergeMulti(l.Windown.DuaXe.bonus,!1)];case 3:e.sent(),t=this.lbMultiTotalFS.node.parent,this.lbMultiTotalFS.string=l.Windown.DuaXe.bonus+"",t.active=!0,t.opacity=255,t.setPosition(cc.v3(this.lbMultiTotalFS.node.parent.position.x,-247)),e.label=4;case 4:return[3,12];case 5:return 0!=l.Windown.DuaXe.dataFinish.agWin?[3,8]:l.Windown.DuaXe.currentBonusFS==l.Windown.DuaXe.bonus?[3,7]:[4,this.showEffectMergeMulti(l.Windown.DuaXe.bonus,!1)];case 6:e.sent(),t=this.lbMultiTotalFS.node.parent,this.lbMultiTotalFS.string=l.Windown.DuaXe.bonus+"",t.active=!0,t.opacity=255,t.setPosition(cc.v3(this.lbMultiTotalFS.node.parent.position.x,-247)),e.label=7;case 7:return[3,12];case 8:return l.Windown.DuaXe.currentBonusFS!=l.Windown.DuaXe.bonus?[3,10]:[4,this.showEffectCurrentMultiWin()];case 9:return e.sent(),[3,12];case 10:return[4,this.showEffectMergeMulti(l.Windown.DuaXe.bonus,!0)];case 11:e.sent(),this.showEffectPushUpMulti(),e.label=12;case 12:return[3,15];case 13:return l.Windown.DuaXe.bonus>0&&l.Windown.DuaXe.dataFinish.agWin>0?[4,this.showEffectMergeMulti(l.Windown.DuaXe.bonus,!0)]:[3,15];case 14:e.sent(),e.label=15;case 15:return[2]}})})},r([f(c.default)],e.prototype,"lbMultiTotalFS",void 0),r([h],e)}(cc.Component);n.MultiEffectDuaXe=d,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],NearFSDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"65b4aIOBmhDtq68dOEtW30s","NearFSDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.NearFSDuaXe=void 0;var a=t("../../../Scritps/Windown"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e._curItem=null,e.indexCol=0,e}return i(e,t),e.prototype.init=function(t){if(this.indexCol=t,this._curItem){var e=this._curItem;e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){e.destroy()})))}a.Windown.DuaXe.audio.playEffect(a.Windown.DuaXe.audio.fastspinStart);var n=a.Windown.DuaXe.listColum[t],o=cc.instantiate(this.item);o.parent=this.node,o.opacity=0,o.runAction(cc.fadeIn(.3)),o.setPosition(a.Windown.convertNodeInOtherNode(n.node,this.node)),this._curItem=o},e.prototype.effOff=function(){if(this._curItem){5==this.indexCol&&a.Windown.DuaXe.audio.playEffect(a.Windown.DuaXe.audio.fastspinEnd);var t=this._curItem;t.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.destroy()})))}},r([l(cc.Prefab)],e.prototype,"item",void 0),r([c],e)}(cc.Component);n.NearFSDuaXe=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],SpinNormalDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"3da0eMEi5ZEYZB+/4oXUCDq","SpinNormalDuaXe");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SpinNormalDuaXe=void 0;var a=t("../../../Scritps/DefineTs/StateReelSlot"),s=t("../../../Scritps/Windown"),c=t("../../../Scritps/Util"),l=cc._decorator,u=l.ccclass,p=(l.property,function(){function t(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.freeSpinLeft=0,this.freeSpinCache=0,this.moneyTotalFs=0,this.curentCountScater=0,this.isShowNearWin=!1,this.listColum=s.Windown.DuaXe.listColum,this.effect=s.Windown.DuaXe.effect}return t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.activeAllSymbol=function(){s.Windown.DuaXe.activeMask(!1)},t.prototype.onStart=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:i.trys.push([0,8,,9]),this.removeAllMutilAdded(),t=.05,n=0,i.label=1;case 1:return n<this.listColum.length?(0==n&&s.Windown.DuaXe.audio.playEffect(s.Windown.DuaXe.audio.spinActiveLoop,.7,!0),this.isMaxSpeed?[3,3]:[4,s.Windown.DuaXe.getMakeDelay(t*n).prosime]):[3,5];case 2:i.sent(),i.label=3;case 3:t-=.012,this.listColum[n].runSpin(),i.label=4;case 4:return n++,[3,1];case 5:return this.isMaxSpeed?[4,s.Windown.DuaXe.getMakeDelay(.2).prosime]:[3,7];case 6:i.sent(),i.label=7;case 7:return[3,9];case 8:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,9];case 9:return e(null),[2]}})})})},t.prototype.removeAllMutilAdded=function(){var t=this;return new Promise(function(e){s.Windown.DuaXe.resetLbTotalLine(),t.listColum.forEach(function(t){t.getListSymbol().forEach(function(t){t.removeAddScater(0)})}),e(null)})},t.prototype.checkIsNearFS=function(){return this.isShowNearWin},t.prototype.handleErrSpin=function(){return i(this,void 0,void 0,function(){var t,e,n;return r(this,function(o){switch(o.label){case 0:s.Windown.DuaXe.audio.stopEffect(s.Windown.DuaXe.audio.spinActiveLoop),t=0,e=this.listColum,o.label=1;case 1:return t<e.length?(n=e[t],this.isMaxSpeed?[3,3]:[4,s.Windown.DuaXe.getPromise(n.stopSpin(!1,n.result))]):[3,5];case 2:return o.sent(),[3,4];case 3:n.stopSpin(!1,n.result),o.label=4;case 4:return t++,[3,1];case 5:return s.Windown.DuaXe.resetForNewGame(),[2]}})})},t.prototype.onEnd=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,l,u,p,h,f;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,12,,13]),t=s.Windown.DuaXe.listResultConvert,e=s.Windown.DuaXe.getListActiveScaster(t[0].listSFSObj),n=0,o=[],this.isShowNearWin=!1,i=0,l=e;i<l.length;i++)if(h=l[i]){this.isShowNearWin=!0;break}this.curentCountScater=t[0].countScater,u=0,p=this.listColum,r.label=1;case 1:return u<p.length?(h=p[u],this.isMaxSpeed?[3,3]:[4,s.Windown.DuaXe.getPromise(h.stopSpin(e[n],t[0].listSFSObj[n]))]):[3,6];case 2:return r.sent(),[3,4];case 3:o.push(h.stopSpinIsFastSpin(e[n],t[0].listSFSObj[n])),r.label=4;case 4:n++,r.label=5;case 5:return u++,[3,1];case 6:return this.isMaxSpeed?[4,s.Windown.DuaXe.getPromiseAll(o)]:[3,9];case 7:return r.sent(),[4,s.Windown.DuaXe.getMakeDelay(.1).prosime];case 8:return r.sent(),[3,11];case 9:return[4,s.Windown.DuaXe.getMakeDelay(.5).prosime];case 10:r.sent(),r.label=11;case 11:return s.Windown.DuaXe.stateReel!=a.default.RUN&&this.handleStopAllColum(),[3,13];case 12:return f=r.sent(),c.Util.ThrowErrProsime(f),[3,13];case 13:return[2]}})})},t.prototype.handleStopAllColum=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,l;return r(this,function(r){switch(r.label){case 0:if(r.trys.push([0,20,,21]),s.Windown.DuaXe.stateReel==a.default.STOP)return[2];s.Windown.DuaXe.audio.stopEffect(s.Windown.DuaXe.audio.spinActiveLoop),s.Windown.DuaXe.stateReel=a.default.STOP,s.Windown.DuaXe.setStateEffBtnSpin(),t=s.Windown.DuaXe.listResultConvert,this.activeAllSymbol(),s.Windown.DuaXe.infoBar.offOneMoreScater(),s.Windown.DuaXe.infoBar.showRdContent(),e=0,n=t.length,r.label=1;case 1:return e<n?(o=t[e],this.curentCountScater=o.countScater,o.listItemWin?[4,s.Windown.DuaXe.getPromise(this.checkAndShowLineAn(o.listItemWin,o.agWin))]:[3,12]):[3,15];case 2:return r.sent(),[4,s.Windown.DuaXe.getPromise(this.checkAndRemoveSymbol(o.listItemWin,o.view))];case 3:return r.sent(),i=[],o.isNoSap?[4,s.Windown.DuaXe.getMakeDelay(s.Windown.DuaXe.stateSpin.isMaxSpeed?.2:0).prosime]:[3,9];case 4:return r.sent(),[4,s.Windown.DuaXe.getPromise(this.addNewSymbol(t[e+1]))];case 5:return r.sent(),[4,s.Windown.DuaXe.getPromise(this.moveSymbolInView())];case 6:return r.sent(),[4,s.Windown.DuaXe.getPromise(s.Windown.DuaXe.effect.activeNearWinNoSap())];case 7:return r.sent(),s.Windown.DuaXe.infoBar.isShowOneMoreScater=!1,[4,s.Windown.DuaXe.getPromise(this.moveSymbolNew())];case 8:r.sent(),r.label=9;case 9:return i.length>0?[4,s.Windown.DuaXe.getPromiseAll(i)]:[3,11];case 10:r.sent(),r.label=11;case 11:return[3,14];case 12:return 0!=s.Windown.DuaXe.bonus&&(0!=s.Windown.DuaXe.dataFinish.agWin||s.Windown.DuaXe.stateSpin.freeSpinLeft>0)?[4,s.Windown.DuaXe.getPromise(this.checkAndShowMulti())]:[3,14];case 13:r.sent(),r.label=14;case 14:return e++,[3,1];case 15:return[4,s.Windown.DuaXe.getPromise(this.showMoneyTotalRevice())];case 16:return r.sent(),this.isMaxSpeed?[3,18]:[4,s.Windown.DuaXe.getMakeDelay(.4).prosime];case 17:r.sent(),r.label=18;case 18:return[4,s.Windown.DuaXe.getPromise(this.checkAndShowEffect())];case 19:return r.sent(),this.resetForNextNextSpin(),[3,21];case 20:return l=r.sent(),c.Util.ThrowErrProsime(l),[3,21];case 21:return[2]}})})},t.prototype.resetForNextNextSpin=function(){var t=this;if(s.Windown.DuaXe.resetForNewGame(),this.freeSpinLeft>0)s.Windown.DuaXe.scheduleOnce(function(){s.Windown.DuaXe.setLbFreeSpinLeft(t.freeSpinLeft-1),s.Windown.DuaXe.onClickBtnSpin()},.5);else if(this.countAutoSpin>0){var e=s.Windown.DuaXe.stateSpin.isMaxSpeed?2:1;s.Windown.DuaXe.scheduleOnce(function(){t.countAutoSpin--,s.Windown.DuaXe.setCountAuto(t.countAutoSpin),s.Windown.DuaXe.onClickBtnSpin()},.5/e)}else s.Windown.DuaXe.activeAllBtn()},t.prototype.showMoneyTotalRevice=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n;return r(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=s.Windown.DuaXe.dataFinish.agWin,this.lastFreeSpinLeft>0&&(this.moneyTotalFs+=t),s.Windown.DuaXe.activeMask(!1),t<1?(e(null),[2]):[4,s.Windown.DuaXe.getPromise(s.Windown.DuaXe.infoBar.showTotalMoney(t))];case 1:return o.sent(),s.Windown.DuaXe.showMoneyAllWin(t),e(null),[3,3];case 2:return n=o.sent(),c.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})})},t.prototype.moveSymbolNew=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o,i,a,l;return r(this,function(r){switch(r.label){case 0:for(o in r.trys.push([0,7,,8]),t=[],n=[],this.listColum)n.push(o);i=0,r.label=1;case 1:return i<n.length?(a=n[i],s.Windown.DuaXe.nearWinNoSap.active?[4,s.Windown.DuaXe.getPromise(this.listColum[a].moveSymbolNew())]:[3,3]):[3,5];case 2:return r.sent(),[3,4];case 3:t.push(this.listColum[a].moveSymbolNew()),r.label=4;case 4:return i++,[3,1];case 5:return[4,s.Windown.DuaXe.getPromiseAll(t)];case 6:return r.sent(),s.Windown.DuaXe.nearWinNoSap.active=!1,e(null),[3,8];case 7:return l=r.sent(),c.Util.ThrowErrProsime(l),[3,8];case 8:return[2]}})})})},t.prototype.moveSymbolInView=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:for(n in i.trys.push([0,2,,3]),t=[],this.listColum)t.push(this.listColum[n].moveSymbolInView());return[4,s.Windown.DuaXe.getPromiseAll(t)];case 1:return i.sent(),e(null),[3,3];case 2:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,3];case 3:return[2]}})})})},t.prototype.addNewSymbol=function(t){var e=this;return new Promise(function(n){return i(e,void 0,void 0,function(){var e,o,i;return r(this,function(r){switch(r.label){case 0:for(o in r.trys.push([0,2,,3]),e=[],this.listColum)e.push(this.listColum[o].addNewListSymbol(t.listSFSObj[o]));return[4,s.Windown.DuaXe.getPromiseAll(e)];case 1:return r.sent(),n(null),[3,3];case 2:return i=r.sent(),c.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})})},t.prototype.checkAndRemoveSymbol=function(t){var e=this;return new Promise(function(n){return i(e,void 0,void 0,function(){var e,o,i,a,l;return r(this,function(){try{for(this.activeAllSymbol(),e=t.lsIdItem,(o=t.lsstack).length>0&&s.Windown.DuaXe.effectShake(),i=0,a=e.length;i<a;i++)for(this.listColum[0].checkAndRemoveItem(e[i],o[i]),l=1;l<o[i]+2;l++)this.listColum[l].checkAndRemoveItem(e[i],0);n(null)}catch(r){c.Util.ThrowErrProsime(r)}return[2]})})})},t.prototype.checkAndShowEffect=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=s.Windown.DuaXe.dataFinish.Scarter4,n=s.Windown.DuaXe.dataFinish.numFreeSpin,this.freeSpinLeft=n,!t&&this.lastFreeSpinLeft<1?(e(null),[2]):t?[4,s.Windown.DuaXe.getPromise(s.Windown.DuaXe.effect.showTakeFreeSpin(n))]:[3,2];case 1:i.sent(),i.label=2;case 2:return 1==this.lastFreeSpinLeft&&this.freeSpinLeft<1?[4,s.Windown.DuaXe.getPromise(this.effect.showEndFree(this.moneyTotalFs))]:[3,4];case 3:i.sent(),this.moneyTotalFs=0,i.label=4;case 4:return this.lastFreeSpinLeft=this.freeSpinLeft,e(null),[3,6];case 5:return o=i.sent(),c.Util.ThrowErrProsime(o),[3,6];case 6:return[2]}})})})},t.prototype.checkAndShowLineAn=function(t,e){var n=this;return new Promise(function(o){return i(n,void 0,void 0,function(){var n,i,a,l,u,p,h,f,d;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,3,,4]),this.offAllSymbol(),n=t.lsIdItem,i=t.lsstack,a=t.lsAgWin,l=[],u=0,p=n.length;u<p;u++){for(this.listColum[0].checkItemWin(n[u],i[u]),h=1;h<i[u]+2;h++)f=this.listColum[h],l.push(f.checkItemWin(n[u],i[u]));a[u]}return[4,s.Windown.DuaXe.getPromiseAll(l)];case 1:return r.sent(),[4,s.Windown.DuaXe.getPromise(s.Windown.DuaXe.infoBar.showTakeMoney(e))];case 2:return r.sent(),o(null),[3,4];case 3:return d=r.sent(),c.Util.ThrowErrProsime(d),[3,4];case 4:return[2]}})})})},t.prototype.checkAndShowMulti=function(){var t=this;return new Promise(function(e){return i(t,void 0,void 0,function(){var t,n,o,i,a,l,u;return r(this,function(r){switch(r.label){case 0:for(o in r.trys.push([0,3,,4]),t=[],n=0,this.listColum)for(i=this.listColum[o].getListSymbol(),a=0;a<i.length;a++)(l=i[a]).checkIsInView()&&10==l.result&&(n+=l.bonus,t.push(s.Windown.DuaXe.multiController.checkShowMultiSymbol(l)));return n>0&&(s.Windown.DuaXe.multiController.mergeCurrentMultiTotal(),s.Windown.DuaXe.activeMask(!0),s.Windown.DuaXe.audio.playEffect(s.Windown.DuaXe.audio.symbolBonusMove)),[4,s.Windown.DuaXe.getPromiseAll(t)];case 1:return r.sent(),[4,s.Windown.DuaXe.multiController.checkAndShowTotalMulti()];case 2:return r.sent(),e(null),[3,4];case 3:return u=r.sent(),c.Util.ThrowErrProsime(u),[3,4];case 4:return[2]}})})})},t.prototype.onForceEnd=function(){return i(this,void 0,void 0,function(){var t,e,n,o,i,a,l,u;return r(this,function(r){switch(r.label){case 0:for(r.trys.push([0,3,,4]),s.Windown.DuaXe.clearAllMakeDelay(),t=s.Windown.DuaXe.listResultConvert,e=s.Windown.DuaXe.getListActiveScaster(t[0].listSFSObj),n=[],o=0,i=0,a=this.listColum;i<a.length;i++)l=a[i],n.push(l.forceStopSpin(e[o],t[0].listSFSObj[o])),o++;return s.Windown.DuaXe.audio.playEffect(s.Windown.DuaXe.audio.spinStopQuick),[4,s.Windown.DuaXe.getPromiseAll(n)];case 1:return r.sent(),[4,s.Windown.DuaXe.getMakeDelay(.25).prosime];case 2:return r.sent(),this.handleStopAllColum(),[3,4];case 3:return u=r.sent(),c.Util.ThrowErrProsime(u),[3,4];case 4:return[2]}})})},t.prototype.offAllSymbol=function(t){void 0===t&&(t=!0),s.Windown.DuaXe.activeMask(!0)},o([u],t)}());n.SpinNormalDuaXe=p,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],StartFreeSpinDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"162f1NSEk9K9KsAj2LJt0vG","StartFreeSpinDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.StartFreeSpinDuaXe=void 0;var a=t("../../../Scritps/Other/LbMonoSpace"),s=t("../../../Scritps/Windown"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btnBatDau=null,e}return i(e,t),e.prototype.show=function(t){var e=this;return new Promise(function(n){s.Windown.DuaXe.audio.playBkgfs(),s.Windown.DuaXe.audio.playEffect(s.Windown.DuaXe.audio.fsTrans),e.label.string=t.toString();var o=function(){s.Windown.DuaXe.audio.stopEffect(s.Windown.DuaXe.audio.fsTrans),e.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.node.destroy()}))),n(null)};e.btnBatDau.interactable=!1,e.scheduleOnce(function(){e.btnBatDau.interactable=!0,e.btnBatDau.node.once("click",o),e.btnBatDau.node.runAction(cc.sequence(cc.delayTime(5),cc.callFunc(o)))},1)})},r([u(a.default)],e.prototype,"label",void 0),r([u(cc.Button)],e.prototype,"btnBatDau",void 0),r([l],e)}(cc.Component);n.StartFreeSpinDuaXe=p,cc._RF.pop()},{"../../../Scritps/Other/LbMonoSpace":void 0,"../../../Scritps/Windown":void 0}],SymbolDuaXe:[function(t,e,n){"use strict";cc._RF.push(e,"c45c4j6CjBL84vq6MKyl40M","SymbolDuaXe");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(e){r(e)}}function s(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SymbolDuaXe=n.TYPE_ITEM=void 0;var c,l=t("./ItemSlotDuaXe"),u=t("../../../Scritps/DefineTs/StateReelSlot"),p=t("./EffectSymbolDuaXe"),h=t("./ItemAddScatterDuaXe"),f=t("../../../Scritps/Windown"),d=t("../../../Scritps/Util"),y=cc._decorator,m=y.ccclass,S=y.property;(function(t){t[t.NONE=1]="NONE",t[t.BONUS=2]="BONUS"})(c=n.TYPE_ITEM||(n.TYPE_ITEM={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.result=-1,e.sizeBkg=new cc.Size(176,183),e.size=new cc.Size(176,183),e.nodeScater=null,e.itemColum=null,e.typeItem=c.NONE,e.spriteItem=null,e.spriteBkg=null,e.bgScatter=null,e.bgEffectMulti=null,e.effTakeMulti=null,e.skeletonItem=null,e.khungWin=[],e.efWin=null,e.efTakeWild=null,e.canRun=!1,e.objSFS=null,e.sizeItem=1,e.bonus=1,e.isShuff=!1,e.isTransToWild=!1,e.isShowEffectSpawn=!1,e.isHasTakeItem=!1,e.isVectical=!1,e}return i(e,t),e.prototype.effectScaterShowFS=function(){12==this.result&&this.checkIsInView()&&cc.isValid(this.nodeScater)&&(this.activeItem(),this.nodeScater.node.active=!0,f.Windown.DuaXe.stateReel==u.default.RUN||f.Windown.DuaXe.stateReel==u.default.CAN_STOP?this.nodeScater.showFS():f.Windown.DuaXe.stateReel==u.default.STOP&&this.nodeScater.winFS())},e.prototype.checkIsInView=function(){return this.node.getPosition().y<0&&this.node.getPosition().y>-this.size.height*(2/3)*(this.itemColum.sizeSymbol-2)},e.prototype.activeItem=function(t){void 0===t&&(t=.3),this.setParentNode(this.itemColum.parentItemActive)},e.prototype.setParentNode=function(t){this.node.parent=t,this.nodeScater&&this.nodeScater.changParent()},e.prototype.setItemColum=function(t){this.itemColum=t,this.isVectical?(this.node.angle=0,this.size.height=183):(this.size.height=183,this.node.angle=90)},e.prototype.setResult=function(t){if(null!=t&&null!=t){var e=t;null!=e&&(null!=e.b&&null!=e.b||(e.b=1),null!=e.s&&null!=e.s||(e.s=1),this.objSFS=e,this.result=e.i,this.typeItem=e.b>1?c.BONUS:c.NONE,this.sizeItem=e.s,this.bonus=10==this.result?e.b:1,this.setSize(),this.itemColum.stateWhel==u.default.RUN?this.setImgResult(!0):this.setImgResult(!1),this.node.opacity=255,this.isShuff=!1,this.isShowEffectSpawn=!1,this.node.setSiblingIndex(12==this.result?100:50),cc.isValid(this.nodeScater)&&this.nodeScater.node.setSiblingIndex(101))}},e.prototype.setImgResult=function(t){return a(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return this.spriteItem.spriteFrame=this.getSpItem(t),this.spriteBkg.spriteFrame=this.getSpBkg(t),this.activeMask(!1),this.spriteBkg.sizeMode=cc.Sprite.SizeMode.RAW,this.spriteBkg.node.active=!0,10==this.result&&f.Windown.DuaXe.stateReel==u.default.WAITING||f.Windown.DuaXe.stateReel==u.default.SHOW_EFFECT?this.setBgBonus():(this.spriteItem.getComponent(cc.Animation)&&this.spriteItem.getComponent(cc.Animation).stop(),this.spriteItem.node.setScale(cc.v3(1,1)),10!=this.result&&(this.bgEffectMulti.active=!1)),cc.isValid(this.itemColum)&&this.itemColum.stateWhel!=u.default.END&&(this.bgScatter.active=!1),t?(0!=this.node.angle?this.node.setScale(cc.v3(1.4,2/3*2,2/3*2)):this.node.setScale(cc.v3(2/3*2,2/3*2,1.2)),this.spriteItem.node.setScale(cc.v3(1,1)),this.bgEffectMulti.active=!1):(this.node.setScale(cc.v3(2/3,2/3,2/3)),this.spriteItem.node.setScale(cc.v3(1,1))),t?[3,4]:this.result<11||12==this.result&&this.itemColum.stateWhel!=u.default.WAITING?(this.spriteItem.node.active=!0,this.skeletonItem.node.active=!1,[3,3]):[3,1];case 1:return[4,this.getSpin()];case 2:null!=(e=n.sent())&&(this.skeletonItem.skeletonData=e,this.skeletonItem.setAnimation(0,"idle",!0),this.skeletonItem.node.active=!0,this.spriteItem.node.active=!1),n.label=3;case 3:return[3,5];case 4:this.spriteItem.node.active=!0,this.skeletonItem.node.active=!1,n.label=5;case 5:return[2]}})})},e.prototype.setSprite=function(){this.spriteItem.node.active=!0,this.spriteItem.spriteFrame=this.getSpItem(!1),this.spriteBkg.spriteFrame=this.getSpBkg(!1),this.spriteBkg.sizeMode=cc.Sprite.SizeMode.RAW,this.spriteBkg.node.active=!0,this.bgScatter.active=!1,this.skeletonItem.node.active=!1,10==this.result||(this.bgEffectMulti.active=!1,this.spriteItem.node.setScale(cc.v3(1,1))),this.node.setScale(cc.v3(2/3,2/3,2/3)),this.spriteItem.node.setScale(cc.v3(1,1))},e.prototype.setSize=function(){this.node.setContentSize(this.size.width,this.size.height*this.sizeItem)},e.prototype.getSpItem=function(t){return f.Windown.DuaXe.asset.getSfItemSymbol(this.result,this.sizeItem,this.bonus,t)},e.prototype.activeMask=function(t){this.bgEffectMulti.opacity=t?150:255,this.spriteItem.node.opacity=t?150:255},e.prototype.runSpin=function(){var t=this;this.offItemFront();var e=cc.repeatForever(cc.moveBy(f.Windown.DuaXe.stateSpin.isMaxSpeed?.4:.8,cc.v2(0,-2500)));f.Windown.stopAllActionByTarget(this.node);var n=.2;f.Windown.DuaXe.stateSpin.isMaxSpeed||(n=.2-.02*this.itemColum.index),this.node.runAction(cc.sequence(cc.moveBy(n,cc.v2(0,50)).easing(cc.easeSineIn()),cc.callFunc(function(){t.canRun=!0,t.node.runAction(e)})))},e.prototype.offAllScatterAndWild=function(){this.skeletonItem.setAnimation(0,f.Windown.DuaXe.stateSpin.isMaxSpeed?"fastspin_exit":"exit",!1);var t=f.Windown.DuaXe.stateSpin.isMaxSpeed?.25:.5;this.nodeScater&&(this.nodeScater.ske.setAnimation(0,f.Windown.DuaXe.stateSpin.isMaxSpeed?"fastspin_exit":"exit",!1),this.nodeScater.bkg.runAction(cc.fadeOut(t))),12==this.result&&this.bgScatter.getChildByName("BgScatter").runAction(cc.fadeOut(t))},e.prototype.getSpBkg=function(t){return 11==this.result?null:f.Windown.DuaXe.asset.getSfBkg(this.result,this.sizeItem,this.typeItem,t)},e.prototype.offItemFront=function(){this.setParentNode(this.itemColum.parentItem)},e.prototype.removeAddScater=function(t){null!=this.nodeScater&&(this.nodeScater.remove(t),this.nodeScater=null)},e.prototype.initPosStartGame=function(){var t=this.getIndexOf(),e=this.itemColum.getListSymbol()[t-1],n=null==e?void 0:e.node.getPosition().y,o=null,i=this.isVectical?this.node.height:this.node.width;o=e?n-i*(2/3)/2-(this.isVectical?e.node.height:e.node.width)*(2/3)/2:i*(2/3)/2,this.node.setPosition(0,o,0),this.checkItemFront()},e.prototype.getIndexOf=function(){return this.itemColum.getListSymbol().indexOf(this)},e.prototype.offItem=function(){this.node.parent!=this.itemColum.parentItem&&this.checkItemFront()},e.prototype.effectSpawnSymbol=function(t){return void 0===t&&(t=!0),a(this,void 0,void 0,function(){return s(this,function(){try{if(this.isShowEffectSpawn||!this.checkIsInView())return[2];this.isShowEffectSpawn=!0,this.checkItemFront(),12==this.result?(t&&f.Windown.DuaXe.audio.playEffectNoStop(f.Windown.DuaXe.audio.symScatter),this.effectActiveScater(),f.Windown.DuaXe.stateSpin.checkIsNearFS()&&this.effectNearWinScater(!0),this.effectScaterShowFS()):11==this.result?this.showSkeleton(!0):this.result<10?this.showSkeleton(!1):this.setBgBonus()}catch(e){d.Util.ThrowErrProsime(e)}return[2]})})},e.prototype.getSpin=function(t){return a(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return null==t&&(t=this.result),[4,f.Windown.DuaXe.asset.getSpine(t,this.sizeItem)];case 1:return[2,e.sent()]}})})},e.prototype.showSkeleton=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var n,o=this;return s(this,function(i){switch(i.label){case 0:return n=null,[4,this.getSpin()];case 1:return(n=i.sent())&&(this.skeletonItem.node.active=!0,this.skeletonItem.skeletonData=n,this.skeletonItem.setAnimation(0,e?"win":"spawn",!1),this.spriteItem.node.active=!1,t?this.skeletonItem.addAnimation(0,"idle",!0):this.skeletonItem.setCompleteListener(function(){o.skeletonItem.node.active=!1,o.spriteItem.node.active=!0,o.skeletonItem.setCompleteListener(null)})),12==this.result?(this.bgScatter.active=!0,this.bgScatter.getComponentInChildren(cc.Animation).play("BgScatter"),this.bgScatter.getChildByName("BgScatter").opacity=255):this.bgScatter.active=!1,[2]}})})},e.prototype.showEffMulti=function(t){return void 0===t&&(t=!1),a(this,void 0,void 0,function(){var e,n,o;return s(this,function(i){switch(i.label){case 0:return this.activeMask(t),cc.log("showEffMulti1"),o=(n=cc).instantiate,[4,f.Windown.DuaXe.asset.getEffectTakeMulti(this.sizeItem)];case 1:return(e=o.apply(n,[i.sent()])).setParent(this.node),cc.tween(e).delay(2).call(function(){e.destroy()}).start(),[2]}})})},e.prototype.removeItem=function(){var t=this;this.effectRemoveItem();var e=this.getIndexOf();e>-1&&this.itemColum.getListSymbol().splice(e,1),this.node.runAction(cc.sequence(cc.fadeOut(.15),cc.callFunc(function(){f.Windown.DuaXe.asset.putSymbol(t.node)}))),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.symShrink)},e.prototype.effectRemoveItem=function(){return a(this,void 0,void 0,function(){var t,e,n,o,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.efWin?(this.efWin.getComponent(p.EffectSymbolDuaXe).effectRemoveTakeItem(),t=this.efWin.getSiblingIndex(),o=(n=cc).instantiate,[4,f.Windown.DuaXe.asset.getEffRemoveItem(this.sizeItem)]):[3,2];case 1:(e=o.apply(n,[r.sent()])).parent=f.Windown.DuaXe.parentEffect,e.setPosition(f.Windown.convertNodeInOtherNode(this.node,f.Windown.DuaXe.parentEffect)),e.getComponent(p.EffectSymbolDuaXe).effRemoveItem(this.sizeItem),e.setSiblingIndex(t-1),r.label=2;case 2:return this.efWin=null,this.isHasTakeItem=!1,[3,4];case 3:return i=r.sent(),d.Util.ThrowErrProsime(i),console.error(i),[3,4];case 4:return[2]}})})},e.prototype.stopSpin=function(t){var e=this;this.getIndexOf(),f.Windown.stopAllActionByTarget(this.node),this.node.runAction(cc.sequence(t,cc.callFunc(function(){e.itemColum.effStopSpin()})))},e.prototype.effectNearWinScater=function(){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.activeItem(),this.nodeScater.node.active=!0,f.Windown.stopAllActionByTarget(this.nodeScater.node),this.nodeScater.showFS())},e.prototype.checkItemFront=function(){!this.checkIsInView()||11!=this.result&&12!=this.result?this.setParentNode(this.itemColum.parentItem):this.setParentNode(this.itemColum.parentItemFront)},e.prototype.effectActiveScater=function(){12==this.result&&this.checkIsInView()&&(this.nodeScater=cc.instantiate(f.Windown.DuaXe.asset.nodeAddScater).getComponent(h.ItemAddScatterDuaXe),this.nodeScater.init(this),this.nodeScater.node.active=!0,this.skeletonItem.node.active=!1,this.spriteItem.node.active=!0,this.bgScatter.active=!1,this.nodeScater.node.setScale(2/3,2/3))},e.prototype.effectTransformToWild=function(){return a(this,void 0,void 0,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return this.isShuff?(this.spriteBkg.node.active=!1,this.spriteItem.node.active=!1,t=null,[4,this.getSpin(11)]):[3,2];case 1:t=n.sent(),this.skeletonItem.node.active=!0,t&&(cc.isValid(this.efWin)&&(this.efWin.getComponentInChildren(sp.Skeleton).node.active=!1),this.skeletonItem.skeletonData=t,this.skeletonItem.setAnimation(0,"awaken",!1),this.skeletonItem.setCompleteListener(function(){e.skeletonItem.setCompleteListener(null),e.skeletonItem.setAnimation(0,"idle",!0)})),n.label=2;case 2:return[2]}})})},e.prototype.takeItem=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){return a(t,void 0,void 0,function(){var t,n,o,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.isHasTakeItem&&e(null),this.isHasTakeItem=!0,o=(n=cc).instantiate,[4,f.Windown.DuaXe.asset.getEffectTakeSymbol(this.sizeItem)];case 1:return(t=o.apply(n,[r.sent()])).parent=f.Windown.DuaXe.parentEffect,t.setPosition(f.Windown.convertNodeInOtherNode(this.node,f.Windown.DuaXe.parentEffect)),t.getComponent(p.EffectSymbolDuaXe).effTakeItem(this.result,this.sizeItem,this.skeletonItem),this.spriteItem.node.active=!1,this.activeItem(0),this.efWin=t,t.setSiblingIndex(9999),e(null),[3,3];case 2:return i=r.sent(),d.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})})]})})},e.prototype.actionRandomNewResultNextKhung=function(t){var e=this;return new Promise(function(n){return a(e,void 0,void 0,function(){var e,o;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),this.isShowEffectSpawn=!1,this.typeItem++,this.typeItem=this.typeItem%3,e=f.Windown.DuaXe.stateSpin.isMaxSpeed?2:1,11!=t?[3,3]:(this.result=t,this.spriteItem.node.active=!1,this.isShowEffectSpawn=!1,this.effectTransformToWild(),1!=e?[3,2]:[4,f.Windown.DuaXe.getMakeDelay(.4).prosime]);case 1:i.sent(),i.label=2;case 2:n(null),i.label=3;case 3:return[3,5];case 4:return o=i.sent(),d.Util.ThrowErrProsime(o),[3,5];case 5:return[2]}})})})},e.prototype.update=function(){this.canRun&&this.checkEndCot()},e.prototype.checkEndCot=function(){if(0==this.getIndexOf()){var t=this.node.height*(2/3)/2;if(this.node.position.y<=t){var e=this.itemColum.getIdSymbolResult(),n=this.itemColum.getListSymbol(),o=n.pop();n.unshift(o),o.node.setSiblingIndex(0),o.setResult(e),o.moveWhenListChange(l.TYPE_MOVE.NORMAL)}}},e.prototype.moveWhenListChange=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var o=this.getIndexOf(),i=this.itemColum.getListSymbol()[o+1],r=i.getPos(),a=r.y,s=null;t==l.TYPE_MOVE.NORMAL&&(s=a+this.node.height*(2/3)/2+i.node.height*(2/3)/2,r.y=s,this.setPos(r))},e.prototype.setPos=function(t){this.node.setPosition(t)},e.prototype.setBgBonus=function(){var t=this,e="EffectBgMult"+this.sizeItem;this.bgEffectMulti.active=!0,this.bgEffectMulti.opacity=255,this.spriteItem.getComponent(cc.Animation)&&this.spriteItem.getComponent(cc.Animation).play("MultiSymbolScale"),this.checkIsInView()&&this.activeItem(),this.bgEffectMulti.getComponent(cc.Animation).play(e),this.bgEffectMulti.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){t.offItemFront()}),f.Windown.DuaXe.audio.playEffect(f.Windown.DuaXe.audio.symbolBonus),this.showEffMulti()},e.prototype.getPos=function(){return this.node.getPosition()},e.prototype.effectScaterIdle=function(){12==this.result&&this.checkIsInView()&&this.nodeScater&&(this.nodeScater.node.active=!0,this.skeletonItem.node.active=!1,this.nodeScater.idle())},e.prototype.setKhungWin=function(){this.khungWin.forEach(function(t){t.node.active=!1}),this.khungWin[this.sizeItem-1].node.active=!0},r([S(cc.Sprite)],e.prototype,"spriteItem",void 0),r([S(cc.Sprite)],e.prototype,"spriteBkg",void 0),r([S(cc.Node)],e.prototype,"bgScatter",void 0),r([S(cc.Node)],e.prototype,"bgEffectMulti",void 0),r([S(cc.Node)],e.prototype,"effTakeMulti",void 0),r([S(sp.Skeleton)],e.prototype,"skeletonItem",void 0),r([S([cc.Sprite])],e.prototype,"khungWin",void 0),r([m],e)}(cc.Component);n.SymbolDuaXe=v,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./EffectSymbolDuaXe":"EffectSymbolDuaXe","./ItemAddScatterDuaXe":"ItemAddScatterDuaXe","./ItemSlotDuaXe":"ItemSlotDuaXe"}]},{},["AssetDuaXe","AudioDuaXe","BigWinDuaXe","CachChoiDuaXe","DetailHistoryDuaXe","DuaXeEffect","DuaXeSpeedControl","DuaXeView","EffectSymbolDuaXe","EffectTakeTotalMulti","EndFreeSpinDuaXe","InfoBarControllerDuaXe","ItemAddScatterDuaXe","ItemLichSuDuaXe","ItemResultDetailDuaXe","ItemSlotDuaXe","ItemSlotDuaXeNgang","LichSuDuaXe","MultiEffectDuaXe","NearFSDuaXe","SpinNormalDuaXe","StartFreeSpinDuaXe","SymbolDuaXe"]);