window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AssetNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"f182ccA64NIRrmSXVXy20/0","AssetNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./SymbolNgoKhong"),s=t("./WildMutilSymbol"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listSpItemBlur=[],e.listSpItem=[],e.listSFItem=[],e.listSpBkgSymbol=[],e.listSpBkgSymbolBlur=[],e.itemSymbolNgoKhong=null,e.itemEffNearWin=null,e.spineGayNhuY=null,e.spineScater=null,e.effectAddSymbol=null,e.effectWinSymbol=null,e.effectBkgAddSymbol=null,e.parentSpineWild=null,e.itemNearWinNoSap=null,e.itemXu=null,e.itemAddSymbol2=null,e.itemSymbolMutilWild=null,e.poolSymbol=new cc.NodePool(c.default),e.poolEffNearWin=new cc.NodePool,e.poolSpineGayNhuY=new cc.NodePool,e.poolSpineScater=new cc.NodePool,e.poolAddSymbol=new cc.NodePool,e.poolBkgAddSymbol=new cc.NodePool,e.poolWinSymbol=new cc.NodePool,e.poolNearWinNoSap=new cc.NodePool,e.poolXu=new cc.NodePool,e.poolAddSymbol2=new cc.NodePool,e.poolSymbolMutilWild=new cc.NodePool(s.default),e}return i(e,t),e.prototype.getSymbol=function(){var t=null;return(t=this.poolSymbol.size()>0?this.poolSymbol.get():cc.instantiate(this.itemSymbolNgoKhong)).active=!0,t},e.prototype.putSymbol=function(t){this.poolSymbol.put(t)},e.prototype.getNearWin=function(){var t=null;return(t=this.poolEffNearWin.size()>0?this.poolEffNearWin.get():cc.instantiate(this.itemEffNearWin)).active=!0,t},e.prototype.putNearWin=function(t){this.poolEffNearWin.put(t)},e.prototype.getSpineGayNhuY=function(){var t=null;return this.poolSpineGayNhuY.size()>0?t=this.poolSpineGayNhuY.get():(t=cc.instantiate(this.spineGayNhuY)).children[0].runAction(cc.repeatForever(cc.rotateBy(2,360))),t.active=!0,t},e.prototype.putSpineGayNhuY=function(t){this.poolSpineGayNhuY.put(t)},e.prototype.getSpineScater=function(){var t=null;return(t=this.poolSpineScater.size()>0?this.poolSpineScater.get():cc.instantiate(this.spineScater)).active=!0,t},e.prototype.putSpineScater=function(t){this.poolSpineScater.put(t)},e.prototype.getAddSymbol=function(){var t=null;return(t=this.poolAddSymbol.size()>0?this.poolAddSymbol.get():cc.instantiate(this.effectAddSymbol)).active=!0,t},e.prototype.putAddSymbol=function(t){this.poolAddSymbol.put(t)},e.prototype.getBkgAddSymbol=function(){var t=null;return(t=this.poolBkgAddSymbol.size()>0?this.poolBkgAddSymbol.get():cc.instantiate(this.effectBkgAddSymbol)).active=!0,t},e.prototype.putBkgAddSymbol=function(t){this.poolBkgAddSymbol.put(t)},e.prototype.getWinSymbol=function(){var t=null;return(t=this.poolWinSymbol.size()>0?this.poolWinSymbol.get():cc.instantiate(this.effectWinSymbol)).active=!0,t},e.prototype.putWinSymbol=function(t){this.poolWinSymbol.put(t)},e.prototype.getNearWinNoSap=function(){var t=null;return(t=this.poolNearWinNoSap.size()>0?this.poolNearWinNoSap.get():cc.instantiate(this.itemNearWinNoSap)).active=!0,t},e.prototype.putNearWinNoSap=function(t){this.poolNearWinNoSap.put(t)},e.prototype.getXu=function(){var t=null;return(t=this.poolXu.size()>0?this.poolXu.get():cc.instantiate(this.itemXu)).active=!0,t},e.prototype.putXu=function(t){this.poolXu.put(t)},e.prototype.getAddSymbol2=function(){var t=null;return(t=this.poolAddSymbol2.size()>0?this.poolAddSymbol2.get():cc.instantiate(this.itemAddSymbol2)).active=!0,t},e.prototype.putAddSymbol2=function(t){this.poolAddSymbol2.put(t)},e.prototype.getSymbolMutilWild=function(){var t=null;return(t=this.poolSymbolMutilWild.size()>0?this.poolSymbolMutilWild.get():cc.instantiate(this.itemSymbolMutilWild)).active=!0,t},e.prototype.putSymbolMutilWild=function(t){this.poolSymbolMutilWild.put(t)},e.prototype.getSpineWild=function(t){var e=cc.instantiate(this.parentSpineWild.children[t-1]);return e.active=!0,e},e.prototype.putSpineWild=function(t){t.destroy()},e.prototype.onDestroy=function(){this.poolSymbol.clear(),this.poolEffNearWin.clear(),this.poolSpineGayNhuY.clear(),this.poolSpineScater.clear(),this.poolAddSymbol.clear(),this.poolBkgAddSymbol.clear(),this.poolNearWinNoSap.clear(),this.poolXu.clear(),this.poolAddSymbol2.clear(),this.poolSymbolMutilWild.clear(),this.poolWinSymbol.clear()},r([u([cc.SpriteFrame])],e.prototype,"listSpItemBlur",void 0),r([u([sp.SkeletonData])],e.prototype,"listSpItem",void 0),r([u([cc.SpriteFrame])],e.prototype,"listSFItem",void 0),r([u([cc.SpriteFrame])],e.prototype,"listSpBkgSymbol",void 0),r([u([cc.SpriteFrame])],e.prototype,"listSpBkgSymbolBlur",void 0),r([u(cc.Node)],e.prototype,"itemSymbolNgoKhong",void 0),r([u(cc.Node)],e.prototype,"itemEffNearWin",void 0),r([u(cc.Node)],e.prototype,"spineGayNhuY",void 0),r([u(cc.Node)],e.prototype,"spineScater",void 0),r([u(cc.Node)],e.prototype,"effectAddSymbol",void 0),r([u(cc.Node)],e.prototype,"effectWinSymbol",void 0),r([u(cc.Node)],e.prototype,"effectBkgAddSymbol",void 0),r([u(cc.Node)],e.prototype,"parentSpineWild",void 0),r([u(cc.Node)],e.prototype,"itemNearWinNoSap",void 0),r([u(cc.Node)],e.prototype,"itemXu",void 0),r([u(cc.Node)],e.prototype,"itemAddSymbol2",void 0),r([u(cc.Node)],e.prototype,"itemSymbolMutilWild",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./SymbolNgoKhong":"SymbolNgoKhong","./WildMutilSymbol":"WildMutilSymbol"}],AudioNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"a63ebvLqPJHGbqaP4HGQmjm","AudioNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Parent/AudioManager"),s=t("../../../Scritps/Windown"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.click=null,e.bgm_bigwin_end=null,e.bgm_bigwin_main=null,e.bgm_fs=null,e.bgm_mg=null,e.bgm_totalwin_end=null,e.bgm_totalwin_main_1=null,e.bgm_totalwin_main_2=null,e.bgm_totalwin_main_3=null,e.fastspinEnd=null,e.fastspinStart=null,e.featureJingubangExpand=null,e.featureJingubangSpawn=null,e.fsReelAppear=null,e.fsSpin=null,e.fsTrans=null,e.fsWonRemainingIncrease=null,e.fsWonTitle=null,e.heartbeat=null,e.heartbeatNoise=null,e.heartbeatSlowdrop=null,e.menu_icon_press=null,e.multiTitle=null,e.multiUp=null,e.prizeInfobarTotalwin=null,e.prizeInfobarTotalwinMedEnd=null,e.prizeInfobarTotalwinMedMain=null,e.prizeSmallwin=null,e.prizeSmallwinMultiplied=null,e.reelReset=null,e.scatterWinHighlight=null,e.slider_effect=null,e.spinActiveLoop=null,e.spinBtn=null,e.spinStop=null,e.spinStopQuick=null,e.symCollapse=null,e.symScatter=null,e.symShrink=null,e.symWildSeparate=null,e.symWildSpawn=null,e.uiCollect=null,e.uiInfo=null,e.uiStart=null,e.voxCounting1=null,e.voxCounting2=null,e.voxCounting3=null,e.voxSmallwin1=null,e.voxSmallwin2=null,e.voxSmallwin3=null,e.wallet_counting_above=null,e.slot_scrolling=null,e.lastRdNumber=-1,e.lastRdNumber2=-1,e}return i(e,t),e.prototype.playClick=function(){this.playEffect(this.click)},e.prototype.playMusic=function(){this.isActiveMusic&&this.backgroundMusicAudio&&(cc.audioEngine.playMusic(this.backgroundMusicAudio,!0),cc.audioEngine.setMusicVolume(.3))},e.prototype.playIndexTakeLine=function(){for(var t=s.Windown.RandomNumber(0,3);t==this.lastRdNumber;)t=s.Windown.RandomNumber(0,3);this.lastRdNumber=t,0==t?this.playEffect(this.voxSmallwin1):1==t?this.playEffect(this.voxSmallwin2):this.playEffect(this.voxSmallwin3)},e.prototype.playSmalWin=function(){for(var t=s.Windown.RandomNumber(0,3);t==this.lastRdNumber2;)t=s.Windown.RandomNumber(0,3);this.lastRdNumber2=t,0==t?this.playEffect(this.voxCounting1):1==t?this.playEffect(this.voxCounting2):this.playEffect(this.voxCounting3)},e.prototype.playBkgfs=function(){var t=this;this.stopMusic(),this.playEffect(this.fsSpin),this.playEffect(this.bgm_fs,.6,!0),this.scheduleOnce(function(){t.playEffect(t.reelReset)},3)},e.prototype.stopBkgFs=function(){this.stopEffect(this.bgm_fs,!0),this.playMusic()},r([u(cc.AudioClip)],e.prototype,"click",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_bigwin_end",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_bigwin_main",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_fs",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_mg",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_totalwin_end",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_totalwin_main_1",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_totalwin_main_2",void 0),r([u(cc.AudioClip)],e.prototype,"bgm_totalwin_main_3",void 0),r([u(cc.AudioClip)],e.prototype,"fastspinEnd",void 0),r([u(cc.AudioClip)],e.prototype,"fastspinStart",void 0),r([u(cc.AudioClip)],e.prototype,"featureJingubangExpand",void 0),r([u(cc.AudioClip)],e.prototype,"featureJingubangSpawn",void 0),r([u(cc.AudioClip)],e.prototype,"fsReelAppear",void 0),r([u(cc.AudioClip)],e.prototype,"fsSpin",void 0),r([u(cc.AudioClip)],e.prototype,"fsTrans",void 0),r([u(cc.AudioClip)],e.prototype,"fsWonRemainingIncrease",void 0),r([u(cc.AudioClip)],e.prototype,"fsWonTitle",void 0),r([u(cc.AudioClip)],e.prototype,"heartbeat",void 0),r([u(cc.AudioClip)],e.prototype,"heartbeatNoise",void 0),r([u(cc.AudioClip)],e.prototype,"heartbeatSlowdrop",void 0),r([u(cc.AudioClip)],e.prototype,"menu_icon_press",void 0),r([u(cc.AudioClip)],e.prototype,"multiTitle",void 0),r([u(cc.AudioClip)],e.prototype,"multiUp",void 0),r([u(cc.AudioClip)],e.prototype,"prizeInfobarTotalwin",void 0),r([u(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedEnd",void 0),r([u(cc.AudioClip)],e.prototype,"prizeInfobarTotalwinMedMain",void 0),r([u(cc.AudioClip)],e.prototype,"prizeSmallwin",void 0),r([u(cc.AudioClip)],e.prototype,"prizeSmallwinMultiplied",void 0),r([u(cc.AudioClip)],e.prototype,"reelReset",void 0),r([u(cc.AudioClip)],e.prototype,"scatterWinHighlight",void 0),r([u(cc.AudioClip)],e.prototype,"slider_effect",void 0),r([u(cc.AudioClip)],e.prototype,"spinActiveLoop",void 0),r([u(cc.AudioClip)],e.prototype,"spinBtn",void 0),r([u(cc.AudioClip)],e.prototype,"spinStop",void 0),r([u(cc.AudioClip)],e.prototype,"spinStopQuick",void 0),r([u(cc.AudioClip)],e.prototype,"symCollapse",void 0),r([u(cc.AudioClip)],e.prototype,"symScatter",void 0),r([u(cc.AudioClip)],e.prototype,"symShrink",void 0),r([u(cc.AudioClip)],e.prototype,"symWildSeparate",void 0),r([u(cc.AudioClip)],e.prototype,"symWildSpawn",void 0),r([u(cc.AudioClip)],e.prototype,"uiCollect",void 0),r([u(cc.AudioClip)],e.prototype,"uiInfo",void 0),r([u(cc.AudioClip)],e.prototype,"uiStart",void 0),r([u(cc.AudioClip)],e.prototype,"voxCounting1",void 0),r([u(cc.AudioClip)],e.prototype,"voxCounting2",void 0),r([u(cc.AudioClip)],e.prototype,"voxCounting3",void 0),r([u(cc.AudioClip)],e.prototype,"voxSmallwin1",void 0),r([u(cc.AudioClip)],e.prototype,"voxSmallwin2",void 0),r([u(cc.AudioClip)],e.prototype,"voxSmallwin3",void 0),r([u(cc.AudioClip)],e.prototype,"wallet_counting_above",void 0),r([u(cc.AudioClip)],e.prototype,"slot_scrolling",void 0),r([l],e)}(c.default);o.default=p,cc._RF.pop()},{"../../../Scritps/Parent/AudioManager":void 0,"../../../Scritps/Windown":void 0}],DetailHistoryNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"9ce4fJPlAJBQqYO8KTMyLpG","DetailHistoryNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=t("./ItemResultDetail"),a=cc._decorator,l=a.ccclass,u=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.itemTemplate=null,e.lbTitle=null,e.lbTime=null,e.lbBet=null,e.lbWin=null,e.lbMNUser=null,e.lbCuocCoSo=null,e.isFreeSpin=!1,e}return i(e,t),e.prototype.show=function(t){this.node.active=!0,this.node.x=721.812,this.node.stopAllActions(),this.node.opacity=0,this.node.runAction(cc.spawn(cc.moveTo(.3,0,0),cc.fadeIn(.3).easing(cc.easeElasticIn(3))));var e=t.get("date"),o=t.get("infolog"),n=JSON.parse(o);this.isFreeSpin=n.numFreeSpin>0,0==n.agBet?this.lbTitle.string="Quay mi\u1ec5n ph\xed":this.lbTitle.string="Quay th\u01b0\u1eddng",this.lbTime.string=c.Windown.formatDate(new Date(e),"dd/MM HH:mm:ss"),this.lbBet.string=c.Windown.formatNumber(20*n.agBet),this.lbWin.string=c.Windown.formatNumber(n.agWin),this.lbMNUser.string=c.Windown.formatNumber(n.agUser),this.lbCuocCoSo.string=c.Windown.formatNumber(n.agBet);var i=JSON.parse(n.bonusFreeSpin)[0]||1,r=null;try{r=c.Windown.NgoKhong.convertResult(JSON.parse(n.views),n.listItemWin)}catch(d){this.onClickClose()}for(cc.log(JSON.stringify(r));this.parentItem.childrenCount>0;)(u=this.parentItem.children[0]).removeFromParent(),u.destroy();for(var a=0,l=r.length;a<l;a++){var u;null==(u=this.parentItem.children[a])&&((u=cc.instantiate(this.itemTemplate)).parent=this.parentItem,u.active=!0);var p=u.getComponent(s.default),h=r[a];p.init(h.listIdSymbol,h.listItemWin,i,n.agBet),0==n.agBet&&h.listItemWin&&i++}},e.prototype.onClickClose=function(){var t=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,721.812,0),cc.fadeOut(.3).easing(cc.easeElasticOut(3))),cc.callFunc(function(){t.node.active=!1})))},r([u(cc.Node)],e.prototype,"parentItem",void 0),r([u(cc.Node)],e.prototype,"itemTemplate",void 0),r([u(cc.Label)],e.prototype,"lbTitle",void 0),r([u(cc.Label)],e.prototype,"lbTime",void 0),r([u(cc.Label)],e.prototype,"lbBet",void 0),r([u(cc.Label)],e.prototype,"lbWin",void 0),r([u(cc.Label)],e.prototype,"lbMNUser",void 0),r([u(cc.Label)],e.prototype,"lbCuocCoSo",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./ItemResultDetail":"ItemResultDetail"}],EffectNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"3c45eid27ZED5ctAdOe0E+Z","EffectNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/DefineTs/REQUEST_CODE"),l=t("../../../Scritps/Game/GAME_TYPE"),u=t("../../../Scritps/Network/ConectManager"),p=t("../../../Scritps/Obs/LbMoneyChange"),h=t("../../../Scritps/Util"),d=t("../../../Scritps/Windown"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeMask=null,e.lb_Money=null,e.nodeBigWin=null,e.lb_MutilFs=null,e.lb_MutilFsFake=null,e.listNodeBoxMoney=[],e.btnFast=null,e.listPromiseIgro=[],e.isClickBtnFast=!1,e.funNext=null,e.funDelayOff=null,e.mapColor=new Map,e}return i(e,t),e.prototype.onLoad=function(){this.funNext=null},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.unschedule(this.funDelayOff)},e.prototype.initPosMask=function(t){cc.find("mask",this.node).y=t},e.prototype.onClickBtnShowFast=function(){for(this.btnFast.interactable=!1,this.isClickBtnFast=!0;this.listPromiseIgro.length>0;)this.listPromiseIgro.shift().cancle(!0)},e.prototype.showBigWin=function(t,e){var o=this;return new Promise(function(n){return c(o,void 0,void 0,function(){var o,i,r,c,p,f=this;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,7,,8]),this.scheduleOnce(function(){f.btnFast.interactable=!0},1),this.lb_Money.node.active=!0,this.nodeBigWin.active=!0,this.nodeBigWin.opacity=255,this.lb_Money.resetLb(),4,o=e<25?4:e<35?8:12,this.lb_Money.time=o,this.lb_Money.setMoney(t),this.nodeBigWin.getComponent(cc.Animation).play("ShowBigWin"),d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_bigwin_main,1),i=d.Windown.NgoKhong.getMakeDelay(4),this.listPromiseIgro.push(i),[4,i.prosime];case 1:return s.sent(),e>=25?(d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_bigwin_end,.5),this.nodeBigWin.getComponent(cc.Animation).play("ShowMega"),this.isClickBtnFast?[3,3]:(r=d.Windown.NgoKhong.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,3];case 2:s.sent(),s.label=3;case 3:return e>=35?(d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_bigwin_end,.5),this.nodeBigWin.getComponent(cc.Animation).play("ShowSuper"),this.isClickBtnFast?[3,5]:(r=d.Windown.NgoKhong.getMakeDelay(4),this.listPromiseIgro.push(r),[4,r.prosime])):[3,5];case 4:s.sent(),s.label=5;case 5:return d.Windown.NgoKhong.audio.stopEffect(d.Windown.NgoKhong.audio.bgm_bigwin_main),d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_bigwin_end),d.Windown.NgoKhong.dataFinish.get("agWin")>1e4&&((c=u.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.NgoKhong),c.putInt("mt",d.Windown.NgoKhong.dataFinish.get("agWin")),c.putUtfString("nn",d.Windown.User.nickName),c.putUtfString("dt","bw"),u.ConectManager.getIns().sendRequest(a.REQUEST_CODE.AddBigWin,c)),this.lb_Money.setMoneyNoTime(t),[4,d.Windown.NgoKhong.getMakeDelay(3).prosime];case 6:return s.sent(),this.nodeBigWin.stopAllActions(),this.nodeBigWin.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){f.nodeBigWin.active=!1,f.funNext=n,f.onClose()}))),[3,8];case 7:return p=s.sent(),h.Util.ThrowErrProsime(p),[3,8];case 8:return[2]}})})})},e.prototype.showTakeFreeSpin=function(t){var e=this;return new Promise(function(o){return c(e,void 0,void 0,function(){var e,n,i,r,a,u,p,f,g=this;return s(this,function(y){switch(y.label){case 0:return y.trys.push([0,5,,6]),d.Windown.NgoKhong.stateSpin.freeSpinCache=t,d.Windown.NgoKhong.listColum.forEach(function(t){t.getListSymbol()[t.result.indexOf(12)+1].effectScaterShowFS()}),d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.scatterWinHighlight),[4,d.Windown.NgoKhong.getMakeDelay(1.5).prosime];case 1:return y.sent(),[4,d.Windown.loadRes(l.default.NgoKhong.toString(),"Frefabs/ShowFreeSpin",cc.Prefab)];case 2:return e=y.sent(),(n=cc.find("Game/Mid",d.Windown.NgoKhong.node)).runAction(cc.fadeOut(.5)),(i=cc.instantiate(e)).parent=this.node,i.zIndex=1,r=i.getComponent(cc.Animation),cc.find("title1/numFree",i).getComponent(cc.Label).string=d.Windown.NgoKhong.stateSpin.freeSpinLeft.toString(),d.Windown.NgoKhong.audio.playBkgfs(),r.play("ShowFS"),r.once(cc.Animation.EventType.FINISHED,function(){return c(g,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),n.runAction(cc.fadeIn(.5)),[4,d.Windown.NgoKhong.getMakeDelay(.5).prosime];case 1:return e.sent(),i.destroy(),o(null),[3,3];case 2:return t=e.sent(),h.Util.ThrowErrProsime(t),[3,3];case 3:return[2]}})})}),[4,d.Windown.NgoKhong.getMakeDelay(1).prosime];case 3:return y.sent(),[4,d.Windown.loadRes(l.default.NgoKhong.toString(),"Frefabs/BkgFreeSpin",cc.Prefab)];case 4:return a=y.sent(),(u=cc.instantiate(a)).name="bkgFreeSpin",u.parent=cc.find("Game",d.Windown.NgoKhong.node),p=cc.find("Game/BkgGround",d.Windown.NgoKhong.node),u.setSiblingIndex(1),p.active=!1,this.lb_MutilFs.node.active=!0,this.lb_MutilFsFake.node.active=!0,this.lb_MutilFs.string="x1",this.lb_MutilFsFake.string="x1",d.Windown.NgoKhong.setLbFreeSpinLeft(t),d.Windown.NgoKhong.lb_FSLeft.node.parent.active=!0,this.listNodeBoxMoney.forEach(function(t){t.y=-613}),d.Windown.NgoKhong.stateSpin.removeAllSymbolAdded(),[3,6];case 5:return f=y.sent(),h.Util.ThrowErrProsime(f),[3,6];case 6:return[2]}})})})},e.prototype.showEndFree=function(t){var e=this;return new Promise(function(o){return c(e,void 0,void 0,function(){var e,n,i,r,c,f,g,y,m;return s(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,d.Windown.loadRes(l.default.NgoKhong.toString(),"Frefabs/EndFreeSpin",cc.Prefab)];case 1:for(e=s.sent(),this.listNodeBoxMoney.forEach(function(t){t.y=-386}),d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_totalwin_main_1),this.scheduleOnce(function(){d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.bgm_totalwin_end)},2.7),this.lb_MutilFs.node.active=!1,this.lb_MutilFsFake.node.active=!1,cc.find("Game/BkgGround",d.Windown.NgoKhong.node).active=!0,d.Windown.NgoKhong.lb_FSLeft.node.parent.active=!1,cc.find("Game/bkgFreeSpin",d.Windown.NgoKhong.node).destroy(),(n=cc.instantiate(e)).parent=this.node,n.zIndex=999,i=cc.find("ParentXu",n),(r=n.getComponentInChildren(p.default)).resetLb(),r.time=4.3,r.setMoney(t),c=0;c<100;c++)(f=d.Windown.NgoKhong.asset.getXu()).parent=i,f.zIndex=10,this.startXu(f,c%3);return cc.find("ParentLabel/numFS",n).getComponent(cc.Label).string=d.Windown.NgoKhong.stateSpin.freeSpinCache+"",(g=n.getComponent(cc.Animation)).play("EndFree"),g.once(cc.Animation.EventType.FINISHED,function(){for(;i.childrenCount>0;)d.Windown.NgoKhong.asset.putXu(i.children[0]);n.destroy(),o(null),d.Windown.NgoKhong.audio.stopBkgFs()}),t>1e4&&((y=u.ConectManager.getIns().getSFSObj()).putInt("gt",l.default.NgoKhong),y.putInt("mt",t),y.putUtfString("nn",d.Windown.User.nickName),y.putUtfString("dt","fs"),u.ConectManager.getIns().sendRequest(a.REQUEST_CODE.AddBigWin,y)),cc.log("n\xf3 xong r nay"),[3,3];case 2:return m=s.sent(),h.Util.ThrowErrProsime(m),[3,3];case 3:return[2]}})})})},e.prototype.startXu=function(t,e){var o=this;t.opacity=0,t.stopAllActions();var n=cc.v2(0,0),i=(d.Windown.RandomNumber(600,1e3),d.Windown.RandomNumber(800,1300),this.pointsOnCircle({radius:1e3,angle:d.Windown.RandomNumber(0,360),cx:0,cy:0})),r=i[0],c=i[1],s=cc.v2(r,c),a=d.Windown.RandomNumber(1.5,2.5);e+=d.Windown.RandomNumber(0,10)/10,t.angle=d.Windown.RandomNumber(0,360),t.setPosition(n);var l=cc.moveTo(a,s);t.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){t.opacity=255,t.getComponent(cc.Animation).play("Xu")}),l,cc.callFunc(function(){o.startXu(t,0)})))},e.prototype.pointsOnCircle=function(t){var e=t.radius,o=t.angle,n=t.cx,i=t.cy;return o*=Math.PI/180,[n+e*Math.sin(o),i+e*Math.cos(o)]},e.prototype.effectMutilUp=function(t){d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.multiUp),this.lb_MutilFs.string="x"+t,this.lb_MutilFsFake.string="x"+t,this.lb_MutilFs.node.stopAllActions(),this.lb_MutilFs.node.runAction(cc.sequence(cc.scaleTo(.2,1.5).easing(cc.easeSineOut()),cc.scaleTo(.2,1).easing(cc.easeSineIn()))),this.lb_MutilFsFake.node.stopAllActions(),this.lb_MutilFsFake.node.scale=1.5,this.lb_MutilFsFake.node.opacity=0,this.lb_MutilFsFake.node.y=548.186,this.lb_MutilFsFake.node.runAction(cc.sequence(cc.delayTime(.15),cc.fadeTo(0,255),cc.spawn(cc.sequence(cc.delayTime(.1),cc.fadeOut(.3)),cc.scaleTo(.15,2))))},e.prototype.effectTakeMutil=function(){var t=this;return new Promise(function(e){return c(t,void 0,void 0,function(){return s(this,function(){try{d.Windown.NgoKhong.audio.playEffect(d.Windown.NgoKhong.audio.multiTitle),this.lb_MutilFs.node.stopAllActions(),this.lb_MutilFs.node.runAction(cc.sequence(cc.scaleTo(.2,1.5).easing(cc.easeSineOut()),cc.scaleTo(.2,1).easing(cc.easeSineIn()))),this.lb_MutilFsFake.node.stopAllActions(),this.lb_MutilFsFake.node.scale=1.5,this.lb_MutilFsFake.node.opacity=0,this.lb_MutilFsFake.node.y=548.186,this.lb_MutilFsFake.node.runAction(cc.sequence(cc.delayTime(.15),cc.fadeTo(0,255),cc.spawn(cc.moveTo(1,0,150).easing(cc.easeQuarticActionOut()),cc.scaleTo(.5,5).easing(cc.easeQuarticActionOut())),cc.sequence(cc.spawn(cc.moveTo(.1,0,-300).easing(cc.easeCubicActionIn()),cc.scaleTo(.1,3).easing(cc.easeCubicActionIn())),cc.callFunc(e),cc.spawn(cc.fadeOut(.2),cc.scaleTo(.1,5).easing(cc.easeSineOut())))))}catch(t){h.Util.ThrowErrProsime(t)}return[2]})})})},e.prototype.resetView=function(){this.lb_Money.node.getComponent(p.default).resetLb(),this.lb_Money.node.active=!1,this.node.opacity=255,this.nodeBigWin.active=!1},e.prototype.onClose=function(){var t=this;this.btnFast.interactable=!1,this.unschedule(this.funDelayOff),this.unschedule(this.onClose),this.funNext&&this.funNext(),this.funNext=null,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t.resetView()}))),this.isClickBtnFast=!1},r([y(cc.Node)],e.prototype,"nodeMask",void 0),r([y(p.default)],e.prototype,"lb_Money",void 0),r([y(cc.Node)],e.prototype,"nodeBigWin",void 0),r([y(cc.Label)],e.prototype,"lb_MutilFs",void 0),r([y(cc.Label)],e.prototype,"lb_MutilFsFake",void 0),r([y([cc.Node])],e.prototype,"listNodeBoxMoney",void 0),r([y(cc.Button)],e.prototype,"btnFast",void 0),r([g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],InfoBarControllerNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"1354bN9ZatPIr4MgzUJLBlm","InfoBarControllerNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/Obs/LbMoneyChange"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbMoney=null,e.spTotalWin=null,e.spWin=null,e.spInfoBar=null,e.listInfoBar=[],e.parentOneMore=null,e.parentContent=null,e.parentMoney=null,e.anhSang=null,e.mask=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.parentContent.x=360,this.parentContent.runAction(cc.repeatForever(cc.sequence(cc.moveTo(40,-4778,-5),cc.callFunc(function(){t.parentContent.x=360})))),this.showRdContent()},e.prototype.showRdContent=function(){this.parentContent.active=!0,this.parentOneMore.active=!1,this.parentMoney.active=!1,this.anhSang.opacity=0},e.prototype.showOneMoreScater=function(){this.parentContent.active=!1,this.parentOneMore.active=!0,this.parentMoney.active=!1,this.getComponent(cc.Animation).play("InfoBarOneMoreScater")},e.prototype.showTakeMoneyTurn=function(t,e){return c(this,void 0,void 0,function(){var o=this;return s(this,function(){return[2,new Promise(function(n){return c(o,void 0,void 0,function(){var o;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spWin,this.getComponent(cc.Animation).play("InfoBarTakeMoney"),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,this.lbMoney.setMoneyNoTime(t/e),u.Windown.NgoKhong.stateSpin.freeSpinLeft>0&&e>1?(cc.find("ParrentMOney/info_win",this.node).active=!1,[4,u.Windown.NgoKhong.effect.effectTakeMutil()]):[3,2];case 1:i.sent(),u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.prizeSmallwinMultiplied),this.getComponent(cc.Animation).play("InfoBarTakeMoney"),cc.find("ParrentMOney/info_win",this.node).active=!0,i.label=2;case 2:return this.lbMoney.setMoneyNoTime(t),n(null),[3,4];case 3:return o=i.sent(),l.Util.ThrowErrProsime(o),[3,4];case 4:return[2]}})})})]})})},e.prototype.reset=function(){this.mask.active=!0,this.spInfoBar.spriteFrame=this.listInfoBar[0]},e.prototype.showTotalMoney=function(t){var e=this;return new Promise(function(o){return c(e,void 0,void 0,function(){var e,n,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,9,,10]),0==t?(o(null),[2]):(this.lbMoney.resetLb(),this.mask.active=!1,e=u.Windown.NgoKhong.curRoomBet*u.Windown.NgoKhong.totalLineBet,(n=t/e)<5?(u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.prizeInfobarTotalwinMedEnd,.7),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.getComponent(cc.Animation).play("InfoBarTakeMoney"),this.spInfoBar.spriteFrame=this.listInfoBar[0],this.lbMoney.setMoneyNoTime(t),[4,u.Windown.NgoKhong.getMakeDelay(1).prosime]):[3,2]);case 1:return r.sent(),[3,8];case 2:return n<15?(u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.prizeInfobarTotalwinMedMain),u.Windown.NgoKhong.audio.playSmalWin(),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.getComponent(cc.Animation).play("InfoBarTakeMoney"),this.spInfoBar.spriteFrame=this.listInfoBar[1],this.lbMoney.time=2,this.lbMoney.setMoney(t),[4,u.Windown.NgoKhong.getMakeDelay(2).prosime]):[3,5];case 3:return r.sent(),u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.prizeInfobarTotalwinMedEnd),this.parentMoney.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.2,1))),[4,u.Windown.NgoKhong.getMakeDelay(.3).prosime];case 4:return r.sent(),[3,8];case 5:return[4,u.Windown.NgoKhong.effect.showBigWin(t,n)];case 6:return r.sent(),this.parentContent.active=!1,this.parentOneMore.active=!1,this.parentMoney.active=!0,cc.find("ParrentMOney/info_win",this.node).getComponent(cc.Sprite).spriteFrame=this.spTotalWin,this.getComponent(cc.Animation).play("InfoBarTakeMoney"),this.spInfoBar.spriteFrame=this.listInfoBar[2],this.lbMoney.setMoneyNoTime(t),[4,u.Windown.NgoKhong.getMakeDelay(1).prosime];case 7:r.sent(),r.label=8;case 8:return o(null),[3,10];case 9:return i=r.sent(),l.Util.ThrowErrProsime(i),[3,10];case 10:return[2]}})})})},r([d(a.default)],e.prototype,"lbMoney",void 0),r([d(cc.SpriteFrame)],e.prototype,"spTotalWin",void 0),r([d(cc.SpriteFrame)],e.prototype,"spWin",void 0),r([d(cc.Sprite)],e.prototype,"spInfoBar",void 0),r([d([cc.SpriteFrame])],e.prototype,"listInfoBar",void 0),r([d(cc.Node)],e.prototype,"parentOneMore",void 0),r([d(cc.Node)],e.prototype,"parentContent",void 0),r([d(cc.Node)],e.prototype,"parentMoney",void 0),r([d(cc.Node)],e.prototype,"anhSang",void 0),r([d(cc.Node)],e.prototype,"mask",void 0),r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],ItemKhung:[function(t,e,o){"use strict";cc._RF.push(e,"283a5LlZsFPkZdm7WpnNtGB","ItemKhung");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listChanSize=[],e.currentIndex=0,e.listChanSizeMax=[],e.nodeMoveBot=null,e.nodeMoveTop=null,e.itemPre=null,e}return i(e,t),e.prototype.intiItemKhungPre=function(t){this.itemPre=t},e.prototype.updateIndex=function(){this.currentIndex++},e.prototype.reset=function(){0!=this.currentIndex&&(this.currentIndex=0,this.emitNewSize())},e.prototype.emitNewSize=function(t){var e=this;void 0===t&&(t=!0);var o=.2;if(t||(o=0),this.itemPre){var n=Math.abs(this.currentIndex-this.itemPre.currentIndex);0==n?this.listChanSize.forEach(function(t){cc.Tween.stopAllByTarget(t),cc.tween(t).to(o,{height:0}).start()}):this.listChanSize.forEach(function(t){cc.Tween.stopAllByTarget(t),cc.tween(t).to(o,{height:3+65*n}).start()});var i=265+65*(this.currentIndex>this.itemPre.currentIndex?this.itemPre.currentIndex:this.currentIndex);this.listChanSize[0].runAction(cc.moveTo(o,cc.v2(this.listChanSize[0].x,i))),this.listChanSize[1].runAction(cc.moveTo(o,cc.v2(this.listChanSize[0].x,5-i)))}var r=528+130*this.currentIndex;this.listChanSizeMax.forEach(function(t){cc.Tween.stopAllByTarget(t),cc.tween(t).to(o,{height:r}).start()});var c=520+130*this.currentIndex;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(o,{height:c}).call(function(){e.getComponentsInChildren(cc.Widget).forEach(function(t){t.alignMode=cc.Widget.AlignMode.ON_WINDOW_RESIZE})}).start();var s=3+65*this.currentIndex;this.nodeMoveTop.stopAllActions(),this.nodeMoveTop.runAction(cc.moveTo(o,cc.v2(this.nodeMoveTop.x,263+s))),this.nodeMoveBot.stopAllActions(),this.nodeMoveBot.runAction(cc.moveTo(o,cc.v2(this.nodeMoveBot.x,-(260+s-3))))},r([a([cc.Node])],e.prototype,"listChanSize",void 0),r([a([cc.Node])],e.prototype,"listChanSizeMax",void 0),r([a(cc.Node)],e.prototype,"nodeMoveBot",void 0),r([a(cc.Node)],e.prototype,"nodeMoveTop",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ItemLichSuNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"13597drg8JLDa/u5DMK/xFm","ItemLichSuNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbTime=null,e.lbBet=null,e.lbWin=null,e.data=null,e}return i(e,t),e.prototype.initItem=function(t){try{this.data=t;var e=this.data.get("date");this.lbTime.string=c.Windown.formatDate(new Date(e),"dd/MM\nHH:mm:ss");var o=this.data.get("infolog"),n=JSON.parse(o);this.lbBet.string=c.Windown.formatNumber(n.agBet*c.Windown.NgoKhong.totalLineBet),this.lbWin.string=c.Windown.formatNumber(n.agWin)}catch(i){console.error(i)}},e.prototype.onClick=function(){c.Windown.NgoKhong.audio.playClick(),c.Windown.NgoKhong.popupLichSu.showDetail(this.data)},r([l(cc.Label)],e.prototype,"lbTime",void 0),r([l(cc.Label)],e.prototype,"lbBet",void 0),r([l(cc.Label)],e.prototype,"lbWin",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemResultDetail:[function(t,e,o){"use strict";cc._RF.push(e,"29f891JaoVLXbBX51spQO/z","ItemResultDetail");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbX=null,e.lbTitleToHopWin=null,e.parentItemResult=null,e.parentItemWin=null,e.colorOf=null,e.playTable=[[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,5,5,8,10,15,20,20,30,50,0,0],[8,8,10,10,15,20,30,40,40,50,80,0,0],[10,10,15,15,20,30,40,50,50,80,100,0,0]],e}return i(e,t),e.prototype.init=function(t,e,o,n){if(e){this.lbTitleToHopWin.string="T\u1ed5 h\u1ee3p win",this.parentItemWin.active=!0;for(var i=this.parentItemWin.children[0],r=0,s=e.lsIdItem.length;r<s;r++){var a=e.lsIdItem[r];e.lsAgWin[r],null==(_=this.parentItemWin.children[r])&&((_=cc.instantiate(i)).parent=this.parentItemWin),_.active=!0,_.children[0].children[0].getComponent(cc.Sprite).spriteFrame=c.Windown.NgoKhong.asset.listSpBkgSymbol[a],_.children[0].children[1].getComponent(cc.Sprite).spriteFrame=c.Windown.NgoKhong.asset.listSFItem[a]}for(r=e.lsIdItem.length;r<this.parentItemWin.childrenCount;r++)this.parentItemWin.children[r].active=!1;this.lbX.node.active=!0}else this.lbTitleToHopWin.string="-------------",this.parentItemWin.active=!1,this.lbX.node.active=!1;var l=this.parentItemResult.children;for(var u in l){var p=t[Number(u)],h=l[u],d=h.children[0];for(r=0,s=p.length;r<s;r++){null==(_=h.children[r])&&((_=cc.instantiate(d)).parent=h),_.active=!0;var f=_.children[0].getComponent(cc.Sprite),g=_.children[1].getComponent(cc.Sprite);g.spriteFrame=c.Windown.NgoKhong.asset.listSFItem[p[r]],f.spriteFrame=c.Windown.NgoKhong.asset.listSpBkgSymbol[p[r]],_.setPosition(0,s*_.height/2-_.height*r-_.height/2),11==p[r]?(f.node.color=cc.Color.WHITE,g.node.color=cc.Color.WHITE):(f.node.color=this.colorOf,g.node.color=this.colorOf)}}if(e){var y=e.lsIdItem,m=e.lsstack,S=e.lsAgWin;for(r=0,s=y.length;r<s;r++){for(var v="",w=0;w<m[r]+1;w++){for(var b=l[w],N=0,W=0,A=b.childrenCount;W<A;W++)if(t[w][W]==y[r]||10==t[w][W]){var C=b.children[W];C.children[0].color=cc.Color.WHITE,C.children[1].color=cc.Color.WHITE,N++}v+=N+"x"}var _;v+=this.playTable[m[r]][y[r]]+"x"+c.Windown.formatNumber(n),(_=this.parentItemWin.children[r]).children[1].getComponent(cc.Label).string=v+"=\n"+c.Windown.formatNumber(S[r])}}this.lbX.string="x"+o;var I=0;for(var u in t){var M=t[u];M.length-4>I&&(I=M.length-4)}var K=.8;for(r=0;r<I;r++)K*=.92;this.parentItemResult.scale=K},r([l(cc.Label)],e.prototype,"lbX",void 0),r([l(cc.Label)],e.prototype,"lbTitleToHopWin",void 0),r([l(cc.Node)],e.prototype,"parentItemResult",void 0),r([l(cc.Node)],e.prototype,"parentItemWin",void 0),r([l(cc.Color)],e.prototype,"colorOf",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],ItemSlotNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"7c98cmHIuxGZ7NzNZZI8exw","ItemSlotNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/DefineTs/StateReelSlot"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=t("./SymbolNgoKhong"),h=t("./SymbolNgoKhong"),d=t("./WildMutilSymbol"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentItem=null,e.stateSpin=0,e.funReject=null,e.resolve=null,e.stateWhel=a.default.WAITING,e.result=[],e.resultTemp=[],e.listIconEff=[],e.nodeEffNearWin=null,e.nodeWildDT=null,e.nodeWildShowDT=null,e.isScater=!1,e.totalItem=4,e.index=-1,e.indexNodeFirt=0,e.isMoveSlowDown=!1,e.deltaSlowDown=0,e.listNumMutilWild=[],e.indexMaxWild=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.getListSymbol=function(){var t=[];return this.parentItem.children.forEach(function(e){var o=e.getComponent(p.default);o&&t.push(o)}),t},e.prototype.getListWildMutil=function(){var t=[];return this.parentItem.children.forEach(function(e){var o=e.getComponent(d.default);o&&t.push(o)}),t},e.prototype.setResultFirtGame=function(t){var e=this;this.setResult(t),this.getListSymbol().forEach(function(t){t.setItemColum(e)});for(var o=0,n=t.length;o<n;o++){var i=u.Windown.NgoKhong.asset.getSymbol();i.parent=this.parentItem,i.setSiblingIndex(o+1),i.getComponent(h.default).setItemColum(this),i.getComponent(h.default).setResult(t[o])}this.parentItem.sortAllChildren();var r=this.getListSymbol();for(o=0,n=r.length;o<n;o++){var c=r[o];c.node.y=r.length*c.node.height/2-c.node.height*o-c.node.height/2}this.totalItem=4,u.Windown.NgoKhong.listKhung[this.index].currentIndex=t.length-4,u.Windown.NgoKhong.listKhung[this.index].emitNewSize(!1);var s=130*(r.length-2);this.node.height=s},e.prototype.activeNodeNearWin=function(){null==this.nodeEffNearWin&&(this.nodeEffNearWin=u.Windown.NgoKhong.asset.getNearWin(),this.nodeEffNearWin.parent=u.Windown.NgoKhong.parentItem,this.nodeEffNearWin.setPosition(this.node.getPosition())),this.nodeEffNearWin.opacity=255,this.nodeEffNearWin.active=!0,this.activeAllSymbol();for(var t=u.Windown.NgoKhong.listColum,e=0;e<t.length;e++)t[e]!=this&&t[e].offAllSymbol();u.Windown.NgoKhong.activeMask(!0),u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.fastspinEnd)},e.prototype.offNearWin=function(){var t=this;this.nodeEffNearWin&&(this.nodeEffNearWin.stopAllActions(),this.nodeEffNearWin.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){t.nodeEffNearWin.active=!1}))))},e.prototype.effectAddColum=function(t){u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.fastspinStart,.7),u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.fsReelAppear),u.Windown.NgoKhong.effectShake();var e=this.getListSymbol().length,o=130*(e-2);cc.tween(this.node).to(.2,{height:o}).start();var n=u.Windown.NgoKhong.listKhung;n[this.index].currentIndex=e-6,n.forEach(function(t){return t.emitNewSize()}),u.Windown.NgoKhong.emitNewScale();var i=u.Windown.NgoKhong.asset.getAddSymbol();i.parent=this.node.parent,i.setPosition(this.node.getPosition());var r=i.getComponent(cc.Animation);r.once(cc.Animation.EventType.FINISHED,function(){u.Windown.NgoKhong.asset.putAddSymbol(i)},this),r.play("AddSymbol");var c=130*n[this.index].currentIndex;i.children[0].height=600+c,i.children[1].height=600+c;var s=i.children[2];s.height=100,s.y=t.y;var a=u.Windown.NgoKhong.asset.getAddSymbol2();a.setPosition(this.node.x,t.y),a.parent=this.node.parent;var l=a.getComponent(cc.Animation);l.play("AddGayNhuY"),l.once(cc.Animation.EventType.FINISHED,function(){u.Windown.NgoKhong.asset.putAddSymbol2(a)}),cc.tween(s).to(.2,{height:600+c,y:0}).start()},e.prototype.removeAddSymbolAdded=function(){for(var t=this.getListSymbol(),e=t.length-6,o=1,n=1+e;o<n;o++)t[o].removeItem();this.result.splice(0,e),this.parentItem.sortAllChildren();var i=this.getListSymbol(),r=130*(i.length-2);for(cc.tween(this.node).to(.2,{height:r}).start(),o=0,n=i.length;o<n;o++){var c=i[o];c.node.stopAllActions();var s=i.length*c.node.height/2-c.node.height*o-c.node.height/2;c.node.runAction(cc.moveTo(.2,cc.v2(c.node.x,s)))}},e.prototype.showGayNhuY=function(t){var e=this;return new Promise(function(o){return c(e,void 0,void 0,function(){var e,n,i,r,a,h,d,f,g=this;return s(this,function(y){switch(y.label){case 0:return y.trys.push([0,5,,6]),cc.log("json.:  "+this.result),e=this.result.indexOf(11),null==(n=this.getListSymbol()[e+1])||null==n?(this.result[e]=t[0],this.result.splice(e+1,0,t[1]),this.resetAllItem(),i=this.getListSymbol(),r=i.length,a=130*(r-2),cc.tween(this.node).to(.2,{height:a}).start(),(h=u.Windown.NgoKhong.listKhung)[this.index].currentIndex=r-6,h.forEach(function(t){return t.emitNewSize()}),u.Windown.NgoKhong.emitNewScale(),o(null),l.Util.ThrowErrProsime({stack:"null gay nhu y: "+u.Windown.SFSObjToJson(u.Windown.NgoKhong.dataFinish)}),[2]):(this.result[e]=t[0],this.result.splice(e+1,0,t[1]),d=function(){return c(g,void 0,void 0,function(){var o,i,r,c,a,h;return s(this,function(){try{for((o=u.Windown.NgoKhong.asset.getSymbol()).setPosition(n.node.getPosition()),o.parent=n.node.parent,o.setSiblingIndex(n.node.getSiblingIndex()+1),this.node.parent.sortAllChildren(),n.setResult(t[0]),o.getComponent(p.default).setItemColum(this),o.getComponent(p.default).setResult(t[1]),n.addEffectBackGround(),o.getComponent(p.default).addEffectBackGround(),this.getListWildMutil().forEach(function(t){t.moveWhenGayNhuY(e)}),i=this.getListSymbol(),r=0,c=i.length;r<c;r++)(a=i[r]).node.stopAllActions(),h=i.length*a.node.height/2-a.node.height*r-a.node.height/2,cc.log("y: "+h),a.node.runAction(cc.moveTo(.2,cc.v2(a.node.x,h)));this.effectAddColum(n.node)}catch(s){l.Util.ThrowErrProsime(s)}return[2]})})},u.Windown.NgoKhong.stateSpin.isMaxSpeed?(n.activeItem(),d(),[4,u.Windown.NgoKhong.getMakeDelay(.2).prosime]):[3,2]);case 1:return y.sent(),[3,4];case 2:return u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.featureJingubangExpand,.7),n.addNodeGayNhuY(d),n.activeItem(),[4,u.Windown.NgoKhong.getMakeDelay(.4).prosime];case 3:y.sent(),y.label=4;case 4:return o(null),[3,6];case 5:return f=y.sent(),l.Util.ThrowErrProsime(f),[3,6];case 6:return[2]}})})})},e.prototype.setResult=function(t){this.result=t,this.resultTemp=t.slice(),this.indexMaxWild=this.resultTemp.length},e.prototype.checkIsNoSap=function(t){return this.getListSymbol().length-2!=t.length},e.prototype.checkItemWin=function(t){return c(this,void 0,void 0,function(){var e,o,n,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.getListSymbol(),[4,u.Windown.NgoKhong.getMakeDelay(.03*this.index).prosime];case 1:for(r.sent(),this.getListWildMutil().forEach(function(t){t.playAniTake()}),o=1,n=e.length;o<n-1;o++)e[o].result!=t&&10!=e[o].result||e[o].takeItem();return[3,3];case 2:return i=r.sent(),l.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})},e.prototype.addNewListSymbol=function(t,e){var o=this;return new Promise(function(n){return c(o,void 0,void 0,function(){var o,i,r,c,a,h,d,f,g,y,m,S,v,w,b,N,W;return s(this,function(s){switch(s.label){case 0:for(s.trys.push([0,6,,7]),o=u.Windown.NgoKhong.stateSpin.curentCountScater>1,this.setResult(t),i=this.getListSymbol(),r=i[0],(c=[]).unshift(r),r.node.setSiblingIndex(0),a=t.length-i.length+2,N=0,y=a;N<y;N++)(h=u.Windown.NgoKhong.asset.getSymbol()).parent=this.parentItem,h.setSiblingIndex(0),h.y=i[0].node.y+h.height*(N+2),(d=h.getComponent(p.default)).setItemColum(this),c.unshift(d);for(r.node.y+=r.node.height,this.parentItem.sortAllChildren(),f=this.getListSymbol(),N=1,y=c.length;N<y;N++)c[N].setResult(t[N-1]);for(N=0,y=f.length;N<y;N++)m=f[N],c.includes(m)||(m.node.stopAllActions(),v=f.length*m.node.height/2-m.node.height*N-m.node.height/2,this.actionMove(0,cc.v2(m.node.x,v),m.node));return g=.05,!o||u.Windown.NgoKhong.stateSpin.isMaxSpeed?[3,4]:[4,u.Windown.NgoKhong.getMakeDelay(.3).prosime];case 1:for(s.sent(),u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.heartbeatNoise),u.Windown.NgoKhong.listColum.forEach(function(t){t.offAllSymbol()}),u.Windown.NgoKhong.activeMask(!0),N=0,y=f.length;N<y;N++)m=f[N],c.includes(m)||m.effectNearWinScater();return(S=u.Windown.NgoKhong.asset.getNearWinNoSap()).parent=this.parentItem,S.height=130*a,v=(r.node.y+i[1].node.y-130)/2,S.setPosition(cc.v2(0,v)),[4,u.Windown.NgoKhong.getMakeDelay(4.5).prosime];case 2:return s.sent(),u.Windown.NgoKhong.listColum.forEach(function(t){t.activeAllSymbol()}),u.Windown.NgoKhong.activeMask(!1),S.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){S.opacity=255,u.Windown.NgoKhong.asset.putNearWinNoSap(S)}))),[4,u.Windown.NgoKhong.getMakeDelay(.3+.5*e).prosime];case 3:s.sent(),s.label=4;case 4:for(w=function(t){var e=f[t];if(c.includes(e)){g+=u.Windown.RandomNumber(0,100)/600,e.node.stopAllActions();var n=f.length*e.node.height/2-e.node.height*t-e.node.height/2;o&&!u.Windown.NgoKhong.stateSpin.isMaxSpeed&&u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.heartbeatSlowdrop,.8),b.actionMove(g,cc.v2(e.node.x,n),e.node,function(){12==e.result?(e.addNodeScater(),u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.symScatter,.6)):10==e.result&&(e.activeWild(),u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.symWildSpawn,.7))})}},b=this,N=f.length-1;N>=0;N--)w(N);return[4,u.Windown.NgoKhong.getMakeDelay(g+.5).prosime];case 5:return s.sent(),n(null),[3,7];case 6:return W=s.sent(),l.Util.ThrowErrProsime(W),[3,7];case 7:return[2]}})})})},e.prototype.actionMove=function(t,e,o,n){if(void 0===n&&(n=null),Math.abs(o.y-e.y)<10)n&&n();else{u.Windown.NgoKhong.stateSpin.isMaxSpeed&&(t=0);var i=cc.moveTo(.25,e).easing(cc.easeSineIn()),r=cc.sequence(cc.moveBy(.03,0,15).easing(cc.easeSineOut()),cc.moveBy(.03,0,-15).easing(cc.easeSineIn()),cc.callFunc(function(){n&&n()}));o.runAction(cc.sequence(cc.delayTime(t),i,cc.callFunc(function(){u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.slider_effect,.5)}),r))}},e.prototype.offAllSymbol=function(){this.getListSymbol().forEach(function(t){t.offItem()})},e.prototype.activeAllSymbol=function(){this.getListSymbol().forEach(function(t){t.activeItem()})},e.prototype.reset=function(){},e.prototype.runSpin=function(){var t=this,e=cc.moveBy(.15,0,-130).easing(cc.easeBackIn()),o=cc.repeat(cc.moveBy(1,0,-2500),cc.macro.REPEAT_FOREVER);this.parentItem.stopAllActions(),this.parentItem.runAction(cc.sequence(e,cc.callFunc(function(){t.getListSymbol().forEach(function(t){t.removeNodeScater()})}),o)),this.stateWhel=a.default.RUN},e.prototype.stopSpin=function(t,e){var o=this;return new Promise(function(n,i){return c(o,void 0,void 0,function(){var o;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.setResult(e),this.funReject=i,this.isScater=t,this.resolve=n,t?(this.activeNodeNearWin(),this.runSlowDownActicon(),[4,u.Windown.NgoKhong.getMakeDelay(1.5).prosime]):[3,2];case 1:return r.sent(),this.stateWhel=a.default.SHOW_EFFECT,[3,3];case 2:this.stateWhel=a.default.STOP,r.label=3;case 3:return[3,5];case 4:return o=r.sent(),l.Util.ThrowErrProsime(o),[3,5];case 5:return[2]}})})})},e.prototype.forceStopSpin=function(){},e.prototype.errSpin=function(){},e.prototype.effStopSpin=function(){return c(this,void 0,void 0,function(){var t,e,o,n;return s(this,function(){try{for(this.parentItem.stopAllActions(),this.parentItem.y=0,this.resetAllItem(),t=this.getListSymbol(),e=0,o=t.length;e<o;e++)n=t[e],0==e||e==o-1?n.offBlur():12==n.result?(n.addNodeScater(),u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.symScatter)):10==n.result&&(n.activeWild(),u.Windown.NgoKhong.audio.playEffectNoStop(u.Windown.NgoKhong.audio.symWildSpawn,.7));this.getListWildMutil().forEach(function(t){t.effectShow()}),this.parentItem.children.forEach(function(t){var e=t.getComponent(d.default);e&&e.isStopColum()}),this.isMoveSlowDown=!1,this.isScater?this.parentItem.runAction(cc.sequence(cc.moveBy(.15,0,-30).easing(cc.easeSineOut()),cc.callFunc(this.offNearWin,this),cc.moveBy(.2,0,30).easing(cc.easeSineIn()),cc.callFunc(this.resolve,this))):(this.parentItem.runAction(cc.sequence(cc.moveBy(.08,0,-15).easing(cc.easeSineOut()),cc.moveBy(.08,0,15).easing(cc.easeSineIn()))),this.resolve())}catch(i){l.Util.ThrowErrProsime(i)}return[2]})})},e.prototype.resetAllItem=function(){var t=this;this.parentItem.sortAllChildren();var e=this.getListSymbol();u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.spinStop);var o=!1,n=0;e[n].setResult(u.Windown.RandomNumber(0,13)),n++,this.result.forEach(function(i){var r=e[n];if(null==r||null==r){var c=u.Windown.NgoKhong.asset.getSymbol();c.parent=t.parentItem,c.setSiblingIndex(e[n-1].node.getSiblingIndex()+1),(r=c.getComponent(p.default)).setItemColum(t),e.push(r),o=!0}r.setResult(i),n++});var i=e[n];if(null==i||null==i){var r=u.Windown.NgoKhong.asset.getSymbol();r.parent=this.parentItem,r.setSiblingIndex(e[n-1].node.getSiblingIndex()+1),(i=r.getComponent(p.default)).setItemColum(this),o=!0}i.setResult(u.Windown.RandomNumber(0,13)),o&&this.parentItem.sortAllChildren();for(var c=0,s=(e=this.getListSymbol()).length;c<s;c++){var a=e[c];a.node.y=e.length*a.node.height/2-a.node.height*c-a.node.height/2}},e.prototype.getIdSymbolResult=function(){if(this.stateWhel==a.default.STOP){var t=this.resultTemp.pop();if(t&&10==t&&this.resultTemp.length<=this.indexMaxWild){for(var e=1,o=this.resultTemp.length-1;o>=0&&(this.index,10==this.resultTemp[o]);o--)e++,this.indexMaxWild=o;if(e>1){cc.log("nhay me vao add count r ne");var n=this.getListSymbol(),i=n[0].node,r=u.Windown.NgoKhong.asset.getSymbolMutilWild();r.parent=this.parentItem,r.setSiblingIndex(999),r.zIndex=cc.macro.MAX_ZINDEX,r.getComponent(d.default).init(e,this,cc.v2(0,130*n.length/2-130*(this.resultTemp.length+2)+130*parseInt(e/2)+e%2*130/2),this.resultTemp.length),r.setPosition(0,i.y+130*parseInt(e/2)+e%2*130/2-65)}}return t}return u.Windown.RandomNumber(0,13)},e.prototype.checkParentItem=function(){},e.prototype.runSlowDownActicon=function(){this.parentItem.stopAllActions(),this.isMoveSlowDown=!0,this.deltaSlowDown=6e3},e.prototype.update=function(t){this.isMoveSlowDown&&(this.parentItem.y-=t*this.deltaSlowDown,this.deltaSlowDown>500?this.deltaSlowDown-=1800*t:this.deltaSlowDown<1e3&&(this.stateWhel=a.default.STOP))},r([y(cc.Node)],e.prototype,"parentItem",void 0),r([g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./SymbolNgoKhong":"SymbolNgoKhong","./WildMutilSymbol":"WildMutilSymbol"}],LichSuNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"19872zHUT1MpqyYlTQhlbH2","LichSuNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/DefineTs/REQUEST_CODE"),s=t("../../../Scritps/Network/ConectManager"),a=t("../../../Scritps/Popup/PageData/PageData"),l=t("../../../Scritps/Windown"),u=t("./DetailHistoryNgoKhong"),p=t("./ItemLichSuNgoKhong"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageDate=null,e.detail=null,e.listData=null,e.maxRow=11,e}return i(e,t),e.prototype.show=function(){this.node.active=!0,this.reset(),this.node.y=-1280,this.node.stopAllActions(),this.node.runAction(cc.moveTo(.3,0,0)),s.ConectManager.getIns().sendRequest(c.REQUEST_CODE.HistoryNgoKhong,null,l.Windown.NgoKhong.roomSFS),l.Windown.UIManager.showLoading()},e.prototype.responseServer=function(t){l.Windown.UIManager.hideLoading();var e=t.getSFSArray("history");this.initWithListData(e)},e.prototype.initWithListData=function(t){cc.log(l.Windown.SFSArrToJson(t)),this.pageDate.content.children;var e=t.size(),o=parseInt(e/this.maxRow);e%this.maxRow>0&&o++,0==o&&(o=1),this.pageDate.setTotalPage(o),this.listData=t,this.onChangePage(1)},e.prototype.onChangePage=function(t){for(var e=this.pageDate.content,o=e.children,n=o[0],i=(t-1)*this.maxRow,r=0,c=this.maxRow;r<c;r++){var s=o[r];if(i<this.listData.size()){null==s&&(s=cc.instantiate(n),e.addChild(s),s.y=-(r+1)*s.height+s.height/2);var a=this.listData.getSFSObject(i);s.getComponent(p.default).initItem(a),s.active=!0,i++}else{if(!s)break;s.active=!1}}},e.prototype.showDetail=function(t){this.detail.show(t)},e.prototype.resetContent=function(){for(var t=this.pageDate.content.children,e=0,o=t.length;e<o;e++)t[e].active=!1},e.prototype.reset=function(){this.pageDate.setTotalPage(1),this.pageDate.reset(),this.resetContent()},e.prototype.onClickClose=function(){var t=this;l.Windown.NgoKhong.audio.playClick(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveTo(.3,0,-1280),cc.callFunc(function(){t.node.active=!1})))},r([f(a.default)],e.prototype,"pageDate",void 0),r([f(u.default)],e.prototype,"detail",void 0),r([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Popup/PageData/PageData":void 0,"../../../Scritps/Windown":void 0,"./DetailHistoryNgoKhong":"DetailHistoryNgoKhong","./ItemLichSuNgoKhong":"ItemLichSuNgoKhong"}],NgoKhongView:[function(t,e,o){"use strict";cc._RF.push(e,"95758DSxFpOBbtEFrKxDUs0","NgoKhongView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/DefineTs/EVENT_MANAGER"),l=t("../../../Scritps/DefineTs/PlayerPP"),u=t("../../../Scritps/DefineTs/REQUEST_CODE"),p=t("../../../Scritps/DefineTs/StateReelSlot"),h=t("../../../Scritps/DefineTs/TextDefine"),d=t("../../../Scritps/Game/GAME_TYPE"),f=t("../../../Scritps/Network/ConectManager"),g=t("../../../Scritps/Obs/LbMoneyChange"),y=t("../../../Scritps/Other/MakeDelay"),m=t("../../../Scritps/Util"),S=t("../../../Scritps/Windown"),v=t("./AssetNgoKhong"),w=t("./AudioNgoKhong"),b=t("./EffectNgoKhong"),N=t("./InfoBarControllerNgoKhong"),W=t("./ItemKhung"),A=t("./ItemSlotNgoKhong"),C=t("./LichSuNgoKhong"),_=t("./SpinNormalNgoKhong"),I=cc._decorator,M=I.ccclass,K=I.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniAsAt=null,e.aniSaoRoi=null,e.asset=null,e.bkgSprite=null,e.parentItem=null,e.parentEffect=null,e.parentKhung=null,e.nodeLine=null,e.effect=null,e.labelChipReviceInBox=null,e.listKhung=[],e.lb_totalBet=null,e.lb_FSLeft=null,e.lb_TotalLine=null,e.lb_CountAuto=null,e.infoBar=null,e.btnSpin=null,e.mask=null,e.nodeChooseAuto=null,e.popupLichSu=null,e.audio=null,e.listNodeDeactive=[],e.cachChoi=null,e.nodeBtnPlay=null,e.nodeBtnSeting=null,e.toggleMusic=null,e.toggleTurbo=null,e.btnStartAuto=null,e.listColum=[],e.listResult=[],e.listResultConvert=[],e.listConfigBet=[],e.gameType=-1,e.sfs=null,e.roomSFS=null,e.stateReel=0,e.totalLineBet=20,e.curRoomBet=50,e.funEnd=null,e.isShowBtnPlay=!0,e.dataFinish=null,e.sfsObjTest=null,e.stateSpin=null,e.timeShake=0,e.forceShake=0,e.makeDelay=null,e}return i(e,t),e.prototype.onLoad=function(){S.Windown.NgoKhong=this,this.makeDelay=new y.default(this),cc.log("start dieu thuyen"),this.gameType=d.default.NgoKhong,this.sfs=f.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),cc.systemEvent.on(a.EVENT_MANAGER.onDisconnect,this.onDisconnect,this),this.setupView(),this.stateReel=p.default.WAITING,this.stateSpin=new _.default,this.sendJoinRoom(),this.activeMask(!1)},e.prototype.sendJoinRoom=function(){cc.log("send creat room");try{var t=f.ConectManager.getIns().getValibleRoomName(),e=new SFS2X.RoomSettings(t),o=new SFS2X.RoomExtension("NgoKhongExtension","ext.Room.SlotNgoKhong.SlotGameView");e.extension=o,e.isGame=!0,e.maxUsers=1,e.groupId="NgoKhong",this.sfs.send(new SFS2X.CreateRoomRequest(e,!0))}catch(n){cc.error(n),this.onDisconnect()}},e.prototype.onDisconnect=function(){cc.log("disconnect"),S.Windown.UIManager.hideLoading(),S.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.userExitRoom=function(t){cc.log("user exit room"),"NgoKhong"==t.room.groupId&&t.user.isItMe&&cc.director.loadScene("main")},e.prototype.onCreateError=function(){cc.log("creat errr"),S.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),S.Windown.Dialog.showLog(h.TextDefine.ERR_JOIN_ROOM)},e.prototype.onJoinRoom=function(t){var e=t.room;if("NgoKhong"==e.groupId){this.roomSFS=e,S.Windown.UIManager.hideLoadingData();var o=e.getVariable("cf").value;cc.log(o);var n=[],i=JSON.parse(o);for(var r in i){var c=Object.create(null);c.bet=parseInt(r),c.perJp=i[r].percentPot/100,n.push(c)}n.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=n,this.curRoomBet=this.listConfigBet[0].bet,this.lb_totalBet.string=S.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),S.Windown.UIManager.hideLoading(),S.Windown.UIManager.hideLoadingData(),S.Windown.Dialog.showLog(h.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.activeMask=function(t){t?(this.mask.stopAllActions(),this.mask.runAction(cc.fadeIn(.3))):(this.mask.stopAllActions(),this.mask.runAction(cc.fadeOut(.3)))},e.prototype.extResponse=function(t){var e=t.cmd,o=t.params;switch(e){case u.REQUEST_CODE.SpinNgoKhong:cc.log(S.Windown.SFSObjToJson(o)),this.handleFinish(o);break;case u.REQUEST_CODE.HistoryNgoKhong:this.popupLichSu.responseServer(o)}},e.prototype.handleFinish=function(t){var e=this;if(t.containsKey(l.PlayerPP.ERR_MESSAGE))return this.stateSpin.handleErrSpin(),S.Windown.Dialog.showLog(t.get(l.PlayerPP.ERR_MESSAGE)),this.activeAllBtn(),void this.onClickResetCountAuto();this.dataFinish=t,S.Windown.MoneyUser.pushDelayMoney(this.gameType,this.dataFinish.get("agUser"),this.dataFinish.getLong("agWin")),this.truTienBet(this.dataFinish.get("agBet")*this.totalLineBet,this.dataFinish.get("agUser")),this.listResult=JSON.parse(t.get("views")),this.listResultConvert=this.convertResult(this.listResult,JSON.parse(S.Windown.SFSArrToJson(t.get("listItemWin"))));var o=this.listResultConvert[this.listResultConvert.length-1];if(o){var n=o.listIdSymbol;S.Windown.setLocalStorage("lastNgoKhong",JSON.stringify(n))}var i=this.stateSpin.isMaxSpeed?2.5:1;this.scheduleOnce(function(){e.stateReel=p.default.CAN_STOP;var t=e.stateSpin.isMaxSpeed?.2:.5;e.scheduleOnce(e.funEnd=function(){e.stateSpin.onEnd()},t)},.4/i)},e.prototype.onDestroy=function(){S.Windown.NgoKhong=null,this.dataFinish&&(S.Windown.MoneyUser.removeDelay(this.gameType),this.dataFinish=null),S.Windown.MoneyUser.endGameMOney(this.gameType),cc.systemEvent.removeAll(this),this.roomSFS=null,this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse),S.Windown.UIManager.changeRotation(),this.makeDelay.clear()},e.prototype.start=function(){var t=this;this.setupView(),this.setUpPreItemKhung(),this.initItem(),S.Windown.AudioManager.isActiveSound&&S.Windown.AudioManager.isActiveMusic?(this.toggleMusic.isChecked=!0,this.toggleMusic.checkMark.node.active=!0,this.toggleMusic.node.children[0].active=!1):(this.toggleMusic.isChecked=!1,this.toggleMusic.checkMark.node.active=!1,this.toggleMusic.node.children[0].active=!0),cc.sys.isNative||this.scheduleOnce(function(){return c(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,S.Windown.loadBundle(d.default.NgoKhong.toString())];case 1:return t.sent().loadDir("Frefabs",function(){cc.log("load xong r ne")}),[2]}})})},3)},e.prototype.initItem=function(){var t=cc.instantiate(this.parentItem.children[0]),e=t.width,o=S.Windown.getLocalStorage("lastNgoKhong"),n=null;if(o)n=JSON.parse(o),cc.log("json.string: "+JSON.stringify(o));else{n=[];for(var i=0;i<5;i++){for(var r=[],c=0;c<4;c++)r.push(S.Windown.RandomNumber(0,13));n.push(r)}}for(i=0;i<5;i++){var s=this.parentItem.children[i];null==s&&((s=cc.instantiate(t)).parent=this.parentItem);var a=s.getComponent(A.default);this.listColum.push(a),a.index=i,a.setResultFirtGame(n[i]),a.node.x=e*i+e/2-5*e/2,a.node.y=0}this.emitNewScale(!1)},e.prototype.setUpPreItemKhung=function(){for(var t=0,e=this.listKhung.length;t<e;t++){var o=this.listKhung[t];t>0&&o.intiItemKhungPre(this.listKhung[t-1]),o.emitNewSize()}},e.prototype.setupView=function(){var t=cc.find("Game",this.node);if(cc.sys.isMobile)t.angle=90,this.bkgSprite.angle=90,this.bkgSprite.scale=1280/720;else{var e=cc.winSize.height/1280;t.angle=0,t.scale=e,this.bkgSprite.angle=0;var o=this.bkgSprite.addComponent(cc.Widget);o.left=0,o.right=0,o.bottom=0,o.top=0}S.Windown.UIManager.changeRotation(!0)},e.prototype.emitNewScale=function(t){void 0===t&&(t=!0);var e=0,o=0,n=1,i=.2;for(var r in t||(i=0),this.listKhung){var c=this.listKhung[r];c.currentIndex>e&&(e=c.currentIndex),n*=c.currentIndex+4,Number(r)>0&&Number(r)<4&&c.currentIndex>o&&(o=c.currentIndex)}for(var s=1,a=0;a<e;a++)s*=.92;this.parentItem.runAction(cc.scaleTo(i,s)),this.parentKhung.runAction(cc.scaleTo(i,s)),this.parentEffect.runAction(cc.scaleTo(i,s));var l=130*o/2+3*o,u=400+(l*=s)/2;this.nodeLine.runAction(cc.moveTo(i,cc.v2(this.nodeLine.x,u))),this.lb_TotalLine.setMoney(n,!1,"",!1)},e.prototype.sendClickSpin=function(){if(null!=this.sfsObjTest)return f.ConectManager.getIns().sendRequest("testSpin",this.sfsObjTest,this.roomSFS),this.sfsObjTest=null,void cc.log("send test ne");var t=f.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),f.ConectManager.getIns().sendRequest(u.REQUEST_CODE.SpinNgoKhong,t,this.roomSFS)},e.prototype.onClickBtnSpin=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.stateReel!=p.default.WAITING?[3,2]:(this.stateReel=p.default.RUN,this.setStateEffBtnSpin(),this.offAllBtn(),this.infoBar.reset(),[4,this.stateSpin.onStart()]);case 1:return e.sent(),this.sendClickSpin(),[3,3];case 2:if(this.stateReel==p.default.CAN_STOP)return[2];this.stateReel==p.default.STOP||this.stateReel==p.default.SHOW_EFFECT&&(this.audio.playClick(),this.stateSpin.resetForNextNextSpin(),this.onClickBtnSpin()),e.label=3;case 3:return[3,5];case 4:return t=e.sent(),m.Util.ThrowErrProsime(t),[3,5];case 5:return[2]}})})},e.prototype.showContentTip=function(){},e.prototype.resetForNewGame=function(){this.stateReel=p.default.WAITING,this.setStateEffBtnSpin()},e.prototype.setStateEffBtnSpin=function(){var t=this.btnSpin.getComponent(cc.Animation),e=cc.find("sb_arrow",this.btnSpin),o=cc.find("sb_arrow_blur",this.btnSpin);if(this.stateReel!=p.default.STOP){var n=cc.Material.getBuiltinMaterial("2d-sprite");e.getComponent(cc.Sprite).setMaterial(0,n)}if(this.stateReel==p.default.WAITING||this.stateReel==p.default.SHOW_EFFECT)o.active=!1,e.active=!0,e.stopAllActions(),e.runAction(cc.repeatForever(cc.rotateBy(3,-360)));else if(this.stateReel==p.default.RUN)this.audio.playEffect(this.audio.spinBtn),this.audio.playEffect(this.audio.menu_icon_press),t.play("BtnSpin"),o.active=!0,o.stopAllActions(),o.runAction(cc.repeatForever(cc.rotateBy(.3,-360))),e.active=!1,this.infoBar.showRdContent(),this.aniAsAt.node.activeInHierarchy&&(this.aniAsAt.play("AnhSangActive"),this.aniSaoRoi.play("SaoRoi"));else if(this.stateReel==p.default.STOP){e.active=!0,e.stopAllActions(),o.active=!1;var i=cc.Material.getBuiltinMaterial("2d-gray-sprite");e.getComponent(cc.Sprite).setMaterial(0,i)}},e.prototype.setLbFreeSpinLeft=function(t){var e=this.lb_FSLeft.node.parent;this.lb_FSLeft.string=t,t<1?(cc.find("last_spin",e).active=!0,cc.find("remaining_spin",e).active=!1,this.lb_FSLeft.node.active=!1):(cc.find("last_spin",e).active=!1,cc.find("remaining_spin",e).active=!0,this.lb_FSLeft.node.active=!0)},e.prototype.setCountAuto=function(t){this.lb_CountAuto.node.parent.active=!(t<1),this.lb_CountAuto.string=t.toString()},e.prototype.showMoneyAllWin=function(t){cc.log("money win: "+t),this.labelChipReviceInBox.setMoney(t),S.Windown.MoneyUser.removeDelay(this.gameType)},e.prototype.offLbFree=function(){this.lb_FSLeft.node.parent.active=!1},e.prototype.onClickSendObjTest=function(){var t=f.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),t.putUtfString("arr","[[10,10,0,11],[10,9,0,3],[2,7,10,10],[0,5,6,0],[2,5,1,1]]"),this.sfsObjTest=t,this.onClickBtnSpin(),cc.log("onClickSendObjTest")},e.prototype.onClickTest=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(){return(t=f.ConectManager.getIns().getSFSObj()).putInt("bet",this.curRoomBet),t.putUtfString("arr","[[9,10,1,11],[9,7,0,3],[0,7,0,5],[6,0,7,7],[7,0,10,2]]"),this.sfsObjTest=t,this.onClickBtnSpin(),[2]})})},e.prototype.onClickResetCountAuto=function(){this.stateSpin.countAutoSpin=0,this.lb_CountAuto.node.parent.active=!1},e.prototype.onClickItemAutoSpin=function(t){this.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer).allowSwitchOff=!1;var e=t.node.name,o=Number(e);this.stateSpin.countAutoSpin=o,this.btnStartAuto.interactable=!0,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#FF8E26")},e.prototype.onClickStartAutoSpin=function(){this.onClickBtnSpin(),this.onClickCloseListAuto(),S.Windown.NgoKhong.stateSpin.countAutoSpin>0&&S.Windown.NgoKhong.setCountAuto(S.Windown.NgoKhong.stateSpin.countAutoSpin)},e.prototype.onClickShowListAuto=function(){this.nodeChooseAuto.active=!0,this.nodeChooseAuto.opacity=0,this.nodeChooseAuto.runAction(cc.fadeIn(.3)),this.btnStartAuto.interactable=!1,this.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")},e.prototype.onClickCloseListAuto=function(){var t=this;this.nodeChooseAuto.stopAllActions(),this.nodeChooseAuto.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){var e=t.btnStartAuto.node.parent.getComponentInChildren(cc.ToggleContainer);e.allowSwitchOff=!0,e.toggleItems.forEach(function(t){t.isChecked&&t.uncheck()}),t.nodeChooseAuto.active=!1,t.btnStartAuto.interactable=!1,t.btnStartAuto.node.children[0].color=cc.Color.fromHEX(new cc.Color,"#945F00")})))},e.prototype.convertResult=function(t,e){for(var o=[],n=0,i=t;n<i.length;n++)for(var r=i[n],c=0,s=r.length;c<s;c++){var a=r[c];a.forEach(function(t){t.reverse()});var l=Object.create(null);if(l.listIdSymbol=a,l.isNoSap=!1,l.countScater=this.getCountScater(a),c==s-1){var u=e.shift();u&&(u.lsIdItem=JSON.parse(u.lsIdItem),u.lsstack=JSON.parse(u.lsstack),u.lsAgWin=JSON.parse(u.lsAgWin),u.lsAgWin.length>0&&(l.listItemWin=u,l.isNoSap=!0))}o.push(l)}return o},e.prototype.setResult=function(){},e.prototype.getListActiveScaster=function(t){for(var e=[],o=0,n=0;n<t.length;n++)o>=2?e.push(!0):e.push(!1),t[n].includes(12)&&o++;return e},e.prototype.onClickChangeBet=function(t,e){if(this.audio.playClick(),this.listConfigBet.length<1)S.Windown.Dialog.showLog(h.TextDefine.Error);else{var o=-1;for(var n in this.listConfigBet)if(this.listConfigBet[n].bet==this.curRoomBet){o=parseInt(n);break}0==e?o--:o++,o<0&&(o=this.listConfigBet.length-1),o>this.listConfigBet.length-1&&(o=0),this.curRoomBet=this.listConfigBet[o].bet,this.lb_totalBet.string=S.Windown.formatNumber(this.totalLineBet*this.curRoomBet)}},e.prototype.onClickCachChoi=function(){this.cachChoi.active=!0,this.cachChoi.opacity=0,this.cachChoi.stopAllActions(),this.cachChoi.runAction(cc.fadeIn(.3))},e.prototype.onCloseCachChoi=function(){var t=this;this.cachChoi.stopAllActions(),this.cachChoi.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){t.cachChoi.active=!1})))},e.prototype.onClickBackToLobby=function(){this.roomSFS?f.ConectManager.getIns().sendLeaveRoom(this.roomSFS):cc.director.loadScene("main")},e.prototype.onClickMusic=function(){var t=this.toggleMusic.isChecked;this.toggleMusic.node.children[0].active=!t,S.Windown.AudioManager?(S.Windown.AudioManager.isActiveSound=t,S.Windown.AudioManager.isActiveMusic=t):t?(S.Windown.setLocalStorage("sound","on"),S.Windown.setLocalStorage("music","on")):(S.Windown.setLocalStorage("sound","off"),S.Windown.setLocalStorage("music","off"))},e.prototype.onClickTurbo=function(){var t=this.toggleTurbo.isChecked;this.toggleTurbo.node.children[1].active=!t,this.stateSpin.isMaxSpeed=t,t?S.Windown.UIManager.showAlertMini("\u0110\xe3 B\u1eacT quay nhanh"):S.Windown.UIManager.showAlertMini("\u0110\xe3 T\u1eaeT quay nhanh")},e.prototype.onClickSeting=function(){if(this.audio.playClick(),cc.log("click onClickSeting"),this.isShowBtnPlay=!this.isShowBtnPlay,this.isShowBtnPlay)t=cc.v2(0,-750),this.nodeBtnPlay.runAction(cc.fadeIn(.4)),this.nodeBtnSeting.runAction(cc.spawn(cc.fadeOut(.3),cc.moveTo(.3,t)));else{this.nodeBtnPlay.stopAllActions(),this.nodeBtnSeting.stopAllActions();var t=cc.v2(0,-483.765);this.nodeBtnPlay.runAction(cc.fadeOut(.3)),this.nodeBtnSeting.opacity=0,this.nodeBtnSeting.runAction(cc.spawn(cc.fadeIn(.4),cc.moveTo(.4,t)))}},e.prototype.getCountScater=function(t){var e=0;return t.forEach(function(t){t.includes(12)&&e++}),e},e.prototype.getMakeDelay=function(t){return this.makeDelay.getDelay(t)},e.prototype.activeAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!0,t.node.children.forEach(function(t){t.color=cc.Color.fromHEX(new cc.Color,"#FFD500")})})},e.prototype.offAllBtn=function(){this.listNodeDeactive.forEach(function(t){t.interactable=!1,t.node.children.forEach(function(t){t.color=cc.Color.fromHEX(new cc.Color,"#999999")})})},e.prototype.truTienBet=function(t,e){0!=t&&S.Windown.MoneyUser.subMoney(t,e)},e.prototype.effectShake=function(t,e){void 0===t&&(t=.2),void 0===e&&(e=10),this.timeShake=t,this.forceShake=e},e.prototype.onClickLichSu=function(){this.popupLichSu.show()},e.prototype.update=function(t){if(this.timeShake>0){var e=cc.v2(S.Windown.RandomNumber(-this.forceShake,this.forceShake+1),S.Windown.RandomNumber(-this.forceShake,this.forceShake+1));this.parentEffect.parent.setPosition(e),this.timeShake-=t}else this.parentEffect.parent.setPosition(0,0)},r([K(cc.Animation)],e.prototype,"aniAsAt",void 0),r([K(cc.Animation)],e.prototype,"aniSaoRoi",void 0),r([K(v.default)],e.prototype,"asset",void 0),r([K(cc.Node)],e.prototype,"bkgSprite",void 0),r([K(cc.Node)],e.prototype,"parentItem",void 0),r([K(cc.Node)],e.prototype,"parentEffect",void 0),r([K(cc.Node)],e.prototype,"parentKhung",void 0),r([K(cc.Node)],e.prototype,"nodeLine",void 0),r([K(b.default)],e.prototype,"effect",void 0),r([K(g.default)],e.prototype,"labelChipReviceInBox",void 0),r([K([W.default])],e.prototype,"listKhung",void 0),r([K(cc.Label)],e.prototype,"lb_totalBet",void 0),r([K(cc.Label)],e.prototype,"lb_FSLeft",void 0),r([K(g.default)],e.prototype,"lb_TotalLine",void 0),r([K(cc.Label)],e.prototype,"lb_CountAuto",void 0),r([K(N.default)],e.prototype,"infoBar",void 0),r([K(cc.Node)],e.prototype,"btnSpin",void 0),r([K(cc.Node)],e.prototype,"mask",void 0),r([K(cc.Node)],e.prototype,"nodeChooseAuto",void 0),r([K(C.default)],e.prototype,"popupLichSu",void 0),r([K(w.default)],e.prototype,"audio",void 0),r([K([cc.Button])],e.prototype,"listNodeDeactive",void 0),r([K(cc.Node)],e.prototype,"cachChoi",void 0),r([K(cc.Node)],e.prototype,"nodeBtnPlay",void 0),r([K(cc.Node)],e.prototype,"nodeBtnSeting",void 0),r([K(cc.Toggle)],e.prototype,"toggleMusic",void 0),r([K(cc.Toggle)],e.prototype,"toggleTurbo",void 0),r([K(cc.Button)],e.prototype,"btnStartAuto",void 0),r([M],e)}(cc.Component);o.default=E,cc._RF.pop()},{"../../../Scritps/DefineTs/EVENT_MANAGER":void 0,"../../../Scritps/DefineTs/PlayerPP":void 0,"../../../Scritps/DefineTs/REQUEST_CODE":void 0,"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/LbMoneyChange":void 0,"../../../Scritps/Other/MakeDelay":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0,"./AssetNgoKhong":"AssetNgoKhong","./AudioNgoKhong":"AudioNgoKhong","./EffectNgoKhong":"EffectNgoKhong","./InfoBarControllerNgoKhong":"InfoBarControllerNgoKhong","./ItemKhung":"ItemKhung","./ItemSlotNgoKhong":"ItemSlotNgoKhong","./LichSuNgoKhong":"LichSuNgoKhong","./SpinNormalNgoKhong":"SpinNormalNgoKhong"}],SpinNormalNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"5972b8gRddBX6n5S9kpD82t","SpinNormalNgoKhong");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../Scritps/DefineTs/StateReelSlot"),c=t("../../../Scritps/Util"),s=t("../../../Scritps/Windown"),a=function(){function t(){this.listFunShowOceLine=[],this.funShowOceLine=null,this.listColum=[],this.effect=null,this.isMaxSpeed=!1,this.isAutoSpin=!1,this.lastAutoSpin=!1,this.countAutoSpin=0,this.lastFreeSpinLeft=0,this.freeSpinLeft=0,this.freeSpinCache=0,this.moneyTotalFs=0,this.curentCountScater=0,this.currentMutilFs=1,this.listColum=s.Windown.NgoKhong.listColum,this.effect=s.Windown.NgoKhong.effect}return t.prototype.onStart=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,o;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,8,,9]),s.Windown.NgoKhong.audio.playEffect(s.Windown.NgoKhong.audio.slot_scrolling),[4,this.removeAllSymbolAdded()];case 1:n.sent(),t=0,n.label=2;case 2:return t<this.listColum.length?(this.listColum[t].runSpin(),this.isMaxSpeed?[3,4]:[4,s.Windown.NgoKhong.getMakeDelay(.025).prosime]):[3,5];case 3:n.sent(),n.label=4;case 4:return t++,[3,2];case 5:return this.isMaxSpeed?[4,s.Windown.NgoKhong.getMakeDelay(.1).prosime]:[3,7];case 6:n.sent(),n.label=7;case 7:return e(null),[3,9];case 8:return o=n.sent(),c.Util.ThrowErrProsime(o),[3,9];case 9:return[2]}})})})},t.prototype.onEnd=function(){return n(this,void 0,void 0,function(){var t,e,o,n,r,a,l,u;return i(this,function(i){switch(i.label){case 0:i.trys.push([0,10,,11]),t=s.Windown.NgoKhong.listResultConvert,e=s.Windown.NgoKhong.getListActiveScaster(t[0].listIdSymbol),o=0,n=[],r=0,a=this.listColum,i.label=1;case 1:return r<a.length?(l=a[r],this.isMaxSpeed?[3,3]:[4,l.stopSpin(e[o],t[0].listIdSymbol[o])]):[3,6];case 2:return i.sent(),[3,4];case 3:n.push(l.stopSpin(e[o],t[0].listIdSymbol[o])),i.label=4;case 4:o++,i.label=5;case 5:return r++,[3,1];case 6:return this.isMaxSpeed?[4,Promise.all(n)]:[3,9];case 7:return i.sent(),[4,s.Windown.NgoKhong.getMakeDelay(.25).prosime];case 8:i.sent(),i.label=9;case 9:return s.Windown.NgoKhong.audio.stopEffect(s.Windown.NgoKhong.audio.slot_scrolling),this.handleStopAllColum(),[3,11];case 10:return u=i.sent(),c.Util.ThrowErrProsime(u),[3,11];case 11:return[2]}})})},t.prototype.handleErrSpin=function(){return n(this,void 0,void 0,function(){var t,e,o,n;return i(this,function(i){switch(i.label){case 0:i.trys.push([0,6,,7]),s.Windown.NgoKhong.audio.stopEffect(s.Windown.NgoKhong.audio.slot_scrolling),t=0,e=this.listColum,i.label=1;case 1:return t<e.length?(o=e[t],this.isMaxSpeed?[3,3]:[4,o.stopSpin(!1,o.result)]):[3,5];case 2:return i.sent(),[3,4];case 3:o.stopSpin(!1,o.result),i.label=4;case 4:return t++,[3,1];case 5:return s.Windown.NgoKhong.resetForNewGame(),[3,7];case 6:return n=i.sent(),c.Util.ThrowErrProsime(n),[3,7];case 7:return[2]}})})},t.prototype.handleStopAllColum=function(){return n(this,void 0,void 0,function(){var t,e,o,n,a;return i(this,function(i){switch(i.label){case 0:i.trys.push([0,11,,12]),s.Windown.NgoKhong.stateReel=r.default.STOP,s.Windown.NgoKhong.setStateEffBtnSpin(),t=s.Windown.NgoKhong.listResultConvert,e=0,o=t.length,i.label=1;case 1:return e<o?(n=t[e],this.curentCountScater=n.countScater,n.isNoSap||e==o-1?[3,3]:[4,this.checkAndShowGayNhuY(t[e].listIdSymbol,t[e+1].listIdSymbol)]):[3,8];case 2:return i.sent(),[3,5];case 3:return n.listItemWin?[4,this.checkAndShowLineAn(n.listItemWin)]:[3,5];case 4:i.sent(),i.label=5;case 5:return n.isNoSap?[4,this.effectNoSap(t[e+1].listIdSymbol)]:[3,7];case 6:i.sent(),i.label=7;case 7:return e++,[3,1];case 8:return[4,this.showMoneyTotalRevice()];case 9:return i.sent(),[4,this.checkAndShowEffect()];case 10:return i.sent(),this.resetForNextNextSpin(),[3,12];case 11:return a=i.sent(),c.Util.ThrowErrProsime(a),[3,12];case 12:return[2]}})})},t.prototype.checkAndShowGayNhuY=function(t,e){var o=this;return new Promise(function(r){return n(o,void 0,void 0,function(){var o,n,a,l,u,p,h,d;return i(this,function(i){switch(i.label){case 0:for(i.trys.push([0,10,,11]),o=s.Windown.NgoKhong.listColum,n=0;n<o.length;n++)o[n].offAllSymbol();for(l in s.Windown.NgoKhong.activeMask(!0),a=[],t)a.push(l);u=0,i.label=1;case 1:return u<a.length?(p=a[u],(h=t[p].indexOf(11))>-1?[4,this.listColum[p].showGayNhuY([e[p][h],e[p][h+1]])]:[3,3]):[3,4];case 2:i.sent(),i.label=3;case 3:return u++,[3,1];case 4:return this.isMaxSpeed?[4,s.Windown.NgoKhong.getMakeDelay(.5).prosime]:[3,6];case 5:return i.sent(),[3,8];case 6:return[4,s.Windown.NgoKhong.getMakeDelay(2).prosime];case 7:i.sent(),i.label=8;case 8:return s.Windown.NgoKhong.activeMask(!1),this.listColum.forEach(function(t){t.activeAllSymbol()}),[4,s.Windown.NgoKhong.getMakeDelay(.3).prosime];case 9:return i.sent(),r(null),[3,11];case 10:return d=i.sent(),c.Util.ThrowErrProsime(d),[3,11];case 11:return[2]}})})})},t.prototype.effectNoSap=function(t){var e=this;return new Promise(function(o){return n(e,void 0,void 0,function(){var e,n,r,a;return i(this,function(i){switch(i.label){case 0:for(r in i.trys.push([0,2,,3]),e=0,n=[],this.listColum)this.listColum[r].checkIsNoSap(t[r])&&(n.push(this.listColum[r].addNewListSymbol(t[r],e)),e++);return[4,Promise.all(n)];case 1:return i.sent(),this.lastFreeSpinLeft>0&&(this.currentMutilFs++,s.Windown.NgoKhong.effect.effectMutilUp(this.currentMutilFs)),o(null),[3,3];case 2:return a=i.sent(),c.Util.ThrowErrProsime(a),[3,3];case 3:return[2]}})})})},t.prototype.checkAndShowLineAn=function(t){var e=this;return cc.log("checkAndShowLineAn"),this.isMaxSpeed||this.listColum.forEach(function(t){t.offAllSymbol()}),s.Windown.NgoKhong.activeMask(!0),new Promise(function(o){return n(e,void 0,void 0,function(){var e,n,r,a,l,u,p,h;return i(this,function(i){switch(i.label){case 0:for(i.trys.push([0,6,,7]),s.Windown.NgoKhong.audio.playEffect(s.Windown.NgoKhong.audio.prizeSmallwin),e=0,n=t.lsIdItem,r=t.lsstack,a=t.lsAgWin,l=0,u=n.length;l<u;l++){for(p=0;p<r[l]+1;p++)this.listColum[p].checkItemWin(n[l]);e+=a[l]}return s.Windown.NgoKhong.infoBar.showTakeMoneyTurn(e*this.currentMutilFs,this.currentMutilFs),this.isMaxSpeed?[3,3]:(s.Windown.NgoKhong.audio.playIndexTakeLine(),[4,s.Windown.NgoKhong.getMakeDelay(1.2).prosime]);case 1:return i.sent(),s.Windown.NgoKhong.audio.playEffect(s.Windown.NgoKhong.audio.heartbeatSlowdrop,.6),s.Windown.NgoKhong.activeMask(!1),this.listColum.forEach(function(t){t.activeAllSymbol()}),[4,s.Windown.NgoKhong.getMakeDelay(1).prosime];case 2:return i.sent(),[3,5];case 3:return s.Windown.NgoKhong.audio.playEffect(s.Windown.NgoKhong.audio.heartbeatSlowdrop,.6),[4,s.Windown.NgoKhong.getMakeDelay(1).prosime];case 4:i.sent(),i.label=5;case 5:return o(null),[3,7];case 6:return h=i.sent(),c.Util.ThrowErrProsime(h),[3,7];case 7:return[2]}})})})},t.prototype.removeAllSymbolAdded=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,o,n;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.listColum.forEach(function(t){t.getListSymbol().forEach(function(t){t.removeNodeScater(!0)})}),this.freeSpinLeft>0&&this.lastFreeSpinLeft==this.freeSpinLeft?(e(null),[2]):(t=s.Windown.NgoKhong.listKhung,o=!1,t.forEach(function(t){0!=t.currentIndex&&(t.currentIndex=0,o=!0)}),o?(s.Windown.NgoKhong.audio.playEffect(s.Windown.NgoKhong.audio.reelReset,.7),this.listColum.forEach(function(t){t.removeAddSymbolAdded()}),t.forEach(function(t){t.emitNewSize()}),s.Windown.NgoKhong.emitNewScale(),[4,s.Windown.NgoKhong.getMakeDelay(.2).prosime]):(e(null),[2]));case 1:return i.sent(),e(null),[3,3];case 2:return n=i.sent(),c.Util.ThrowErrProsime(n),[3,3];case 3:return[2]}})})})},t.prototype.resetForNextNextSpin=function(){var t=this;cc.log("reset nor nex"),this.listFunShowOceLine=[],s.Windown.NgoKhong.resetForNewGame(),this.freeSpinLeft>0?s.Windown.NgoKhong.scheduleOnce(function(){s.Windown.NgoKhong.setLbFreeSpinLeft(t.freeSpinLeft-1),s.Windown.NgoKhong.onClickBtnSpin()},.5):this.countAutoSpin>0?s.Windown.NgoKhong.scheduleOnce(function(){t.countAutoSpin--,s.Windown.NgoKhong.setCountAuto(t.countAutoSpin),s.Windown.NgoKhong.onClickBtnSpin()},.5):s.Windown.NgoKhong.activeAllBtn()},t.prototype.checkAndShowEffect=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,o,n;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t=s.Windown.NgoKhong.dataFinish.getBool("Scarter3"),o=s.Windown.NgoKhong.dataFinish.get("numFreeSpin"),this.freeSpinLeft=o,!t&&this.lastFreeSpinLeft<1?(e(null),[2]):t?[4,s.Windown.NgoKhong.effect.showTakeFreeSpin(o)]:[3,2];case 1:i.sent(),i.label=2;case 2:return 1==this.lastFreeSpinLeft&&this.freeSpinLeft<1?[4,this.effect.showEndFree(this.moneyTotalFs)]:[3,4];case 3:i.sent(),this.moneyTotalFs=0,this.currentMutilFs=1,i.label=4;case 4:return this.lastFreeSpinLeft=this.freeSpinLeft,e(null),[3,6];case 5:return n=i.sent(),c.Util.ThrowErrProsime(n),[3,6];case 6:return[2]}})})})},t.prototype.showMoneyTotalRevice=function(){var t=this;return new Promise(function(e){return n(t,void 0,void 0,function(){var t,o;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=s.Windown.NgoKhong.dataFinish.get("agWin"),this.lastFreeSpinLeft>0&&(this.moneyTotalFs+=t),s.Windown.NgoKhong.activeMask(!1),this.listColum.forEach(function(t){t.activeAllSymbol()}),t<1?(e(null),[2]):[4,s.Windown.NgoKhong.infoBar.showTotalMoney(t)];case 1:return n.sent(),s.Windown.NgoKhong.showMoneyAllWin(t),cc.log("chay vao end show total money"),e(null),[3,3];case 2:return o=n.sent(),c.Util.ThrowErrProsime(o),[3,3];case 3:return[2]}})})})},t.prototype.checkCointainLuBo=function(){},t.prototype.checkContainDongChac=function(){},t}();o.default=a,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],SymbolNgoKhong:[function(t,e,o){"use strict";cc._RF.push(e,"4470ckDRsZD1Io9Mb2Lwx4/","SymbolNgoKhong");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{a(n.next(t))}catch(e){r(e)}}function s(t){try{a(n.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,s)}a((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Scritps/DefineTs/StateReelSlot"),l=t("../../../Scritps/Util"),u=t("../../../Scritps/Windown"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.spriteBkg=null,e.skeletonItem=null,e.nodeScater=null,e.nodeNhuY=null,e.itemColum=null,e.result=-1,e}return i(e,t),e.prototype.setItemColum=function(t){this.itemColum=t},e.prototype.setResult=function(t){null!=t&&(this.result=t,this.skeletonItem.node.active=!1,this.itemColum.stateWhel==a.default.RUN?this.activeBlur():this.offBlur())},e.prototype.activeBlur=function(){this.sprite.spriteFrame=u.Windown.NgoKhong.asset.listSpItemBlur[this.result],this.spriteBkg.spriteFrame=u.Windown.NgoKhong.asset.listSpBkgSymbolBlur[this.result]},e.prototype.offBlur=function(){this.sprite.spriteFrame=u.Windown.NgoKhong.asset.listSFItem[this.result],this.spriteBkg.spriteFrame=u.Windown.NgoKhong.asset.listSpBkgSymbol[this.result],this.skeletonItem.skeletonData=u.Windown.NgoKhong.asset.listSpItem[this.result]},e.prototype.activeWild=function(){10==this.result&&(this.skeletonItem.node.active=!0,this.skeletonItem.setAnimation(0,"spawn",!1))},e.prototype.effectNearWinScater=function(){this.nodeScater&&12==this.result&&(this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){u.Windown.NgoKhong.audio.playEffect(u.Windown.NgoKhong.audio.fsWonTitle)}),cc.repeat(cc.sequence(cc.scaleTo(.25,.75),cc.scaleTo(.25,.67)),2),cc.delayTime(.5)),3)))},e.prototype.effectScaterShowFS=function(){this.nodeScater&&(this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.sequence(cc.scaleTo(.4,.8),cc.delayTime(3),cc.scaleTo(0,.67))))},e.prototype.offItem=function(){this.node.children.forEach(function(t){t.stopActionByTag(999),cc.tween(t).to(.3,{color:cc.Color.GRAY}).tag(999).start()})},e.prototype.activeItem=function(){this.node.children.forEach(function(t){t.stopActionByTag(999),cc.tween(t).to(.3,{color:cc.Color.WHITE}).tag(999).start()})},e.prototype.removeNodeScater=function(t){var e=this;void 0===t&&(t=!1),this.nodeScater&&(t?(this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){e.nodeScater.opacity=255,u.Windown.NgoKhong.asset.putSpineScater(e.nodeScater),e.nodeScater=null})))):u.Windown.NgoKhong.asset.putSpineScater(this.nodeScater)),this.nodeNhuY&&(u.Windown.NgoKhong.asset.putSpineGayNhuY(this.nodeNhuY),this.nodeNhuY=null)},e.prototype.addNodeGayNhuY=function(t){var e=this;this.nodeNhuY=u.Windown.NgoKhong.asset.getSpineGayNhuY(),this.nodeNhuY.parent=u.Windown.NgoKhong.parentEffect,this.nodeNhuY.zIndex=101,this.nodeNhuY.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect));var o=this.nodeNhuY.getComponentInChildren(sp.Skeleton);o.setAnimation(0,"spawn",!1),o.addAnimation(0,"win",!1),this.scheduleOnce(function(){t(),u.Windown.NgoKhong.asset.putSpineGayNhuY(e.nodeNhuY),e.nodeNhuY=null},1.3)},e.prototype.addNodeScater=function(){this.nodeScater||(this.nodeScater=u.Windown.NgoKhong.asset.getSpineScater(),this.nodeScater.parent=u.Windown.NgoKhong.parentEffect,this.nodeScater.zIndex=100,this.nodeScater.scale=.67,this.nodeScater.opacity=255,this.nodeScater.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect)),this.nodeScater.getComponent(sp.Skeleton).setAnimation(0,"idle",!0))},e.prototype.addEffectBackGround=function(){var t=this,e=u.Windown.NgoKhong.asset.getBkgAddSymbol();e.parent=u.Windown.NgoKhong.parentEffect,e.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect));var o=e.getComponent(cc.Animation);this.node.on(cc.Node.EventType.POSITION_CHANGED,function(){e.setPosition(u.Windown.convertNodeInOtherNode(t.node,u.Windown.NgoKhong.parentEffect))},e),o.once(cc.Animation.EventType.FINISHED,function(){t.node.targetOff(e),u.Windown.NgoKhong.asset.putBkgAddSymbol(e)},this),o.play("AddSymbol2")},e.prototype.setStateScater=function(t){if(null!=this.nodeScater)if("waitScater"==t)this.nodeScater.getComponent(sp.Skeleton).setAnimation(0,"win_idle",!0),this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.scaleTo(.3,.75));else if("waitScater2"==t)this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.repeat(cc.sequence(cc.scaleTo(.2,.75),cc.scaleTo(.2,.67)),2));else if("idle"==t){var e=this.nodeScater.getComponent(sp.Skeleton);this.nodeScater.stopAllActions(),this.nodeScater.runAction(cc.sequence(cc.scaleTo(.2,.67),cc.callFunc(function(){e.setAnimation(0,"spawn",!1),e.addAnimation(0,"idle",!0)})))}},e.prototype.activeSkeleton=function(){},e.prototype.setPosNodeWild=function(){this.nodeNhuY&&this.nodeNhuY.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect)),this.nodeScater&&this.nodeScater.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect))},e.prototype.takeItem=function(){return c(this,void 0,void 0,function(){var t,e,o,n,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=1.4,(e=u.Windown.NgoKhong.asset.getWinSymbol()).parent=u.Windown.NgoKhong.parentEffect,e.setPosition(u.Windown.convertNodeInOtherNode(this.node,u.Windown.NgoKhong.parentEffect)),o=u.Windown.NgoKhong.asset.listSpItem[this.result],n=e.getComponent(sp.Skeleton),u.Windown.NgoKhong.stateSpin.isMaxSpeed?(e.opacity=255,n.setAnimation(0,"win",!1),n.setCompleteListener(function(){u.Windown.NgoKhong.asset.putWinSymbol(e),n.setCompleteListener(null)}),t=.7):(o?(this.skeletonItem.node.active=!0,this.skeletonItem.skeletonData=o,this.skeletonItem.setAnimation(0,"win",!1)):this.sprite.node.runAction(cc.spawn(cc.scaleTo(.1,.77),cc.sequence(cc.moveTo(.1,0,10),cc.moveTo(.1,0,1)))),10!=this.result?(n.setAnimation(0,"win_idle",!1),e.opacity=255):e.opacity=0,n.scheduleOnce(function(){e.opacity=255,n.setAnimation(0,"win",!1),n.setCompleteListener(function(){u.Windown.NgoKhong.asset.putWinSymbol(e),n.setCompleteListener(null)})},1.4)),this.activeItem(),[4,u.Windown.NgoKhong.getMakeDelay(t).prosime];case 1:return r.sent(),this.removeItem(),[3,3];case 2:return i=r.sent(),l.Util.ThrowErrProsime(i),[3,3];case 3:return[2]}})})},e.prototype.removeItem=function(){var t=this;cc.isValid(this.node,!0)&&this.itemColum&&cc.isValid(this.itemColum.node,!0)&&(this.node.setPosition(u.Windown.convertNodeInOtherNode(this.node,this.itemColum.node)),this.node.parent=this.itemColum.node,this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(function(){u.Windown.NgoKhong.asset.putSymbol(t.node)}))))},e.prototype.unuse=function(){this.skeletonItem.node.active=!1,this.itemColum=null,this.result=-1,this.node.opacity=255,this.sprite.node.scale=.67,this.sprite.node.y=1,this.node.stopAllActions()},e.prototype.checkEndCot=function(){var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),e=this.itemColum.node.convertToNodeSpaceAR(t),o=(this.itemColum.result.length+2+1)*this.node.height/2*-1;if(e.y<=o){this.node.y=this.node.parent.children[0].y+this.node.height,this.node.zIndex=0,this.node.setSiblingIndex(0),this.node.parent.sortAllChildren();var n=this.itemColum.getIdSymbolResult();if(null==n)return void this.itemColum.effStopSpin();this.setResult(n)}},e.prototype.update=function(){this.checkEndCot(),this.setPosNodeWild()},r([d(cc.Sprite)],e.prototype,"sprite",void 0),r([d(cc.Sprite)],e.prototype,"spriteBkg",void 0),r([d(sp.Skeleton)],e.prototype,"skeletonItem",void 0),r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Scritps/DefineTs/StateReelSlot":void 0,"../../../Scritps/Util":void 0,"../../../Scritps/Windown":void 0}],WildMutilSymbol:[function(t,e,o){"use strict";cc._RF.push(e,"0a8f6a7QG5EC4zNZ4AI13KS","WildMutilSymbol");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spWild=null,e.ske=null,e.nodeKhung=null,e.listSpWild=[],e.listSkedataWild=[],e.posCache=null,e.isCanRemove=!1,e.lengthWild=0,e.itemColum=null,e.index=0,e}return i(e,t),e.prototype.init=function(t,e,o,n){this.spWild.spriteFrame=this.listSpWild[t-1],this.ske.skeletonData=this.listSkedataWild[t-1],this.node.height=130*t,this.itemColum=e,this.posCache=o,this.index=n},e.prototype.moveWhenGayNhuY=function(t){this.index<t?this.node.runAction(cc.moveBy(.2,0,65)):this.node.runAction(cc.moveBy(.2,0,-65))},e.prototype.playAniTake=function(){var t=this;c.Windown.NgoKhong.audio.playEffect(c.Windown.NgoKhong.audio.symWildSeparate,.6),this.nodeKhung.active=!0,this.ske.node.active=!0,this.ske.setAnimation(0,"win",!1),this.scheduleOnce(function(){c.Windown.NgoKhong.asset.putSymbolMutilWild(t.node)},.8),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.2)))},e.prototype.effectShow=function(){this.ske.node.active=!0,this.ske.setAnimation(0,"spawn",!1)},e.prototype.isStopColum=function(){this.node.setPosition(this.posCache),this.isCanRemove=!0},e.prototype.unuse=function(){this.node.stopAllActions(),this.node.opacity=255,this.itemColum=null,this.ske.node.active=!1,this.nodeKhung.active=!1,this.isCanRemove=!1},e.prototype.update=function(){if(this.isCanRemove){var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),e=this.itemColum.node.convertToNodeSpaceAR(t),o=(this.itemColum.result.length+2)*this.node.height/2*-1;e.y<=o&&c.Windown.NgoKhong.asset.putSymbolMutilWild(this.node)}},r([l(cc.Sprite)],e.prototype,"spWild",void 0),r([l(sp.Skeleton)],e.prototype,"ske",void 0),r([l(cc.Node)],e.prototype,"nodeKhung",void 0),r([l([cc.SpriteFrame])],e.prototype,"listSpWild",void 0),r([l([sp.SkeletonData])],e.prototype,"listSkedataWild",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}]},{},["AssetNgoKhong","AudioNgoKhong","DetailHistoryNgoKhong","EffectNgoKhong","InfoBarControllerNgoKhong","ItemKhung","ItemLichSuNgoKhong","ItemResultDetail","ItemSlotNgoKhong","LichSuNgoKhong","NgoKhongView","SpinNormalNgoKhong","SymbolNgoKhong","WildMutilSymbol"]);